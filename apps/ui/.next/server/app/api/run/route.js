"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/run/route";
exports.ids = ["app/api/run/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "module":
/*!*************************!*\
  !*** external "module" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("module");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("process");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "readline":
/*!***************************!*\
  !*** external "readline" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("readline");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:child_process":
/*!*************************************!*\
  !*** external "node:child_process" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("node:child_process");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:diagnostics_channel":
/*!*******************************************!*\
  !*** external "node:diagnostics_channel" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("node:diagnostics_channel");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:events");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:fs/promises":
/*!***********************************!*\
  !*** external "node:fs/promises" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:fs/promises");

/***/ }),

/***/ "node:os":
/*!**************************!*\
  !*** external "node:os" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:os");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("node:process");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Frun%2Froute&page=%2Fapi%2Frun%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frun%2Froute.ts&appDir=%2FUsers%2Fbc%2FDesktop%2Fpip-agent-autonomous%2Fapps%2Fui%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbc%2FDesktop%2Fpip-agent-autonomous%2Fapps%2Fui&isDev=true&tsconfigPath=.%2Ftsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Frun%2Froute&page=%2Fapi%2Frun%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frun%2Froute.ts&appDir=%2FUsers%2Fbc%2FDesktop%2Fpip-agent-autonomous%2Fapps%2Fui%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbc%2FDesktop%2Fpip-agent-autonomous%2Fapps%2Fui&isDev=true&tsconfigPath=.%2Ftsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_bc_Desktop_pip_agent_autonomous_apps_ui_app_api_run_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/run/route.ts */ \"(rsc)/./app/api/run/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/run/route\",\n        pathname: \"/api/run\",\n        filename: \"route\",\n        bundlePath: \"app/api/run/route\"\n    },\n    resolvedPagePath: \"/Users/bc/Desktop/pip-agent-autonomous/apps/ui/app/api/run/route.ts\",\n    nextConfigOutput,\n    userland: _Users_bc_Desktop_pip_agent_autonomous_apps_ui_app_api_run_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/run/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZydW4lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnJ1biUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnJ1biUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmJjJTJGRGVza3RvcCUyRnBpcC1hZ2VudC1hdXRvbm9tb3VzJTJGYXBwcyUyRnVpJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmJjJTJGRGVza3RvcCUyRnBpcC1hZ2VudC1hdXRvbm9tb3VzJTJGYXBwcyUyRnVpJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPS4lMkZ0c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDbUI7QUFDaEc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AcGlwL3VpLz81YTVjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9iYy9EZXNrdG9wL3BpcC1hZ2VudC1hdXRvbm9tb3VzL2FwcHMvdWkvYXBwL2FwaS9ydW4vcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3J1bi9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3J1blwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcnVuL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2JjL0Rlc2t0b3AvcGlwLWFnZW50LWF1dG9ub21vdXMvYXBwcy91aS9hcHAvYXBpL3J1bi9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcnVuL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Frun%2Froute&page=%2Fapi%2Frun%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frun%2Froute.ts&appDir=%2FUsers%2Fbc%2FDesktop%2Fpip-agent-autonomous%2Fapps%2Fui%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbc%2FDesktop%2Fpip-agent-autonomous%2Fapps%2Fui&isDev=true&tsconfigPath=.%2Ftsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/run/route.ts":
/*!******************************!*\
  !*** ./app/api/run/route.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   revalidate: () => (/* binding */ revalidate),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var _anthropic_ai_claude_agent_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @anthropic-ai/claude-agent-sdk */ \"(rsc)/../../node_modules/@anthropic-ai/claude-agent-sdk/sdk.mjs\");\n/* harmony import */ var _pip_mcp_geminiTranscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @pip/mcp/geminiTranscriber */ \"(rsc)/../../src/mcp/geminiTranscriber.ts\");\n/* harmony import */ var _pip_mcp_docxExporter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @pip/mcp/docxExporter */ \"(rsc)/../../src/mcp/docxExporter.ts\");\n/* harmony import */ var _pip_mcp_pipGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @pip/mcp/pipGenerator */ \"(rsc)/../../src/mcp/pipGenerator.ts\");\n/* harmony import */ var _pip_agents_policyJudge__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @pip/agents/policyJudge */ \"(rsc)/../../src/agents/policyJudge.ts\");\n/* harmony import */ var _pip_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @pip/config */ \"(rsc)/../../src/config.ts\");\n/* harmony import */ var _pip_types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @pip/types */ \"(rsc)/../../src/types/index.ts\");\n/* harmony import */ var node_fs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! node:fs */ \"node:fs\");\n/* harmony import */ var node_fs__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(node_fs__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_8__);\n\n\n\n\n\n\n\n\n\nconst runtime = \"nodejs\";\nconst dynamic = \"force-dynamic\";\nconst revalidate = 0;\nconst MCP_SERVERS = {\n    \"gemini-transcriber\": _pip_mcp_geminiTranscriber__WEBPACK_IMPORTED_MODULE_1__.geminiTranscriber,\n    \"pip-generator\": _pip_mcp_pipGenerator__WEBPACK_IMPORTED_MODULE_3__.pipGenerator,\n    \"docx-exporter\": _pip_mcp_docxExporter__WEBPACK_IMPORTED_MODULE_2__.docxExporter\n};\nconst ALLOWED_TOOLS = [\n    \"mcp__gemini-transcriber__transcribe_audio\",\n    \"mcp__pip-generator__draft_pip\",\n    \"mcp__docx-exporter__render_docx\"\n];\nfunction buildPipelinePrompt(params) {\n    const { audioPath, inputLanguage, outputLanguage, templatePath, outputPath, promptPath } = params;\n    const transcriptionArgsExample = {\n        audioPath,\n        inputLanguage,\n        outputLanguage,\n        diarize: true,\n        timestamps: true,\n        startChunk: 0\n    };\n    const pipDraftArgs = {\n        transcript: \"<REPLACE_WITH_TRANSCRIPT>\",\n        outputLanguage,\n        promptPath\n    };\n    const docxArgs = {\n        templatePath,\n        outputPath,\n        language: outputLanguage,\n        title: \"Performance Improvement Plan\",\n        body: \"<REPLACE_WITH_APPROVED_DRAFT>\"\n    };\n    return [\n        \"You are an autonomous pipeline operator. Use the available MCP tools to complete the PIP workflow.\",\n        \"TOOLS:\",\n        \"- mcp__gemini-transcriber__transcribe_audio → transcribe audio meeting recordings.\",\n        \"- mcp__pip-generator__draft_pip → create a draft PIP from a transcript.\",\n        \"- mcp__docx-exporter__render_docx → produce the final DOCX file.\",\n        \"STEPS:\",\n        `1. Initialize CURRENT_CHUNK=0 and TRANSCRIPTS=[] (strings). Call transcription with:\\n${JSON.stringify(transcriptionArgsExample, null, 2)}`,\n        \"   Append transcripts, merge segments. Loop until nextChunk is null.\",\n        `2. Call PIP generator with:\\n${JSON.stringify(pipDraftArgs, null, 2)}\\n   Set CURRENT_DRAFT.`,\n        `3. Send CURRENT_DRAFT to subagent \\\"policy-judge\\\" for review. Iterate up to ${_pip_config__WEBPACK_IMPORTED_MODULE_5__.MAX_REVIEW_ROUNDS}.`,\n        `4. When approved, set APPROVED_DRAFT and call docx exporter with:\\n${JSON.stringify(docxArgs, null, 2)}`,\n        `5. Respond ONLY with JSON: {\"status\":\"ok\",\"draft\":APPROVED_DRAFT,\"docx\":\"${outputPath}\"}`\n    ].join(\"\\n\\n\");\n}\nfunction pushUsage(cost, message) {\n    if (!(0,_pip_types__WEBPACK_IMPORTED_MODULE_6__.hasUsage)(message) || !message.usage) return;\n    cost.input += message.usage.input_tokens || 0;\n    cost.output += message.usage.output_tokens || 0;\n    cost.cacheCreate += message.usage.cache_creation_input_tokens || 0;\n    cost.cacheRead += message.usage.cache_read_input_tokens || 0;\n}\nfunction sseLine(event, data) {\n    return `event: ${event}\\ndata: ${JSON.stringify(data)}\\n\\n`;\n}\nfunction toSerializableError(error) {\n    if (error instanceof Error) {\n        return {\n            name: error.name,\n            message: error.message,\n            stack: error.stack\n        };\n    }\n    if (typeof error === \"object\" && error !== null) {\n        try {\n            return JSON.parse(JSON.stringify(error));\n        } catch  {\n            return {\n                message: String(error)\n            };\n        }\n    }\n    return {\n        message: String(error)\n    };\n}\nasync function GET(req) {\n    const search = req.nextUrl.searchParams;\n    const audioParam = search.get(\"audio\") ?? \"uploads/meeting.mp3\";\n    const inputLanguage = search.get(\"in\") ?? \"auto\";\n    const outputLanguage = search.get(\"out\") ?? \"en\";\n    const templateParam = search.get(\"template\") ?? \"templates/pip-template.docx\";\n    const outputParam = search.get(\"outdoc\") ?? `exports/pip-${Date.now()}.docx`;\n    const encoder = new TextEncoder();\n    const projectRoot = node_path__WEBPACK_IMPORTED_MODULE_8___default().resolve(process.cwd(), \"../..\");\n    const guidelinesPath = node_path__WEBPACK_IMPORTED_MODULE_8___default().resolve(projectRoot, _pip_config__WEBPACK_IMPORTED_MODULE_5__.GUIDELINES_PATH);\n    const promptPathDefault = node_path__WEBPACK_IMPORTED_MODULE_8___default().resolve(projectRoot, _pip_config__WEBPACK_IMPORTED_MODULE_5__.PIP_PROMPT_PATH);\n    const stream = new ReadableStream({\n        async start (controller) {\n            const write = (event, data)=>{\n                controller.enqueue(encoder.encode(sseLine(event, data)));\n            };\n            const sendStatus = (step, status, meta)=>{\n                if (meta && Object.keys(meta).length > 0) {\n                    write(\"status\", {\n                        step,\n                        status,\n                        meta\n                    });\n                } else {\n                    write(\"status\", {\n                        step,\n                        status\n                    });\n                }\n            };\n            const closeWithError = (error)=>{\n                write(\"error\", {\n                    message: error instanceof Error ? error.message : \"Unknown error\",\n                    details: toSerializableError(error)\n                });\n                controller.close();\n            };\n            const cost = {\n                input: 0,\n                output: 0,\n                cacheCreate: 0,\n                cacheRead: 0\n            };\n            try {\n                const audioPath = node_path__WEBPACK_IMPORTED_MODULE_8___default().resolve(projectRoot, audioParam);\n                const templatePath = node_path__WEBPACK_IMPORTED_MODULE_8___default().resolve(projectRoot, templateParam);\n                const outputPath = node_path__WEBPACK_IMPORTED_MODULE_8___default().resolve(projectRoot, outputParam);\n                const promptPath = node_path__WEBPACK_IMPORTED_MODULE_8___default().resolve(projectRoot, promptPathDefault);\n                const judgeGuidelines = node_fs__WEBPACK_IMPORTED_MODULE_7___default().readFileSync(guidelinesPath, \"utf-8\");\n                const judgeAgent = (0,_pip_agents_policyJudge__WEBPACK_IMPORTED_MODULE_4__.makePolicyJudgeAgent)(judgeGuidelines, outputLanguage);\n                sendStatus(\"transcribe\", \"running\");\n                const iterator = (0,_anthropic_ai_claude_agent_sdk__WEBPACK_IMPORTED_MODULE_0__.query)({\n                    prompt: buildPipelinePrompt({\n                        audioPath,\n                        inputLanguage,\n                        outputLanguage,\n                        templatePath,\n                        outputPath,\n                        promptPath\n                    }),\n                    options: {\n                        model: _pip_config__WEBPACK_IMPORTED_MODULE_5__.MODELS.CLAUDE_SONNET,\n                        agents: {\n                            \"policy-judge\": judgeAgent\n                        },\n                        mcpServers: MCP_SERVERS,\n                        allowedTools: ALLOWED_TOOLS,\n                        permissionMode: \"bypassPermissions\",\n                        maxTurns: _pip_config__WEBPACK_IMPORTED_MODULE_5__.MAX_TURNS\n                    }\n                });\n                let judgeRound = 0;\n                try {\n                    for await (const message of iterator){\n                        pushUsage(cost, message);\n                        const totalTokens = cost.input + cost.output + cost.cacheCreate + cost.cacheRead;\n                        write(\"cost\", {\n                            summary: {\n                                totalTokens,\n                                estimatedCostUSD: totalTokens / 1000000,\n                                breakdown: {\n                                    ...cost\n                                }\n                            }\n                        });\n                        if ((0,_pip_types__WEBPACK_IMPORTED_MODULE_6__.isSystemMessage)(message) && \"sessionId\" in message) {\n                            const sessionId = message.sessionId;\n                            if (sessionId) {\n                                write(\"log\", {\n                                    level: \"info\",\n                                    message: `Session ${sessionId}`\n                                });\n                            }\n                        }\n                        if ((0,_pip_types__WEBPACK_IMPORTED_MODULE_6__.isStreamEvent)(message)) {\n                            const eventData = message.event;\n                            if ((0,_pip_types__WEBPACK_IMPORTED_MODULE_6__.isToolUseEvent)(eventData)) {\n                                write(\"tool_use\", {\n                                    name: eventData.name,\n                                    input: eventData.input\n                                });\n                                if (eventData.name.includes(\"gemini-transcriber\")) {\n                                    sendStatus(\"transcribe\", \"running\");\n                                } else if (eventData.name.includes(\"pip-generator\")) {\n                                    sendStatus(\"transcribe\", \"success\");\n                                    sendStatus(\"draft\", \"running\");\n                                } else if (eventData.name.includes(\"docx-exporter\")) {\n                                    sendStatus(\"draft\", \"success\");\n                                    sendStatus(\"review\", \"success\");\n                                    sendStatus(\"export\", \"running\");\n                                }\n                                if (eventData.name === \"TodoWrite\" && eventData.input && typeof eventData.input === \"object\") {\n                                    const todos = eventData.input.todos;\n                                    if (Array.isArray(todos)) {\n                                        write(\"todo\", {\n                                            todos\n                                        });\n                                    }\n                                }\n                            }\n                            if ((0,_pip_types__WEBPACK_IMPORTED_MODULE_6__.isToolResultEvent)(eventData)) {\n                                const resultData = {\n                                    name: eventData.name,\n                                    isError: eventData.isError,\n                                    content: eventData.content\n                                };\n                                write(\"tool_result\", resultData);\n                                const payload = resultData.content;\n                                const textPart = Array.isArray(payload) ? payload.find((item)=>typeof item?.text === \"string\")?.text : typeof payload === \"string\" ? payload : null;\n                                if (typeof textPart === \"string\") {\n                                    try {\n                                        const parsed = JSON.parse(textPart);\n                                        if (typeof parsed.transcript === \"string\") {\n                                            write(\"transcript_chunk\", {\n                                                transcript: parsed.transcript.slice(0, 1500),\n                                                processedChunks: parsed.processedChunks ?? 0,\n                                                totalChunks: parsed.totalChunks ?? 0\n                                            });\n                                        }\n                                    } catch  {\n                                    // Ignore non-JSON payloads\n                                    }\n                                }\n                                if (resultData.isError) {\n                                    write(\"error\", {\n                                        message: \"Tool error\",\n                                        details: toSerializableError(resultData.content)\n                                    });\n                                }\n                            }\n                            if (eventData && typeof eventData === \"object\") {\n                                const jsonFields = \"delta\" in eventData ? eventData.delta : undefined;\n                                const maybeText = typeof jsonFields === \"string\" ? jsonFields : typeof eventData.content === \"string\" ? eventData.content : undefined;\n                                const candidate = maybeText && maybeText.trim().startsWith(\"{\") ? maybeText : undefined;\n                                if (candidate) {\n                                    try {\n                                        const verdict = JSON.parse(candidate);\n                                        if (typeof verdict.approved === \"boolean\") {\n                                            judgeRound += 1;\n                                            write(\"judge_round\", {\n                                                approved: verdict.approved,\n                                                reasons: verdict.reasons ?? [],\n                                                required_changes: verdict.required_changes ?? [],\n                                                revised_draft: verdict.revised_draft ?? null,\n                                                round: judgeRound\n                                            });\n                                            sendStatus(\"review\", verdict.approved ? \"success\" : \"running\", {\n                                                round: judgeRound\n                                            });\n                                        }\n                                    } catch  {\n                                    // Ignore JSON parse issues\n                                    }\n                                }\n                            }\n                        }\n                        if (message.type === \"result\") {\n                            if (message.subtype === \"success\") {\n                                const rawResult = message.result;\n                                let payload = rawResult;\n                                if (typeof rawResult === \"string\") {\n                                    // Strip markdown code fences (e.g., ```json ... ```) before parsing\n                                    // This handles cases where the agent wraps JSON in markdown blocks\n                                    const cleaned = rawResult.replace(/```json\\s*|```/g, \"\").trim();\n                                    try {\n                                        payload = JSON.parse(cleaned);\n                                    } catch  {\n                                    // leave as string\n                                    }\n                                }\n                                if (payload && typeof payload === \"object\" && payload.status === \"ok\") {\n                                    const draft = payload.draft ?? \"\";\n                                    const docx = payload.docx ?? outputPath;\n                                    sendStatus(\"export\", \"success\");\n                                    const docxRelative = node_path__WEBPACK_IMPORTED_MODULE_8___default().relative(projectRoot, docx);\n                                    write(\"final\", {\n                                        ok: true,\n                                        draft,\n                                        docx,\n                                        docxRelative\n                                    });\n                                } else {\n                                    write(\"error\", {\n                                        message: \"Pipeline failed\",\n                                        details: payload ?? rawResult\n                                    });\n                                }\n                            } else {\n                                write(\"error\", {\n                                    message: \"Run error\",\n                                    details: toSerializableError(message)\n                                });\n                            }\n                        }\n                    }\n                } catch (workerError) {\n                    // Worker crashed - check if output was created anyway\n                    write(\"log\", {\n                        level: \"warn\",\n                        message: \"Worker process encountered an error, checking for output file...\"\n                    });\n                    if (node_fs__WEBPACK_IMPORTED_MODULE_7___default().existsSync(outputPath)) {\n                        const stats = node_fs__WEBPACK_IMPORTED_MODULE_7___default().statSync(outputPath);\n                        if (stats.size > 1000) {\n                            write(\"log\", {\n                                level: \"info\",\n                                message: \"Output file was created successfully despite worker error\"\n                            });\n                            sendStatus(\"export\", \"success\");\n                            const docxRelative = node_path__WEBPACK_IMPORTED_MODULE_8___default().relative(projectRoot, outputPath);\n                            write(\"final\", {\n                                ok: true,\n                                docx: outputPath,\n                                docxRelative,\n                                recovered: true\n                            });\n                            controller.close();\n                            return;\n                        }\n                    }\n                    // If no output file, report the error\n                    closeWithError(workerError);\n                    return;\n                }\n            } catch (error) {\n                closeWithError(error);\n                return;\n            }\n            controller.close();\n        }\n    });\n    return new Response(stream, {\n        headers: {\n            \"Content-Type\": \"text/event-stream; charset=utf-8\",\n            \"Cache-Control\": \"no-cache, no-transform\",\n            Connection: \"keep-alive\",\n            \"X-Accel-Buffering\": \"no\"\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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IndlYnBhY2s6Ly9AcGlwL3VpLy4vYXBwL2FwaS9ydW4vcm91dGUudHM/MWM2MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgcXVlcnksIHR5cGUgU0RLTWVzc2FnZSB9IGZyb20gXCJAYW50aHJvcGljLWFpL2NsYXVkZS1hZ2VudC1zZGtcIjtcblxuaW1wb3J0IHsgZ2VtaW5pVHJhbnNjcmliZXIgfSBmcm9tIFwiQHBpcC9tY3AvZ2VtaW5pVHJhbnNjcmliZXJcIjtcbmltcG9ydCB7IGRvY3hFeHBvcnRlciB9IGZyb20gXCJAcGlwL21jcC9kb2N4RXhwb3J0ZXJcIjtcbmltcG9ydCB7IHBpcEdlbmVyYXRvciB9IGZyb20gXCJAcGlwL21jcC9waXBHZW5lcmF0b3JcIjtcbmltcG9ydCB7IG1ha2VQb2xpY3lKdWRnZUFnZW50IH0gZnJvbSBcIkBwaXAvYWdlbnRzL3BvbGljeUp1ZGdlXCI7XG5pbXBvcnQge1xuICBNT0RFTFMsXG4gIE1BWF9UVVJOUyxcbiAgTUFYX1JFVklFV19ST1VORFMsXG4gIEdVSURFTElORVNfUEFUSCxcbiAgUElQX1BST01QVF9QQVRIXG59IGZyb20gXCJAcGlwL2NvbmZpZ1wiO1xuaW1wb3J0IHtcbiAgaGFzVXNhZ2UsXG4gIGlzU3RyZWFtRXZlbnQsXG4gIGlzU3lzdGVtTWVzc2FnZSxcbiAgaXNUb29sVXNlRXZlbnQsXG4gIGlzVG9vbFJlc3VsdEV2ZW50XG59IGZyb20gXCJAcGlwL3R5cGVzXCI7XG5pbXBvcnQgZnMgZnJvbSBcIm5vZGU6ZnNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJub2RlOnBhdGhcIjtcblxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSBcIm5vZGVqc1wiO1xuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSBcImZvcmNlLWR5bmFtaWNcIjtcbmV4cG9ydCBjb25zdCByZXZhbGlkYXRlID0gMDtcblxuY29uc3QgTUNQX1NFUlZFUlMgPSB7XG4gIFwiZ2VtaW5pLXRyYW5zY3JpYmVyXCI6IGdlbWluaVRyYW5zY3JpYmVyLFxuICBcInBpcC1nZW5lcmF0b3JcIjogcGlwR2VuZXJhdG9yLFxuICBcImRvY3gtZXhwb3J0ZXJcIjogZG9jeEV4cG9ydGVyXG59IGFzIGNvbnN0O1xuXG5jb25zdCBBTExPV0VEX1RPT0xTID0gW1xuICBcIm1jcF9fZ2VtaW5pLXRyYW5zY3JpYmVyX190cmFuc2NyaWJlX2F1ZGlvXCIsXG4gIFwibWNwX19waXAtZ2VuZXJhdG9yX19kcmFmdF9waXBcIixcbiAgXCJtY3BfX2RvY3gtZXhwb3J0ZXJfX3JlbmRlcl9kb2N4XCJcbl07XG5cbnR5cGUgU3RlcCA9IFwidHJhbnNjcmliZVwiIHwgXCJkcmFmdFwiIHwgXCJyZXZpZXdcIiB8IFwiZXhwb3J0XCI7XG5cbnR5cGUgQ29zdEFjY3VtdWxhdG9yID0ge1xuICBpbnB1dDogbnVtYmVyO1xuICBvdXRwdXQ6IG51bWJlcjtcbiAgY2FjaGVDcmVhdGU6IG51bWJlcjtcbiAgY2FjaGVSZWFkOiBudW1iZXI7XG59O1xuXG50eXBlIFNlcmlhbGl6YWJsZSA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgQXJyYXk8dW5rbm93bj4gfCBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuIHwgbnVsbDtcblxuZnVuY3Rpb24gYnVpbGRQaXBlbGluZVByb21wdChwYXJhbXM6IHtcbiAgYXVkaW9QYXRoOiBzdHJpbmc7XG4gIGlucHV0TGFuZ3VhZ2U6IHN0cmluZztcbiAgb3V0cHV0TGFuZ3VhZ2U6IHN0cmluZztcbiAgdGVtcGxhdGVQYXRoOiBzdHJpbmc7XG4gIG91dHB1dFBhdGg6IHN0cmluZztcbiAgcHJvbXB0UGF0aDogc3RyaW5nO1xufSkge1xuICBjb25zdCB7IGF1ZGlvUGF0aCwgaW5wdXRMYW5ndWFnZSwgb3V0cHV0TGFuZ3VhZ2UsIHRlbXBsYXRlUGF0aCwgb3V0cHV0UGF0aCwgcHJvbXB0UGF0aCB9ID0gcGFyYW1zO1xuXG4gIGNvbnN0IHRyYW5zY3JpcHRpb25BcmdzRXhhbXBsZSA9IHtcbiAgICBhdWRpb1BhdGgsXG4gICAgaW5wdXRMYW5ndWFnZSxcbiAgICBvdXRwdXRMYW5ndWFnZSxcbiAgICBkaWFyaXplOiB0cnVlLFxuICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gICAgc3RhcnRDaHVuazogMFxuICB9O1xuXG4gIGNvbnN0IHBpcERyYWZ0QXJncyA9IHtcbiAgICB0cmFuc2NyaXB0OiBcIjxSRVBMQUNFX1dJVEhfVFJBTlNDUklQVD5cIixcbiAgICBvdXRwdXRMYW5ndWFnZSxcbiAgICBwcm9tcHRQYXRoXG4gIH07XG5cbiAgY29uc3QgZG9jeEFyZ3MgPSB7XG4gICAgdGVtcGxhdGVQYXRoLFxuICAgIG91dHB1dFBhdGgsXG4gICAgbGFuZ3VhZ2U6IG91dHB1dExhbmd1YWdlLFxuICAgIHRpdGxlOiBcIlBlcmZvcm1hbmNlIEltcHJvdmVtZW50IFBsYW5cIixcbiAgICBib2R5OiBcIjxSRVBMQUNFX1dJVEhfQVBQUk9WRURfRFJBRlQ+XCJcbiAgfTtcblxuICByZXR1cm4gW1xuICAgIFwiWW91IGFyZSBhbiBhdXRvbm9tb3VzIHBpcGVsaW5lIG9wZXJhdG9yLiBVc2UgdGhlIGF2YWlsYWJsZSBNQ1AgdG9vbHMgdG8gY29tcGxldGUgdGhlIFBJUCB3b3JrZmxvdy5cIixcbiAgICBcIlRPT0xTOlwiLFxuICAgIFwiLSBtY3BfX2dlbWluaS10cmFuc2NyaWJlcl9fdHJhbnNjcmliZV9hdWRpbyDihpIgdHJhbnNjcmliZSBhdWRpbyBtZWV0aW5nIHJlY29yZGluZ3MuXCIsXG4gICAgXCItIG1jcF9fcGlwLWdlbmVyYXRvcl9fZHJhZnRfcGlwIOKGkiBjcmVhdGUgYSBkcmFmdCBQSVAgZnJvbSBhIHRyYW5zY3JpcHQuXCIsXG4gICAgXCItIG1jcF9fZG9jeC1leHBvcnRlcl9fcmVuZGVyX2RvY3gg4oaSIHByb2R1Y2UgdGhlIGZpbmFsIERPQ1ggZmlsZS5cIixcbiAgICBcIlNURVBTOlwiLFxuICAgIGAxLiBJbml0aWFsaXplIENVUlJFTlRfQ0hVTks9MCBhbmQgVFJBTlNDUklQVFM9W10gKHN0cmluZ3MpLiBDYWxsIHRyYW5zY3JpcHRpb24gd2l0aDpcXG4ke0pTT04uc3RyaW5naWZ5KHRyYW5zY3JpcHRpb25BcmdzRXhhbXBsZSwgbnVsbCwgMil9YCxcbiAgICBcIiAgIEFwcGVuZCB0cmFuc2NyaXB0cywgbWVyZ2Ugc2VnbWVudHMuIExvb3AgdW50aWwgbmV4dENodW5rIGlzIG51bGwuXCIsXG4gICAgYDIuIENhbGwgUElQIGdlbmVyYXRvciB3aXRoOlxcbiR7SlNPTi5zdHJpbmdpZnkocGlwRHJhZnRBcmdzLCBudWxsLCAyKX1cXG4gICBTZXQgQ1VSUkVOVF9EUkFGVC5gLFxuICAgIGAzLiBTZW5kIENVUlJFTlRfRFJBRlQgdG8gc3ViYWdlbnQgXFxcInBvbGljeS1qdWRnZVxcXCIgZm9yIHJldmlldy4gSXRlcmF0ZSB1cCB0byAke01BWF9SRVZJRVdfUk9VTkRTfS5gLFxuICAgIGA0LiBXaGVuIGFwcHJvdmVkLCBzZXQgQVBQUk9WRURfRFJBRlQgYW5kIGNhbGwgZG9jeCBleHBvcnRlciB3aXRoOlxcbiR7SlNPTi5zdHJpbmdpZnkoZG9jeEFyZ3MsIG51bGwsIDIpfWAsXG4gICAgYDUuIFJlc3BvbmQgT05MWSB3aXRoIEpTT046IHtcInN0YXR1c1wiOlwib2tcIixcImRyYWZ0XCI6QVBQUk9WRURfRFJBRlQsXCJkb2N4XCI6XCIke291dHB1dFBhdGh9XCJ9YFxuICBdLmpvaW4oXCJcXG5cXG5cIik7XG59XG5cbmZ1bmN0aW9uIHB1c2hVc2FnZShjb3N0OiBDb3N0QWNjdW11bGF0b3IsIG1lc3NhZ2U6IFNES01lc3NhZ2UpIHtcbiAgaWYgKCFoYXNVc2FnZShtZXNzYWdlKSB8fCAhbWVzc2FnZS51c2FnZSkgcmV0dXJuO1xuICBjb3N0LmlucHV0ICs9IG1lc3NhZ2UudXNhZ2UuaW5wdXRfdG9rZW5zIHx8IDA7XG4gIGNvc3Qub3V0cHV0ICs9IG1lc3NhZ2UudXNhZ2Uub3V0cHV0X3Rva2VucyB8fCAwO1xuICBjb3N0LmNhY2hlQ3JlYXRlICs9IG1lc3NhZ2UudXNhZ2UuY2FjaGVfY3JlYXRpb25faW5wdXRfdG9rZW5zIHx8IDA7XG4gIGNvc3QuY2FjaGVSZWFkICs9IG1lc3NhZ2UudXNhZ2UuY2FjaGVfcmVhZF9pbnB1dF90b2tlbnMgfHwgMDtcbn1cblxuZnVuY3Rpb24gc3NlTGluZShldmVudDogc3RyaW5nLCBkYXRhOiB1bmtub3duKSB7XG4gIHJldHVybiBgZXZlbnQ6ICR7ZXZlbnR9XFxuZGF0YTogJHtKU09OLnN0cmluZ2lmeShkYXRhKX1cXG5cXG5gO1xufVxuXG5mdW5jdGlvbiB0b1NlcmlhbGl6YWJsZUVycm9yKGVycm9yOiB1bmtub3duKTogU2VyaWFsaXphYmxlIHtcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogZXJyb3IubmFtZSxcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICBzdGFjazogZXJyb3Iuc3RhY2tcbiAgICB9O1xuICB9XG4gIGlmICh0eXBlb2YgZXJyb3IgPT09IFwib2JqZWN0XCIgJiYgZXJyb3IgIT09IG51bGwpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXJyb3IpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFN0cmluZyhlcnJvcikgfTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHsgbWVzc2FnZTogU3RyaW5nKGVycm9yKSB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3Qgc2VhcmNoID0gcmVxLm5leHRVcmwuc2VhcmNoUGFyYW1zO1xuICBjb25zdCBhdWRpb1BhcmFtID0gc2VhcmNoLmdldChcImF1ZGlvXCIpID8/IFwidXBsb2Fkcy9tZWV0aW5nLm1wM1wiO1xuICBjb25zdCBpbnB1dExhbmd1YWdlID0gc2VhcmNoLmdldChcImluXCIpID8/IFwiYXV0b1wiO1xuICBjb25zdCBvdXRwdXRMYW5ndWFnZSA9IHNlYXJjaC5nZXQoXCJvdXRcIikgPz8gXCJlblwiO1xuICBjb25zdCB0ZW1wbGF0ZVBhcmFtID0gc2VhcmNoLmdldChcInRlbXBsYXRlXCIpID8/IFwidGVtcGxhdGVzL3BpcC10ZW1wbGF0ZS5kb2N4XCI7XG4gIGNvbnN0IG91dHB1dFBhcmFtID0gc2VhcmNoLmdldChcIm91dGRvY1wiKSA/PyBgZXhwb3J0cy9waXAtJHtEYXRlLm5vdygpfS5kb2N4YDtcblxuICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gIGNvbnN0IHByb2plY3RSb290ID0gcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksIFwiLi4vLi5cIik7XG4gIGNvbnN0IGd1aWRlbGluZXNQYXRoID0gcGF0aC5yZXNvbHZlKHByb2plY3RSb290LCBHVUlERUxJTkVTX1BBVEgpO1xuICBjb25zdCBwcm9tcHRQYXRoRGVmYXVsdCA9IHBhdGgucmVzb2x2ZShwcm9qZWN0Um9vdCwgUElQX1BST01QVF9QQVRIKTtcblxuICBjb25zdCBzdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW08VWludDhBcnJheT4oe1xuICAgIGFzeW5jIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgIGNvbnN0IHdyaXRlID0gKGV2ZW50OiBzdHJpbmcsIGRhdGE6IHVua25vd24pID0+IHtcbiAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGVuY29kZXIuZW5jb2RlKHNzZUxpbmUoZXZlbnQsIGRhdGEpKSk7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBzZW5kU3RhdHVzID0gKFxuICAgICAgICBzdGVwOiBTdGVwLFxuICAgICAgICBzdGF0dXM6IFwicGVuZGluZ1wiIHwgXCJydW5uaW5nXCIgfCBcInN1Y2Nlc3NcIiB8IFwiZXJyb3JcIixcbiAgICAgICAgbWV0YT86IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4gICAgICApID0+IHtcbiAgICAgICAgaWYgKG1ldGEgJiYgT2JqZWN0LmtleXMobWV0YSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHdyaXRlKFwic3RhdHVzXCIsIHsgc3RlcCwgc3RhdHVzLCBtZXRhIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdyaXRlKFwic3RhdHVzXCIsIHsgc3RlcCwgc3RhdHVzIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjbG9zZVdpdGhFcnJvciA9IChlcnJvcjogdW5rbm93bikgPT4ge1xuICAgICAgICB3cml0ZShcImVycm9yXCIsIHtcbiAgICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuICAgICAgICAgIGRldGFpbHM6IHRvU2VyaWFsaXphYmxlRXJyb3IoZXJyb3IpXG4gICAgICAgIH0pO1xuICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjb3N0OiBDb3N0QWNjdW11bGF0b3IgPSB7XG4gICAgICAgIGlucHV0OiAwLFxuICAgICAgICBvdXRwdXQ6IDAsXG4gICAgICAgIGNhY2hlQ3JlYXRlOiAwLFxuICAgICAgICBjYWNoZVJlYWQ6IDBcbiAgICAgIH07XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGF1ZGlvUGF0aCA9IHBhdGgucmVzb2x2ZShwcm9qZWN0Um9vdCwgYXVkaW9QYXJhbSk7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlUGF0aCA9IHBhdGgucmVzb2x2ZShwcm9qZWN0Um9vdCwgdGVtcGxhdGVQYXJhbSk7XG4gICAgICAgIGNvbnN0IG91dHB1dFBhdGggPSBwYXRoLnJlc29sdmUocHJvamVjdFJvb3QsIG91dHB1dFBhcmFtKTtcbiAgICAgICAgY29uc3QgcHJvbXB0UGF0aCA9IHBhdGgucmVzb2x2ZShwcm9qZWN0Um9vdCwgcHJvbXB0UGF0aERlZmF1bHQpO1xuXG4gICAgICAgIGNvbnN0IGp1ZGdlR3VpZGVsaW5lcyA9IGZzLnJlYWRGaWxlU3luYyhndWlkZWxpbmVzUGF0aCwgXCJ1dGYtOFwiKTtcbiAgICAgICAgY29uc3QganVkZ2VBZ2VudCA9IG1ha2VQb2xpY3lKdWRnZUFnZW50KGp1ZGdlR3VpZGVsaW5lcywgb3V0cHV0TGFuZ3VhZ2UpO1xuXG4gICAgICAgIHNlbmRTdGF0dXMoXCJ0cmFuc2NyaWJlXCIsIFwicnVubmluZ1wiKTtcblxuICAgICAgICBjb25zdCBpdGVyYXRvciA9IHF1ZXJ5KHtcbiAgICAgICAgICBwcm9tcHQ6IGJ1aWxkUGlwZWxpbmVQcm9tcHQoe1xuICAgICAgICAgICAgYXVkaW9QYXRoLFxuICAgICAgICAgICAgaW5wdXRMYW5ndWFnZSxcbiAgICAgICAgICAgIG91dHB1dExhbmd1YWdlLFxuICAgICAgICAgICAgdGVtcGxhdGVQYXRoLFxuICAgICAgICAgICAgb3V0cHV0UGF0aCxcbiAgICAgICAgICAgIHByb21wdFBhdGhcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBtb2RlbDogTU9ERUxTLkNMQVVERV9TT05ORVQsXG4gICAgICAgICAgICBhZ2VudHM6IHsgXCJwb2xpY3ktanVkZ2VcIjoganVkZ2VBZ2VudCB9LFxuICAgICAgICAgICAgbWNwU2VydmVyczogTUNQX1NFUlZFUlMsXG4gICAgICAgICAgICBhbGxvd2VkVG9vbHM6IEFMTE9XRURfVE9PTFMsXG4gICAgICAgICAgICBwZXJtaXNzaW9uTW9kZTogXCJieXBhc3NQZXJtaXNzaW9uc1wiLFxuICAgICAgICAgICAgbWF4VHVybnM6IE1BWF9UVVJOU1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGp1ZGdlUm91bmQgPSAwO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBtZXNzYWdlIG9mIGl0ZXJhdG9yKSB7XG4gICAgICAgICAgcHVzaFVzYWdlKGNvc3QsIG1lc3NhZ2UpO1xuXG4gICAgICAgICAgY29uc3QgdG90YWxUb2tlbnMgPSBjb3N0LmlucHV0ICsgY29zdC5vdXRwdXQgKyBjb3N0LmNhY2hlQ3JlYXRlICsgY29zdC5jYWNoZVJlYWQ7XG4gICAgICAgICAgd3JpdGUoXCJjb3N0XCIsIHtcbiAgICAgICAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgICAgICAgdG90YWxUb2tlbnMsXG4gICAgICAgICAgICAgIGVzdGltYXRlZENvc3RVU0Q6IHRvdGFsVG9rZW5zIC8gMV8wMDBfMDAwLFxuICAgICAgICAgICAgICBicmVha2Rvd246IHsgLi4uY29zdCB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoaXNTeXN0ZW1NZXNzYWdlKG1lc3NhZ2UpICYmIFwic2Vzc2lvbklkXCIgaW4gbWVzc2FnZSkge1xuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbklkID0gKG1lc3NhZ2UgYXMgU0RLTWVzc2FnZSAmIHsgc2Vzc2lvbklkPzogc3RyaW5nIH0pLnNlc3Npb25JZDtcbiAgICAgICAgICAgIGlmIChzZXNzaW9uSWQpIHtcbiAgICAgICAgICAgICAgd3JpdGUoXCJsb2dcIiwgeyBsZXZlbDogXCJpbmZvXCIsIG1lc3NhZ2U6IGBTZXNzaW9uICR7c2Vzc2lvbklkfWAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGlzU3RyZWFtRXZlbnQobWVzc2FnZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50RGF0YSA9IChtZXNzYWdlIGFzIFNES01lc3NhZ2UgJiB7IGV2ZW50OiB1bmtub3duIH0pLmV2ZW50IGFzIHVua25vd247XG5cbiAgICAgICAgICAgIGlmIChpc1Rvb2xVc2VFdmVudChldmVudERhdGEpKSB7XG4gICAgICAgICAgICAgIHdyaXRlKFwidG9vbF91c2VcIiwgeyBuYW1lOiBldmVudERhdGEubmFtZSwgaW5wdXQ6IGV2ZW50RGF0YS5pbnB1dCB9KTtcblxuICAgICAgICAgICAgICBpZiAoZXZlbnREYXRhLm5hbWUuaW5jbHVkZXMoXCJnZW1pbmktdHJhbnNjcmliZXJcIikpIHtcbiAgICAgICAgICAgICAgICBzZW5kU3RhdHVzKFwidHJhbnNjcmliZVwiLCBcInJ1bm5pbmdcIik7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnREYXRhLm5hbWUuaW5jbHVkZXMoXCJwaXAtZ2VuZXJhdG9yXCIpKSB7XG4gICAgICAgICAgICAgICAgc2VuZFN0YXR1cyhcInRyYW5zY3JpYmVcIiwgXCJzdWNjZXNzXCIpO1xuICAgICAgICAgICAgICAgIHNlbmRTdGF0dXMoXCJkcmFmdFwiLCBcInJ1bm5pbmdcIik7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnREYXRhLm5hbWUuaW5jbHVkZXMoXCJkb2N4LWV4cG9ydGVyXCIpKSB7XG4gICAgICAgICAgICAgICAgc2VuZFN0YXR1cyhcImRyYWZ0XCIsIFwic3VjY2Vzc1wiKTtcbiAgICAgICAgICAgICAgICBzZW5kU3RhdHVzKFwicmV2aWV3XCIsIFwic3VjY2Vzc1wiKTtcbiAgICAgICAgICAgICAgICBzZW5kU3RhdHVzKFwiZXhwb3J0XCIsIFwicnVubmluZ1wiKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChldmVudERhdGEubmFtZSA9PT0gXCJUb2RvV3JpdGVcIiAmJiBldmVudERhdGEuaW5wdXQgJiYgdHlwZW9mIGV2ZW50RGF0YS5pbnB1dCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvZG9zID0gKGV2ZW50RGF0YS5pbnB1dCBhcyB7IHRvZG9zPzogdW5rbm93biB9KS50b2RvcztcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0b2RvcykpIHtcbiAgICAgICAgICAgICAgICAgIHdyaXRlKFwidG9kb1wiLCB7IHRvZG9zIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNUb29sUmVzdWx0RXZlbnQoZXZlbnREYXRhKSkge1xuICAgICAgICAgICAgICBjb25zdCByZXN1bHREYXRhID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IChldmVudERhdGEgYXMgeyBuYW1lPzogc3RyaW5nIH0pLm5hbWUsXG4gICAgICAgICAgICAgICAgaXNFcnJvcjogKGV2ZW50RGF0YSBhcyB7IGlzRXJyb3I/OiBib29sZWFuIH0pLmlzRXJyb3IsXG4gICAgICAgICAgICAgICAgY29udGVudDogKGV2ZW50RGF0YSBhcyB7IGNvbnRlbnQ/OiB1bmtub3duIH0pLmNvbnRlbnRcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgd3JpdGUoXCJ0b29sX3Jlc3VsdFwiLCByZXN1bHREYXRhKTtcblxuICAgICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gcmVzdWx0RGF0YS5jb250ZW50O1xuICAgICAgICAgICAgICBjb25zdCB0ZXh0UGFydCA9IEFycmF5LmlzQXJyYXkocGF5bG9hZClcbiAgICAgICAgICAgICAgICA/IHBheWxvYWQuZmluZCgoaXRlbSkgPT4gdHlwZW9mIGl0ZW0/LnRleHQgPT09IFwic3RyaW5nXCIpPy50ZXh0XG4gICAgICAgICAgICAgICAgOiB0eXBlb2YgcGF5bG9hZCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgPyBwYXlsb2FkXG4gICAgICAgICAgICAgICAgICA6IG51bGw7XG5cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXh0UGFydCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHRleHRQYXJ0KSBhcyB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zY3JpcHQ/OiBzdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZENodW5rcz86IG51bWJlcjtcbiAgICAgICAgICAgICAgICAgICAgdG90YWxDaHVua3M/OiBudW1iZXI7XG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJzZWQudHJhbnNjcmlwdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICB3cml0ZShcInRyYW5zY3JpcHRfY2h1bmtcIiwge1xuICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY3JpcHQ6IHBhcnNlZC50cmFuc2NyaXB0LnNsaWNlKDAsIDE1MDApLFxuICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZENodW5rczogcGFyc2VkLnByb2Nlc3NlZENodW5rcyA/PyAwLFxuICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQ2h1bmtzOiBwYXJzZWQudG90YWxDaHVua3MgPz8gMFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBub24tSlNPTiBwYXlsb2Fkc1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChyZXN1bHREYXRhLmlzRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB3cml0ZShcImVycm9yXCIsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVG9vbCBlcnJvclwiLFxuICAgICAgICAgICAgICAgICAgZGV0YWlsczogdG9TZXJpYWxpemFibGVFcnJvcihyZXN1bHREYXRhLmNvbnRlbnQpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGV2ZW50RGF0YSAmJiB0eXBlb2YgZXZlbnREYXRhID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGpzb25GaWVsZHMgPSBcImRlbHRhXCIgaW4gZXZlbnREYXRhID8gKGV2ZW50RGF0YSBhcyB7IGRlbHRhPzogdW5rbm93biB9KS5kZWx0YSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgY29uc3QgbWF5YmVUZXh0ID0gdHlwZW9mIGpzb25GaWVsZHMgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICA/IGpzb25GaWVsZHNcbiAgICAgICAgICAgICAgICA6IHR5cGVvZiAoZXZlbnREYXRhIGFzIHsgY29udGVudD86IHVua25vd24gfSkuY29udGVudCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgPyAoKGV2ZW50RGF0YSBhcyB7IGNvbnRlbnQ/OiB1bmtub3duIH0pLmNvbnRlbnQgYXMgc3RyaW5nKVxuICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgY29uc3QgY2FuZGlkYXRlID0gbWF5YmVUZXh0ICYmIG1heWJlVGV4dC50cmltKCkuc3RhcnRzV2l0aChcIntcIikgPyBtYXliZVRleHQgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCB2ZXJkaWN0ID0gSlNPTi5wYXJzZShjYW5kaWRhdGUpIGFzIHtcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92ZWQ/OiBib29sZWFuO1xuICAgICAgICAgICAgICAgICAgICByZWFzb25zPzogc3RyaW5nW107XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkX2NoYW5nZXM/OiBzdHJpbmdbXTtcbiAgICAgICAgICAgICAgICAgICAgcmV2aXNlZF9kcmFmdD86IHN0cmluZyB8IG51bGw7XG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2ZXJkaWN0LmFwcHJvdmVkID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICAgICAgICAgICAgICBqdWRnZVJvdW5kICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIHdyaXRlKFwianVkZ2Vfcm91bmRcIiwge1xuICAgICAgICAgICAgICAgICAgICAgIGFwcHJvdmVkOiB2ZXJkaWN0LmFwcHJvdmVkLFxuICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbnM6IHZlcmRpY3QucmVhc29ucyA/PyBbXSxcbiAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZF9jaGFuZ2VzOiB2ZXJkaWN0LnJlcXVpcmVkX2NoYW5nZXMgPz8gW10sXG4gICAgICAgICAgICAgICAgICAgICAgcmV2aXNlZF9kcmFmdDogdmVyZGljdC5yZXZpc2VkX2RyYWZ0ID8/IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgcm91bmQ6IGp1ZGdlUm91bmRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNlbmRTdGF0dXMoXCJyZXZpZXdcIiwgdmVyZGljdC5hcHByb3ZlZCA/IFwic3VjY2Vzc1wiIDogXCJydW5uaW5nXCIsIHsgcm91bmQ6IGp1ZGdlUm91bmQgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgSlNPTiBwYXJzZSBpc3N1ZXNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSBcInJlc3VsdFwiKSB7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdWJ0eXBlID09PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgICAgICBjb25zdCByYXdSZXN1bHQgPSBtZXNzYWdlLnJlc3VsdDtcbiAgICAgICAgICAgICAgbGV0IHBheWxvYWQ6IHVua25vd24gPSByYXdSZXN1bHQ7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgcmF3UmVzdWx0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgLy8gU3RyaXAgbWFya2Rvd24gY29kZSBmZW5jZXMgKGUuZy4sIGBgYGpzb24gLi4uIGBgYCkgYmVmb3JlIHBhcnNpbmdcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGhhbmRsZXMgY2FzZXMgd2hlcmUgdGhlIGFnZW50IHdyYXBzIEpTT04gaW4gbWFya2Rvd24gYmxvY2tzXG4gICAgICAgICAgICAgICAgY29uc3QgY2xlYW5lZCA9IHJhd1Jlc3VsdC5yZXBsYWNlKC9gYGBqc29uXFxzKnxgYGAvZywgXCJcIikudHJpbSgpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICBwYXlsb2FkID0gSlNPTi5wYXJzZShjbGVhbmVkKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgIC8vIGxlYXZlIGFzIHN0cmluZ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChwYXlsb2FkICYmIHR5cGVvZiBwYXlsb2FkID09PSBcIm9iamVjdFwiICYmIChwYXlsb2FkIGFzIHsgc3RhdHVzPzogc3RyaW5nIH0pLnN0YXR1cyA9PT0gXCJva1wiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZHJhZnQgPSAocGF5bG9hZCBhcyB7IGRyYWZ0Pzogc3RyaW5nIH0pLmRyYWZ0ID8/IFwiXCI7XG4gICAgICAgICAgICAgICAgY29uc3QgZG9jeCA9IChwYXlsb2FkIGFzIHsgZG9jeD86IHN0cmluZyB9KS5kb2N4ID8/IG91dHB1dFBhdGg7XG4gICAgICAgICAgICAgICAgc2VuZFN0YXR1cyhcImV4cG9ydFwiLCBcInN1Y2Nlc3NcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgZG9jeFJlbGF0aXZlID0gcGF0aC5yZWxhdGl2ZShwcm9qZWN0Um9vdCwgZG9jeCk7XG4gICAgICAgICAgICAgICAgd3JpdGUoXCJmaW5hbFwiLCB7IG9rOiB0cnVlLCBkcmFmdCwgZG9jeCwgZG9jeFJlbGF0aXZlIH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdyaXRlKFwiZXJyb3JcIiwgeyBtZXNzYWdlOiBcIlBpcGVsaW5lIGZhaWxlZFwiLCBkZXRhaWxzOiBwYXlsb2FkID8/IHJhd1Jlc3VsdCB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgd3JpdGUoXCJlcnJvclwiLCB7IG1lc3NhZ2U6IFwiUnVuIGVycm9yXCIsIGRldGFpbHM6IHRvU2VyaWFsaXphYmxlRXJyb3IobWVzc2FnZSkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKHdvcmtlckVycm9yKSB7XG4gICAgICAgICAgLy8gV29ya2VyIGNyYXNoZWQgLSBjaGVjayBpZiBvdXRwdXQgd2FzIGNyZWF0ZWQgYW55d2F5XG4gICAgICAgICAgd3JpdGUoXCJsb2dcIiwgeyBsZXZlbDogXCJ3YXJuXCIsIG1lc3NhZ2U6IFwiV29ya2VyIHByb2Nlc3MgZW5jb3VudGVyZWQgYW4gZXJyb3IsIGNoZWNraW5nIGZvciBvdXRwdXQgZmlsZS4uLlwiIH0pO1xuXG4gICAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMob3V0cHV0UGF0aCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRzID0gZnMuc3RhdFN5bmMob3V0cHV0UGF0aCk7XG4gICAgICAgICAgICBpZiAoc3RhdHMuc2l6ZSA+IDEwMDApIHsgLy8gRmlsZSBleGlzdHMgYW5kIGhhcyBjb250ZW50XG4gICAgICAgICAgICAgIHdyaXRlKFwibG9nXCIsIHsgbGV2ZWw6IFwiaW5mb1wiLCBtZXNzYWdlOiBcIk91dHB1dCBmaWxlIHdhcyBjcmVhdGVkIHN1Y2Nlc3NmdWxseSBkZXNwaXRlIHdvcmtlciBlcnJvclwiIH0pO1xuICAgICAgICAgICAgICBzZW5kU3RhdHVzKFwiZXhwb3J0XCIsIFwic3VjY2Vzc1wiKTtcbiAgICAgICAgICAgICAgY29uc3QgZG9jeFJlbGF0aXZlID0gcGF0aC5yZWxhdGl2ZShwcm9qZWN0Um9vdCwgb3V0cHV0UGF0aCk7XG4gICAgICAgICAgICAgIHdyaXRlKFwiZmluYWxcIiwgeyBvazogdHJ1ZSwgZG9jeDogb3V0cHV0UGF0aCwgZG9jeFJlbGF0aXZlLCByZWNvdmVyZWQ6IHRydWUgfSk7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIElmIG5vIG91dHB1dCBmaWxlLCByZXBvcnQgdGhlIGVycm9yXG4gICAgICAgICAgY2xvc2VXaXRoRXJyb3Iod29ya2VyRXJyb3IpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY2xvc2VXaXRoRXJyb3IoZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBuZXcgUmVzcG9uc2Uoc3RyZWFtLCB7XG4gICAgaGVhZGVyczoge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJ0ZXh0L2V2ZW50LXN0cmVhbTsgY2hhcnNldD11dGYtOFwiLFxuICAgICAgXCJDYWNoZS1Db250cm9sXCI6IFwibm8tY2FjaGUsIG5vLXRyYW5zZm9ybVwiLFxuICAgICAgQ29ubmVjdGlvbjogXCJrZWVwLWFsaXZlXCIsXG4gICAgICBcIlgtQWNjZWwtQnVmZmVyaW5nXCI6IFwibm9cIlxuICAgIH1cbiAgfSk7XG59XG4iXSwibmFtZXMiOlsicXVlcnkiLCJnZW1pbmlUcmFuc2NyaWJlciIsImRvY3hFeHBvcnRlciIsInBpcEdlbmVyYXRvciIsIm1ha2VQb2xpY3lKdWRnZUFnZW50IiwiTU9ERUxTIiwiTUFYX1RVUk5TIiwiTUFYX1JFVklFV19ST1VORFMiLCJHVUlERUxJTkVTX1BBVEgiLCJQSVBfUFJPTVBUX1BBVEgiLCJoYXNVc2FnZSIsImlzU3RyZWFtRXZlbnQiLCJpc1N5c3RlbU1lc3NhZ2UiLCJpc1Rvb2xVc2VFdmVudCIsImlzVG9vbFJlc3VsdEV2ZW50IiwiZnMiLCJwYXRoIiwicnVudGltZSIsImR5bmFtaWMiLCJyZXZhbGlkYXRlIiwiTUNQX1NFUlZFUlMiLCJBTExPV0VEX1RPT0xTIiwiYnVpbGRQaXBlbGluZVByb21wdCIsInBhcmFtcyIsImF1ZGlvUGF0aCIsImlucHV0TGFuZ3VhZ2UiLCJvdXRwdXRMYW5ndWFnZSIsInRlbXBsYXRlUGF0aCIsIm91dHB1dFBhdGgiLCJwcm9tcHRQYXRoIiwidHJhbnNjcmlwdGlvbkFyZ3NFeGFtcGxlIiwiZGlhcml6ZSIsInRpbWVzdGFtcHMiLCJzdGFydENodW5rIiwicGlwRHJhZnRBcmdzIiwidHJhbnNjcmlwdCIsImRvY3hBcmdzIiwibGFuZ3VhZ2UiLCJ0aXRsZSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwiam9pbiIsInB1c2hVc2FnZSIsImNvc3QiLCJtZXNzYWdlIiwidXNhZ2UiLCJpbnB1dCIsImlucHV0X3Rva2VucyIsIm91dHB1dCIsIm91dHB1dF90b2tlbnMiLCJjYWNoZUNyZWF0ZSIsImNhY2hlX2NyZWF0aW9uX2lucHV0X3Rva2VucyIsImNhY2hlUmVhZCIsImNhY2hlX3JlYWRfaW5wdXRfdG9rZW5zIiwic3NlTGluZSIsImV2ZW50IiwiZGF0YSIsInRvU2VyaWFsaXphYmxlRXJyb3IiLCJlcnJvciIsIkVycm9yIiwibmFtZSIsInN0YWNrIiwicGFyc2UiLCJTdHJpbmciLCJHRVQiLCJyZXEiLCJzZWFyY2giLCJuZXh0VXJsIiwic2VhcmNoUGFyYW1zIiwiYXVkaW9QYXJhbSIsImdldCIsInRlbXBsYXRlUGFyYW0iLCJvdXRwdXRQYXJhbSIsIkRhdGUiLCJub3ciLCJlbmNvZGVyIiwiVGV4dEVuY29kZXIiLCJwcm9qZWN0Um9vdCIsInJlc29sdmUiLCJwcm9jZXNzIiwiY3dkIiwiZ3VpZGVsaW5lc1BhdGgiLCJwcm9tcHRQYXRoRGVmYXVsdCIsInN0cmVhbSIsIlJlYWRhYmxlU3RyZWFtIiwic3RhcnQiLCJjb250cm9sbGVyIiwid3JpdGUiLCJlbnF1ZXVlIiwiZW5jb2RlIiwic2VuZFN0YXR1cyIsInN0ZXAiLCJzdGF0dXMiLCJtZXRhIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImNsb3NlV2l0aEVycm9yIiwiZGV0YWlscyIsImNsb3NlIiwianVkZ2VHdWlkZWxpbmVzIiwicmVhZEZpbGVTeW5jIiwianVkZ2VBZ2VudCIsIml0ZXJhdG9yIiwicHJvbXB0Iiwib3B0aW9ucyIsIm1vZGVsIiwiQ0xBVURFX1NPTk5FVCIsImFnZW50cyIsIm1jcFNlcnZlcnMiLCJhbGxvd2VkVG9vbHMiLCJwZXJtaXNzaW9uTW9kZSIsIm1heFR1cm5zIiwianVkZ2VSb3VuZCIsInRvdGFsVG9rZW5zIiwic3VtbWFyeSIsImVzdGltYXRlZENvc3RVU0QiLCJicmVha2Rvd24iLCJzZXNzaW9uSWQiLCJsZXZlbCIsImV2ZW50RGF0YSIsImluY2x1ZGVzIiwidG9kb3MiLCJBcnJheSIsImlzQXJyYXkiLCJyZXN1bHREYXRhIiwiaXNFcnJvciIsImNvbnRlbnQiLCJwYXlsb2FkIiwidGV4dFBhcnQiLCJmaW5kIiwiaXRlbSIsInRleHQiLCJwYXJzZWQiLCJzbGljZSIsInByb2Nlc3NlZENodW5rcyIsInRvdGFsQ2h1bmtzIiwianNvbkZpZWxkcyIsImRlbHRhIiwidW5kZWZpbmVkIiwibWF5YmVUZXh0IiwiY2FuZGlkYXRlIiwidHJpbSIsInN0YXJ0c1dpdGgiLCJ2ZXJkaWN0IiwiYXBwcm92ZWQiLCJyZWFzb25zIiwicmVxdWlyZWRfY2hhbmdlcyIsInJldmlzZWRfZHJhZnQiLCJyb3VuZCIsInR5cGUiLCJzdWJ0eXBlIiwicmF3UmVzdWx0IiwicmVzdWx0IiwiY2xlYW5lZCIsInJlcGxhY2UiLCJkcmFmdCIsImRvY3giLCJkb2N4UmVsYXRpdmUiLCJyZWxhdGl2ZSIsIm9rIiwid29ya2VyRXJyb3IiLCJleGlzdHNTeW5jIiwic3RhdHMiLCJzdGF0U3luYyIsInNpemUiLCJyZWNvdmVyZWQiLCJSZXNwb25zZSIsImhlYWRlcnMiLCJDb25uZWN0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/run/route.ts\n");

/***/ }),

/***/ "(rsc)/../../src/agents/policyJudge.ts":
/*!***************************************!*\
  !*** ../../src/agents/policyJudge.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makePolicyJudgeAgent: () => (/* binding */ makePolicyJudgeAgent)\n/* harmony export */ });\nfunction makePolicyJudgeAgent(guidelinesText, outputLanguage) {\n    return {\n        description: \"Reviews a drafted PIP against company policy/guardrails and legal tone requirements.\",\n        model: \"inherit\",\n        tools: [],\n        prompt: `You are a meticulous HR policy judge.\nYou will receive a PIP DRAFT (plain text). Review it for: clarity, specificity, non-discrimination, measurable goals, reasonable timelines, and compliance with these guidelines:\n\nGUIDELINES (authoritative)\n--------------------------\n${guidelinesText}\n\nOUTPUT CONTRACT (JSON ONLY; no markdown, no prose):\n{\n  \"approved\": boolean,\n  \"reasons\": string[],\n  \"required_changes\": string[],\n  \"revised_draft\": string | null\n}\n\nRules:\n- If approved=false, propose a revised_draft that fixes issues while preserving the original structure and the author's intent when possible.\n- Always write in ${outputLanguage}.\n- Flag any personal names that cannot be confirmed as originating from the transcript and require replacing them with \"the employee\" unless the name is explicitly confirmed in the provided materials.\n- NEVER include names or sensitive details not present in the original transcript.\n`\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vc3JjL2FnZW50cy9wb2xpY3lKdWRnZS50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sU0FBU0EscUJBQXFCQyxjQUFzQixFQUFFQyxjQUFzQjtJQUNqRixPQUFPO1FBQ0xDLGFBQWE7UUFDYkMsT0FBTztRQUNQQyxPQUFPLEVBQUU7UUFDVEMsUUFBUSxDQUFDOzs7OztBQUtiLEVBQUVMLGVBQWU7Ozs7Ozs7Ozs7OztrQkFZQyxFQUFFQyxlQUFlOzs7QUFHbkMsQ0FBQztJQUNDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AcGlwL3VpLy4uLy4uL3NyYy9hZ2VudHMvcG9saWN5SnVkZ2UudHM/ZDVkNCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gbWFrZVBvbGljeUp1ZGdlQWdlbnQoZ3VpZGVsaW5lc1RleHQ6IHN0cmluZywgb3V0cHV0TGFuZ3VhZ2U6IHN0cmluZykge1xuICByZXR1cm4ge1xuICAgIGRlc2NyaXB0aW9uOiBcIlJldmlld3MgYSBkcmFmdGVkIFBJUCBhZ2FpbnN0IGNvbXBhbnkgcG9saWN5L2d1YXJkcmFpbHMgYW5kIGxlZ2FsIHRvbmUgcmVxdWlyZW1lbnRzLlwiLFxuICAgIG1vZGVsOiBcImluaGVyaXRcIiBhcyBjb25zdCxcbiAgICB0b29sczogW10sXG4gICAgcHJvbXB0OiBgWW91IGFyZSBhIG1ldGljdWxvdXMgSFIgcG9saWN5IGp1ZGdlLlxuWW91IHdpbGwgcmVjZWl2ZSBhIFBJUCBEUkFGVCAocGxhaW4gdGV4dCkuIFJldmlldyBpdCBmb3I6IGNsYXJpdHksIHNwZWNpZmljaXR5LCBub24tZGlzY3JpbWluYXRpb24sIG1lYXN1cmFibGUgZ29hbHMsIHJlYXNvbmFibGUgdGltZWxpbmVzLCBhbmQgY29tcGxpYW5jZSB3aXRoIHRoZXNlIGd1aWRlbGluZXM6XG5cbkdVSURFTElORVMgKGF1dGhvcml0YXRpdmUpXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuJHtndWlkZWxpbmVzVGV4dH1cblxuT1VUUFVUIENPTlRSQUNUIChKU09OIE9OTFk7IG5vIG1hcmtkb3duLCBubyBwcm9zZSk6XG57XG4gIFwiYXBwcm92ZWRcIjogYm9vbGVhbixcbiAgXCJyZWFzb25zXCI6IHN0cmluZ1tdLFxuICBcInJlcXVpcmVkX2NoYW5nZXNcIjogc3RyaW5nW10sXG4gIFwicmV2aXNlZF9kcmFmdFwiOiBzdHJpbmcgfCBudWxsXG59XG5cblJ1bGVzOlxuLSBJZiBhcHByb3ZlZD1mYWxzZSwgcHJvcG9zZSBhIHJldmlzZWRfZHJhZnQgdGhhdCBmaXhlcyBpc3N1ZXMgd2hpbGUgcHJlc2VydmluZyB0aGUgb3JpZ2luYWwgc3RydWN0dXJlIGFuZCB0aGUgYXV0aG9yJ3MgaW50ZW50IHdoZW4gcG9zc2libGUuXG4tIEFsd2F5cyB3cml0ZSBpbiAke291dHB1dExhbmd1YWdlfS5cbi0gRmxhZyBhbnkgcGVyc29uYWwgbmFtZXMgdGhhdCBjYW5ub3QgYmUgY29uZmlybWVkIGFzIG9yaWdpbmF0aW5nIGZyb20gdGhlIHRyYW5zY3JpcHQgYW5kIHJlcXVpcmUgcmVwbGFjaW5nIHRoZW0gd2l0aCBcInRoZSBlbXBsb3llZVwiIHVubGVzcyB0aGUgbmFtZSBpcyBleHBsaWNpdGx5IGNvbmZpcm1lZCBpbiB0aGUgcHJvdmlkZWQgbWF0ZXJpYWxzLlxuLSBORVZFUiBpbmNsdWRlIG5hbWVzIG9yIHNlbnNpdGl2ZSBkZXRhaWxzIG5vdCBwcmVzZW50IGluIHRoZSBvcmlnaW5hbCB0cmFuc2NyaXB0LlxuYFxuICB9O1xufVxuIl0sIm5hbWVzIjpbIm1ha2VQb2xpY3lKdWRnZUFnZW50IiwiZ3VpZGVsaW5lc1RleHQiLCJvdXRwdXRMYW5ndWFnZSIsImRlc2NyaXB0aW9uIiwibW9kZWwiLCJ0b29scyIsInByb21wdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../src/agents/policyJudge.ts\n");

/***/ }),

/***/ "(rsc)/../../src/config.ts":
/*!***************************!*\
  !*** ../../src/config.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ALLOWED_AUDIO_EXTENSIONS: () => (/* binding */ ALLOWED_AUDIO_EXTENSIONS),\n/* harmony export */   ALLOWED_OUTPUT_EXTENSIONS: () => (/* binding */ ALLOWED_OUTPUT_EXTENSIONS),\n/* harmony export */   ALLOWED_TEMPLATE_EXTENSIONS: () => (/* binding */ ALLOWED_TEMPLATE_EXTENSIONS),\n/* harmony export */   ANTHROPIC_API_KEY: () => (/* binding */ ANTHROPIC_API_KEY),\n/* harmony export */   GEMINI_API_KEY: () => (/* binding */ GEMINI_API_KEY),\n/* harmony export */   GEMINI_CHUNK_SECONDS: () => (/* binding */ GEMINI_CHUNK_SECONDS),\n/* harmony export */   GEMINI_INPUT_MODE: () => (/* binding */ GEMINI_INPUT_MODE),\n/* harmony export */   GEMINI_SINGLE_PASS_MAX: () => (/* binding */ GEMINI_SINGLE_PASS_MAX),\n/* harmony export */   GEMINI_TRANSCRIBE_CONCURRENCY: () => (/* binding */ GEMINI_TRANSCRIBE_CONCURRENCY),\n/* harmony export */   GEMINI_TRANSCRIBE_RETRIES: () => (/* binding */ GEMINI_TRANSCRIBE_RETRIES),\n/* harmony export */   GUIDELINES_PATH: () => (/* binding */ GUIDELINES_PATH),\n/* harmony export */   LOG_LEVEL: () => (/* binding */ LOG_LEVEL),\n/* harmony export */   LOG_PRETTY: () => (/* binding */ LOG_PRETTY),\n/* harmony export */   MAX_PATH_LENGTH: () => (/* binding */ MAX_PATH_LENGTH),\n/* harmony export */   MAX_REVIEW_ROUNDS: () => (/* binding */ MAX_REVIEW_ROUNDS),\n/* harmony export */   MAX_TURNS: () => (/* binding */ MAX_TURNS),\n/* harmony export */   MODELS: () => (/* binding */ MODELS),\n/* harmony export */   PIP_MAX_OUTPUT_TOKENS: () => (/* binding */ PIP_MAX_OUTPUT_TOKENS),\n/* harmony export */   PIP_PROMPT_PATH: () => (/* binding */ PIP_PROMPT_PATH),\n/* harmony export */   PIP_TEMPERATURE: () => (/* binding */ PIP_TEMPERATURE),\n/* harmony export */   PRICING: () => (/* binding */ PRICING),\n/* harmony export */   S3_BUCKET: () => (/* binding */ S3_BUCKET),\n/* harmony export */   S3_DELETE_AFTER: () => (/* binding */ S3_DELETE_AFTER),\n/* harmony export */   S3_PREFIX: () => (/* binding */ S3_PREFIX),\n/* harmony export */   S3_PRESIGN_TTL_SECONDS: () => (/* binding */ S3_PRESIGN_TTL_SECONDS),\n/* harmony export */   S3_PROFILE: () => (/* binding */ S3_PROFILE),\n/* harmony export */   getConfigSummary: () => (/* binding */ getConfigSummary),\n/* harmony export */   getConfigValue: () => (/* binding */ getConfigValue),\n/* harmony export */   isValidAnthropicKeyFormat: () => (/* binding */ isValidAnthropicKeyFormat),\n/* harmony export */   isValidGeminiKeyFormat: () => (/* binding */ isValidGeminiKeyFormat),\n/* harmony export */   parseCliArgs: () => (/* binding */ parseCliArgs),\n/* harmony export */   validateRequiredConfig: () => (/* binding */ validateRequiredConfig)\n/* harmony export */ });\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv/config */ \"(rsc)/../../node_modules/dotenv/config.js\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * Centralized Configuration Module\n *\n * This module consolidates all configuration values from environment variables,\n * default values, and constants used throughout the application.\n *\n * All configuration should be imported from this module rather than reading\n * process.env directly or using inline constants.\n */ \n// ============================================================================\n// API Keys\n// ============================================================================\n/**\n * Anthropic API key for Claude models\n * Required for main agent and PIP generation\n */ const ANTHROPIC_API_KEY = process.env.ANTHROPIC_API_KEY;\n/**\n * Gemini API key for transcription services\n * Required for audio transcription\n */ const GEMINI_API_KEY = process.env.GEMINI_API_KEY;\n// ============================================================================\n// API Key Format Validation\n// ============================================================================\n/**\n * Validates the format of an Anthropic API key\n * Anthropic keys follow the pattern: sk-ant-api03-...\n *\n * @param key - The API key to validate\n * @returns True if the key format is valid\n *\n * @security Validates key format to catch configuration errors early\n */ function isValidAnthropicKeyFormat(key) {\n    if (!key || typeof key !== \"string\") return false;\n    // Anthropic keys start with sk-ant- and have at least 40 characters\n    return key.startsWith(\"sk-ant-\") && key.length >= 40;\n}\n/**\n * Validates the format of a Google Gemini API key\n * Gemini keys follow the pattern: AIza... (39 characters total)\n *\n * @param key - The API key to validate\n * @returns True if the key format is valid\n *\n * @security Validates key format to catch configuration errors early\n */ function isValidGeminiKeyFormat(key) {\n    if (!key || typeof key !== \"string\") return false;\n    // Gemini keys start with AIza and are typically 39 characters\n    return key.startsWith(\"AIza\") && key.length >= 35;\n}\n// ============================================================================\n// Model Configuration\n// ============================================================================\n/**\n * Model identifiers and names\n */ const MODELS = {\n    /**\n   * Main Claude model for orchestration and PIP generation\n   * Default: claude-sonnet-4-5-20250929\n   */ CLAUDE_SONNET: process.env.CLAUDE_MODEL_ID || \"claude-sonnet-4-5-20250929\",\n    /**\n   * Claude model specifically for PIP generation (overrides main model if set)\n   * Falls back to CLAUDE_SONNET if not specified\n   */ CLAUDE_PIP: process.env.CLAUDE_PIP_MODEL_ID || process.env.CLAUDE_MODEL_ID || \"claude-sonnet-4-5-20250929\",\n    /**\n   * Gemini model for audio transcription\n   * Default: gemini-2.5-pro\n   */ GEMINI_PRO: process.env.GEMINI_TRANSCRIBE_MODEL || \"gemini-2.5-pro\"\n};\n// ============================================================================\n// Claude Model Parameters\n// ============================================================================\n/**\n * Temperature for PIP generation (0-1)\n * Lower values = more focused and deterministic\n * Higher values = more creative and varied\n * Default: 0.2\n */ const PIP_TEMPERATURE = Number.isFinite(Number(process.env.PIP_TEMPERATURE)) ? Number(process.env.PIP_TEMPERATURE) : 0.2;\n/**\n * Maximum output tokens for PIP generation\n * Default: 4096\n */ const PIP_MAX_OUTPUT_TOKENS = Number.isFinite(Number(process.env.PIP_MAX_OUTPUT_TOKENS)) ? Number(process.env.PIP_MAX_OUTPUT_TOKENS) : 4096;\n// ============================================================================\n// Pipeline Configuration\n// ============================================================================\n/**\n * Maximum number of review rounds with policy judge\n * After this many attempts, pipeline will fail if not approved\n * Default: 2\n */ const MAX_REVIEW_ROUNDS = Number(process.env.MAX_REVIEW_ROUNDS || 2);\n/**\n * Maximum turns allowed for the main agent orchestration\n * Default: 60\n */ const MAX_TURNS = 60;\n// ============================================================================\n// Logging Configuration\n// ============================================================================\n/**\n * Log level for the application\n * Valid values: 'trace', 'debug', 'info', 'warn', 'error', 'fatal', 'silent'\n * Default: 'info'\n */ const LOG_LEVEL = process.env.LOG_LEVEL || \"info\";\n/**\n * Enable pretty printing for logs (development mode)\n * In production (NODE_ENV=production), logs are always JSON\n * Default: true in development, false in production\n */ const LOG_PRETTY = \"development\" !== \"production\";\n// ============================================================================\n// Transcription Configuration\n// ============================================================================\n/**\n * Default chunk duration in seconds for long audio files\n * Audio longer than MAX_SINGLE_DURATION will be split into chunks of this size\n * Default: 30 seconds (minimum 10)\n */ const GEMINI_CHUNK_SECONDS = Math.max(10, Number(process.env.GEMINI_CHUNK_SECONDS || 30));\n/**\n * Maximum duration (in seconds) for single-pass transcription\n * Audio longer than this will be automatically chunked\n * Default: 45 seconds\n */ const GEMINI_SINGLE_PASS_MAX = Number(process.env.GEMINI_SINGLE_PASS_MAX || 45);\n/**\n * Concurrency for parallel chunk transcription\n * Number of chunks to transcribe simultaneously\n * Default: 4 (minimum 1)\n */ const GEMINI_TRANSCRIBE_CONCURRENCY = Math.max(1, Number(process.env.GEMINI_TRANSCRIBE_CONCURRENCY || 4));\n/**\n * Number of retries for failed transcription attempts\n * Default: 2 (minimum 0)\n */ const GEMINI_TRANSCRIBE_RETRIES = Math.max(0, Number(process.env.GEMINI_TRANSCRIBE_RETRIES || 2));\n// ============================================================================\n// S3 + Presigned URL Configuration\n// ============================================================================\n/**\n * AWS CLI profile to use for S3 ops\n * Default: BCRoot (per user instruction)\n */ const S3_PROFILE = process.env.S3_PROFILE || \"BCRoot\";\n/**\n * Target S3 bucket for audio uploads\n * If unset, the app may attempt to create one on the fly\n */ const S3_BUCKET = process.env.S3_BUCKET;\n/**\n * Optional key prefix for uploaded audio objects (no leading slash)\n * Default: \"audio\"\n */ const S3_PREFIX = (process.env.S3_PREFIX || \"audio\").replace(/^\\/+|\\/+$/g, \"\");\n/**\n * TTL for presigned URLs in seconds\n * Default: 3600\n */ const S3_PRESIGN_TTL_SECONDS = Math.max(60, Number(process.env.S3_PRESIGN_TTL_SECONDS || 3600));\n/**\n * Whether to delete S3 object after transcription completes\n * Default: true\n */ const S3_DELETE_AFTER = String(process.env.S3_DELETE_AFTER || \"true\").toLowerCase() === \"true\";\n/**\n * Input mode for Gemini file ingestion\n * - \"presigned\" → Upload to S3 and pass presigned URL to Gemini (preferred)\n * - \"upload\"    → Upload file to Gemini via SDK\n * Default: \"presigned\"\n */ const GEMINI_INPUT_MODE = (process.env.GEMINI_INPUT_MODE || \"presigned\").toLowerCase();\n// ============================================================================\n// File Paths\n// ============================================================================\n/**\n * Default path to the PIP drafting prompt template\n * Default: prompts/draft-pip.txt\n */ const PIP_PROMPT_PATH = process.env.PIP_PROMPT_PATH || \"prompts/draft-pip.txt\";\n/**\n * Default path to company policy guidelines\n * Default: policies/guidelines.txt\n */ const GUIDELINES_PATH = \"policies/guidelines.txt\";\n// ============================================================================\n// Security Configuration\n// ============================================================================\n/**\n * Maximum allowed path length in characters\n * Prevents buffer overflow and extremely long path attacks\n * Default: 4096 (standard on most Unix systems)\n */ const MAX_PATH_LENGTH = 4096;\n/**\n * Allowed audio file extensions for transcription\n * Whitelist of safe audio formats supported by ffmpeg/Gemini\n *\n * @security This whitelist prevents uploading malicious file types\n */ const ALLOWED_AUDIO_EXTENSIONS = [\n    \".mp3\",\n    \".wav\",\n    \".flac\",\n    \".m4a\",\n    \".aac\",\n    \".ogg\",\n    \".opus\",\n    \".wma\",\n    \".aiff\",\n    \".ape\",\n    \".ac3\"\n];\n/**\n * Allowed document template extensions\n * Whitelist of safe document formats for templates\n *\n * @security This whitelist prevents template injection attacks\n */ const ALLOWED_TEMPLATE_EXTENSIONS = [\n    \".docx\"\n];\n/**\n * Allowed output document extensions\n * Whitelist of safe document formats for output\n */ const ALLOWED_OUTPUT_EXTENSIONS = [\n    \".docx\"\n];\n// ============================================================================\n// Pricing Constants\n// ============================================================================\n/**\n * Claude API pricing as of January 2025\n * Source: https://www.anthropic.com/pricing\n *\n * Update these values when pricing changes to maintain accurate cost tracking.\n */ const PRICING = {\n    /**\n   * Cost per million input tokens (MTK)\n   * $3.00 per MTK as of January 2025\n   */ INPUT_PER_MTK: 3.0,\n    /**\n   * Cost per million output tokens (MTK)\n   * $15.00 per MTK as of January 2025\n   */ OUTPUT_PER_MTK: 15.0,\n    /**\n   * Cost per million tokens for cache creation (prompt caching)\n   * $3.75 per MTK as of January 2025\n   */ CACHE_CREATION_PER_MTK: 3.75,\n    /**\n   * Cost per million tokens for cache reads (prompt caching)\n   * $0.30 per MTK as of January 2025\n   */ CACHE_READ_PER_MTK: 0.30\n};\n// ============================================================================\n// CLI Argument Parsing Utilities\n// ============================================================================\n/**\n * Parse command-line arguments in the format --key value\n * Returns a Map of argument keys to values\n */ function parseCliArgs() {\n    const args = new Map();\n    const tokens = process.argv.slice(2);\n    for(let i = 0; i < tokens.length; i++){\n        const token = tokens[i];\n        if (!token.startsWith(\"--\")) {\n            continue;\n        }\n        const trimmed = token.slice(2);\n        if (!trimmed) {\n            continue;\n        }\n        const equalsIndex = trimmed.indexOf(\"=\");\n        if (equalsIndex !== -1) {\n            const key = trimmed.slice(0, equalsIndex);\n            const value = trimmed.slice(equalsIndex + 1);\n            args.set(key, value || \"true\");\n            continue;\n        }\n        const nextToken = tokens[i + 1];\n        if (!nextToken || nextToken.startsWith(\"--\")) {\n            args.set(trimmed, \"true\");\n            continue;\n        }\n        args.set(trimmed, nextToken);\n        i += 1;\n    }\n    return args;\n}\n/**\n * Get a configuration value from CLI args, environment, or default\n * Priority: CLI args > environment > default\n */ function getConfigValue(cliArgs, cliKey, envKey, defaultValue) {\n    return cliArgs.get(cliKey) || process.env[envKey] || defaultValue;\n}\n// ============================================================================\n// Validation\n// ============================================================================\n/**\n * Validate that required API keys are present and properly formatted\n * @returns Validation result with list of errors if any\n *\n * @security Validates both presence and format of API keys to catch\n * configuration errors early before making API calls\n */ function validateRequiredConfig() {\n    const errors = [];\n    if (!ANTHROPIC_API_KEY) {\n        errors.push(\"Missing ANTHROPIC_API_KEY in environment\");\n    } else if (!isValidAnthropicKeyFormat(ANTHROPIC_API_KEY)) {\n        errors.push(\"Invalid ANTHROPIC_API_KEY format. Expected format: sk-ant-api03-... (at least 40 characters). \" + \"Please check your API key from https://console.anthropic.com/\");\n    }\n    if (!GEMINI_API_KEY) {\n        errors.push(\"Missing GEMINI_API_KEY in environment\");\n    } else if (!isValidGeminiKeyFormat(GEMINI_API_KEY)) {\n        errors.push(\"Invalid GEMINI_API_KEY format. Expected format: AIza... (at least 35 characters). \" + \"Please check your API key from https://aistudio.google.com/app/apikey\");\n    }\n    return {\n        valid: errors.length === 0,\n        errors\n    };\n}\n// ============================================================================\n// Configuration Summary\n// ============================================================================\n/**\n * Get a summary of the current configuration\n * Useful for debugging and logging\n */ function getConfigSummary() {\n    return {\n        models: {\n            claude: MODELS.CLAUDE_SONNET,\n            claudePip: MODELS.CLAUDE_PIP,\n            gemini: MODELS.GEMINI_PRO\n        },\n        pipeline: {\n            maxReviewRounds: MAX_REVIEW_ROUNDS,\n            maxTurns: MAX_TURNS\n        },\n        transcription: {\n            chunkSeconds: GEMINI_CHUNK_SECONDS,\n            singlePassMax: GEMINI_SINGLE_PASS_MAX,\n            concurrency: GEMINI_TRANSCRIBE_CONCURRENCY,\n            retries: GEMINI_TRANSCRIBE_RETRIES\n        },\n        pipGeneration: {\n            temperature: PIP_TEMPERATURE,\n            maxOutputTokens: PIP_MAX_OUTPUT_TOKENS,\n            promptPath: PIP_PROMPT_PATH\n        },\n        paths: {\n            pipPrompt: PIP_PROMPT_PATH,\n            guidelines: GUIDELINES_PATH\n        },\n        pricing: PRICING\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNmMEQsYUFBYXpEO1lBQ2IwRCxTQUFTekQ7UUFDWDtRQUNBMEQsZUFBZTtZQUNiQyxhQUFheEU7WUFDYnlFLGlCQUFpQnRFO1lBQ2pCdUUsWUFBWW5EO1FBQ2Q7UUFDQW9ELE9BQU87WUFDTEMsV0FBV3JEO1lBQ1hzRCxZQUFZckQ7UUFDZDtRQUNBc0QsU0FBU2pEO0lBQ1g7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL0BwaXAvdWkvLi4vLi4vc3JjL2NvbmZpZy50cz80MGY0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ2VudHJhbGl6ZWQgQ29uZmlndXJhdGlvbiBNb2R1bGVcbiAqXG4gKiBUaGlzIG1vZHVsZSBjb25zb2xpZGF0ZXMgYWxsIGNvbmZpZ3VyYXRpb24gdmFsdWVzIGZyb20gZW52aXJvbm1lbnQgdmFyaWFibGVzLFxuICogZGVmYXVsdCB2YWx1ZXMsIGFuZCBjb25zdGFudHMgdXNlZCB0aHJvdWdob3V0IHRoZSBhcHBsaWNhdGlvbi5cbiAqXG4gKiBBbGwgY29uZmlndXJhdGlvbiBzaG91bGQgYmUgaW1wb3J0ZWQgZnJvbSB0aGlzIG1vZHVsZSByYXRoZXIgdGhhbiByZWFkaW5nXG4gKiBwcm9jZXNzLmVudiBkaXJlY3RseSBvciB1c2luZyBpbmxpbmUgY29uc3RhbnRzLlxuICovXG5cbmltcG9ydCBcImRvdGVudi9jb25maWdcIjtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQVBJIEtleXNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBBbnRocm9waWMgQVBJIGtleSBmb3IgQ2xhdWRlIG1vZGVsc1xuICogUmVxdWlyZWQgZm9yIG1haW4gYWdlbnQgYW5kIFBJUCBnZW5lcmF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBBTlRIUk9QSUNfQVBJX0tFWSA9IHByb2Nlc3MuZW52LkFOVEhST1BJQ19BUElfS0VZO1xuXG4vKipcbiAqIEdlbWluaSBBUEkga2V5IGZvciB0cmFuc2NyaXB0aW9uIHNlcnZpY2VzXG4gKiBSZXF1aXJlZCBmb3IgYXVkaW8gdHJhbnNjcmlwdGlvblxuICovXG5leHBvcnQgY29uc3QgR0VNSU5JX0FQSV9LRVkgPSBwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQVBJIEtleSBGb3JtYXQgVmFsaWRhdGlvblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGUgZm9ybWF0IG9mIGFuIEFudGhyb3BpYyBBUEkga2V5XG4gKiBBbnRocm9waWMga2V5cyBmb2xsb3cgdGhlIHBhdHRlcm46IHNrLWFudC1hcGkwMy0uLi5cbiAqXG4gKiBAcGFyYW0ga2V5IC0gVGhlIEFQSSBrZXkgdG8gdmFsaWRhdGVcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGtleSBmb3JtYXQgaXMgdmFsaWRcbiAqXG4gKiBAc2VjdXJpdHkgVmFsaWRhdGVzIGtleSBmb3JtYXQgdG8gY2F0Y2ggY29uZmlndXJhdGlvbiBlcnJvcnMgZWFybHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRBbnRocm9waWNLZXlGb3JtYXQoa2V5OiBzdHJpbmcgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcbiAgaWYgKCFrZXkgfHwgdHlwZW9mIGtleSAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIGZhbHNlO1xuICAvLyBBbnRocm9waWMga2V5cyBzdGFydCB3aXRoIHNrLWFudC0gYW5kIGhhdmUgYXQgbGVhc3QgNDAgY2hhcmFjdGVyc1xuICByZXR1cm4ga2V5LnN0YXJ0c1dpdGgoXCJzay1hbnQtXCIpICYmIGtleS5sZW5ndGggPj0gNDA7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoZSBmb3JtYXQgb2YgYSBHb29nbGUgR2VtaW5pIEFQSSBrZXlcbiAqIEdlbWluaSBrZXlzIGZvbGxvdyB0aGUgcGF0dGVybjogQUl6YS4uLiAoMzkgY2hhcmFjdGVycyB0b3RhbClcbiAqXG4gKiBAcGFyYW0ga2V5IC0gVGhlIEFQSSBrZXkgdG8gdmFsaWRhdGVcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGtleSBmb3JtYXQgaXMgdmFsaWRcbiAqXG4gKiBAc2VjdXJpdHkgVmFsaWRhdGVzIGtleSBmb3JtYXQgdG8gY2F0Y2ggY29uZmlndXJhdGlvbiBlcnJvcnMgZWFybHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRHZW1pbmlLZXlGb3JtYXQoa2V5OiBzdHJpbmcgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcbiAgaWYgKCFrZXkgfHwgdHlwZW9mIGtleSAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIGZhbHNlO1xuICAvLyBHZW1pbmkga2V5cyBzdGFydCB3aXRoIEFJemEgYW5kIGFyZSB0eXBpY2FsbHkgMzkgY2hhcmFjdGVyc1xuICByZXR1cm4ga2V5LnN0YXJ0c1dpdGgoXCJBSXphXCIpICYmIGtleS5sZW5ndGggPj0gMzU7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIE1vZGVsIENvbmZpZ3VyYXRpb25cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBNb2RlbCBpZGVudGlmaWVycyBhbmQgbmFtZXNcbiAqL1xuZXhwb3J0IGNvbnN0IE1PREVMUyA9IHtcbiAgLyoqXG4gICAqIE1haW4gQ2xhdWRlIG1vZGVsIGZvciBvcmNoZXN0cmF0aW9uIGFuZCBQSVAgZ2VuZXJhdGlvblxuICAgKiBEZWZhdWx0OiBjbGF1ZGUtc29ubmV0LTQtNS0yMDI1MDkyOVxuICAgKi9cbiAgQ0xBVURFX1NPTk5FVDogcHJvY2Vzcy5lbnYuQ0xBVURFX01PREVMX0lEIHx8IFwiY2xhdWRlLXNvbm5ldC00LTUtMjAyNTA5MjlcIixcblxuICAvKipcbiAgICogQ2xhdWRlIG1vZGVsIHNwZWNpZmljYWxseSBmb3IgUElQIGdlbmVyYXRpb24gKG92ZXJyaWRlcyBtYWluIG1vZGVsIGlmIHNldClcbiAgICogRmFsbHMgYmFjayB0byBDTEFVREVfU09OTkVUIGlmIG5vdCBzcGVjaWZpZWRcbiAgICovXG4gIENMQVVERV9QSVA6IHByb2Nlc3MuZW52LkNMQVVERV9QSVBfTU9ERUxfSUQgfHwgcHJvY2Vzcy5lbnYuQ0xBVURFX01PREVMX0lEIHx8IFwiY2xhdWRlLXNvbm5ldC00LTUtMjAyNTA5MjlcIixcblxuICAvKipcbiAgICogR2VtaW5pIG1vZGVsIGZvciBhdWRpbyB0cmFuc2NyaXB0aW9uXG4gICAqIERlZmF1bHQ6IGdlbWluaS0yLjUtcHJvXG4gICAqL1xuICBHRU1JTklfUFJPOiBwcm9jZXNzLmVudi5HRU1JTklfVFJBTlNDUklCRV9NT0RFTCB8fCBcImdlbWluaS0yLjUtcHJvXCJcbn0gYXMgY29uc3Q7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENsYXVkZSBNb2RlbCBQYXJhbWV0ZXJzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogVGVtcGVyYXR1cmUgZm9yIFBJUCBnZW5lcmF0aW9uICgwLTEpXG4gKiBMb3dlciB2YWx1ZXMgPSBtb3JlIGZvY3VzZWQgYW5kIGRldGVybWluaXN0aWNcbiAqIEhpZ2hlciB2YWx1ZXMgPSBtb3JlIGNyZWF0aXZlIGFuZCB2YXJpZWRcbiAqIERlZmF1bHQ6IDAuMlxuICovXG5leHBvcnQgY29uc3QgUElQX1RFTVBFUkFUVVJFID0gTnVtYmVyLmlzRmluaXRlKE51bWJlcihwcm9jZXNzLmVudi5QSVBfVEVNUEVSQVRVUkUpKVxuICA/IE51bWJlcihwcm9jZXNzLmVudi5QSVBfVEVNUEVSQVRVUkUpXG4gIDogMC4yO1xuXG4vKipcbiAqIE1heGltdW0gb3V0cHV0IHRva2VucyBmb3IgUElQIGdlbmVyYXRpb25cbiAqIERlZmF1bHQ6IDQwOTZcbiAqL1xuZXhwb3J0IGNvbnN0IFBJUF9NQVhfT1VUUFVUX1RPS0VOUyA9IE51bWJlci5pc0Zpbml0ZShOdW1iZXIocHJvY2Vzcy5lbnYuUElQX01BWF9PVVRQVVRfVE9LRU5TKSlcbiAgPyBOdW1iZXIocHJvY2Vzcy5lbnYuUElQX01BWF9PVVRQVVRfVE9LRU5TKVxuICA6IDQwOTY7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBpcGVsaW5lIENvbmZpZ3VyYXRpb25cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBNYXhpbXVtIG51bWJlciBvZiByZXZpZXcgcm91bmRzIHdpdGggcG9saWN5IGp1ZGdlXG4gKiBBZnRlciB0aGlzIG1hbnkgYXR0ZW1wdHMsIHBpcGVsaW5lIHdpbGwgZmFpbCBpZiBub3QgYXBwcm92ZWRcbiAqIERlZmF1bHQ6IDJcbiAqL1xuZXhwb3J0IGNvbnN0IE1BWF9SRVZJRVdfUk9VTkRTID0gTnVtYmVyKHByb2Nlc3MuZW52Lk1BWF9SRVZJRVdfUk9VTkRTIHx8IDIpO1xuXG4vKipcbiAqIE1heGltdW0gdHVybnMgYWxsb3dlZCBmb3IgdGhlIG1haW4gYWdlbnQgb3JjaGVzdHJhdGlvblxuICogRGVmYXVsdDogNjBcbiAqL1xuZXhwb3J0IGNvbnN0IE1BWF9UVVJOUyA9IDYwO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBMb2dnaW5nIENvbmZpZ3VyYXRpb25cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBMb2cgbGV2ZWwgZm9yIHRoZSBhcHBsaWNhdGlvblxuICogVmFsaWQgdmFsdWVzOiAndHJhY2UnLCAnZGVidWcnLCAnaW5mbycsICd3YXJuJywgJ2Vycm9yJywgJ2ZhdGFsJywgJ3NpbGVudCdcbiAqIERlZmF1bHQ6ICdpbmZvJ1xuICovXG5leHBvcnQgY29uc3QgTE9HX0xFVkVMID0gcHJvY2Vzcy5lbnYuTE9HX0xFVkVMIHx8IFwiaW5mb1wiO1xuXG4vKipcbiAqIEVuYWJsZSBwcmV0dHkgcHJpbnRpbmcgZm9yIGxvZ3MgKGRldmVsb3BtZW50IG1vZGUpXG4gKiBJbiBwcm9kdWN0aW9uIChOT0RFX0VOVj1wcm9kdWN0aW9uKSwgbG9ncyBhcmUgYWx3YXlzIEpTT05cbiAqIERlZmF1bHQ6IHRydWUgaW4gZGV2ZWxvcG1lbnQsIGZhbHNlIGluIHByb2R1Y3Rpb25cbiAqL1xuZXhwb3J0IGNvbnN0IExPR19QUkVUVFkgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCI7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRyYW5zY3JpcHRpb24gQ29uZmlndXJhdGlvblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIERlZmF1bHQgY2h1bmsgZHVyYXRpb24gaW4gc2Vjb25kcyBmb3IgbG9uZyBhdWRpbyBmaWxlc1xuICogQXVkaW8gbG9uZ2VyIHRoYW4gTUFYX1NJTkdMRV9EVVJBVElPTiB3aWxsIGJlIHNwbGl0IGludG8gY2h1bmtzIG9mIHRoaXMgc2l6ZVxuICogRGVmYXVsdDogMzAgc2Vjb25kcyAobWluaW11bSAxMClcbiAqL1xuZXhwb3J0IGNvbnN0IEdFTUlOSV9DSFVOS19TRUNPTkRTID0gTWF0aC5tYXgoMTAsIE51bWJlcihwcm9jZXNzLmVudi5HRU1JTklfQ0hVTktfU0VDT05EUyB8fCAzMCkpO1xuXG4vKipcbiAqIE1heGltdW0gZHVyYXRpb24gKGluIHNlY29uZHMpIGZvciBzaW5nbGUtcGFzcyB0cmFuc2NyaXB0aW9uXG4gKiBBdWRpbyBsb25nZXIgdGhhbiB0aGlzIHdpbGwgYmUgYXV0b21hdGljYWxseSBjaHVua2VkXG4gKiBEZWZhdWx0OiA0NSBzZWNvbmRzXG4gKi9cbmV4cG9ydCBjb25zdCBHRU1JTklfU0lOR0xFX1BBU1NfTUFYID0gTnVtYmVyKHByb2Nlc3MuZW52LkdFTUlOSV9TSU5HTEVfUEFTU19NQVggfHwgNDUpO1xuXG4vKipcbiAqIENvbmN1cnJlbmN5IGZvciBwYXJhbGxlbCBjaHVuayB0cmFuc2NyaXB0aW9uXG4gKiBOdW1iZXIgb2YgY2h1bmtzIHRvIHRyYW5zY3JpYmUgc2ltdWx0YW5lb3VzbHlcbiAqIERlZmF1bHQ6IDQgKG1pbmltdW0gMSlcbiAqL1xuZXhwb3J0IGNvbnN0IEdFTUlOSV9UUkFOU0NSSUJFX0NPTkNVUlJFTkNZID0gTWF0aC5tYXgoMSwgTnVtYmVyKHByb2Nlc3MuZW52LkdFTUlOSV9UUkFOU0NSSUJFX0NPTkNVUlJFTkNZIHx8IDQpKTtcblxuLyoqXG4gKiBOdW1iZXIgb2YgcmV0cmllcyBmb3IgZmFpbGVkIHRyYW5zY3JpcHRpb24gYXR0ZW1wdHNcbiAqIERlZmF1bHQ6IDIgKG1pbmltdW0gMClcbiAqL1xuZXhwb3J0IGNvbnN0IEdFTUlOSV9UUkFOU0NSSUJFX1JFVFJJRVMgPSBNYXRoLm1heCgwLCBOdW1iZXIocHJvY2Vzcy5lbnYuR0VNSU5JX1RSQU5TQ1JJQkVfUkVUUklFUyB8fCAyKSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFMzICsgUHJlc2lnbmVkIFVSTCBDb25maWd1cmF0aW9uXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogQVdTIENMSSBwcm9maWxlIHRvIHVzZSBmb3IgUzMgb3BzXG4gKiBEZWZhdWx0OiBCQ1Jvb3QgKHBlciB1c2VyIGluc3RydWN0aW9uKVxuICovXG5leHBvcnQgY29uc3QgUzNfUFJPRklMRSA9IHByb2Nlc3MuZW52LlMzX1BST0ZJTEUgfHwgXCJCQ1Jvb3RcIjtcblxuLyoqXG4gKiBUYXJnZXQgUzMgYnVja2V0IGZvciBhdWRpbyB1cGxvYWRzXG4gKiBJZiB1bnNldCwgdGhlIGFwcCBtYXkgYXR0ZW1wdCB0byBjcmVhdGUgb25lIG9uIHRoZSBmbHlcbiAqL1xuZXhwb3J0IGNvbnN0IFMzX0JVQ0tFVCA9IHByb2Nlc3MuZW52LlMzX0JVQ0tFVDtcblxuLyoqXG4gKiBPcHRpb25hbCBrZXkgcHJlZml4IGZvciB1cGxvYWRlZCBhdWRpbyBvYmplY3RzIChubyBsZWFkaW5nIHNsYXNoKVxuICogRGVmYXVsdDogXCJhdWRpb1wiXG4gKi9cbmV4cG9ydCBjb25zdCBTM19QUkVGSVggPSAocHJvY2Vzcy5lbnYuUzNfUFJFRklYIHx8IFwiYXVkaW9cIikucmVwbGFjZSgvXlxcLyt8XFwvKyQvZywgXCJcIik7XG5cbi8qKlxuICogVFRMIGZvciBwcmVzaWduZWQgVVJMcyBpbiBzZWNvbmRzXG4gKiBEZWZhdWx0OiAzNjAwXG4gKi9cbmV4cG9ydCBjb25zdCBTM19QUkVTSUdOX1RUTF9TRUNPTkRTID0gTWF0aC5tYXgoNjAsIE51bWJlcihwcm9jZXNzLmVudi5TM19QUkVTSUdOX1RUTF9TRUNPTkRTIHx8IDM2MDApKTtcblxuLyoqXG4gKiBXaGV0aGVyIHRvIGRlbGV0ZSBTMyBvYmplY3QgYWZ0ZXIgdHJhbnNjcmlwdGlvbiBjb21wbGV0ZXNcbiAqIERlZmF1bHQ6IHRydWVcbiAqL1xuZXhwb3J0IGNvbnN0IFMzX0RFTEVURV9BRlRFUiA9IFN0cmluZyhwcm9jZXNzLmVudi5TM19ERUxFVEVfQUZURVIgfHwgXCJ0cnVlXCIpLnRvTG93ZXJDYXNlKCkgPT09IFwidHJ1ZVwiO1xuXG4vKipcbiAqIElucHV0IG1vZGUgZm9yIEdlbWluaSBmaWxlIGluZ2VzdGlvblxuICogLSBcInByZXNpZ25lZFwiIOKGkiBVcGxvYWQgdG8gUzMgYW5kIHBhc3MgcHJlc2lnbmVkIFVSTCB0byBHZW1pbmkgKHByZWZlcnJlZClcbiAqIC0gXCJ1cGxvYWRcIiAgICDihpIgVXBsb2FkIGZpbGUgdG8gR2VtaW5pIHZpYSBTREtcbiAqIERlZmF1bHQ6IFwicHJlc2lnbmVkXCJcbiAqL1xuZXhwb3J0IGNvbnN0IEdFTUlOSV9JTlBVVF9NT0RFID0gKHByb2Nlc3MuZW52LkdFTUlOSV9JTlBVVF9NT0RFIHx8IFwicHJlc2lnbmVkXCIpLnRvTG93ZXJDYXNlKCk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEZpbGUgUGF0aHNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBEZWZhdWx0IHBhdGggdG8gdGhlIFBJUCBkcmFmdGluZyBwcm9tcHQgdGVtcGxhdGVcbiAqIERlZmF1bHQ6IHByb21wdHMvZHJhZnQtcGlwLnR4dFxuICovXG5leHBvcnQgY29uc3QgUElQX1BST01QVF9QQVRIID0gcHJvY2Vzcy5lbnYuUElQX1BST01QVF9QQVRIIHx8IFwicHJvbXB0cy9kcmFmdC1waXAudHh0XCI7XG5cbi8qKlxuICogRGVmYXVsdCBwYXRoIHRvIGNvbXBhbnkgcG9saWN5IGd1aWRlbGluZXNcbiAqIERlZmF1bHQ6IHBvbGljaWVzL2d1aWRlbGluZXMudHh0XG4gKi9cbmV4cG9ydCBjb25zdCBHVUlERUxJTkVTX1BBVEggPSBcInBvbGljaWVzL2d1aWRlbGluZXMudHh0XCI7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNlY3VyaXR5IENvbmZpZ3VyYXRpb25cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBNYXhpbXVtIGFsbG93ZWQgcGF0aCBsZW5ndGggaW4gY2hhcmFjdGVyc1xuICogUHJldmVudHMgYnVmZmVyIG92ZXJmbG93IGFuZCBleHRyZW1lbHkgbG9uZyBwYXRoIGF0dGFja3NcbiAqIERlZmF1bHQ6IDQwOTYgKHN0YW5kYXJkIG9uIG1vc3QgVW5peCBzeXN0ZW1zKVxuICovXG5leHBvcnQgY29uc3QgTUFYX1BBVEhfTEVOR1RIID0gNDA5NjtcblxuLyoqXG4gKiBBbGxvd2VkIGF1ZGlvIGZpbGUgZXh0ZW5zaW9ucyBmb3IgdHJhbnNjcmlwdGlvblxuICogV2hpdGVsaXN0IG9mIHNhZmUgYXVkaW8gZm9ybWF0cyBzdXBwb3J0ZWQgYnkgZmZtcGVnL0dlbWluaVxuICpcbiAqIEBzZWN1cml0eSBUaGlzIHdoaXRlbGlzdCBwcmV2ZW50cyB1cGxvYWRpbmcgbWFsaWNpb3VzIGZpbGUgdHlwZXNcbiAqL1xuZXhwb3J0IGNvbnN0IEFMTE9XRURfQVVESU9fRVhURU5TSU9OUyA9IFtcbiAgXCIubXAzXCIsXG4gIFwiLndhdlwiLFxuICBcIi5mbGFjXCIsXG4gIFwiLm00YVwiLFxuICBcIi5hYWNcIixcbiAgXCIub2dnXCIsXG4gIFwiLm9wdXNcIixcbiAgXCIud21hXCIsXG4gIFwiLmFpZmZcIixcbiAgXCIuYXBlXCIsXG4gIFwiLmFjM1wiXG5dIGFzIGNvbnN0O1xuXG4vKipcbiAqIEFsbG93ZWQgZG9jdW1lbnQgdGVtcGxhdGUgZXh0ZW5zaW9uc1xuICogV2hpdGVsaXN0IG9mIHNhZmUgZG9jdW1lbnQgZm9ybWF0cyBmb3IgdGVtcGxhdGVzXG4gKlxuICogQHNlY3VyaXR5IFRoaXMgd2hpdGVsaXN0IHByZXZlbnRzIHRlbXBsYXRlIGluamVjdGlvbiBhdHRhY2tzXG4gKi9cbmV4cG9ydCBjb25zdCBBTExPV0VEX1RFTVBMQVRFX0VYVEVOU0lPTlMgPSBbXG4gIFwiLmRvY3hcIlxuXSBhcyBjb25zdDtcblxuLyoqXG4gKiBBbGxvd2VkIG91dHB1dCBkb2N1bWVudCBleHRlbnNpb25zXG4gKiBXaGl0ZWxpc3Qgb2Ygc2FmZSBkb2N1bWVudCBmb3JtYXRzIGZvciBvdXRwdXRcbiAqL1xuZXhwb3J0IGNvbnN0IEFMTE9XRURfT1VUUFVUX0VYVEVOU0lPTlMgPSBbXG4gIFwiLmRvY3hcIlxuXSBhcyBjb25zdDtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUHJpY2luZyBDb25zdGFudHNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBDbGF1ZGUgQVBJIHByaWNpbmcgYXMgb2YgSmFudWFyeSAyMDI1XG4gKiBTb3VyY2U6IGh0dHBzOi8vd3d3LmFudGhyb3BpYy5jb20vcHJpY2luZ1xuICpcbiAqIFVwZGF0ZSB0aGVzZSB2YWx1ZXMgd2hlbiBwcmljaW5nIGNoYW5nZXMgdG8gbWFpbnRhaW4gYWNjdXJhdGUgY29zdCB0cmFja2luZy5cbiAqL1xuZXhwb3J0IGNvbnN0IFBSSUNJTkcgPSB7XG4gIC8qKlxuICAgKiBDb3N0IHBlciBtaWxsaW9uIGlucHV0IHRva2VucyAoTVRLKVxuICAgKiAkMy4wMCBwZXIgTVRLIGFzIG9mIEphbnVhcnkgMjAyNVxuICAgKi9cbiAgSU5QVVRfUEVSX01USzogMy4wLFxuXG4gIC8qKlxuICAgKiBDb3N0IHBlciBtaWxsaW9uIG91dHB1dCB0b2tlbnMgKE1USylcbiAgICogJDE1LjAwIHBlciBNVEsgYXMgb2YgSmFudWFyeSAyMDI1XG4gICAqL1xuICBPVVRQVVRfUEVSX01USzogMTUuMCxcblxuICAvKipcbiAgICogQ29zdCBwZXIgbWlsbGlvbiB0b2tlbnMgZm9yIGNhY2hlIGNyZWF0aW9uIChwcm9tcHQgY2FjaGluZylcbiAgICogJDMuNzUgcGVyIE1USyBhcyBvZiBKYW51YXJ5IDIwMjVcbiAgICovXG4gIENBQ0hFX0NSRUFUSU9OX1BFUl9NVEs6IDMuNzUsXG5cbiAgLyoqXG4gICAqIENvc3QgcGVyIG1pbGxpb24gdG9rZW5zIGZvciBjYWNoZSByZWFkcyAocHJvbXB0IGNhY2hpbmcpXG4gICAqICQwLjMwIHBlciBNVEsgYXMgb2YgSmFudWFyeSAyMDI1XG4gICAqL1xuICBDQUNIRV9SRUFEX1BFUl9NVEs6IDAuMzBcbn0gYXMgY29uc3Q7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENMSSBBcmd1bWVudCBQYXJzaW5nIFV0aWxpdGllc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFBhcnNlIGNvbW1hbmQtbGluZSBhcmd1bWVudHMgaW4gdGhlIGZvcm1hdCAtLWtleSB2YWx1ZVxuICogUmV0dXJucyBhIE1hcCBvZiBhcmd1bWVudCBrZXlzIHRvIHZhbHVlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDbGlBcmdzKCk6IE1hcDxzdHJpbmcsIHN0cmluZz4ge1xuICBjb25zdCBhcmdzID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcbiAgY29uc3QgdG9rZW5zID0gcHJvY2Vzcy5hcmd2LnNsaWNlKDIpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgdG9rZW4gPSB0b2tlbnNbaV07XG4gICAgaWYgKCF0b2tlbi5zdGFydHNXaXRoKFwiLS1cIikpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHRyaW1tZWQgPSB0b2tlbi5zbGljZSgyKTtcbiAgICBpZiAoIXRyaW1tZWQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IGVxdWFsc0luZGV4ID0gdHJpbW1lZC5pbmRleE9mKFwiPVwiKTtcbiAgICBpZiAoZXF1YWxzSW5kZXggIT09IC0xKSB7XG4gICAgICBjb25zdCBrZXkgPSB0cmltbWVkLnNsaWNlKDAsIGVxdWFsc0luZGV4KTtcbiAgICAgIGNvbnN0IHZhbHVlID0gdHJpbW1lZC5zbGljZShlcXVhbHNJbmRleCArIDEpO1xuICAgICAgYXJncy5zZXQoa2V5LCB2YWx1ZSB8fCBcInRydWVcIik7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBjb25zdCBuZXh0VG9rZW4gPSB0b2tlbnNbaSArIDFdO1xuICAgIGlmICghbmV4dFRva2VuIHx8IG5leHRUb2tlbi5zdGFydHNXaXRoKFwiLS1cIikpIHtcbiAgICAgIGFyZ3Muc2V0KHRyaW1tZWQsIFwidHJ1ZVwiKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGFyZ3Muc2V0KHRyaW1tZWQsIG5leHRUb2tlbik7XG4gICAgaSArPSAxO1xuICB9XG5cbiAgcmV0dXJuIGFyZ3M7XG59XG5cbi8qKlxuICogR2V0IGEgY29uZmlndXJhdGlvbiB2YWx1ZSBmcm9tIENMSSBhcmdzLCBlbnZpcm9ubWVudCwgb3IgZGVmYXVsdFxuICogUHJpb3JpdHk6IENMSSBhcmdzID4gZW52aXJvbm1lbnQgPiBkZWZhdWx0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb25maWdWYWx1ZShcbiAgY2xpQXJnczogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgY2xpS2V5OiBzdHJpbmcsXG4gIGVudktleTogc3RyaW5nLFxuICBkZWZhdWx0VmFsdWU6IHN0cmluZ1xuKTogc3RyaW5nIHtcbiAgcmV0dXJuIGNsaUFyZ3MuZ2V0KGNsaUtleSkgfHwgcHJvY2Vzcy5lbnZbZW52S2V5XSB8fCBkZWZhdWx0VmFsdWU7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFZhbGlkYXRpb25cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBWYWxpZGF0ZSB0aGF0IHJlcXVpcmVkIEFQSSBrZXlzIGFyZSBwcmVzZW50IGFuZCBwcm9wZXJseSBmb3JtYXR0ZWRcbiAqIEByZXR1cm5zIFZhbGlkYXRpb24gcmVzdWx0IHdpdGggbGlzdCBvZiBlcnJvcnMgaWYgYW55XG4gKlxuICogQHNlY3VyaXR5IFZhbGlkYXRlcyBib3RoIHByZXNlbmNlIGFuZCBmb3JtYXQgb2YgQVBJIGtleXMgdG8gY2F0Y2hcbiAqIGNvbmZpZ3VyYXRpb24gZXJyb3JzIGVhcmx5IGJlZm9yZSBtYWtpbmcgQVBJIGNhbGxzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVJlcXVpcmVkQ29uZmlnKCk6IHsgdmFsaWQ6IGJvb2xlYW47IGVycm9yczogc3RyaW5nW10gfSB7XG4gIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcblxuICBpZiAoIUFOVEhST1BJQ19BUElfS0VZKSB7XG4gICAgZXJyb3JzLnB1c2goXCJNaXNzaW5nIEFOVEhST1BJQ19BUElfS0VZIGluIGVudmlyb25tZW50XCIpO1xuICB9IGVsc2UgaWYgKCFpc1ZhbGlkQW50aHJvcGljS2V5Rm9ybWF0KEFOVEhST1BJQ19BUElfS0VZKSkge1xuICAgIGVycm9ycy5wdXNoKFxuICAgICAgXCJJbnZhbGlkIEFOVEhST1BJQ19BUElfS0VZIGZvcm1hdC4gRXhwZWN0ZWQgZm9ybWF0OiBzay1hbnQtYXBpMDMtLi4uIChhdCBsZWFzdCA0MCBjaGFyYWN0ZXJzKS4gXCIgK1xuICAgICAgXCJQbGVhc2UgY2hlY2sgeW91ciBBUEkga2V5IGZyb20gaHR0cHM6Ly9jb25zb2xlLmFudGhyb3BpYy5jb20vXCJcbiAgICApO1xuICB9XG5cbiAgaWYgKCFHRU1JTklfQVBJX0tFWSkge1xuICAgIGVycm9ycy5wdXNoKFwiTWlzc2luZyBHRU1JTklfQVBJX0tFWSBpbiBlbnZpcm9ubWVudFwiKTtcbiAgfSBlbHNlIGlmICghaXNWYWxpZEdlbWluaUtleUZvcm1hdChHRU1JTklfQVBJX0tFWSkpIHtcbiAgICBlcnJvcnMucHVzaChcbiAgICAgIFwiSW52YWxpZCBHRU1JTklfQVBJX0tFWSBmb3JtYXQuIEV4cGVjdGVkIGZvcm1hdDogQUl6YS4uLiAoYXQgbGVhc3QgMzUgY2hhcmFjdGVycykuIFwiICtcbiAgICAgIFwiUGxlYXNlIGNoZWNrIHlvdXIgQVBJIGtleSBmcm9tIGh0dHBzOi8vYWlzdHVkaW8uZ29vZ2xlLmNvbS9hcHAvYXBpa2V5XCJcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB2YWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcbiAgICBlcnJvcnNcbiAgfTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ29uZmlndXJhdGlvbiBTdW1tYXJ5XG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogR2V0IGEgc3VtbWFyeSBvZiB0aGUgY3VycmVudCBjb25maWd1cmF0aW9uXG4gKiBVc2VmdWwgZm9yIGRlYnVnZ2luZyBhbmQgbG9nZ2luZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uZmlnU3VtbWFyeSgpIHtcbiAgcmV0dXJuIHtcbiAgICBtb2RlbHM6IHtcbiAgICAgIGNsYXVkZTogTU9ERUxTLkNMQVVERV9TT05ORVQsXG4gICAgICBjbGF1ZGVQaXA6IE1PREVMUy5DTEFVREVfUElQLFxuICAgICAgZ2VtaW5pOiBNT0RFTFMuR0VNSU5JX1BST1xuICAgIH0sXG4gICAgcGlwZWxpbmU6IHtcbiAgICAgIG1heFJldmlld1JvdW5kczogTUFYX1JFVklFV19ST1VORFMsXG4gICAgICBtYXhUdXJuczogTUFYX1RVUk5TXG4gICAgfSxcbiAgICB0cmFuc2NyaXB0aW9uOiB7XG4gICAgICBjaHVua1NlY29uZHM6IEdFTUlOSV9DSFVOS19TRUNPTkRTLFxuICAgICAgc2luZ2xlUGFzc01heDogR0VNSU5JX1NJTkdMRV9QQVNTX01BWCxcbiAgICAgIGNvbmN1cnJlbmN5OiBHRU1JTklfVFJBTlNDUklCRV9DT05DVVJSRU5DWSxcbiAgICAgIHJldHJpZXM6IEdFTUlOSV9UUkFOU0NSSUJFX1JFVFJJRVNcbiAgICB9LFxuICAgIHBpcEdlbmVyYXRpb246IHtcbiAgICAgIHRlbXBlcmF0dXJlOiBQSVBfVEVNUEVSQVRVUkUsXG4gICAgICBtYXhPdXRwdXRUb2tlbnM6IFBJUF9NQVhfT1VUUFVUX1RPS0VOUyxcbiAgICAgIHByb21wdFBhdGg6IFBJUF9QUk9NUFRfUEFUSFxuICAgIH0sXG4gICAgcGF0aHM6IHtcbiAgICAgIHBpcFByb21wdDogUElQX1BST01QVF9QQVRILFxuICAgICAgZ3VpZGVsaW5lczogR1VJREVMSU5FU19QQVRIXG4gICAgfSxcbiAgICBwcmljaW5nOiBQUklDSU5HXG4gIH07XG59XG4iXSwibmFtZXMiOlsiQU5USFJPUElDX0FQSV9LRVkiLCJwcm9jZXNzIiwiZW52IiwiR0VNSU5JX0FQSV9LRVkiLCJpc1ZhbGlkQW50aHJvcGljS2V5Rm9ybWF0Iiwia2V5Iiwic3RhcnRzV2l0aCIsImxlbmd0aCIsImlzVmFsaWRHZW1pbmlLZXlGb3JtYXQiLCJNT0RFTFMiLCJDTEFVREVfU09OTkVUIiwiQ0xBVURFX01PREVMX0lEIiwiQ0xBVURFX1BJUCIsIkNMQVVERV9QSVBfTU9ERUxfSUQiLCJHRU1JTklfUFJPIiwiR0VNSU5JX1RSQU5TQ1JJQkVfTU9ERUwiLCJQSVBfVEVNUEVSQVRVUkUiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsIlBJUF9NQVhfT1VUUFVUX1RPS0VOUyIsIk1BWF9SRVZJRVdfUk9VTkRTIiwiTUFYX1RVUk5TIiwiTE9HX0xFVkVMIiwiTE9HX1BSRVRUWSIsIkdFTUlOSV9DSFVOS19TRUNPTkRTIiwiTWF0aCIsIm1heCIsIkdFTUlOSV9TSU5HTEVfUEFTU19NQVgiLCJHRU1JTklfVFJBTlNDUklCRV9DT05DVVJSRU5DWSIsIkdFTUlOSV9UUkFOU0NSSUJFX1JFVFJJRVMiLCJTM19QUk9GSUxFIiwiUzNfQlVDS0VUIiwiUzNfUFJFRklYIiwicmVwbGFjZSIsIlMzX1BSRVNJR05fVFRMX1NFQ09ORFMiLCJTM19ERUxFVEVfQUZURVIiLCJTdHJpbmciLCJ0b0xvd2VyQ2FzZSIsIkdFTUlOSV9JTlBVVF9NT0RFIiwiUElQX1BST01QVF9QQVRIIiwiR1VJREVMSU5FU19QQVRIIiwiTUFYX1BBVEhfTEVOR1RIIiwiQUxMT1dFRF9BVURJT19FWFRFTlNJT05TIiwiQUxMT1dFRF9URU1QTEFURV9FWFRFTlNJT05TIiwiQUxMT1dFRF9PVVRQVVRfRVhURU5TSU9OUyIsIlBSSUNJTkciLCJJTlBVVF9QRVJfTVRLIiwiT1VUUFVUX1BFUl9NVEsiLCJDQUNIRV9DUkVBVElPTl9QRVJfTVRLIiwiQ0FDSEVfUkVBRF9QRVJfTVRLIiwicGFyc2VDbGlBcmdzIiwiYXJncyIsIk1hcCIsInRva2VucyIsImFyZ3YiLCJzbGljZSIsImkiLCJ0b2tlbiIsInRyaW1tZWQiLCJlcXVhbHNJbmRleCIsImluZGV4T2YiLCJ2YWx1ZSIsInNldCIsIm5leHRUb2tlbiIsImdldENvbmZpZ1ZhbHVlIiwiY2xpQXJncyIsImNsaUtleSIsImVudktleSIsImRlZmF1bHRWYWx1ZSIsImdldCIsInZhbGlkYXRlUmVxdWlyZWRDb25maWciLCJlcnJvcnMiLCJwdXNoIiwidmFsaWQiLCJnZXRDb25maWdTdW1tYXJ5IiwibW9kZWxzIiwiY2xhdWRlIiwiY2xhdWRlUGlwIiwiZ2VtaW5pIiwicGlwZWxpbmUiLCJtYXhSZXZpZXdSb3VuZHMiLCJtYXhUdXJucyIsInRyYW5zY3JpcHRpb24iLCJjaHVua1NlY29uZHMiLCJzaW5nbGVQYXNzTWF4IiwiY29uY3VycmVuY3kiLCJyZXRyaWVzIiwicGlwR2VuZXJhdGlvbiIsInRlbXBlcmF0dXJlIiwibWF4T3V0cHV0VG9rZW5zIiwicHJvbXB0UGF0aCIsInBhdGhzIiwicGlwUHJvbXB0IiwiZ3VpZGVsaW5lcyIsInByaWNpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../src/config.ts\n");

/***/ }),

/***/ "(rsc)/../../src/errors/BaseError.ts":
/*!*************************************!*\
  !*** ../../src/errors/BaseError.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppError: () => (/* binding */ AppError)\n/* harmony export */ });\n/**\n * Base error class for all application errors.\n * Extends the native Error class with additional metadata for better error handling.\n */ /**\n * Base application error class.\n * All custom errors in the application should extend this class.\n */ class AppError extends Error {\n    /**\n   * Creates a new AppError instance.\n   *\n   * @param message - Human-readable error message\n   * @param code - Unique error code for identifying error types\n   * @param statusCode - HTTP-style status code (default: 500)\n   * @param metadata - Additional context about the error\n   * @param isOperational - Whether this is an expected/recoverable error (default: true)\n   */ constructor(message, code, statusCode = 500, metadata, isOperational = true){\n        super(message);\n        // Maintains proper stack trace for where our error was thrown (only available on V8)\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        }\n        this.name = this.constructor.name;\n        this.code = code;\n        this.statusCode = statusCode;\n        this.isOperational = isOperational;\n        this.metadata = metadata;\n        // Set the prototype explicitly to support instanceof checks\n        Object.setPrototypeOf(this, new.target.prototype);\n    }\n    /**\n   * Serializes the error to a JSON-safe object.\n   * Useful for logging and API responses.\n   *\n   * @returns JSON-serializable error object\n   */ toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            code: this.code,\n            statusCode: this.statusCode,\n            isOperational: this.isOperational,\n            metadata: this.metadata,\n            stack: this.stack\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vc3JjL2Vycm9ycy9CYXNlRXJyb3IudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7Q0FHQyxHQU1EOzs7Q0FHQyxHQUNNLE1BQU1BLGlCQUFpQkM7SUF1QjVCOzs7Ozs7OztHQVFDLEdBQ0RDLFlBQ0VDLE9BQWUsRUFDZkMsSUFBWSxFQUNaQyxhQUFxQixHQUFHLEVBQ3hCQyxRQUF3QixFQUN4QkMsZ0JBQXlCLElBQUksQ0FDN0I7UUFDQSxLQUFLLENBQUNKO1FBRU4scUZBQXFGO1FBQ3JGLElBQUlGLE1BQU1PLGlCQUFpQixFQUFFO1lBQzNCUCxNQUFNTyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDTixXQUFXO1FBQ2hEO1FBRUEsSUFBSSxDQUFDTyxJQUFJLEdBQUcsSUFBSSxDQUFDUCxXQUFXLENBQUNPLElBQUk7UUFDakMsSUFBSSxDQUFDTCxJQUFJLEdBQUdBO1FBQ1osSUFBSSxDQUFDQyxVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0UsYUFBYSxHQUFHQTtRQUNyQixJQUFJLENBQUNELFFBQVEsR0FBR0E7UUFFaEIsNERBQTREO1FBQzVESSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVdDLFNBQVM7SUFDbEQ7SUFFQTs7Ozs7R0FLQyxHQUNEQyxTQUFrQztRQUNoQyxPQUFPO1lBQ0xKLE1BQU0sSUFBSSxDQUFDQSxJQUFJO1lBQ2ZOLFNBQVMsSUFBSSxDQUFDQSxPQUFPO1lBQ3JCQyxNQUFNLElBQUksQ0FBQ0EsSUFBSTtZQUNmQyxZQUFZLElBQUksQ0FBQ0EsVUFBVTtZQUMzQkUsZUFBZSxJQUFJLENBQUNBLGFBQWE7WUFDakNELFVBQVUsSUFBSSxDQUFDQSxRQUFRO1lBQ3ZCUSxPQUFPLElBQUksQ0FBQ0EsS0FBSztRQUNuQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AcGlwL3VpLy4uLy4uL3NyYy9lcnJvcnMvQmFzZUVycm9yLnRzP2FlZGMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBCYXNlIGVycm9yIGNsYXNzIGZvciBhbGwgYXBwbGljYXRpb24gZXJyb3JzLlxuICogRXh0ZW5kcyB0aGUgbmF0aXZlIEVycm9yIGNsYXNzIHdpdGggYWRkaXRpb25hbCBtZXRhZGF0YSBmb3IgYmV0dGVyIGVycm9yIGhhbmRsaW5nLlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgRXJyb3JNZXRhZGF0YSB7XG4gIFtrZXk6IHN0cmluZ106IHVua25vd247XG59XG5cbi8qKlxuICogQmFzZSBhcHBsaWNhdGlvbiBlcnJvciBjbGFzcy5cbiAqIEFsbCBjdXN0b20gZXJyb3JzIGluIHRoZSBhcHBsaWNhdGlvbiBzaG91bGQgZXh0ZW5kIHRoaXMgY2xhc3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBBcHBFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgLyoqXG4gICAqIFVuaXF1ZSBlcnJvciBjb2RlIGZvciBpZGVudGlmeWluZyBlcnJvciB0eXBlcy5cbiAgICovXG4gIHB1YmxpYyByZWFkb25seSBjb2RlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEhUVFAtc3R5bGUgc3RhdHVzIGNvZGUgKGUuZy4sIDQwMCwgNTAwKS5cbiAgICovXG4gIHB1YmxpYyByZWFkb25seSBzdGF0dXNDb2RlOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEluZGljYXRlcyBpZiB0aGlzIGlzIGFuIG9wZXJhdGlvbmFsIGVycm9yIChleHBlY3RlZC9yZWNvdmVyYWJsZSkgdnMgcHJvZ3JhbW1pbmcgZXJyb3IuXG4gICAqIE9wZXJhdGlvbmFsIGVycm9ycyAodHJ1ZSk6IG5ldHdvcmsgZmFpbHVyZXMsIHZhbGlkYXRpb24gZXJyb3JzLCBtaXNzaW5nIGZpbGVzLlxuICAgKiBQcm9ncmFtbWluZyBlcnJvcnMgKGZhbHNlKTogbnVsbCByZWZlcmVuY2UgZXJyb3JzLCB0eXBlIGVycm9ycywgbG9naWMgYnVncy5cbiAgICovXG4gIHB1YmxpYyByZWFkb25seSBpc09wZXJhdGlvbmFsOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBBZGRpdGlvbmFsIG1ldGFkYXRhIGFib3V0IHRoZSBlcnJvci5cbiAgICovXG4gIHB1YmxpYyByZWFkb25seSBtZXRhZGF0YT86IEVycm9yTWV0YWRhdGE7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgQXBwRXJyb3IgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSBtZXNzYWdlIC0gSHVtYW4tcmVhZGFibGUgZXJyb3IgbWVzc2FnZVxuICAgKiBAcGFyYW0gY29kZSAtIFVuaXF1ZSBlcnJvciBjb2RlIGZvciBpZGVudGlmeWluZyBlcnJvciB0eXBlc1xuICAgKiBAcGFyYW0gc3RhdHVzQ29kZSAtIEhUVFAtc3R5bGUgc3RhdHVzIGNvZGUgKGRlZmF1bHQ6IDUwMClcbiAgICogQHBhcmFtIG1ldGFkYXRhIC0gQWRkaXRpb25hbCBjb250ZXh0IGFib3V0IHRoZSBlcnJvclxuICAgKiBAcGFyYW0gaXNPcGVyYXRpb25hbCAtIFdoZXRoZXIgdGhpcyBpcyBhbiBleHBlY3RlZC9yZWNvdmVyYWJsZSBlcnJvciAoZGVmYXVsdDogdHJ1ZSlcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBjb2RlOiBzdHJpbmcsXG4gICAgc3RhdHVzQ29kZTogbnVtYmVyID0gNTAwLFxuICAgIG1ldGFkYXRhPzogRXJyb3JNZXRhZGF0YSxcbiAgICBpc09wZXJhdGlvbmFsOiBib29sZWFuID0gdHJ1ZVxuICApIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcblxuICAgIC8vIE1haW50YWlucyBwcm9wZXIgc3RhY2sgdHJhY2UgZm9yIHdoZXJlIG91ciBlcnJvciB3YXMgdGhyb3duIChvbmx5IGF2YWlsYWJsZSBvbiBWOClcbiAgICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgIH1cblxuICAgIHRoaXMubmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgIHRoaXMuc3RhdHVzQ29kZSA9IHN0YXR1c0NvZGU7XG4gICAgdGhpcy5pc09wZXJhdGlvbmFsID0gaXNPcGVyYXRpb25hbDtcbiAgICB0aGlzLm1ldGFkYXRhID0gbWV0YWRhdGE7XG5cbiAgICAvLyBTZXQgdGhlIHByb3RvdHlwZSBleHBsaWNpdGx5IHRvIHN1cHBvcnQgaW5zdGFuY2VvZiBjaGVja3NcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlcmlhbGl6ZXMgdGhlIGVycm9yIHRvIGEgSlNPTi1zYWZlIG9iamVjdC5cbiAgICogVXNlZnVsIGZvciBsb2dnaW5nIGFuZCBBUEkgcmVzcG9uc2VzLlxuICAgKlxuICAgKiBAcmV0dXJucyBKU09OLXNlcmlhbGl6YWJsZSBlcnJvciBvYmplY3RcbiAgICovXG4gIHRvSlNPTigpOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZSxcbiAgICAgIGNvZGU6IHRoaXMuY29kZSxcbiAgICAgIHN0YXR1c0NvZGU6IHRoaXMuc3RhdHVzQ29kZSxcbiAgICAgIGlzT3BlcmF0aW9uYWw6IHRoaXMuaXNPcGVyYXRpb25hbCxcbiAgICAgIG1ldGFkYXRhOiB0aGlzLm1ldGFkYXRhLFxuICAgICAgc3RhY2s6IHRoaXMuc3RhY2tcbiAgICB9O1xuICB9XG59XG4iXSwibmFtZXMiOlsiQXBwRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsImNvZGUiLCJzdGF0dXNDb2RlIiwibWV0YWRhdGEiLCJpc09wZXJhdGlvbmFsIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJuYW1lIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJ0b0pTT04iLCJzdGFjayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../src/errors/BaseError.ts\n");

/***/ }),

/***/ "(rsc)/../../src/errors/index.ts":
/*!*********************************!*\
  !*** ../../src/errors/index.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppError: () => (/* reexport safe */ _BaseError_js__WEBPACK_IMPORTED_MODULE_0__.AppError),\n/* harmony export */   AudioValidationError: () => (/* binding */ AudioValidationError),\n/* harmony export */   ConfigurationError: () => (/* binding */ ConfigurationError),\n/* harmony export */   DocumentExportError: () => (/* binding */ DocumentExportError),\n/* harmony export */   PIPGenerationError: () => (/* binding */ PIPGenerationError),\n/* harmony export */   TranscriptionError: () => (/* binding */ TranscriptionError)\n/* harmony export */ });\n/* harmony import */ var _BaseError_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseError.js */ \"(rsc)/../../src/errors/BaseError.ts\");\n/**\n * Custom error classes for the PIP Agent application.\n * All errors extend from AppError for consistent error handling.\n */ \n/**\n * Error thrown when audio file validation fails.\n * Used for: invalid formats, corrupted files, missing audio streams, zero duration.\n */ class AudioValidationError extends _BaseError_js__WEBPACK_IMPORTED_MODULE_0__.AppError {\n    constructor(message, metadata){\n        super(message, \"AUDIO_VALIDATION_ERROR\", 400, metadata, true);\n    }\n}\n/**\n * Error thrown when transcription fails.\n * Used for: Gemini API failures, invalid responses, file upload errors.\n */ class TranscriptionError extends _BaseError_js__WEBPACK_IMPORTED_MODULE_0__.AppError {\n    constructor(message, metadata){\n        super(message, \"TRANSCRIPTION_ERROR\", 500, metadata, true);\n    }\n}\n/**\n * Error thrown when PIP generation fails.\n * Used for: Claude API failures, empty drafts, prompt errors.\n */ class PIPGenerationError extends _BaseError_js__WEBPACK_IMPORTED_MODULE_0__.AppError {\n    constructor(message, metadata){\n        super(message, \"PIP_GENERATION_ERROR\", 500, metadata, true);\n    }\n}\n/**\n * Error thrown when DOCX export fails.\n * Used for: template rendering errors, file write failures, path issues.\n */ class DocumentExportError extends _BaseError_js__WEBPACK_IMPORTED_MODULE_0__.AppError {\n    constructor(message, metadata){\n        super(message, \"DOCUMENT_EXPORT_ERROR\", 500, metadata, true);\n    }\n}\n/**\n * Error thrown when configuration is missing or invalid.\n * Used for: missing API keys, invalid config values, missing required files.\n */ class ConfigurationError extends _BaseError_js__WEBPACK_IMPORTED_MODULE_0__.AppError {\n    constructor(message, metadata){\n        super(message, \"CONFIGURATION_ERROR\", 400, metadata, true);\n    }\n}\n// Re-export AppError for convenience\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vc3JjL2Vycm9ycy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7OztDQUdDLEdBRXdEO0FBRXpEOzs7Q0FHQyxHQUNNLE1BQU1DLDZCQUE2QkQsbURBQVFBO0lBQ2hERSxZQUFZQyxPQUFlLEVBQUVDLFFBQTRDLENBQUU7UUFDekUsS0FBSyxDQUNIRCxTQUNBLDBCQUNBLEtBQ0FDLFVBQ0E7SUFFSjtBQUNGO0FBRUE7OztDQUdDLEdBQ00sTUFBTUMsMkJBQTJCTCxtREFBUUE7SUFDOUNFLFlBQVlDLE9BQWUsRUFBRUMsUUFBd0IsQ0FBRTtRQUNyRCxLQUFLLENBQ0hELFNBQ0EsdUJBQ0EsS0FDQUMsVUFDQTtJQUVKO0FBQ0Y7QUFFQTs7O0NBR0MsR0FDTSxNQUFNRSwyQkFBMkJOLG1EQUFRQTtJQUM5Q0UsWUFBWUMsT0FBZSxFQUFFQyxRQUF3QixDQUFFO1FBQ3JELEtBQUssQ0FDSEQsU0FDQSx3QkFDQSxLQUNBQyxVQUNBO0lBRUo7QUFDRjtBQUVBOzs7Q0FHQyxHQUNNLE1BQU1HLDRCQUE0QlAsbURBQVFBO0lBQy9DRSxZQUFZQyxPQUFlLEVBQUVDLFFBQXdCLENBQUU7UUFDckQsS0FBSyxDQUNIRCxTQUNBLHlCQUNBLEtBQ0FDLFVBQ0E7SUFFSjtBQUNGO0FBRUE7OztDQUdDLEdBQ00sTUFBTUksMkJBQTJCUixtREFBUUE7SUFDOUNFLFlBQVlDLE9BQWUsRUFBRUMsUUFBd0IsQ0FBRTtRQUNyRCxLQUFLLENBQ0hELFNBQ0EsdUJBQ0EsS0FDQUMsVUFDQTtJQUVKO0FBQ0Y7QUFFQSxxQ0FBcUM7QUFDSyIsInNvdXJjZXMiOlsid2VicGFjazovL0BwaXAvdWkvLi4vLi4vc3JjL2Vycm9ycy9pbmRleC50cz81YmZmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3VzdG9tIGVycm9yIGNsYXNzZXMgZm9yIHRoZSBQSVAgQWdlbnQgYXBwbGljYXRpb24uXG4gKiBBbGwgZXJyb3JzIGV4dGVuZCBmcm9tIEFwcEVycm9yIGZvciBjb25zaXN0ZW50IGVycm9yIGhhbmRsaW5nLlxuICovXG5cbmltcG9ydCB7IEFwcEVycm9yLCBFcnJvck1ldGFkYXRhIH0gZnJvbSBcIi4vQmFzZUVycm9yLmpzXCI7XG5cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYXVkaW8gZmlsZSB2YWxpZGF0aW9uIGZhaWxzLlxuICogVXNlZCBmb3I6IGludmFsaWQgZm9ybWF0cywgY29ycnVwdGVkIGZpbGVzLCBtaXNzaW5nIGF1ZGlvIHN0cmVhbXMsIHplcm8gZHVyYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBBdWRpb1ZhbGlkYXRpb25FcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBtZXRhZGF0YT86IEVycm9yTWV0YWRhdGEgJiB7IGhpbnQ/OiBzdHJpbmcgfSkge1xuICAgIHN1cGVyKFxuICAgICAgbWVzc2FnZSxcbiAgICAgIFwiQVVESU9fVkFMSURBVElPTl9FUlJPUlwiLFxuICAgICAgNDAwLFxuICAgICAgbWV0YWRhdGEsXG4gICAgICB0cnVlXG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIHRyYW5zY3JpcHRpb24gZmFpbHMuXG4gKiBVc2VkIGZvcjogR2VtaW5pIEFQSSBmYWlsdXJlcywgaW52YWxpZCByZXNwb25zZXMsIGZpbGUgdXBsb2FkIGVycm9ycy5cbiAqL1xuZXhwb3J0IGNsYXNzIFRyYW5zY3JpcHRpb25FcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBtZXRhZGF0YT86IEVycm9yTWV0YWRhdGEpIHtcbiAgICBzdXBlcihcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBcIlRSQU5TQ1JJUFRJT05fRVJST1JcIixcbiAgICAgIDUwMCxcbiAgICAgIG1ldGFkYXRhLFxuICAgICAgdHJ1ZVxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBQSVAgZ2VuZXJhdGlvbiBmYWlscy5cbiAqIFVzZWQgZm9yOiBDbGF1ZGUgQVBJIGZhaWx1cmVzLCBlbXB0eSBkcmFmdHMsIHByb21wdCBlcnJvcnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBQSVBHZW5lcmF0aW9uRXJyb3IgZXh0ZW5kcyBBcHBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgbWV0YWRhdGE/OiBFcnJvck1ldGFkYXRhKSB7XG4gICAgc3VwZXIoXG4gICAgICBtZXNzYWdlLFxuICAgICAgXCJQSVBfR0VORVJBVElPTl9FUlJPUlwiLFxuICAgICAgNTAwLFxuICAgICAgbWV0YWRhdGEsXG4gICAgICB0cnVlXG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIERPQ1ggZXhwb3J0IGZhaWxzLlxuICogVXNlZCBmb3I6IHRlbXBsYXRlIHJlbmRlcmluZyBlcnJvcnMsIGZpbGUgd3JpdGUgZmFpbHVyZXMsIHBhdGggaXNzdWVzLlxuICovXG5leHBvcnQgY2xhc3MgRG9jdW1lbnRFeHBvcnRFcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBtZXRhZGF0YT86IEVycm9yTWV0YWRhdGEpIHtcbiAgICBzdXBlcihcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBcIkRPQ1VNRU5UX0VYUE9SVF9FUlJPUlwiLFxuICAgICAgNTAwLFxuICAgICAgbWV0YWRhdGEsXG4gICAgICB0cnVlXG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGNvbmZpZ3VyYXRpb24gaXMgbWlzc2luZyBvciBpbnZhbGlkLlxuICogVXNlZCBmb3I6IG1pc3NpbmcgQVBJIGtleXMsIGludmFsaWQgY29uZmlnIHZhbHVlcywgbWlzc2luZyByZXF1aXJlZCBmaWxlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbmZpZ3VyYXRpb25FcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBtZXRhZGF0YT86IEVycm9yTWV0YWRhdGEpIHtcbiAgICBzdXBlcihcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBcIkNPTkZJR1VSQVRJT05fRVJST1JcIixcbiAgICAgIDQwMCxcbiAgICAgIG1ldGFkYXRhLFxuICAgICAgdHJ1ZVxuICAgICk7XG4gIH1cbn1cblxuLy8gUmUtZXhwb3J0IEFwcEVycm9yIGZvciBjb252ZW5pZW5jZVxuZXhwb3J0IHsgQXBwRXJyb3IgfSBmcm9tIFwiLi9CYXNlRXJyb3IuanNcIjtcbiJdLCJuYW1lcyI6WyJBcHBFcnJvciIsIkF1ZGlvVmFsaWRhdGlvbkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwibWV0YWRhdGEiLCJUcmFuc2NyaXB0aW9uRXJyb3IiLCJQSVBHZW5lcmF0aW9uRXJyb3IiLCJEb2N1bWVudEV4cG9ydEVycm9yIiwiQ29uZmlndXJhdGlvbkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../src/errors/index.ts\n");

/***/ }),

/***/ "(rsc)/../../src/mcp/docxExporter.ts":
/*!*************************************!*\
  !*** ../../src/mcp/docxExporter.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   docxExporter: () => (/* binding */ docxExporter)\n/* harmony export */ });\n/* harmony import */ var _anthropic_ai_claude_agent_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @anthropic-ai/claude-agent-sdk */ \"(rsc)/../../node_modules/@anthropic-ai/claude-agent-sdk/sdk.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! zod */ \"(rsc)/../../node_modules/zod/v3/types.js\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var pizzip__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pizzip */ \"(rsc)/../../node_modules/pizzip/js/index.js\");\n/* harmony import */ var pizzip__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(pizzip__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var docxtemplater__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! docxtemplater */ \"(rsc)/../../node_modules/docxtemplater/js/docxtemplater.js\");\n/* harmony import */ var docxtemplater__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(docxtemplater__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _utils_sanitize_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/sanitize.js */ \"(rsc)/../../src/utils/sanitize.ts\");\n/* harmony import */ var _utils_safe_stringify_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/safe-stringify.js */ \"(rsc)/../../src/utils/safe-stringify.ts\");\n/* harmony import */ var _utils_mcp_helpers_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/mcp-helpers.js */ \"(rsc)/../../src/utils/mcp-helpers.ts\");\n/* harmony import */ var _utils_validation_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/validation.js */ \"(rsc)/../../src/utils/validation.ts\");\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../errors/index.js */ \"(rsc)/../../src/errors/index.ts\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/logger.js */ \"(rsc)/../../src/utils/logger.ts\");\n/* harmony import */ var _types_index_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../types/index.js */ \"(rsc)/../../src/types/index.ts\");\n/* harmony import */ var _services_index_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../services/index.js */ \"(rsc)/../../src/services/index.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst logger = (0,_utils_logger_js__WEBPACK_IMPORTED_MODULE_9__.createChildLogger)(\"docx-exporter\");\n// Create filesystem service once at module level for reuse\nconst fsService = (0,_services_index_js__WEBPACK_IMPORTED_MODULE_11__.createFileSystemService)();\nconst docxExporter = (0,_anthropic_ai_claude_agent_sdk__WEBPACK_IMPORTED_MODULE_0__.createSdkMcpServer)({\n    name: \"docx-exporter\",\n    version: \"0.1.0\",\n    tools: [\n        (0,_anthropic_ai_claude_agent_sdk__WEBPACK_IMPORTED_MODULE_0__.tool)(\"render_docx\", \"Render a PIP text body into a DOCX using a template with {pip_body}. If template is missing, generate a fallback DOCX.\", {\n            templatePath: zod__WEBPACK_IMPORTED_MODULE_12__.string(),\n            outputPath: zod__WEBPACK_IMPORTED_MODULE_12__.string(),\n            body: zod__WEBPACK_IMPORTED_MODULE_12__.string(),\n            language: zod__WEBPACK_IMPORTED_MODULE_12__.string().default(\"en\"),\n            title: zod__WEBPACK_IMPORTED_MODULE_12__.string().default(\"Performance Improvement Plan\")\n        }, async ({ templatePath, outputPath, body, language, title })=>{\n            let safeOutputPath = outputPath; // Default fallback for error reporting\n            try {\n                const validationResult = (0,_utils_validation_js__WEBPACK_IMPORTED_MODULE_7__.validateOutputPath)(outputPath, {\n                    extensions: [\n                        \".docx\"\n                    ],\n                    allowOverwrite: true\n                });\n                if (!validationResult.valid || !validationResult.sanitizedPath) {\n                    throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_8__.DocumentExportError(`Invalid output path: ${validationResult.error || \"Path validation failed\"}`);\n                }\n                safeOutputPath = validationResult.sanitizedPath;\n                if (fsService.existsSync(templatePath)) {\n                    const content = await fsService.readFile(templatePath);\n                    const zip = new (pizzip__WEBPACK_IMPORTED_MODULE_2___default())(content);\n                    const doc = new (docxtemplater__WEBPACK_IMPORTED_MODULE_3___default())(zip, {\n                        paragraphLoop: true,\n                        linebreaks: true\n                    });\n                    doc.render({\n                        pip_body: body,\n                        language,\n                        title,\n                        date: new Date().toISOString().slice(0, 10)\n                    });\n                    const buf = doc.getZip().generate({\n                        type: \"nodebuffer\"\n                    });\n                    // Parallelize directory creation and file writing preparation\n                    const outputDir = node_path__WEBPACK_IMPORTED_MODULE_1__.dirname(safeOutputPath);\n                    await fsService.mkdir(outputDir, {\n                        recursive: true\n                    });\n                    logger.info({\n                        outputPath: safeOutputPath,\n                        usingTemplate: true\n                    }, `[docx-exporter] writing template-based docx to ${safeOutputPath}`);\n                    await fsService.writeFile(safeOutputPath, buf);\n                    return (0,_utils_mcp_helpers_js__WEBPACK_IMPORTED_MODULE_6__.mcpSuccess)({\n                        outputPath: safeOutputPath\n                    });\n                } else {\n                    // Fallback: generate a docx without a template\n                    const importedDocx = await __webpack_require__.e(/*! import() */ \"vendor-chunks/docx\").then(__webpack_require__.bind(__webpack_require__, /*! docx */ \"(rsc)/../../node_modules/docx/build/index.mjs\"));\n                    if (!(0,_types_index_js__WEBPACK_IMPORTED_MODULE_10__.isDocxImport)(importedDocx)) {\n                        throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_8__.DocumentExportError(\"docx module did not expose expected API\");\n                    }\n                    const { Document, Packer, Paragraph, HeadingLevel, TextRun } = importedDocx;\n                    const paragraphs = [];\n                    paragraphs.push(new Paragraph({\n                        text: title,\n                        heading: HeadingLevel.HEADING_1\n                    }));\n                    paragraphs.push(new Paragraph({\n                        text: `Language: ${language}    Date: ${new Date().toISOString().slice(0, 10)}`\n                    }));\n                    paragraphs.push(new Paragraph({\n                        text: \"\"\n                    }));\n                    for (const line of body.split(/\\r?\\n/)){\n                        if (!line.trim()) {\n                            paragraphs.push(new Paragraph({\n                                text: \"\"\n                            }));\n                            continue;\n                        }\n                        paragraphs.push(new Paragraph({\n                            children: [\n                                new TextRun({\n                                    text: line\n                                })\n                            ]\n                        }));\n                    }\n                    const doc = new Document({\n                        sections: [\n                            {\n                                properties: {},\n                                children: paragraphs\n                            }\n                        ]\n                    });\n                    // Parallelize buffer generation and directory creation\n                    const outputDir = node_path__WEBPACK_IMPORTED_MODULE_1__.dirname(safeOutputPath);\n                    const [buf] = await Promise.all([\n                        Packer.toBuffer(doc),\n                        fsService.mkdir(outputDir, {\n                            recursive: true\n                        })\n                    ]);\n                    logger.info({\n                        outputPath: safeOutputPath,\n                        usingTemplate: false\n                    }, `[docx-exporter] writing fallback docx to ${safeOutputPath}`);\n                    await fsService.writeFile(safeOutputPath, buf);\n                    return (0,_utils_mcp_helpers_js__WEBPACK_IMPORTED_MODULE_6__.mcpSuccess)({\n                        outputPath: safeOutputPath,\n                        note: \"Generated fallback (no template found)\"\n                    });\n                }\n            } catch (error) {\n                // Check for custom errors first\n                if (error instanceof _errors_index_js__WEBPACK_IMPORTED_MODULE_8__.DocumentExportError) {\n                    return (0,_utils_safe_stringify_js__WEBPACK_IMPORTED_MODULE_5__.mcpError)(error.message, error.metadata);\n                }\n                // Wrap other errors in DocumentExportError\n                const sanitized = (0,_utils_sanitize_js__WEBPACK_IMPORTED_MODULE_4__.sanitizeError)(error);\n                const message = (0,_utils_sanitize_js__WEBPACK_IMPORTED_MODULE_4__.sanitizePath)(sanitized.message);\n                return (0,_utils_safe_stringify_js__WEBPACK_IMPORTED_MODULE_5__.mcpError)(message, {\n                    ...sanitized,\n                    message,\n                    templatePath,\n                    outputPath: safeOutputPath\n                });\n            }\n        })\n    ]\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxNQUFNO29CQUF5QztnQkFDakc7WUFDRixFQUFFLE9BQU83QyxPQUFnQjtnQkFDdkIsZ0NBQWdDO2dCQUNoQyxJQUFJQSxpQkFBaUJ2QixpRUFBbUJBLEVBQUU7b0JBQ3hDLE9BQU9ILGtFQUFRQSxDQUFDMEIsTUFBTThDLE9BQU8sRUFBRTlDLE1BQU0rQyxRQUFRO2dCQUMvQztnQkFFQSwyQ0FBMkM7Z0JBQzNDLE1BQU1DLFlBQVk1RSxpRUFBYUEsQ0FBQzRCO2dCQUNoQyxNQUFNOEMsVUFBVXpFLGdFQUFZQSxDQUFDMkUsVUFBVUYsT0FBTztnQkFDOUMsT0FBT3hFLGtFQUFRQSxDQUFDd0UsU0FBUztvQkFBRSxHQUFHRSxTQUFTO29CQUFFRjtvQkFBUzNEO29CQUFjRSxZQUFZSztnQkFBZTtZQUM3RjtRQUNGO0tBRUg7QUFDSCxHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHBpcC91aS8uLi8uLi9zcmMvbWNwL2RvY3hFeHBvcnRlci50cz83NGRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNka01jcFNlcnZlciwgdG9vbCB9IGZyb20gXCJAYW50aHJvcGljLWFpL2NsYXVkZS1hZ2VudC1zZGtcIjtcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gXCJub2RlOnBhdGhcIjtcbmltcG9ydCBQaXpaaXAgZnJvbSBcInBpenppcFwiO1xuaW1wb3J0IERvY3h0ZW1wbGF0ZXIgZnJvbSBcImRvY3h0ZW1wbGF0ZXJcIjtcbmltcG9ydCB7IHNhbml0aXplRXJyb3IsIHNhbml0aXplUGF0aCB9IGZyb20gXCIuLi91dGlscy9zYW5pdGl6ZS5qc1wiO1xuaW1wb3J0IHsgbWNwRXJyb3IgfSBmcm9tIFwiLi4vdXRpbHMvc2FmZS1zdHJpbmdpZnkuanNcIjtcbmltcG9ydCB7IG1jcFN1Y2Nlc3MgfSBmcm9tIFwiLi4vdXRpbHMvbWNwLWhlbHBlcnMuanNcIjtcbmltcG9ydCB7IHZhbGlkYXRlT3V0cHV0UGF0aCB9IGZyb20gXCIuLi91dGlscy92YWxpZGF0aW9uLmpzXCI7XG5pbXBvcnQgeyBEb2N1bWVudEV4cG9ydEVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQ2hpbGRMb2dnZXIgfSBmcm9tIFwiLi4vdXRpbHMvbG9nZ2VyLmpzXCI7XG5pbXBvcnQgeyBpc0RvY3hJbXBvcnQsIHR5cGUgRG9jeEltcG9ydCB9IGZyb20gXCIuLi90eXBlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHtcbiAgSUZpbGVTeXN0ZW1TZXJ2aWNlLFxuICBjcmVhdGVGaWxlU3lzdGVtU2VydmljZVxufSBmcm9tIFwiLi4vc2VydmljZXMvaW5kZXguanNcIjtcblxuY29uc3QgbG9nZ2VyID0gY3JlYXRlQ2hpbGRMb2dnZXIoXCJkb2N4LWV4cG9ydGVyXCIpO1xuXG4vLyBDcmVhdGUgZmlsZXN5c3RlbSBzZXJ2aWNlIG9uY2UgYXQgbW9kdWxlIGxldmVsIGZvciByZXVzZVxuY29uc3QgZnNTZXJ2aWNlOiBJRmlsZVN5c3RlbVNlcnZpY2UgPSBjcmVhdGVGaWxlU3lzdGVtU2VydmljZSgpO1xuXG5leHBvcnQgY29uc3QgZG9jeEV4cG9ydGVyID0gY3JlYXRlU2RrTWNwU2VydmVyKHtcbiAgbmFtZTogXCJkb2N4LWV4cG9ydGVyXCIsXG4gIHZlcnNpb246IFwiMC4xLjBcIixcbiAgdG9vbHM6IFtcbiAgICB0b29sKFxuICAgICAgXCJyZW5kZXJfZG9jeFwiLFxuICAgICAgXCJSZW5kZXIgYSBQSVAgdGV4dCBib2R5IGludG8gYSBET0NYIHVzaW5nIGEgdGVtcGxhdGUgd2l0aCB7cGlwX2JvZHl9LiBJZiB0ZW1wbGF0ZSBpcyBtaXNzaW5nLCBnZW5lcmF0ZSBhIGZhbGxiYWNrIERPQ1guXCIsXG4gICAgICB7XG4gICAgICAgIHRlbXBsYXRlUGF0aDogei5zdHJpbmcoKSxcbiAgICAgICAgb3V0cHV0UGF0aDogei5zdHJpbmcoKSxcbiAgICAgICAgYm9keTogei5zdHJpbmcoKSxcbiAgICAgICAgbGFuZ3VhZ2U6IHouc3RyaW5nKCkuZGVmYXVsdChcImVuXCIpLFxuICAgICAgICB0aXRsZTogei5zdHJpbmcoKS5kZWZhdWx0KFwiUGVyZm9ybWFuY2UgSW1wcm92ZW1lbnQgUGxhblwiKVxuICAgICAgfSxcbiAgICAgIGFzeW5jICh7IHRlbXBsYXRlUGF0aCwgb3V0cHV0UGF0aCwgYm9keSwgbGFuZ3VhZ2UsIHRpdGxlIH0pID0+IHtcbiAgICAgICAgbGV0IHNhZmVPdXRwdXRQYXRoOiBzdHJpbmcgPSBvdXRwdXRQYXRoOyAvLyBEZWZhdWx0IGZhbGxiYWNrIGZvciBlcnJvciByZXBvcnRpbmdcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gdmFsaWRhdGVPdXRwdXRQYXRoKG91dHB1dFBhdGgsIHsgZXh0ZW5zaW9uczogW1wiLmRvY3hcIl0sIGFsbG93T3ZlcndyaXRlOiB0cnVlIH0pO1xuICAgICAgICAgIGlmICghdmFsaWRhdGlvblJlc3VsdC52YWxpZCB8fCAhdmFsaWRhdGlvblJlc3VsdC5zYW5pdGl6ZWRQYXRoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRG9jdW1lbnRFeHBvcnRFcnJvcihgSW52YWxpZCBvdXRwdXQgcGF0aDogJHt2YWxpZGF0aW9uUmVzdWx0LmVycm9yIHx8ICdQYXRoIHZhbGlkYXRpb24gZmFpbGVkJ31gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2FmZU91dHB1dFBhdGggPSB2YWxpZGF0aW9uUmVzdWx0LnNhbml0aXplZFBhdGg7XG5cbiAgICAgICAgICBpZiAoZnNTZXJ2aWNlLmV4aXN0c1N5bmModGVtcGxhdGVQYXRoKSkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzU2VydmljZS5yZWFkRmlsZSh0ZW1wbGF0ZVBhdGgpIGFzIEJ1ZmZlcjtcbiAgICAgICAgICAgIGNvbnN0IHppcCA9IG5ldyBQaXpaaXAoY29udGVudCk7XG4gICAgICAgICAgICBjb25zdCBkb2MgPSBuZXcgRG9jeHRlbXBsYXRlcih6aXAsIHsgcGFyYWdyYXBoTG9vcDogdHJ1ZSwgbGluZWJyZWFrczogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGRvYy5yZW5kZXIoeyBwaXBfYm9keTogYm9keSwgbGFuZ3VhZ2UsIHRpdGxlLCBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCkgfSk7XG4gICAgICAgICAgICBjb25zdCBidWYgPSBkb2MuZ2V0WmlwKCkuZ2VuZXJhdGUoeyB0eXBlOiBcIm5vZGVidWZmZXJcIiB9KTtcblxuICAgICAgICAgICAgLy8gUGFyYWxsZWxpemUgZGlyZWN0b3J5IGNyZWF0aW9uIGFuZCBmaWxlIHdyaXRpbmcgcHJlcGFyYXRpb25cbiAgICAgICAgICAgIGNvbnN0IG91dHB1dERpciA9IHBhdGguZGlybmFtZShzYWZlT3V0cHV0UGF0aCk7XG4gICAgICAgICAgICBhd2FpdCBmc1NlcnZpY2UubWtkaXIob3V0cHV0RGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcblxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oeyBvdXRwdXRQYXRoOiBzYWZlT3V0cHV0UGF0aCwgdXNpbmdUZW1wbGF0ZTogdHJ1ZSB9LCBgW2RvY3gtZXhwb3J0ZXJdIHdyaXRpbmcgdGVtcGxhdGUtYmFzZWQgZG9jeCB0byAke3NhZmVPdXRwdXRQYXRofWApO1xuICAgICAgICAgICAgYXdhaXQgZnNTZXJ2aWNlLndyaXRlRmlsZShzYWZlT3V0cHV0UGF0aCwgYnVmKTtcbiAgICAgICAgICAgIHJldHVybiBtY3BTdWNjZXNzKHsgb3V0cHV0UGF0aDogc2FmZU91dHB1dFBhdGggfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrOiBnZW5lcmF0ZSBhIGRvY3ggd2l0aG91dCBhIHRlbXBsYXRlXG4gICAgICAgICAgICBjb25zdCBpbXBvcnRlZERvY3ggPSBhd2FpdCBpbXBvcnQoXCJkb2N4XCIpO1xuICAgICAgICAgICAgaWYgKCFpc0RvY3hJbXBvcnQoaW1wb3J0ZWREb2N4KSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRG9jdW1lbnRFeHBvcnRFcnJvcihcImRvY3ggbW9kdWxlIGRpZCBub3QgZXhwb3NlIGV4cGVjdGVkIEFQSVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgRG9jdW1lbnQsIFBhY2tlciwgUGFyYWdyYXBoLCBIZWFkaW5nTGV2ZWwsIFRleHRSdW4gfSA9IGltcG9ydGVkRG9jeDtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFncmFwaHM6IEluc3RhbmNlVHlwZTxEb2N4SW1wb3J0W1wiUGFyYWdyYXBoXCJdPltdID0gW107XG4gICAgICAgICAgICBwYXJhZ3JhcGhzLnB1c2gobmV3IFBhcmFncmFwaCh7IHRleHQ6IHRpdGxlLCBoZWFkaW5nOiBIZWFkaW5nTGV2ZWwuSEVBRElOR18xIH0pKTtcbiAgICAgICAgICAgIHBhcmFncmFwaHMucHVzaChuZXcgUGFyYWdyYXBoKHsgdGV4dDogYExhbmd1YWdlOiAke2xhbmd1YWdlfSAgICBEYXRlOiAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKX1gIH0pKTtcbiAgICAgICAgICAgIHBhcmFncmFwaHMucHVzaChuZXcgUGFyYWdyYXBoKHsgdGV4dDogXCJcIiB9KSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgYm9keS5zcGxpdCgvXFxyP1xcbi8pKSB7XG4gICAgICAgICAgICAgIGlmICghbGluZS50cmltKCkpIHsgcGFyYWdyYXBocy5wdXNoKG5ldyBQYXJhZ3JhcGgoeyB0ZXh0OiBcIlwiIH0pKTsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgcGFyYWdyYXBocy5wdXNoKG5ldyBQYXJhZ3JhcGgoeyBjaGlsZHJlbjogWyBuZXcgVGV4dFJ1bih7IHRleHQ6IGxpbmUgfSkgXSB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkb2MgPSBuZXcgRG9jdW1lbnQoeyBzZWN0aW9uczogW3sgcHJvcGVydGllczoge30sIGNoaWxkcmVuOiBwYXJhZ3JhcGhzIH1dIH0pO1xuXG4gICAgICAgICAgICAvLyBQYXJhbGxlbGl6ZSBidWZmZXIgZ2VuZXJhdGlvbiBhbmQgZGlyZWN0b3J5IGNyZWF0aW9uXG4gICAgICAgICAgICBjb25zdCBvdXRwdXREaXIgPSBwYXRoLmRpcm5hbWUoc2FmZU91dHB1dFBhdGgpO1xuICAgICAgICAgICAgY29uc3QgW2J1Zl0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgIFBhY2tlci50b0J1ZmZlcihkb2MpLFxuICAgICAgICAgICAgICBmc1NlcnZpY2UubWtkaXIob3V0cHV0RGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxuICAgICAgICAgICAgXSk7XG5cbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKHsgb3V0cHV0UGF0aDogc2FmZU91dHB1dFBhdGgsIHVzaW5nVGVtcGxhdGU6IGZhbHNlIH0sIGBbZG9jeC1leHBvcnRlcl0gd3JpdGluZyBmYWxsYmFjayBkb2N4IHRvICR7c2FmZU91dHB1dFBhdGh9YCk7XG4gICAgICAgICAgICBhd2FpdCBmc1NlcnZpY2Uud3JpdGVGaWxlKHNhZmVPdXRwdXRQYXRoLCBidWYpO1xuICAgICAgICAgICAgcmV0dXJuIG1jcFN1Y2Nlc3MoeyBvdXRwdXRQYXRoOiBzYWZlT3V0cHV0UGF0aCwgbm90ZTogXCJHZW5lcmF0ZWQgZmFsbGJhY2sgKG5vIHRlbXBsYXRlIGZvdW5kKVwiIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAvLyBDaGVjayBmb3IgY3VzdG9tIGVycm9ycyBmaXJzdFxuICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIERvY3VtZW50RXhwb3J0RXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtY3BFcnJvcihlcnJvci5tZXNzYWdlLCBlcnJvci5tZXRhZGF0YSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gV3JhcCBvdGhlciBlcnJvcnMgaW4gRG9jdW1lbnRFeHBvcnRFcnJvclxuICAgICAgICAgIGNvbnN0IHNhbml0aXplZCA9IHNhbml0aXplRXJyb3IoZXJyb3IpO1xuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBzYW5pdGl6ZVBhdGgoc2FuaXRpemVkLm1lc3NhZ2UpO1xuICAgICAgICAgIHJldHVybiBtY3BFcnJvcihtZXNzYWdlLCB7IC4uLnNhbml0aXplZCwgbWVzc2FnZSwgdGVtcGxhdGVQYXRoLCBvdXRwdXRQYXRoOiBzYWZlT3V0cHV0UGF0aCB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIClcbiAgXVxufSk7XG4iXSwibmFtZXMiOlsiY3JlYXRlU2RrTWNwU2VydmVyIiwidG9vbCIsInoiLCJwYXRoIiwiUGl6WmlwIiwiRG9jeHRlbXBsYXRlciIsInNhbml0aXplRXJyb3IiLCJzYW5pdGl6ZVBhdGgiLCJtY3BFcnJvciIsIm1jcFN1Y2Nlc3MiLCJ2YWxpZGF0ZU91dHB1dFBhdGgiLCJEb2N1bWVudEV4cG9ydEVycm9yIiwiY3JlYXRlQ2hpbGRMb2dnZXIiLCJpc0RvY3hJbXBvcnQiLCJjcmVhdGVGaWxlU3lzdGVtU2VydmljZSIsImxvZ2dlciIsImZzU2VydmljZSIsImRvY3hFeHBvcnRlciIsIm5hbWUiLCJ2ZXJzaW9uIiwidG9vbHMiLCJ0ZW1wbGF0ZVBhdGgiLCJzdHJpbmciLCJvdXRwdXRQYXRoIiwiYm9keSIsImxhbmd1YWdlIiwiZGVmYXVsdCIsInRpdGxlIiwic2FmZU91dHB1dFBhdGgiLCJ2YWxpZGF0aW9uUmVzdWx0IiwiZXh0ZW5zaW9ucyIsImFsbG93T3ZlcndyaXRlIiwidmFsaWQiLCJzYW5pdGl6ZWRQYXRoIiwiZXJyb3IiLCJleGlzdHNTeW5jIiwiY29udGVudCIsInJlYWRGaWxlIiwiemlwIiwiZG9jIiwicGFyYWdyYXBoTG9vcCIsImxpbmVicmVha3MiLCJyZW5kZXIiLCJwaXBfYm9keSIsImRhdGUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzbGljZSIsImJ1ZiIsImdldFppcCIsImdlbmVyYXRlIiwidHlwZSIsIm91dHB1dERpciIsImRpcm5hbWUiLCJta2RpciIsInJlY3Vyc2l2ZSIsImluZm8iLCJ1c2luZ1RlbXBsYXRlIiwid3JpdGVGaWxlIiwiaW1wb3J0ZWREb2N4IiwiRG9jdW1lbnQiLCJQYWNrZXIiLCJQYXJhZ3JhcGgiLCJIZWFkaW5nTGV2ZWwiLCJUZXh0UnVuIiwicGFyYWdyYXBocyIsInB1c2giLCJ0ZXh0IiwiaGVhZGluZyIsIkhFQURJTkdfMSIsImxpbmUiLCJzcGxpdCIsInRyaW0iLCJjaGlsZHJlbiIsInNlY3Rpb25zIiwicHJvcGVydGllcyIsIlByb21pc2UiLCJhbGwiLCJ0b0J1ZmZlciIsIm5vdGUiLCJtZXNzYWdlIiwibWV0YWRhdGEiLCJzYW5pdGl6ZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../src/mcp/docxExporter.ts\n");

/***/ }),

/***/ "(rsc)/../../src/mcp/geminiTranscriber.ts":
/*!******************************************!*\
  !*** ../../src/mcp/geminiTranscriber.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   geminiTranscriber: () => (/* binding */ geminiTranscriber)\n/* harmony export */ });\n/* harmony import */ var _anthropic_ai_claude_agent_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @anthropic-ai/claude-agent-sdk */ \"(rsc)/../../node_modules/@anthropic-ai/claude-agent-sdk/sdk.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! zod */ \"(rsc)/../../node_modules/zod/v3/types.js\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var node_os__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:os */ \"node:os\");\n/* harmony import */ var node_os__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(node_os__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var mime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! mime */ \"(rsc)/../../node_modules/mime/dist/src/index.js\");\n/* harmony import */ var _utils_cleanup_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/cleanup.js */ \"(rsc)/../../src/utils/cleanup.ts\");\n/* harmony import */ var _utils_sanitize_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/sanitize.js */ \"(rsc)/../../src/utils/sanitize.ts\");\n/* harmony import */ var _utils_safe_stringify_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/safe-stringify.js */ \"(rsc)/../../src/utils/safe-stringify.ts\");\n/* harmony import */ var _utils_mcp_helpers_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/mcp-helpers.js */ \"(rsc)/../../src/utils/mcp-helpers.ts\");\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../errors/index.js */ \"(rsc)/../../src/errors/index.ts\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/logger.js */ \"(rsc)/../../src/utils/logger.ts\");\n/* harmony import */ var _utils_shell_safe_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils/shell-safe.js */ \"(rsc)/../../src/utils/shell-safe.ts\");\n/* harmony import */ var _utils_validation_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../utils/validation.js */ \"(rsc)/../../src/utils/validation.ts\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../config.js */ \"(rsc)/../../src/config.ts\");\n/* harmony import */ var _types_index_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../types/index.js */ \"(rsc)/../../src/types/index.ts\");\n/* harmony import */ var _services_index_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../services/index.js */ \"(rsc)/../../src/services/index.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst logger = (0,_utils_logger_js__WEBPACK_IMPORTED_MODULE_9__.createChildLogger)(\"gemini-transcriber\");\n/**\n * Safe logging wrapper that prevents worker crashes when logger fails\n * Falls back to console.log if Pino fails in webpack workers\n */ function safeLog(level, data, message) {\n    try {\n        logger[level](data, message);\n    } catch (err) {\n        // Fallback to console if logger fails in webpack worker\n        console.log(`[${level}] ${message}`, data);\n    }\n}\n// Create filesystem service once at module level for reuse\nconst fsService = (0,_services_index_js__WEBPACK_IMPORTED_MODULE_14__.createFileSystemService)();\nlet geminiService = null;\nfunction getGeminiService() {\n    if (!_config_js__WEBPACK_IMPORTED_MODULE_12__.GEMINI_API_KEY) {\n        throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_8__.ConfigurationError(\"Missing GEMINI_API_KEY\");\n    }\n    if (!geminiService) {\n        geminiService = (0,_services_index_js__WEBPACK_IMPORTED_MODULE_14__.createGeminiService)(_config_js__WEBPACK_IMPORTED_MODULE_12__.GEMINI_API_KEY);\n    }\n    return geminiService;\n}\nlet s3Service = null;\nfunction getS3Service() {\n    if (!s3Service) {\n        s3Service = (0,_services_index_js__WEBPACK_IMPORTED_MODULE_14__.createS3Service)(_config_js__WEBPACK_IMPORTED_MODULE_12__.S3_PROFILE);\n    }\n    return s3Service;\n}\nconst MAX_AUDIO_FILE_BYTES = 200 * 1024 * 1024;\nconst MIN_CHUNK_SECONDS = 10;\nconst MAX_CHUNKS_PER_CALL = 1; // Process one chunk at a time to prevent worker crashes\n/**\n * Format bytes to human-readable size (e.g., \"200MB\")\n */ function formatBytes(bytes) {\n    if (bytes === 0) return \"0 Bytes\";\n    const k = 1024;\n    const sizes = [\n        \"Bytes\",\n        \"KB\",\n        \"MB\",\n        \"GB\"\n    ];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return Math.round(bytes / Math.pow(k, i)) + sizes[i];\n}\nfunction delay(ms) {\n    return new Promise((resolve)=>setTimeout(resolve, ms));\n}\nfunction hasTimeoutSignal(value, seen = new WeakSet()) {\n    if (value === null || value === undefined) {\n        return false;\n    }\n    if (typeof value === \"string\") {\n        const lower = value.toLowerCase();\n        return lower.includes(\"timeout\") || lower.includes(\"timed out\") || lower.includes(\"deadline exceeded\");\n    }\n    if (typeof value === \"number\") {\n        return value === 408;\n    }\n    if (value instanceof Error) {\n        return hasTimeoutSignal(value.message, seen);\n    }\n    if (typeof value === \"object\") {\n        const obj = value;\n        if (seen.has(obj)) {\n            return false;\n        }\n        seen.add(obj);\n        const keysToInspect = [\n            \"message\",\n            \"error\",\n            \"status\",\n            \"statusText\",\n            \"code\",\n            \"reason\"\n        ];\n        for (const key of keysToInspect){\n            const field = obj[key];\n            if (typeof field === \"string\" || typeof field === \"number\") {\n                if (hasTimeoutSignal(field, seen)) {\n                    return true;\n                }\n            }\n        }\n        const cause = obj.cause;\n        if (cause && hasTimeoutSignal(cause, seen)) {\n            return true;\n        }\n        const metadata = obj.metadata;\n        if (metadata && hasTimeoutSignal(metadata, seen)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction isTimeoutLikeError(error) {\n    if (error instanceof _errors_index_js__WEBPACK_IMPORTED_MODULE_8__.TranscriptionError) {\n        const metadata = error.metadata;\n        if (metadata && typeof metadata === \"object\") {\n            const reason = metadata.reason;\n            if (typeof reason === \"string\" && reason.toLowerCase() === \"timeout\") {\n                return true;\n            }\n        }\n    }\n    return hasTimeoutSignal(error);\n}\nasync function runWithConcurrency(items, worker, onProgress) {\n    const results = new Array(items.length);\n    let cursor = 0;\n    let completed = 0;\n    const runner = async ()=>{\n        while(true){\n            const index = cursor++;\n            if (index >= items.length) break;\n            const item = items[index];\n            results[index] = await worker(item);\n            completed++;\n            if (onProgress) {\n                onProgress(completed, items.length);\n            }\n        }\n    };\n    const workers = Array.from({\n        length: Math.min(_config_js__WEBPACK_IMPORTED_MODULE_12__.GEMINI_TRANSCRIBE_CONCURRENCY, items.length)\n    }, runner);\n    await Promise.all(workers);\n    return results;\n}\n/**\n * Secure wrapper for ffmpeg/ffprobe commands\n * Uses safeSpawn to prevent command injection\n *\n * @security This function replaces the unsafe spawn() usage (Issue #6)\n */ async function runCommand(command, args) {\n    try {\n        const result = await (0,_utils_shell_safe_js__WEBPACK_IMPORTED_MODULE_10__.safeSpawn)(command, args, {\n            timeout: 300000,\n            validatePaths: true\n        });\n        return {\n            stdout: result.stdout,\n            stderr: result.stderr\n        };\n    } catch (error) {\n        // safeSpawn throws an error if the command fails\n        // Extract the error message and re-throw in the expected format\n        throw error;\n    }\n}\nasync function validateAudioFile(filePath) {\n    try {\n        const { stdout } = await runCommand(\"ffprobe\", [\n            \"-v\",\n            \"error\",\n            \"-show_entries\",\n            \"stream=codec_name,codec_type,bit_rate,duration\",\n            \"-show_entries\",\n            \"format=duration,bit_rate\",\n            \"-of\",\n            \"json\",\n            filePath\n        ]);\n        let probeData;\n        try {\n            const parsed = JSON.parse(stdout.trim());\n            if (!(0,_types_index_js__WEBPACK_IMPORTED_MODULE_13__.isAudioProbeData)(parsed)) {\n                return {\n                    isValid: false,\n                    error: \"Unable to read audio file metadata\",\n                    hint: \"The file may be corrupt, encrypted, or an unsupported format. Try re-exporting as MP3 or WAV.\"\n                };\n            }\n            probeData = parsed;\n        } catch  {\n            return {\n                isValid: false,\n                error: \"Unable to read audio file metadata\",\n                hint: \"The file may be corrupt, encrypted, or an unsupported format. Try re-exporting as MP3 or WAV.\"\n            };\n        }\n        const streams = probeData.streams || [];\n        const format = probeData.format || {};\n        // Find audio stream\n        const audioStream = streams.find((s)=>s.codec_type === \"audio\");\n        if (!audioStream) {\n            // Check if there are any streams at all\n            if (streams.length === 0) {\n                return {\n                    isValid: false,\n                    error: \"No streams found in file\",\n                    hint: \"The file appears to be corrupt or empty. Try downloading/exporting it again.\"\n                };\n            }\n            // Check if it's video-only\n            const hasVideo = streams.some((s)=>s.codec_type === \"video\");\n            if (hasVideo) {\n                return {\n                    isValid: false,\n                    error: \"No audio stream found in file\",\n                    hint: \"This file appears to be video-only or has no audio track. Please provide a valid audio file.\"\n                };\n            }\n            return {\n                isValid: false,\n                error: \"No audio stream found in file\",\n                hint: \"Audio file appears to be corrupt. Please provide a valid audio file (MP3, WAV, FLAC, etc.).\"\n            };\n        }\n        // Extract codec name\n        const codec = audioStream.codec_name || \"unknown\";\n        // Check for supported codecs (common ones that ffmpeg/Gemini handle well)\n        const supportedCodecs = [\n            \"mp3\",\n            \"aac\",\n            \"opus\",\n            \"vorbis\",\n            \"wav\",\n            \"flac\",\n            \"pcm_s16le\",\n            \"pcm_s24le\",\n            \"pcm_s32le\",\n            \"pcm_f32le\",\n            \"pcm_f64le\",\n            \"pcm_u8\",\n            \"alac\",\n            \"wmav2\",\n            \"wmav1\"\n        ];\n        const isKnownCodec = supportedCodecs.some((supported)=>codec.toLowerCase().includes(supported));\n        if (!isKnownCodec) {\n            return {\n                isValid: false,\n                error: `Audio codec '${codec}' may not be supported`,\n                hint: \"Try converting your audio to MP3, WAV, or FLAC format for better compatibility.\"\n            };\n        }\n        // Get duration from stream or format\n        let duration = parseFloat(audioStream.duration || \"\") || parseFloat(format.duration || \"\") || 0;\n        if (!Number.isFinite(duration) || duration <= 0) {\n            return {\n                isValid: false,\n                error: \"Audio file has zero or invalid duration\",\n                hint: \"The file may be corrupt, empty, or incomplete. Try re-exporting or downloading it again.\"\n            };\n        }\n        // Get bitrate (prefer stream bitrate, fallback to format bitrate)\n        const bitrate = audioStream.bit_rate || format.bit_rate;\n        const bitrateFormatted = bitrate ? `${Math.round(parseInt(bitrate) / 1000)}k` : \"unknown\";\n        // Success case - return validation details\n        return {\n            isValid: true,\n            details: {\n                codec,\n                bitrate: bitrateFormatted,\n                duration\n            }\n        };\n    } catch (error) {\n        const message = error instanceof Error ? error.message : String(error);\n        // Handle specific ffprobe errors\n        if (message.includes(\"Invalid data found\")) {\n            return {\n                isValid: false,\n                error: \"File appears to be truncated or corrupted\",\n                hint: \"The audio file is incomplete or damaged. Try downloading/exporting it again.\"\n            };\n        }\n        if (message.includes(\"moov atom not found\")) {\n            return {\n                isValid: false,\n                error: \"File is incomplete or improperly encoded\",\n                hint: \"This MP4/M4A file is missing required metadata. Try re-exporting with a different tool.\"\n            };\n        }\n        // Generic failure\n        return {\n            isValid: false,\n            error: \"Unable to read audio file\",\n            hint: \"The file may be corrupt, encrypted, or an unsupported format. Try re-exporting as MP3 or WAV.\"\n        };\n    }\n}\nasync function probeDuration(filePath) {\n    try {\n        const { stdout } = await runCommand(\"ffprobe\", [\n            \"-v\",\n            \"error\",\n            \"-show_entries\",\n            \"format=duration\",\n            \"-of\",\n            \"default=noprint_wrappers=1:nokey=1\",\n            filePath\n        ]);\n        const value = parseFloat(stdout.trim());\n        return Number.isFinite(value) ? value : null;\n    } catch  {\n        return null;\n    }\n}\nasync function splitAudio(filePath, chunkSeconds) {\n    const tmpDir = await fsService.mkdtemp(node_path__WEBPACK_IMPORTED_MODULE_1__.join(node_os__WEBPACK_IMPORTED_MODULE_2__.tmpdir(), \"gemini-chunks-\"));\n    const ext = node_path__WEBPACK_IMPORTED_MODULE_1__.extname(filePath) || \".mp3\";\n    const pattern = node_path__WEBPACK_IMPORTED_MODULE_1__.join(tmpDir, `chunk_%03d${ext}`);\n    // Log chunk configuration before splitting\n    const duration = await probeDuration(filePath);\n    const estimatedChunks = duration ? Math.ceil(duration / chunkSeconds) : \"unknown\";\n    safeLog(\"info\", {\n        estimatedChunks,\n        chunkSeconds,\n        duration\n    }, `🎵 Splitting audio into ~${estimatedChunks} chunks (${chunkSeconds} seconds each)...`);\n    await runCommand(\"ffmpeg\", [\n        \"-hide_banner\",\n        \"-loglevel\",\n        \"error\",\n        \"-i\",\n        filePath,\n        \"-f\",\n        \"segment\",\n        \"-segment_time\",\n        String(chunkSeconds),\n        \"-c\",\n        \"copy\",\n        pattern\n    ]);\n    const entries = await fsService.readdir(tmpDir);\n    const chunks = entries.filter((name)=>name.startsWith(\"chunk_\")).sort().map((name, index)=>({\n            path: node_path__WEBPACK_IMPORTED_MODULE_1__.join(tmpDir, name),\n            index,\n            offsetSeconds: index * chunkSeconds\n        }));\n    // Log actual chunks created\n    safeLog(\"info\", {\n        chunkCount: chunks.length\n    }, `✂️  Created ${chunks.length} chunks from audio file`);\n    return {\n        tmpDir,\n        chunks\n    };\n}\nfunction toSeconds(value) {\n    if (value === null || value === undefined) return null;\n    if (typeof value === \"number\" && Number.isFinite(value)) return value;\n    if (typeof value === \"string\") {\n        const trimmed = value.trim();\n        if (!trimmed) return null;\n        if (/^-?\\d+(\\.\\d+)?$/.test(trimmed)) {\n            const num = parseFloat(trimmed);\n            return Number.isFinite(num) ? num : null;\n        }\n        const parts = trimmed.split(\":\").map((p)=>parseFloat(p));\n        if (parts.some((part)=>!Number.isFinite(part))) return null;\n        return parts.reduce((acc, part)=>acc * 60 + part, 0);\n    }\n    return null;\n}\nfunction formatTimestamp(seconds) {\n    if (seconds === null || !Number.isFinite(seconds)) return null;\n    const totalMs = Math.round(seconds * 1000);\n    const positiveMs = totalMs < 0 ? 0 : totalMs;\n    const ms = positiveMs % 1000;\n    const totalSeconds = Math.floor(positiveMs / 1000);\n    const s = totalSeconds % 60;\n    const totalMinutes = Math.floor(totalSeconds / 60);\n    const m = totalMinutes % 60;\n    const h = Math.floor(totalMinutes / 60);\n    const msPart = ms ? `.${ms.toString().padStart(3, \"0\")}` : \"\";\n    return `${h.toString().padStart(2, \"0\")}:${m.toString().padStart(2, \"0\")}:${s.toString().padStart(2, \"0\")}${msPart}`;\n}\nfunction normalizeSegments(rawSegments, offsetSeconds) {\n    return rawSegments.map((seg)=>{\n        const startSeconds = toSeconds(seg?.start ?? seg?.begin ?? seg?.from ?? null);\n        const endSeconds = toSeconds(seg?.end ?? seg?.finish ?? seg?.to ?? null);\n        const text = String(seg?.text ?? seg?.transcript ?? \"\").trim();\n        const speaker = String(seg?.speaker ?? \"SPEAKER_1\");\n        const start = formatTimestamp(startSeconds !== null ? startSeconds + offsetSeconds : null);\n        const end = formatTimestamp(endSeconds !== null ? endSeconds + offsetSeconds : null);\n        return {\n            start,\n            end,\n            startSeconds: startSeconds !== null ? startSeconds + offsetSeconds : null,\n            endSeconds: endSeconds !== null ? endSeconds + offsetSeconds : null,\n            text,\n            speaker\n        };\n    }).filter((seg)=>Boolean(seg.text));\n}\nasync function transcribeChunk(params) {\n    const { filePath, offsetSeconds, gemini, modelId, instructionsBase } = params;\n    let lastError = null;\n    for(let attempt = 0; attempt <= _config_js__WEBPACK_IMPORTED_MODULE_12__.GEMINI_TRANSCRIBE_RETRIES; attempt++){\n        try {\n            const mimeType = mime__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getType(filePath) || \"audio/wav\";\n            // For chunk path we keep SDK upload to limit presign churn\n            const uploaded = await gemini.uploadFile(filePath, mimeType);\n            const fileUri = uploaded.uri ?? uploaded.fileUri;\n            const fileMime = uploaded.mimeType ?? uploaded.fileMimeType ?? mimeType;\n            if (!fileUri) {\n                throw new Error(\"Upload failed: missing file URI\");\n            }\n            const offsetInstruction = offsetSeconds > 0 ? `This audio chunk begins at timestamp ${formatTimestamp(offsetSeconds)}. Return timestamps as absolute times in the original recording.` : \"Return timestamps as absolute times (HH:MM:SS) in the original recording.\";\n            const instructions = [\n                ...instructionsBase,\n                offsetInstruction\n            ].join(\"\\n\");\n            const result = await gemini.generateContent({\n                model: modelId,\n                contents: [\n                    {\n                        role: \"user\",\n                        parts: [\n                            {\n                                text: instructions\n                            },\n                            {\n                                fileData: {\n                                    fileUri,\n                                    mimeType: fileMime\n                                }\n                            }\n                        ]\n                    }\n                ],\n                config: {\n                    responseMimeType: \"application/json\"\n                }\n            });\n            const text = result.text ?? result.response?.text?.() ?? \"\";\n            const cleaned = String(text).replace(/```json|```/g, \"\").trim();\n            let parsed;\n            try {\n                parsed = JSON.parse(cleaned);\n            } catch (err) {\n                throw new Error(`Failed to parse JSON from Gemini response: ${err.message}`);\n            }\n            // Validate and extract transcription data\n            const transcriptionData = parsed;\n            const rawSegments = Array.isArray(transcriptionData?.segments) ? transcriptionData.segments : Array.isArray(parsed) ? parsed : [];\n            const transcript = typeof transcriptionData?.transcript === \"string\" && transcriptionData.transcript.trim() ? transcriptionData.transcript.trim() : rawSegments.map((seg)=>String(seg?.text ?? seg?.transcript ?? \"\").trim()).filter(Boolean).join(\"\\n\").trim();\n            const segments = normalizeSegments(rawSegments, offsetSeconds);\n            return {\n                transcript,\n                segments\n            };\n        } catch (err) {\n            lastError = err;\n            if (attempt < _config_js__WEBPACK_IMPORTED_MODULE_12__.GEMINI_TRANSCRIBE_RETRIES) {\n                await delay(1000 * (attempt + 1));\n                continue;\n            }\n            break;\n        }\n    }\n    const baseError = lastError ?? new Error(\"Unknown transcription failure\");\n    const sanitized = (0,_utils_sanitize_js__WEBPACK_IMPORTED_MODULE_5__.sanitizeError)(baseError);\n    const timeout = isTimeoutLikeError(baseError) || hasTimeoutSignal(sanitized);\n    const metadata = {\n        chunkOffsetSeconds: offsetSeconds,\n        chunkPath: (0,_utils_sanitize_js__WEBPACK_IMPORTED_MODULE_5__.sanitizePath)(filePath),\n        attempts: _config_js__WEBPACK_IMPORTED_MODULE_12__.GEMINI_TRANSCRIBE_RETRIES + 1,\n        cause: sanitized\n    };\n    if (timeout) {\n        metadata.reason = \"timeout\";\n    }\n    throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_8__.TranscriptionError(timeout ? \"Transcription chunk timed out\" : sanitized.message || \"Transcription failed\", metadata);\n}\nfunction buildSuccess(transcript, segments, nextChunk, info) {\n    const printableSegments = segments.filter((seg)=>seg.text).map((seg)=>({\n            start: seg.start,\n            end: seg.end,\n            speaker: seg.speaker,\n            text: seg.text\n        }));\n    const payload = {\n        transcript: transcript.trim(),\n        segments: printableSegments\n    };\n    if (nextChunk !== null && Number.isFinite(nextChunk)) {\n        payload.nextChunk = nextChunk;\n    }\n    if (info?.totalChunks !== undefined) {\n        payload.totalChunks = info.totalChunks;\n    }\n    if (info?.processedChunks !== undefined) {\n        payload.processedChunks = info.processedChunks;\n    }\n    if (info?.startChunk !== undefined) {\n        payload.startChunk = info.startChunk;\n    }\n    return (0,_utils_mcp_helpers_js__WEBPACK_IMPORTED_MODULE_7__.mcpSuccess)(payload);\n}\n// We use the new Google Gen AI SDK (@google/genai).\n// Ensure GEMINI_API_KEY is set in your environment.\nconst geminiTranscriber = (0,_anthropic_ai_claude_agent_sdk__WEBPACK_IMPORTED_MODULE_0__.createSdkMcpServer)({\n    name: \"gemini-transcriber\",\n    version: \"0.1.0\",\n    tools: [\n        (0,_anthropic_ai_claude_agent_sdk__WEBPACK_IMPORTED_MODULE_0__.tool)(\"transcribe_audio\", \"Transcribe an audio file with Gemini 2.5 Pro; returns JSON with transcript and segments.\", {\n            audioPath: zod__WEBPACK_IMPORTED_MODULE_15__.string().describe(\"Path to audio file (.mp3, .wav, .flac, etc.)\"),\n            inputLanguage: zod__WEBPACK_IMPORTED_MODULE_15__.string().default(\"auto\").describe(\"Audio language hint, e.g., 'en-US', 'es-ES', or 'auto'\"),\n            outputLanguage: zod__WEBPACK_IMPORTED_MODULE_15__.string().default(\"en\").describe(\"Transcript target language, e.g., 'en', 'fr'\"),\n            diarize: zod__WEBPACK_IMPORTED_MODULE_15__.boolean().default(true),\n            timestamps: zod__WEBPACK_IMPORTED_MODULE_15__.boolean().default(true),\n            startChunk: zod__WEBPACK_IMPORTED_MODULE_15__.number().int().min(0).default(0).describe(\"Optional start chunk index for paginated transcription\")\n        }, async ({ audioPath, inputLanguage, outputLanguage, diarize, timestamps, startChunk })=>{\n            try {\n                if (!_config_js__WEBPACK_IMPORTED_MODULE_12__.GEMINI_API_KEY) {\n                    throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_8__.ConfigurationError(\"Missing GEMINI_API_KEY\");\n                }\n                // Validate audio path for security (Issue #11)\n                const pathValidation = (0,_utils_validation_js__WEBPACK_IMPORTED_MODULE_11__.validateFilePath)(audioPath, {\n                    mustExist: true,\n                    mustBeFile: true,\n                    extensions: [\n                        ..._config_js__WEBPACK_IMPORTED_MODULE_12__.ALLOWED_AUDIO_EXTENSIONS\n                    ],\n                    allowAbsolute: true // Allow absolute paths in MCP context\n                });\n                if (!pathValidation.valid) {\n                    throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_8__.AudioValidationError(pathValidation.error || \"Audio path validation failed\", {\n                        hint: pathValidation.hint\n                    });\n                }\n                // Use the sanitized path from validation\n                const validatedAudioPath = pathValidation.sanitizedPath;\n                const fileStats = await fsService.stat(validatedAudioPath);\n                if (fileStats.size > MAX_AUDIO_FILE_BYTES) {\n                    throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_8__.AudioValidationError(`Audio file exceeds maximum supported size of ${formatBytes(MAX_AUDIO_FILE_BYTES)}.`);\n                }\n                // Validate audio file content before processing\n                const validation = await validateAudioFile(validatedAudioPath);\n                if (!validation.isValid) {\n                    throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_8__.AudioValidationError(validation.error || \"Audio validation failed\", {\n                        hint: validation.hint\n                    });\n                }\n                // Log audio details if validation succeeded\n                if (validation.details) {\n                    const { codec, bitrate, duration } = validation.details;\n                    if (duration !== undefined) {\n                        safeLog(\"info\", {\n                            duration,\n                            codec,\n                            bitrate\n                        }, `Audio: ${duration.toFixed(1)}s, codec: ${codec}, bitrate: ${bitrate}`);\n                    } else {\n                        safeLog(\"info\", {\n                            codec,\n                            bitrate\n                        }, `Audio: codec: ${codec}, bitrate: ${bitrate}`);\n                    }\n                }\n                const gemini = getGeminiService();\n                const instructionsBase = [\n                    \"You are a professional HR meeting transcriber.\",\n                    `Audio language hint: ${inputLanguage}.`,\n                    `Output language: ${outputLanguage}.`,\n                    \"Return ONLY JSON with keys: transcript (string), segments (array of {start, end, speaker, text}).\",\n                    diarize ? \"Perform speaker diarization; infer 'Manager'/'HRBP' if obvious else SPEAKER_1..n.\" : \"No diarization; set speaker to 'SPEAKER_1'.\",\n                    timestamps ? \"Include start/end times HH:MM:SS.\" : \"Set start/end to null.\"\n                ];\n                const modelId = _config_js__WEBPACK_IMPORTED_MODULE_12__.MODELS.GEMINI_PRO;\n                const duration = await probeDuration(validatedAudioPath);\n                const chunkSeconds = _config_js__WEBPACK_IMPORTED_MODULE_12__.GEMINI_CHUNK_SECONDS;\n                const shouldChunkDefault = duration === null ? true : duration > _config_js__WEBPACK_IMPORTED_MODULE_12__.GEMINI_SINGLE_PASS_MAX;\n                const preferPresigned = _config_js__WEBPACK_IMPORTED_MODULE_12__.GEMINI_INPUT_MODE === \"presigned\";\n                // Warn user about long processing times for larger files\n                if (duration && duration > 120) {\n                    const estimatedMinutes = Math.ceil(duration / 60);\n                    safeLog(\"info\", {\n                        duration,\n                        estimatedMinutes\n                    }, `⏱️  Audio is ${estimatedMinutes} minutes long. Transcription may take 5-10 minutes. Progress updates will appear periodically.`);\n                }\n                const runSingleViaS3AndUpload = async ()=>{\n                    // For audit: store on S3, then upload the local file to Gemini File API\n                    safeLog(\"info\", {\n                        mode: \"s3+upload\"\n                    }, \"\\uD83C\\uDFA4 Transcribing audio: store in S3, then Gemini upload (single pass)...\");\n                    const s3 = getS3Service();\n                    const mimeType = mime__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getType(validatedAudioPath) || \"audio/wav\";\n                    let uploadedKey = null;\n                    let uploadedBucket = null;\n                    try {\n                        const uploaded = await s3.uploadAndPresign({\n                            filePath: validatedAudioPath,\n                            mimeType,\n                            bucket: _config_js__WEBPACK_IMPORTED_MODULE_12__.S3_BUCKET,\n                            prefix: _config_js__WEBPACK_IMPORTED_MODULE_12__.S3_PREFIX,\n                            expiresInSeconds: _config_js__WEBPACK_IMPORTED_MODULE_12__.S3_PRESIGN_TTL_SECONDS\n                        });\n                        uploadedKey = uploaded.key;\n                        uploadedBucket = uploaded.bucket;\n                    } catch (e) {\n                        const se = (0,_utils_sanitize_js__WEBPACK_IMPORTED_MODULE_5__.sanitizeError)(e);\n                        safeLog(\"warn\", {\n                            error: se\n                        }, \"S3 upload/presign failed; continuing with direct Gemini upload\");\n                    }\n                    const res = await transcribeChunk({\n                        filePath: validatedAudioPath,\n                        offsetSeconds: 0,\n                        gemini,\n                        modelId,\n                        instructionsBase\n                    });\n                    if (uploadedBucket && uploadedKey && _config_js__WEBPACK_IMPORTED_MODULE_12__.S3_DELETE_AFTER) {\n                        try {\n                            await s3.deleteObject(uploadedBucket, uploadedKey);\n                        } catch  {}\n                    }\n                    const transcript = res.transcript.trim() || res.segments.map((seg)=>seg.text).join(\"\\n\").trim();\n                    return buildSuccess(transcript, res.segments, null, {\n                        totalChunks: 1,\n                        processedChunks: 1,\n                        startChunk: 0\n                    });\n                };\n                const runSingleViaUpload = async ()=>{\n                    safeLog(\"info\", {\n                        mode: \"upload\"\n                    }, \"\\uD83C\\uDFA4 Transcribing audio via SDK upload (single pass)...\");\n                    const res = await transcribeChunk({\n                        filePath: validatedAudioPath,\n                        offsetSeconds: 0,\n                        gemini,\n                        modelId,\n                        instructionsBase\n                    });\n                    const transcript = res.transcript.trim() || res.segments.map((seg)=>seg.text).join(\"\\n\").trim();\n                    return buildSuccess(transcript, res.segments, null, {\n                        totalChunks: 1,\n                        processedChunks: 1,\n                        startChunk: 0\n                    });\n                };\n                // Prefer presigned single-pass regardless of duration; fallback to chunking on failure\n                if (preferPresigned) {\n                    try {\n                        return await runSingleViaS3AndUpload();\n                    } catch (e) {\n                        const se = (0,_utils_sanitize_js__WEBPACK_IMPORTED_MODULE_5__.sanitizeError)(e);\n                        safeLog(\"warn\", {\n                            error: se\n                        }, \"Presigned single-pass failed; considering fallback\");\n                        // Regardless of duration, try SDK upload once before chunking\n                        try {\n                            return await runSingleViaUpload();\n                        } catch  {\n                        // fall through to chunking\n                        }\n                    }\n                } else {\n                    if (!shouldChunkDefault) {\n                        return await runSingleViaUpload();\n                    }\n                }\n                const normalizedStartChunk = Number.isFinite(startChunk) && startChunk > 0 ? Math.floor(startChunk) : 0;\n                // If we got here, we either prefer upload mode and need chunking, or presigned failed and we must chunk\n                let tmpDir = null;\n                try {\n                    const split = await splitAudio(validatedAudioPath, chunkSeconds);\n                    tmpDir = split.tmpDir;\n                    const totalChunks = split.chunks.length;\n                    if (!totalChunks) {\n                        return await runSingle();\n                    }\n                    if (normalizedStartChunk >= totalChunks) {\n                        return buildSuccess(\"\", [], null, {\n                            totalChunks,\n                            processedChunks: 0,\n                            startChunk: normalizedStartChunk\n                        });\n                    }\n                    const remainingChunks = totalChunks - normalizedStartChunk;\n                    const batchSize = Math.min(MAX_CHUNKS_PER_CALL, Math.max(1, remainingChunks));\n                    const selectedChunks = split.chunks.slice(normalizedStartChunk, normalizedStartChunk + batchSize);\n                    const chunkResults = await runWithConcurrency(selectedChunks, (chunk)=>transcribeChunk({\n                            filePath: chunk.path,\n                            offsetSeconds: chunk.offsetSeconds,\n                            gemini,\n                            modelId,\n                            instructionsBase\n                        }), (completed, total)=>{\n                        const absoluteCompleted = normalizedStartChunk + completed;\n                        const reportInterval = Math.max(1, Math.min(5, Math.ceil(totalChunks * 0.1)));\n                        if (absoluteCompleted % reportInterval === 0 || completed === total) {\n                            const percentage = Math.floor(absoluteCompleted / totalChunks * 100);\n                            safeLog(\"info\", {\n                                completed: absoluteCompleted,\n                                total: totalChunks,\n                                percentage,\n                                chunkSeconds\n                            }, `📝 Transcribed ${absoluteCompleted}/${totalChunks} chunks (${percentage}%)`);\n                        }\n                    });\n                    const transcriptParts = chunkResults.map((r)=>r.transcript.trim()).filter(Boolean);\n                    const mergedSegments = chunkResults.flatMap((r)=>r.segments).sort((a, b)=>(a.startSeconds ?? Infinity) - (b.startSeconds ?? Infinity));\n                    const transcript = transcriptParts.join(\"\\n\\n\").trim() || mergedSegments.map((seg)=>seg.text).join(\"\\n\").trim();\n                    const nextChunkIndex = normalizedStartChunk + selectedChunks.length < totalChunks ? normalizedStartChunk + selectedChunks.length : null;\n                    return buildSuccess(transcript, mergedSegments, nextChunkIndex, {\n                        totalChunks,\n                        processedChunks: selectedChunks.length,\n                        startChunk: normalizedStartChunk\n                    });\n                } finally{\n                    if (tmpDir) {\n                        await (0,_utils_cleanup_js__WEBPACK_IMPORTED_MODULE_4__.cleanupTempDir)(tmpDir);\n                    }\n                }\n            } catch (error) {\n                // MCP tool-level error handler - convert all errors to mcpError format\n                if (error instanceof _errors_index_js__WEBPACK_IMPORTED_MODULE_8__.AudioValidationError || error instanceof _errors_index_js__WEBPACK_IMPORTED_MODULE_8__.TranscriptionError || error instanceof _errors_index_js__WEBPACK_IMPORTED_MODULE_8__.ConfigurationError) {\n                    return (0,_utils_safe_stringify_js__WEBPACK_IMPORTED_MODULE_6__.mcpError)(error.message, error.metadata);\n                }\n                // Wrap other errors in TranscriptionError with helpful hints\n                const sanitized = (0,_utils_sanitize_js__WEBPACK_IMPORTED_MODULE_5__.sanitizeError)(error);\n                const message = sanitized.message;\n                let hint;\n                if (sanitized.code === \"ENOENT\" && message.includes(\"ffmpeg\")) {\n                    hint = \"ffmpeg is required for chunked transcription. Please install ffmpeg or provide a shorter audio clip.\";\n                } else if (/ffmpeg/.test(message) && /exited with code/.test(message)) {\n                    // Extract exit code for more specific error messages\n                    const exitCodeMatch = message.match(/exited with code (\\d+)/);\n                    const exitCode = exitCodeMatch ? parseInt(exitCodeMatch[1]) : null;\n                    if (exitCode === 1) {\n                        hint = \"ffmpeg reported a generic error. The audio file may be corrupt or in an unsupported format. Try re-exporting as MP3 or WAV.\";\n                    } else if (exitCode === 255) {\n                        hint = \"ffmpeg processing was interrupted. This might indicate a timeout or the file may be too large/corrupt to process.\";\n                    } else if (exitCode === -11 || message.includes(\"Segmentation fault\")) {\n                        hint = \"ffmpeg crashed (segmentation fault). The audio file is likely corrupt or severely damaged. Try re-downloading or re-exporting the file.\";\n                    } else {\n                        hint = \"ffmpeg reported an error while chunking audio. Verify ffmpeg is installed and the audio file is valid.\";\n                    }\n                }\n                safeLog(\"warn\", {\n                    error: sanitized,\n                    hint\n                }, \"Gemini transcription tool failed\");\n                return (0,_utils_safe_stringify_js__WEBPACK_IMPORTED_MODULE_6__.mcpError)(message, hint ? {\n                    ...sanitized,\n                    hint\n                } : sanitized);\n            }\n        })\n    ]\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0gsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL0BwaXAvdWkvLi4vLi4vc3JjL21jcC9nZW1pbmlUcmFuc2NyaWJlci50cz8yYTlhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNka01jcFNlcnZlciwgdG9vbCB9IGZyb20gXCJAYW50aHJvcGljLWFpL2NsYXVkZS1hZ2VudC1zZGtcIjtcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5pbXBvcnQgKiBhcyBmcyBmcm9tIFwibm9kZTpmc1wiO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tIFwibm9kZTpwYXRoXCI7XG5pbXBvcnQgKiBhcyBvcyBmcm9tIFwibm9kZTpvc1wiO1xuaW1wb3J0IG1pbWUgZnJvbSBcIm1pbWVcIjtcbmltcG9ydCB7IGNsZWFudXBUZW1wRGlyIH0gZnJvbSBcIi4uL3V0aWxzL2NsZWFudXAuanNcIjtcbmltcG9ydCB7IHNhbml0aXplRXJyb3IsIHNhbml0aXplUGF0aCB9IGZyb20gXCIuLi91dGlscy9zYW5pdGl6ZS5qc1wiO1xuaW1wb3J0IHsgbWNwRXJyb3IgfSBmcm9tIFwiLi4vdXRpbHMvc2FmZS1zdHJpbmdpZnkuanNcIjtcbmltcG9ydCB7IG1jcFN1Y2Nlc3MgfSBmcm9tIFwiLi4vdXRpbHMvbWNwLWhlbHBlcnMuanNcIjtcbmltcG9ydCB7IEF1ZGlvVmFsaWRhdGlvbkVycm9yLCBUcmFuc2NyaXB0aW9uRXJyb3IsIENvbmZpZ3VyYXRpb25FcnJvciB9IGZyb20gXCIuLi9lcnJvcnMvaW5kZXguanNcIjtcbmltcG9ydCB7IGNyZWF0ZUNoaWxkTG9nZ2VyIH0gZnJvbSBcIi4uL3V0aWxzL2xvZ2dlci5qc1wiO1xuaW1wb3J0IHsgc2FmZVNwYXduIH0gZnJvbSBcIi4uL3V0aWxzL3NoZWxsLXNhZmUuanNcIjtcbmltcG9ydCB7IHZhbGlkYXRlRmlsZVBhdGggfSBmcm9tIFwiLi4vdXRpbHMvdmFsaWRhdGlvbi5qc1wiO1xuaW1wb3J0IHtcbiAgR0VNSU5JX0FQSV9LRVksXG4gIE1PREVMUyxcbiAgR0VNSU5JX0NIVU5LX1NFQ09ORFMsXG4gIEdFTUlOSV9TSU5HTEVfUEFTU19NQVgsXG4gIEdFTUlOSV9UUkFOU0NSSUJFX0NPTkNVUlJFTkNZLFxuICBHRU1JTklfVFJBTlNDUklCRV9SRVRSSUVTLFxuICBBTExPV0VEX0FVRElPX0VYVEVOU0lPTlMsXG4gIEdFTUlOSV9JTlBVVF9NT0RFLFxuICBTM19QUk9GSUxFLFxuICBTM19CVUNLRVQsXG4gIFMzX1BSRUZJWCxcbiAgUzNfUFJFU0lHTl9UVExfU0VDT05EUyxcbiAgUzNfREVMRVRFX0FGVEVSXG59IGZyb20gXCIuLi9jb25maWcuanNcIjtcbmltcG9ydCB0eXBlIHtcbiAgQXVkaW9Qcm9iZURhdGEsXG4gIEdlbWluaVRyYW5zY3JpcHRpb25SZXN1bHQsXG4gIEdlbWluaVJhd1NlZ21lbnRcbn0gZnJvbSBcIi4uL3R5cGVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBpc0F1ZGlvUHJvYmVEYXRhIH0gZnJvbSBcIi4uL3R5cGVzL2luZGV4LmpzXCI7XG5pbXBvcnQge1xuICBJR2VtaW5pU2VydmljZSxcbiAgSUZpbGVTeXN0ZW1TZXJ2aWNlLFxuICBjcmVhdGVHZW1pbmlTZXJ2aWNlLFxuICBjcmVhdGVGaWxlU3lzdGVtU2VydmljZSxcbiAgSVMzU2VydmljZSxcbiAgY3JlYXRlUzNTZXJ2aWNlXG59IGZyb20gXCIuLi9zZXJ2aWNlcy9pbmRleC5qc1wiO1xuXG5jb25zdCBsb2dnZXIgPSBjcmVhdGVDaGlsZExvZ2dlcihcImdlbWluaS10cmFuc2NyaWJlclwiKTtcblxuLyoqXG4gKiBTYWZlIGxvZ2dpbmcgd3JhcHBlciB0aGF0IHByZXZlbnRzIHdvcmtlciBjcmFzaGVzIHdoZW4gbG9nZ2VyIGZhaWxzXG4gKiBGYWxscyBiYWNrIHRvIGNvbnNvbGUubG9nIGlmIFBpbm8gZmFpbHMgaW4gd2VicGFjayB3b3JrZXJzXG4gKi9cbmZ1bmN0aW9uIHNhZmVMb2cobGV2ZWw6ICdpbmZvJyB8ICd3YXJuJyB8ICdlcnJvcicsIGRhdGE6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LCBtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgdHJ5IHtcbiAgICBsb2dnZXJbbGV2ZWxdKGRhdGEsIG1lc3NhZ2UpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICAvLyBGYWxsYmFjayB0byBjb25zb2xlIGlmIGxvZ2dlciBmYWlscyBpbiB3ZWJwYWNrIHdvcmtlclxuICAgIGNvbnNvbGUubG9nKGBbJHtsZXZlbH1dICR7bWVzc2FnZX1gLCBkYXRhKTtcbiAgfVxufVxuXG4vLyBDcmVhdGUgZmlsZXN5c3RlbSBzZXJ2aWNlIG9uY2UgYXQgbW9kdWxlIGxldmVsIGZvciByZXVzZVxuY29uc3QgZnNTZXJ2aWNlOiBJRmlsZVN5c3RlbVNlcnZpY2UgPSBjcmVhdGVGaWxlU3lzdGVtU2VydmljZSgpO1xubGV0IGdlbWluaVNlcnZpY2U6IElHZW1pbmlTZXJ2aWNlIHwgbnVsbCA9IG51bGw7XG5mdW5jdGlvbiBnZXRHZW1pbmlTZXJ2aWNlKCk6IElHZW1pbmlTZXJ2aWNlIHtcbiAgaWYgKCFHRU1JTklfQVBJX0tFWSkge1xuICAgIHRocm93IG5ldyBDb25maWd1cmF0aW9uRXJyb3IoXCJNaXNzaW5nIEdFTUlOSV9BUElfS0VZXCIpO1xuICB9XG4gIGlmICghZ2VtaW5pU2VydmljZSkge1xuICAgIGdlbWluaVNlcnZpY2UgPSBjcmVhdGVHZW1pbmlTZXJ2aWNlKEdFTUlOSV9BUElfS0VZKTtcbiAgfVxuICByZXR1cm4gZ2VtaW5pU2VydmljZTtcbn1cbmxldCBzM1NlcnZpY2U6IElTM1NlcnZpY2UgfCBudWxsID0gbnVsbDtcbmZ1bmN0aW9uIGdldFMzU2VydmljZSgpOiBJUzNTZXJ2aWNlIHtcbiAgaWYgKCFzM1NlcnZpY2UpIHtcbiAgICBzM1NlcnZpY2UgPSBjcmVhdGVTM1NlcnZpY2UoUzNfUFJPRklMRSk7XG4gIH1cbiAgcmV0dXJuIHMzU2VydmljZTtcbn1cblxuY29uc3QgTUFYX0FVRElPX0ZJTEVfQllURVMgPSAyMDAgKiAxMDI0ICogMTAyNDtcbmNvbnN0IE1JTl9DSFVOS19TRUNPTkRTID0gMTA7XG5jb25zdCBNQVhfQ0hVTktTX1BFUl9DQUxMID0gMTsgLy8gUHJvY2VzcyBvbmUgY2h1bmsgYXQgYSB0aW1lIHRvIHByZXZlbnQgd29ya2VyIGNyYXNoZXNcblxuLyoqXG4gKiBGb3JtYXQgYnl0ZXMgdG8gaHVtYW4tcmVhZGFibGUgc2l6ZSAoZS5nLiwgXCIyMDBNQlwiKVxuICovXG5mdW5jdGlvbiBmb3JtYXRCeXRlcyhieXRlczogbnVtYmVyKTogc3RyaW5nIHtcbiAgaWYgKGJ5dGVzID09PSAwKSByZXR1cm4gXCIwIEJ5dGVzXCI7XG4gIGNvbnN0IGsgPSAxMDI0O1xuICBjb25zdCBzaXplcyA9IFtcIkJ5dGVzXCIsIFwiS0JcIiwgXCJNQlwiLCBcIkdCXCJdO1xuICBjb25zdCBpID0gTWF0aC5mbG9vcihNYXRoLmxvZyhieXRlcykgLyBNYXRoLmxvZyhrKSk7XG4gIHJldHVybiBNYXRoLnJvdW5kKGJ5dGVzIC8gTWF0aC5wb3coaywgaSkpICsgc2l6ZXNbaV07XG59XG5cbnR5cGUgQ2h1bmtJbmZvID0geyBwYXRoOiBzdHJpbmc7IGluZGV4OiBudW1iZXI7IG9mZnNldFNlY29uZHM6IG51bWJlciB9O1xudHlwZSBOb3JtYWxpemVkU2VnbWVudCA9IHtcbiAgc3RhcnQ6IHN0cmluZyB8IG51bGw7XG4gIGVuZDogc3RyaW5nIHwgbnVsbDtcbiAgc3RhcnRTZWNvbmRzOiBudW1iZXIgfCBudWxsO1xuICBlbmRTZWNvbmRzOiBudW1iZXIgfCBudWxsO1xuICBzcGVha2VyOiBzdHJpbmc7XG4gIHRleHQ6IHN0cmluZztcbn07XG5cbmZ1bmN0aW9uIGRlbGF5KG1zOiBudW1iZXIpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xufVxuXG5mdW5jdGlvbiBoYXNUaW1lb3V0U2lnbmFsKHZhbHVlOiB1bmtub3duLCBzZWVuOiBXZWFrU2V0PG9iamVjdD4gPSBuZXcgV2Vha1NldCgpKTogYm9vbGVhbiB7XG4gIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IGxvd2VyID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gKFxuICAgICAgbG93ZXIuaW5jbHVkZXMoXCJ0aW1lb3V0XCIpIHx8XG4gICAgICBsb3dlci5pbmNsdWRlcyhcInRpbWVkIG91dFwiKSB8fFxuICAgICAgbG93ZXIuaW5jbHVkZXMoXCJkZWFkbGluZSBleGNlZWRlZFwiKVxuICAgICk7XG4gIH1cblxuICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSA0MDg7XG4gIH1cblxuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIHJldHVybiBoYXNUaW1lb3V0U2lnbmFsKHZhbHVlLm1lc3NhZ2UsIHNlZW4pO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgIGNvbnN0IG9iaiA9IHZhbHVlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICAgIGlmIChzZWVuLmhhcyhvYmopKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHNlZW4uYWRkKG9iaik7XG5cbiAgICBjb25zdCBrZXlzVG9JbnNwZWN0ID0gW1wibWVzc2FnZVwiLCBcImVycm9yXCIsIFwic3RhdHVzXCIsIFwic3RhdHVzVGV4dFwiLCBcImNvZGVcIiwgXCJyZWFzb25cIl07XG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5c1RvSW5zcGVjdCkge1xuICAgICAgY29uc3QgZmllbGQgPSBvYmpba2V5XTtcbiAgICAgIGlmICh0eXBlb2YgZmllbGQgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIGZpZWxkID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIGlmIChoYXNUaW1lb3V0U2lnbmFsKGZpZWxkLCBzZWVuKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2F1c2UgPSAob2JqIGFzIHsgY2F1c2U/OiB1bmtub3duIH0pLmNhdXNlO1xuICAgIGlmIChjYXVzZSAmJiBoYXNUaW1lb3V0U2lnbmFsKGNhdXNlLCBzZWVuKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY29uc3QgbWV0YWRhdGEgPSAob2JqIGFzIHsgbWV0YWRhdGE/OiB1bmtub3duIH0pLm1ldGFkYXRhO1xuICAgIGlmIChtZXRhZGF0YSAmJiBoYXNUaW1lb3V0U2lnbmFsKG1ldGFkYXRhLCBzZWVuKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBpc1RpbWVvdXRMaWtlRXJyb3IoZXJyb3I6IHVua25vd24pOiBib29sZWFuIHtcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgVHJhbnNjcmlwdGlvbkVycm9yKSB7XG4gICAgY29uc3QgbWV0YWRhdGEgPSBlcnJvci5tZXRhZGF0YTtcbiAgICBpZiAobWV0YWRhdGEgJiYgdHlwZW9mIG1ldGFkYXRhID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBjb25zdCByZWFzb24gPSAobWV0YWRhdGEgYXMgeyByZWFzb24/OiB1bmtub3duIH0pLnJlYXNvbjtcbiAgICAgIGlmICh0eXBlb2YgcmVhc29uID09PSBcInN0cmluZ1wiICYmIHJlYXNvbi50b0xvd2VyQ2FzZSgpID09PSBcInRpbWVvdXRcIikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gaGFzVGltZW91dFNpZ25hbChlcnJvcik7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJ1bldpdGhDb25jdXJyZW5jeTxUPihcbiAgaXRlbXM6IENodW5rSW5mb1tdLFxuICB3b3JrZXI6IChpdGVtOiBDaHVua0luZm8pID0+IFByb21pc2U8VD4sXG4gIG9uUHJvZ3Jlc3M/OiAoY29tcGxldGVkOiBudW1iZXIsIHRvdGFsOiBudW1iZXIpID0+IHZvaWRcbik6IFByb21pc2U8VFtdPiB7XG4gIGNvbnN0IHJlc3VsdHM6IFRbXSA9IG5ldyBBcnJheShpdGVtcy5sZW5ndGgpO1xuICBsZXQgY3Vyc29yID0gMDtcbiAgbGV0IGNvbXBsZXRlZCA9IDA7XG4gIGNvbnN0IHJ1bm5lciA9IGFzeW5jICgpID0+IHtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgY29uc3QgaW5kZXggPSBjdXJzb3IrKztcbiAgICAgIGlmIChpbmRleCA+PSBpdGVtcy5sZW5ndGgpIGJyZWFrO1xuICAgICAgY29uc3QgaXRlbSA9IGl0ZW1zW2luZGV4XTtcbiAgICAgIHJlc3VsdHNbaW5kZXhdID0gYXdhaXQgd29ya2VyKGl0ZW0pO1xuICAgICAgY29tcGxldGVkKys7XG4gICAgICBpZiAob25Qcm9ncmVzcykge1xuICAgICAgICBvblByb2dyZXNzKGNvbXBsZXRlZCwgaXRlbXMubGVuZ3RoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IHdvcmtlcnMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBNYXRoLm1pbihHRU1JTklfVFJBTlNDUklCRV9DT05DVVJSRU5DWSwgaXRlbXMubGVuZ3RoKSB9LCBydW5uZXIpO1xuICBhd2FpdCBQcm9taXNlLmFsbCh3b3JrZXJzKTtcbiAgcmV0dXJuIHJlc3VsdHM7XG59XG5cbi8qKlxuICogU2VjdXJlIHdyYXBwZXIgZm9yIGZmbXBlZy9mZnByb2JlIGNvbW1hbmRzXG4gKiBVc2VzIHNhZmVTcGF3biB0byBwcmV2ZW50IGNvbW1hbmQgaW5qZWN0aW9uXG4gKlxuICogQHNlY3VyaXR5IFRoaXMgZnVuY3Rpb24gcmVwbGFjZXMgdGhlIHVuc2FmZSBzcGF3bigpIHVzYWdlIChJc3N1ZSAjNilcbiAqL1xuYXN5bmMgZnVuY3Rpb24gcnVuQ29tbWFuZChjb21tYW5kOiBzdHJpbmcsIGFyZ3M6IHN0cmluZ1tdKTogUHJvbWlzZTx7IHN0ZG91dDogc3RyaW5nOyBzdGRlcnI6IHN0cmluZyB9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2FmZVNwYXduKGNvbW1hbmQsIGFyZ3MsIHtcbiAgICAgIHRpbWVvdXQ6IDMwMDAwMCwgLy8gNSBtaW51dGVzXG4gICAgICB2YWxpZGF0ZVBhdGhzOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0ZG91dDogcmVzdWx0LnN0ZG91dCxcbiAgICAgIHN0ZGVycjogcmVzdWx0LnN0ZGVyclxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgLy8gc2FmZVNwYXduIHRocm93cyBhbiBlcnJvciBpZiB0aGUgY29tbWFuZCBmYWlsc1xuICAgIC8vIEV4dHJhY3QgdGhlIGVycm9yIG1lc3NhZ2UgYW5kIHJlLXRocm93IGluIHRoZSBleHBlY3RlZCBmb3JtYXRcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZUF1ZGlvRmlsZShmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTx7XG4gIGlzVmFsaWQ6IGJvb2xlYW47XG4gIGVycm9yPzogc3RyaW5nO1xuICBoaW50Pzogc3RyaW5nO1xuICBkZXRhaWxzPzoge1xuICAgIGNvZGVjPzogc3RyaW5nO1xuICAgIGJpdHJhdGU/OiBzdHJpbmc7XG4gICAgZHVyYXRpb24/OiBudW1iZXI7XG4gIH1cbn0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHN0ZG91dCB9ID0gYXdhaXQgcnVuQ29tbWFuZChcImZmcHJvYmVcIiwgW1xuICAgICAgXCItdlwiLFxuICAgICAgXCJlcnJvclwiLFxuICAgICAgXCItc2hvd19lbnRyaWVzXCIsXG4gICAgICBcInN0cmVhbT1jb2RlY19uYW1lLGNvZGVjX3R5cGUsYml0X3JhdGUsZHVyYXRpb25cIixcbiAgICAgIFwiLXNob3dfZW50cmllc1wiLFxuICAgICAgXCJmb3JtYXQ9ZHVyYXRpb24sYml0X3JhdGVcIixcbiAgICAgIFwiLW9mXCIsXG4gICAgICBcImpzb25cIixcbiAgICAgIGZpbGVQYXRoXG4gICAgXSk7XG5cbiAgICBsZXQgcHJvYmVEYXRhOiBBdWRpb1Byb2JlRGF0YTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkOiB1bmtub3duID0gSlNPTi5wYXJzZShzdGRvdXQudHJpbSgpKTtcbiAgICAgIGlmICghaXNBdWRpb1Byb2JlRGF0YShwYXJzZWQpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IFwiVW5hYmxlIHRvIHJlYWQgYXVkaW8gZmlsZSBtZXRhZGF0YVwiLFxuICAgICAgICAgIGhpbnQ6IFwiVGhlIGZpbGUgbWF5IGJlIGNvcnJ1cHQsIGVuY3J5cHRlZCwgb3IgYW4gdW5zdXBwb3J0ZWQgZm9ybWF0LiBUcnkgcmUtZXhwb3J0aW5nIGFzIE1QMyBvciBXQVYuXCJcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHByb2JlRGF0YSA9IHBhcnNlZDtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICBlcnJvcjogXCJVbmFibGUgdG8gcmVhZCBhdWRpbyBmaWxlIG1ldGFkYXRhXCIsXG4gICAgICAgIGhpbnQ6IFwiVGhlIGZpbGUgbWF5IGJlIGNvcnJ1cHQsIGVuY3J5cHRlZCwgb3IgYW4gdW5zdXBwb3J0ZWQgZm9ybWF0LiBUcnkgcmUtZXhwb3J0aW5nIGFzIE1QMyBvciBXQVYuXCJcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3Qgc3RyZWFtcyA9IHByb2JlRGF0YS5zdHJlYW1zIHx8IFtdO1xuICAgIGNvbnN0IGZvcm1hdCA9IHByb2JlRGF0YS5mb3JtYXQgfHwge307XG5cbiAgICAvLyBGaW5kIGF1ZGlvIHN0cmVhbVxuICAgIGNvbnN0IGF1ZGlvU3RyZWFtID0gc3RyZWFtcy5maW5kKHMgPT4gcy5jb2RlY190eXBlID09PSBcImF1ZGlvXCIpO1xuXG4gICAgaWYgKCFhdWRpb1N0cmVhbSkge1xuICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIGFueSBzdHJlYW1zIGF0IGFsbFxuICAgICAgaWYgKHN0cmVhbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IFwiTm8gc3RyZWFtcyBmb3VuZCBpbiBmaWxlXCIsXG4gICAgICAgICAgaGludDogXCJUaGUgZmlsZSBhcHBlYXJzIHRvIGJlIGNvcnJ1cHQgb3IgZW1wdHkuIFRyeSBkb3dubG9hZGluZy9leHBvcnRpbmcgaXQgYWdhaW4uXCJcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgaXQncyB2aWRlby1vbmx5XG4gICAgICBjb25zdCBoYXNWaWRlbyA9IHN0cmVhbXMuc29tZShzID0+IHMuY29kZWNfdHlwZSA9PT0gXCJ2aWRlb1wiKTtcbiAgICAgIGlmIChoYXNWaWRlbykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBcIk5vIGF1ZGlvIHN0cmVhbSBmb3VuZCBpbiBmaWxlXCIsXG4gICAgICAgICAgaGludDogXCJUaGlzIGZpbGUgYXBwZWFycyB0byBiZSB2aWRlby1vbmx5IG9yIGhhcyBubyBhdWRpbyB0cmFjay4gUGxlYXNlIHByb3ZpZGUgYSB2YWxpZCBhdWRpbyBmaWxlLlwiXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICBlcnJvcjogXCJObyBhdWRpbyBzdHJlYW0gZm91bmQgaW4gZmlsZVwiLFxuICAgICAgICBoaW50OiBcIkF1ZGlvIGZpbGUgYXBwZWFycyB0byBiZSBjb3JydXB0LiBQbGVhc2UgcHJvdmlkZSBhIHZhbGlkIGF1ZGlvIGZpbGUgKE1QMywgV0FWLCBGTEFDLCBldGMuKS5cIlxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IGNvZGVjIG5hbWVcbiAgICBjb25zdCBjb2RlYyA9IGF1ZGlvU3RyZWFtLmNvZGVjX25hbWUgfHwgXCJ1bmtub3duXCI7XG5cbiAgICAvLyBDaGVjayBmb3Igc3VwcG9ydGVkIGNvZGVjcyAoY29tbW9uIG9uZXMgdGhhdCBmZm1wZWcvR2VtaW5pIGhhbmRsZSB3ZWxsKVxuICAgIGNvbnN0IHN1cHBvcnRlZENvZGVjcyA9IFtcbiAgICAgIFwibXAzXCIsIFwiYWFjXCIsIFwib3B1c1wiLCBcInZvcmJpc1wiLCBcIndhdlwiLCBcImZsYWNcIiwgXCJwY21fczE2bGVcIiwgXCJwY21fczI0bGVcIixcbiAgICAgIFwicGNtX3MzMmxlXCIsIFwicGNtX2YzMmxlXCIsIFwicGNtX2Y2NGxlXCIsIFwicGNtX3U4XCIsIFwiYWxhY1wiLCBcIndtYXYyXCIsIFwid21hdjFcIlxuICAgIF07XG5cbiAgICBjb25zdCBpc0tub3duQ29kZWMgPSBzdXBwb3J0ZWRDb2RlY3Muc29tZShzdXBwb3J0ZWQgPT4gY29kZWMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzdXBwb3J0ZWQpKTtcblxuICAgIGlmICghaXNLbm93bkNvZGVjKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGBBdWRpbyBjb2RlYyAnJHtjb2RlY30nIG1heSBub3QgYmUgc3VwcG9ydGVkYCxcbiAgICAgICAgaGludDogXCJUcnkgY29udmVydGluZyB5b3VyIGF1ZGlvIHRvIE1QMywgV0FWLCBvciBGTEFDIGZvcm1hdCBmb3IgYmV0dGVyIGNvbXBhdGliaWxpdHkuXCJcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gR2V0IGR1cmF0aW9uIGZyb20gc3RyZWFtIG9yIGZvcm1hdFxuICAgIGxldCBkdXJhdGlvbiA9IHBhcnNlRmxvYXQoYXVkaW9TdHJlYW0uZHVyYXRpb24gfHwgXCJcIikgfHwgcGFyc2VGbG9hdChmb3JtYXQuZHVyYXRpb24gfHwgXCJcIikgfHwgMDtcblxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGR1cmF0aW9uKSB8fCBkdXJhdGlvbiA8PSAwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IFwiQXVkaW8gZmlsZSBoYXMgemVybyBvciBpbnZhbGlkIGR1cmF0aW9uXCIsXG4gICAgICAgIGhpbnQ6IFwiVGhlIGZpbGUgbWF5IGJlIGNvcnJ1cHQsIGVtcHR5LCBvciBpbmNvbXBsZXRlLiBUcnkgcmUtZXhwb3J0aW5nIG9yIGRvd25sb2FkaW5nIGl0IGFnYWluLlwiXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIEdldCBiaXRyYXRlIChwcmVmZXIgc3RyZWFtIGJpdHJhdGUsIGZhbGxiYWNrIHRvIGZvcm1hdCBiaXRyYXRlKVxuICAgIGNvbnN0IGJpdHJhdGUgPSBhdWRpb1N0cmVhbS5iaXRfcmF0ZSB8fCBmb3JtYXQuYml0X3JhdGU7XG4gICAgY29uc3QgYml0cmF0ZUZvcm1hdHRlZCA9IGJpdHJhdGUgPyBgJHtNYXRoLnJvdW5kKHBhcnNlSW50KGJpdHJhdGUpIC8gMTAwMCl9a2AgOiBcInVua25vd25cIjtcblxuICAgIC8vIFN1Y2Nlc3MgY2FzZSAtIHJldHVybiB2YWxpZGF0aW9uIGRldGFpbHNcbiAgICByZXR1cm4ge1xuICAgICAgaXNWYWxpZDogdHJ1ZSxcbiAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgY29kZWMsXG4gICAgICAgIGJpdHJhdGU6IGJpdHJhdGVGb3JtYXR0ZWQsXG4gICAgICAgIGR1cmF0aW9uXG4gICAgICB9XG4gICAgfTtcblxuICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG5cbiAgICAvLyBIYW5kbGUgc3BlY2lmaWMgZmZwcm9iZSBlcnJvcnNcbiAgICBpZiAobWVzc2FnZS5pbmNsdWRlcyhcIkludmFsaWQgZGF0YSBmb3VuZFwiKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICAgIGVycm9yOiBcIkZpbGUgYXBwZWFycyB0byBiZSB0cnVuY2F0ZWQgb3IgY29ycnVwdGVkXCIsXG4gICAgICAgIGhpbnQ6IFwiVGhlIGF1ZGlvIGZpbGUgaXMgaW5jb21wbGV0ZSBvciBkYW1hZ2VkLiBUcnkgZG93bmxvYWRpbmcvZXhwb3J0aW5nIGl0IGFnYWluLlwiXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChtZXNzYWdlLmluY2x1ZGVzKFwibW9vdiBhdG9tIG5vdCBmb3VuZFwiKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICAgIGVycm9yOiBcIkZpbGUgaXMgaW5jb21wbGV0ZSBvciBpbXByb3Blcmx5IGVuY29kZWRcIixcbiAgICAgICAgaGludDogXCJUaGlzIE1QNC9NNEEgZmlsZSBpcyBtaXNzaW5nIHJlcXVpcmVkIG1ldGFkYXRhLiBUcnkgcmUtZXhwb3J0aW5nIHdpdGggYSBkaWZmZXJlbnQgdG9vbC5cIlxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBHZW5lcmljIGZhaWx1cmVcbiAgICByZXR1cm4ge1xuICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICBlcnJvcjogXCJVbmFibGUgdG8gcmVhZCBhdWRpbyBmaWxlXCIsXG4gICAgICBoaW50OiBcIlRoZSBmaWxlIG1heSBiZSBjb3JydXB0LCBlbmNyeXB0ZWQsIG9yIGFuIHVuc3VwcG9ydGVkIGZvcm1hdC4gVHJ5IHJlLWV4cG9ydGluZyBhcyBNUDMgb3IgV0FWLlwiXG4gICAgfTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBwcm9iZUR1cmF0aW9uKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPG51bWJlciB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHN0ZG91dCB9ID0gYXdhaXQgcnVuQ29tbWFuZChcImZmcHJvYmVcIiwgW1xuICAgICAgXCItdlwiLFxuICAgICAgXCJlcnJvclwiLFxuICAgICAgXCItc2hvd19lbnRyaWVzXCIsXG4gICAgICBcImZvcm1hdD1kdXJhdGlvblwiLFxuICAgICAgXCItb2ZcIixcbiAgICAgIFwiZGVmYXVsdD1ub3ByaW50X3dyYXBwZXJzPTE6bm9rZXk9MVwiLFxuICAgICAgZmlsZVBhdGhcbiAgICBdKTtcbiAgICBjb25zdCB2YWx1ZSA9IHBhcnNlRmxvYXQoc3Rkb3V0LnRyaW0oKSk7XG4gICAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZSh2YWx1ZSkgPyB2YWx1ZSA6IG51bGw7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNwbGl0QXVkaW8oZmlsZVBhdGg6IHN0cmluZywgY2h1bmtTZWNvbmRzOiBudW1iZXIpOiBQcm9taXNlPHsgdG1wRGlyOiBzdHJpbmc7IGNodW5rczogQ2h1bmtJbmZvW10gfT4ge1xuICBjb25zdCB0bXBEaXIgPSBhd2FpdCBmc1NlcnZpY2UubWtkdGVtcChwYXRoLmpvaW4ob3MudG1wZGlyKCksIFwiZ2VtaW5pLWNodW5rcy1cIikpO1xuICBjb25zdCBleHQgPSBwYXRoLmV4dG5hbWUoZmlsZVBhdGgpIHx8IFwiLm1wM1wiO1xuICBjb25zdCBwYXR0ZXJuID0gcGF0aC5qb2luKHRtcERpciwgYGNodW5rXyUwM2Qke2V4dH1gKTtcblxuICAvLyBMb2cgY2h1bmsgY29uZmlndXJhdGlvbiBiZWZvcmUgc3BsaXR0aW5nXG4gIGNvbnN0IGR1cmF0aW9uID0gYXdhaXQgcHJvYmVEdXJhdGlvbihmaWxlUGF0aCk7XG4gIGNvbnN0IGVzdGltYXRlZENodW5rcyA9IGR1cmF0aW9uID8gTWF0aC5jZWlsKGR1cmF0aW9uIC8gY2h1bmtTZWNvbmRzKSA6IFwidW5rbm93blwiO1xuICBzYWZlTG9nKCdpbmZvJywgeyBlc3RpbWF0ZWRDaHVua3MsIGNodW5rU2Vjb25kcywgZHVyYXRpb24gfSwgYPCfjrUgU3BsaXR0aW5nIGF1ZGlvIGludG8gfiR7ZXN0aW1hdGVkQ2h1bmtzfSBjaHVua3MgKCR7Y2h1bmtTZWNvbmRzfSBzZWNvbmRzIGVhY2gpLi4uYCk7XG5cbiAgYXdhaXQgcnVuQ29tbWFuZChcImZmbXBlZ1wiLCBbXG4gICAgXCItaGlkZV9iYW5uZXJcIixcbiAgICBcIi1sb2dsZXZlbFwiLFxuICAgIFwiZXJyb3JcIixcbiAgICBcIi1pXCIsXG4gICAgZmlsZVBhdGgsXG4gICAgXCItZlwiLFxuICAgIFwic2VnbWVudFwiLFxuICAgIFwiLXNlZ21lbnRfdGltZVwiLFxuICAgIFN0cmluZyhjaHVua1NlY29uZHMpLFxuICAgIFwiLWNcIixcbiAgICBcImNvcHlcIixcbiAgICBwYXR0ZXJuXG4gIF0pO1xuICBjb25zdCBlbnRyaWVzID0gYXdhaXQgZnNTZXJ2aWNlLnJlYWRkaXIodG1wRGlyKTtcbiAgY29uc3QgY2h1bmtzID0gZW50cmllc1xuICAgIC5maWx0ZXIobmFtZSA9PiBuYW1lLnN0YXJ0c1dpdGgoXCJjaHVua19cIikpXG4gICAgLnNvcnQoKVxuICAgIC5tYXAoKG5hbWUsIGluZGV4KSA9PiAoe1xuICAgICAgcGF0aDogcGF0aC5qb2luKHRtcERpciwgbmFtZSksXG4gICAgICBpbmRleCxcbiAgICAgIG9mZnNldFNlY29uZHM6IGluZGV4ICogY2h1bmtTZWNvbmRzXG4gICAgfSkpO1xuXG4gIC8vIExvZyBhY3R1YWwgY2h1bmtzIGNyZWF0ZWRcbiAgc2FmZUxvZygnaW5mbycsIHsgY2h1bmtDb3VudDogY2h1bmtzLmxlbmd0aCB9LCBg4pyC77iPICBDcmVhdGVkICR7Y2h1bmtzLmxlbmd0aH0gY2h1bmtzIGZyb20gYXVkaW8gZmlsZWApO1xuXG4gIHJldHVybiB7IHRtcERpciwgY2h1bmtzIH07XG59XG5cbmZ1bmN0aW9uIHRvU2Vjb25kcyh2YWx1ZTogc3RyaW5nIHwgbnVtYmVyIHwgbnVsbCB8IHVuZGVmaW5lZCk6IG51bWJlciB8IG51bGwge1xuICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIG51bGw7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiYgTnVtYmVyLmlzRmluaXRlKHZhbHVlKSkgcmV0dXJuIHZhbHVlO1xuICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgdHJpbW1lZCA9IHZhbHVlLnRyaW0oKTtcbiAgICBpZiAoIXRyaW1tZWQpIHJldHVybiBudWxsO1xuICAgIGlmICgvXi0/XFxkKyhcXC5cXGQrKT8kLy50ZXN0KHRyaW1tZWQpKSB7XG4gICAgICBjb25zdCBudW0gPSBwYXJzZUZsb2F0KHRyaW1tZWQpO1xuICAgICAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZShudW0pID8gbnVtIDogbnVsbDtcbiAgICB9XG4gICAgY29uc3QgcGFydHMgPSB0cmltbWVkLnNwbGl0KFwiOlwiKS5tYXAocCA9PiBwYXJzZUZsb2F0KHApKTtcbiAgICBpZiAocGFydHMuc29tZShwYXJ0ID0+ICFOdW1iZXIuaXNGaW5pdGUocGFydCkpKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gcGFydHMucmVkdWNlKChhY2MsIHBhcnQpID0+IGFjYyAqIDYwICsgcGFydCwgMCk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFRpbWVzdGFtcChzZWNvbmRzOiBudW1iZXIgfCBudWxsKTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmIChzZWNvbmRzID09PSBudWxsIHx8ICFOdW1iZXIuaXNGaW5pdGUoc2Vjb25kcykpIHJldHVybiBudWxsO1xuICBjb25zdCB0b3RhbE1zID0gTWF0aC5yb3VuZChzZWNvbmRzICogMTAwMCk7XG4gIGNvbnN0IHBvc2l0aXZlTXMgPSB0b3RhbE1zIDwgMCA/IDAgOiB0b3RhbE1zO1xuICBjb25zdCBtcyA9IHBvc2l0aXZlTXMgJSAxMDAwO1xuICBjb25zdCB0b3RhbFNlY29uZHMgPSBNYXRoLmZsb29yKHBvc2l0aXZlTXMgLyAxMDAwKTtcbiAgY29uc3QgcyA9IHRvdGFsU2Vjb25kcyAlIDYwO1xuICBjb25zdCB0b3RhbE1pbnV0ZXMgPSBNYXRoLmZsb29yKHRvdGFsU2Vjb25kcyAvIDYwKTtcbiAgY29uc3QgbSA9IHRvdGFsTWludXRlcyAlIDYwO1xuICBjb25zdCBoID0gTWF0aC5mbG9vcih0b3RhbE1pbnV0ZXMgLyA2MCk7XG4gIGNvbnN0IG1zUGFydCA9IG1zID8gYC4ke21zLnRvU3RyaW5nKCkucGFkU3RhcnQoMywgXCIwXCIpfWAgOiBcIlwiO1xuICByZXR1cm4gYCR7aC50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX06JHttLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfToke3MudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9JHttc1BhcnR9YDtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplU2VnbWVudHMocmF3U2VnbWVudHM6IEdlbWluaVJhd1NlZ21lbnRbXSwgb2Zmc2V0U2Vjb25kczogbnVtYmVyKTogTm9ybWFsaXplZFNlZ21lbnRbXSB7XG4gIHJldHVybiByYXdTZWdtZW50c1xuICAgIC5tYXAoc2VnID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0U2Vjb25kcyA9IHRvU2Vjb25kcyhzZWc/LnN0YXJ0ID8/IHNlZz8uYmVnaW4gPz8gc2VnPy5mcm9tID8/IG51bGwpO1xuICAgICAgY29uc3QgZW5kU2Vjb25kcyA9IHRvU2Vjb25kcyhzZWc/LmVuZCA/PyBzZWc/LmZpbmlzaCA/PyBzZWc/LnRvID8/IG51bGwpO1xuICAgICAgY29uc3QgdGV4dCA9IFN0cmluZyhzZWc/LnRleHQgPz8gc2VnPy50cmFuc2NyaXB0ID8/IFwiXCIpLnRyaW0oKTtcbiAgICAgIGNvbnN0IHNwZWFrZXIgPSBTdHJpbmcoc2VnPy5zcGVha2VyID8/IFwiU1BFQUtFUl8xXCIpO1xuICAgICAgY29uc3Qgc3RhcnQgPSBmb3JtYXRUaW1lc3RhbXAoc3RhcnRTZWNvbmRzICE9PSBudWxsID8gc3RhcnRTZWNvbmRzICsgb2Zmc2V0U2Vjb25kcyA6IG51bGwpO1xuICAgICAgY29uc3QgZW5kID0gZm9ybWF0VGltZXN0YW1wKGVuZFNlY29uZHMgIT09IG51bGwgPyBlbmRTZWNvbmRzICsgb2Zmc2V0U2Vjb25kcyA6IG51bGwpO1xuICAgICAgcmV0dXJuIHsgc3RhcnQsIGVuZCwgc3RhcnRTZWNvbmRzOiBzdGFydFNlY29uZHMgIT09IG51bGwgPyBzdGFydFNlY29uZHMgKyBvZmZzZXRTZWNvbmRzIDogbnVsbCwgZW5kU2Vjb25kczogZW5kU2Vjb25kcyAhPT0gbnVsbCA/IGVuZFNlY29uZHMgKyBvZmZzZXRTZWNvbmRzIDogbnVsbCwgdGV4dCwgc3BlYWtlciB9O1xuICAgIH0pXG4gICAgLmZpbHRlcihzZWcgPT4gQm9vbGVhbihzZWcudGV4dCkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiB0cmFuc2NyaWJlQ2h1bmsocGFyYW1zOiB7XG4gIGZpbGVQYXRoOiBzdHJpbmc7XG4gIG9mZnNldFNlY29uZHM6IG51bWJlcjtcbiAgZ2VtaW5pOiBJR2VtaW5pU2VydmljZTtcbiAgbW9kZWxJZDogc3RyaW5nO1xuICBpbnN0cnVjdGlvbnNCYXNlOiBzdHJpbmdbXTtcbn0pIHtcbiAgY29uc3QgeyBmaWxlUGF0aCwgb2Zmc2V0U2Vjb25kcywgZ2VtaW5pLCBtb2RlbElkLCBpbnN0cnVjdGlvbnNCYXNlIH0gPSBwYXJhbXM7XG4gIGxldCBsYXN0RXJyb3I6IHVua25vd24gPSBudWxsO1xuICBmb3IgKGxldCBhdHRlbXB0ID0gMDsgYXR0ZW1wdCA8PSBHRU1JTklfVFJBTlNDUklCRV9SRVRSSUVTOyBhdHRlbXB0KyspIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbWltZVR5cGUgPSBtaW1lLmdldFR5cGUoZmlsZVBhdGgpIHx8IFwiYXVkaW8vd2F2XCI7XG4gICAgICAvLyBGb3IgY2h1bmsgcGF0aCB3ZSBrZWVwIFNESyB1cGxvYWQgdG8gbGltaXQgcHJlc2lnbiBjaHVyblxuICAgICAgY29uc3QgdXBsb2FkZWQgPSBhd2FpdCBnZW1pbmkudXBsb2FkRmlsZShmaWxlUGF0aCwgbWltZVR5cGUpO1xuICAgICAgY29uc3QgZmlsZVVyaTogc3RyaW5nIHwgdW5kZWZpbmVkID0gdXBsb2FkZWQudXJpID8/IHVwbG9hZGVkLmZpbGVVcmk7XG4gICAgICBjb25zdCBmaWxlTWltZTogc3RyaW5nID0gdXBsb2FkZWQubWltZVR5cGUgPz8gdXBsb2FkZWQuZmlsZU1pbWVUeXBlID8/IG1pbWVUeXBlO1xuICAgICAgaWYgKCFmaWxlVXJpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVwbG9hZCBmYWlsZWQ6IG1pc3NpbmcgZmlsZSBVUklcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG9mZnNldEluc3RydWN0aW9uID1cbiAgICAgICAgb2Zmc2V0U2Vjb25kcyA+IDBcbiAgICAgICAgICA/IGBUaGlzIGF1ZGlvIGNodW5rIGJlZ2lucyBhdCB0aW1lc3RhbXAgJHtmb3JtYXRUaW1lc3RhbXAob2Zmc2V0U2Vjb25kcyl9LiBSZXR1cm4gdGltZXN0YW1wcyBhcyBhYnNvbHV0ZSB0aW1lcyBpbiB0aGUgb3JpZ2luYWwgcmVjb3JkaW5nLmBcbiAgICAgICAgICA6IFwiUmV0dXJuIHRpbWVzdGFtcHMgYXMgYWJzb2x1dGUgdGltZXMgKEhIOk1NOlNTKSBpbiB0aGUgb3JpZ2luYWwgcmVjb3JkaW5nLlwiO1xuXG4gICAgICBjb25zdCBpbnN0cnVjdGlvbnMgPSBbLi4uaW5zdHJ1Y3Rpb25zQmFzZSwgb2Zmc2V0SW5zdHJ1Y3Rpb25dLmpvaW4oXCJcXG5cIik7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdlbWluaS5nZW5lcmF0ZUNvbnRlbnQoe1xuICAgICAgICBtb2RlbDogbW9kZWxJZCxcbiAgICAgICAgY29udGVudHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICAgIHBhcnRzOiBbXG4gICAgICAgICAgICAgIHsgdGV4dDogaW5zdHJ1Y3Rpb25zIH0sXG4gICAgICAgICAgICAgIHsgZmlsZURhdGE6IHsgZmlsZVVyaSwgbWltZVR5cGU6IGZpbGVNaW1lIH0gfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgY29uZmlnOiB7IHJlc3BvbnNlTWltZVR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB0ZXh0OiBzdHJpbmcgPSByZXN1bHQudGV4dCA/PyByZXN1bHQucmVzcG9uc2U/LnRleHQ/LigpID8/IFwiXCI7XG4gICAgICBjb25zdCBjbGVhbmVkID0gU3RyaW5nKHRleHQpLnJlcGxhY2UoL2BgYGpzb258YGBgL2csIFwiXCIpLnRyaW0oKTtcblxuICAgICAgbGV0IHBhcnNlZDogdW5rbm93bjtcbiAgICAgIHRyeSB7XG4gICAgICAgIHBhcnNlZCA9IEpTT04ucGFyc2UoY2xlYW5lZCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gcGFyc2UgSlNPTiBmcm9tIEdlbWluaSByZXNwb25zZTogJHsoZXJyIGFzIEVycm9yKS5tZXNzYWdlfWApO1xuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSBhbmQgZXh0cmFjdCB0cmFuc2NyaXB0aW9uIGRhdGFcbiAgICAgIGNvbnN0IHRyYW5zY3JpcHRpb25EYXRhID0gcGFyc2VkIGFzIEdlbWluaVRyYW5zY3JpcHRpb25SZXN1bHQ7XG4gICAgICBjb25zdCByYXdTZWdtZW50czogR2VtaW5pUmF3U2VnbWVudFtdID0gQXJyYXkuaXNBcnJheSh0cmFuc2NyaXB0aW9uRGF0YT8uc2VnbWVudHMpXG4gICAgICAgID8gdHJhbnNjcmlwdGlvbkRhdGEuc2VnbWVudHNcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHBhcnNlZClcbiAgICAgICAgICA/IHBhcnNlZCBhcyBHZW1pbmlSYXdTZWdtZW50W11cbiAgICAgICAgICA6IFtdO1xuXG4gICAgICBjb25zdCB0cmFuc2NyaXB0OiBzdHJpbmcgPVxuICAgICAgICB0eXBlb2YgdHJhbnNjcmlwdGlvbkRhdGE/LnRyYW5zY3JpcHQgPT09IFwic3RyaW5nXCIgJiYgdHJhbnNjcmlwdGlvbkRhdGEudHJhbnNjcmlwdC50cmltKClcbiAgICAgICAgICA/IHRyYW5zY3JpcHRpb25EYXRhLnRyYW5zY3JpcHQudHJpbSgpXG4gICAgICAgICAgOiByYXdTZWdtZW50c1xuICAgICAgICAgICAgICAubWFwKHNlZyA9PiBTdHJpbmcoc2VnPy50ZXh0ID8/IHNlZz8udHJhbnNjcmlwdCA/PyBcIlwiKS50cmltKCkpXG4gICAgICAgICAgICAgIC5maWx0ZXIoQm9vbGVhbilcbiAgICAgICAgICAgICAgLmpvaW4oXCJcXG5cIilcbiAgICAgICAgICAgICAgLnRyaW0oKTtcblxuICAgICAgY29uc3Qgc2VnbWVudHMgPSBub3JtYWxpemVTZWdtZW50cyhyYXdTZWdtZW50cywgb2Zmc2V0U2Vjb25kcyk7XG5cbiAgICAgIHJldHVybiB7IHRyYW5zY3JpcHQsIHNlZ21lbnRzIH07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBsYXN0RXJyb3IgPSBlcnI7XG4gICAgICBpZiAoYXR0ZW1wdCA8IEdFTUlOSV9UUkFOU0NSSUJFX1JFVFJJRVMpIHtcbiAgICAgICAgYXdhaXQgZGVsYXkoMTAwMCAqIChhdHRlbXB0ICsgMSkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBjb25zdCBiYXNlRXJyb3IgPSBsYXN0RXJyb3IgPz8gbmV3IEVycm9yKFwiVW5rbm93biB0cmFuc2NyaXB0aW9uIGZhaWx1cmVcIik7XG4gIGNvbnN0IHNhbml0aXplZCA9IHNhbml0aXplRXJyb3IoYmFzZUVycm9yKTtcbiAgY29uc3QgdGltZW91dCA9IGlzVGltZW91dExpa2VFcnJvcihiYXNlRXJyb3IpIHx8IGhhc1RpbWVvdXRTaWduYWwoc2FuaXRpemVkKTtcbiAgY29uc3QgbWV0YWRhdGE6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge1xuICAgIGNodW5rT2Zmc2V0U2Vjb25kczogb2Zmc2V0U2Vjb25kcyxcbiAgICBjaHVua1BhdGg6IHNhbml0aXplUGF0aChmaWxlUGF0aCksXG4gICAgYXR0ZW1wdHM6IEdFTUlOSV9UUkFOU0NSSUJFX1JFVFJJRVMgKyAxLFxuICAgIGNhdXNlOiBzYW5pdGl6ZWRcbiAgfTtcblxuICBpZiAodGltZW91dCkge1xuICAgIG1ldGFkYXRhLnJlYXNvbiA9IFwidGltZW91dFwiO1xuICB9XG5cbiAgdGhyb3cgbmV3IFRyYW5zY3JpcHRpb25FcnJvcihcbiAgICB0aW1lb3V0ID8gXCJUcmFuc2NyaXB0aW9uIGNodW5rIHRpbWVkIG91dFwiIDogc2FuaXRpemVkLm1lc3NhZ2UgfHwgXCJUcmFuc2NyaXB0aW9uIGZhaWxlZFwiLFxuICAgIG1ldGFkYXRhXG4gICk7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkU3VjY2VzcyhcbiAgdHJhbnNjcmlwdDogc3RyaW5nLFxuICBzZWdtZW50czogTm9ybWFsaXplZFNlZ21lbnRbXSxcbiAgbmV4dENodW5rOiBudW1iZXIgfCBudWxsLFxuICBpbmZvPzoge1xuICAgIHRvdGFsQ2h1bmtzPzogbnVtYmVyO1xuICAgIHByb2Nlc3NlZENodW5rcz86IG51bWJlcjtcbiAgICBzdGFydENodW5rPzogbnVtYmVyO1xuICB9XG4pIHtcbiAgY29uc3QgcHJpbnRhYmxlU2VnbWVudHMgPSBzZWdtZW50c1xuICAgIC5maWx0ZXIoc2VnID0+IHNlZy50ZXh0KVxuICAgIC5tYXAoc2VnID0+ICh7XG4gICAgICBzdGFydDogc2VnLnN0YXJ0LFxuICAgICAgZW5kOiBzZWcuZW5kLFxuICAgICAgc3BlYWtlcjogc2VnLnNwZWFrZXIsXG4gICAgICB0ZXh0OiBzZWcudGV4dFxuICAgIH0pKTtcbiAgY29uc3QgcGF5bG9hZDogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7XG4gICAgdHJhbnNjcmlwdDogdHJhbnNjcmlwdC50cmltKCksXG4gICAgc2VnbWVudHM6IHByaW50YWJsZVNlZ21lbnRzXG4gIH07XG4gIGlmIChuZXh0Q2h1bmsgIT09IG51bGwgJiYgTnVtYmVyLmlzRmluaXRlKG5leHRDaHVuaykpIHtcbiAgICBwYXlsb2FkLm5leHRDaHVuayA9IG5leHRDaHVuaztcbiAgfVxuICBpZiAoaW5mbz8udG90YWxDaHVua3MgIT09IHVuZGVmaW5lZCkge1xuICAgIHBheWxvYWQudG90YWxDaHVua3MgPSBpbmZvLnRvdGFsQ2h1bmtzO1xuICB9XG4gIGlmIChpbmZvPy5wcm9jZXNzZWRDaHVua3MgIT09IHVuZGVmaW5lZCkge1xuICAgIHBheWxvYWQucHJvY2Vzc2VkQ2h1bmtzID0gaW5mby5wcm9jZXNzZWRDaHVua3M7XG4gIH1cbiAgaWYgKGluZm8/LnN0YXJ0Q2h1bmsgIT09IHVuZGVmaW5lZCkge1xuICAgIHBheWxvYWQuc3RhcnRDaHVuayA9IGluZm8uc3RhcnRDaHVuaztcbiAgfVxuICByZXR1cm4gbWNwU3VjY2VzcyhwYXlsb2FkKTtcbn1cblxuLy8gV2UgdXNlIHRoZSBuZXcgR29vZ2xlIEdlbiBBSSBTREsgKEBnb29nbGUvZ2VuYWkpLlxuLy8gRW5zdXJlIEdFTUlOSV9BUElfS0VZIGlzIHNldCBpbiB5b3VyIGVudmlyb25tZW50LlxuXG5leHBvcnQgY29uc3QgZ2VtaW5pVHJhbnNjcmliZXIgPSBjcmVhdGVTZGtNY3BTZXJ2ZXIoe1xuICBuYW1lOiBcImdlbWluaS10cmFuc2NyaWJlclwiLFxuICB2ZXJzaW9uOiBcIjAuMS4wXCIsXG4gIHRvb2xzOiBbXG4gICAgdG9vbChcbiAgICAgIFwidHJhbnNjcmliZV9hdWRpb1wiLFxuICAgICAgXCJUcmFuc2NyaWJlIGFuIGF1ZGlvIGZpbGUgd2l0aCBHZW1pbmkgMi41IFBybzsgcmV0dXJucyBKU09OIHdpdGggdHJhbnNjcmlwdCBhbmQgc2VnbWVudHMuXCIsXG4gICAgICB7XG4gICAgICAgIGF1ZGlvUGF0aDogei5zdHJpbmcoKS5kZXNjcmliZShcIlBhdGggdG8gYXVkaW8gZmlsZSAoLm1wMywgLndhdiwgLmZsYWMsIGV0Yy4pXCIpLFxuICAgICAgICBpbnB1dExhbmd1YWdlOiB6LnN0cmluZygpLmRlZmF1bHQoXCJhdXRvXCIpLmRlc2NyaWJlKFwiQXVkaW8gbGFuZ3VhZ2UgaGludCwgZS5nLiwgJ2VuLVVTJywgJ2VzLUVTJywgb3IgJ2F1dG8nXCIpLFxuICAgICAgICBvdXRwdXRMYW5ndWFnZTogei5zdHJpbmcoKS5kZWZhdWx0KFwiZW5cIikuZGVzY3JpYmUoXCJUcmFuc2NyaXB0IHRhcmdldCBsYW5ndWFnZSwgZS5nLiwgJ2VuJywgJ2ZyJ1wiKSxcbiAgICAgICAgZGlhcml6ZTogei5ib29sZWFuKCkuZGVmYXVsdCh0cnVlKSxcbiAgICAgICAgdGltZXN0YW1wczogei5ib29sZWFuKCkuZGVmYXVsdCh0cnVlKSxcbiAgICAgICAgc3RhcnRDaHVuazogei5udW1iZXIoKS5pbnQoKS5taW4oMCkuZGVmYXVsdCgwKS5kZXNjcmliZShcIk9wdGlvbmFsIHN0YXJ0IGNodW5rIGluZGV4IGZvciBwYWdpbmF0ZWQgdHJhbnNjcmlwdGlvblwiKVxuICAgICAgfSxcbiAgICAgIGFzeW5jICh7IGF1ZGlvUGF0aCwgaW5wdXRMYW5ndWFnZSwgb3V0cHV0TGFuZ3VhZ2UsIGRpYXJpemUsIHRpbWVzdGFtcHMsIHN0YXJ0Q2h1bmsgfSkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghR0VNSU5JX0FQSV9LRVkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBDb25maWd1cmF0aW9uRXJyb3IoXCJNaXNzaW5nIEdFTUlOSV9BUElfS0VZXCIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFZhbGlkYXRlIGF1ZGlvIHBhdGggZm9yIHNlY3VyaXR5IChJc3N1ZSAjMTEpXG4gICAgICAgICAgY29uc3QgcGF0aFZhbGlkYXRpb24gPSB2YWxpZGF0ZUZpbGVQYXRoKGF1ZGlvUGF0aCwge1xuICAgICAgICAgICAgbXVzdEV4aXN0OiB0cnVlLFxuICAgICAgICAgICAgbXVzdEJlRmlsZTogdHJ1ZSxcbiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsuLi5BTExPV0VEX0FVRElPX0VYVEVOU0lPTlNdIGFzIHN0cmluZ1tdLFxuICAgICAgICAgICAgYWxsb3dBYnNvbHV0ZTogdHJ1ZSAvLyBBbGxvdyBhYnNvbHV0ZSBwYXRocyBpbiBNQ1AgY29udGV4dFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKCFwYXRoVmFsaWRhdGlvbi52YWxpZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEF1ZGlvVmFsaWRhdGlvbkVycm9yKFxuICAgICAgICAgICAgICBwYXRoVmFsaWRhdGlvbi5lcnJvciB8fCBcIkF1ZGlvIHBhdGggdmFsaWRhdGlvbiBmYWlsZWRcIixcbiAgICAgICAgICAgICAgeyBoaW50OiBwYXRoVmFsaWRhdGlvbi5oaW50IH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gVXNlIHRoZSBzYW5pdGl6ZWQgcGF0aCBmcm9tIHZhbGlkYXRpb25cbiAgICAgICAgICBjb25zdCB2YWxpZGF0ZWRBdWRpb1BhdGggPSBwYXRoVmFsaWRhdGlvbi5zYW5pdGl6ZWRQYXRoITtcblxuICAgICAgICAgIGNvbnN0IGZpbGVTdGF0cyA9IGF3YWl0IGZzU2VydmljZS5zdGF0KHZhbGlkYXRlZEF1ZGlvUGF0aCk7XG4gICAgICAgICAgaWYgKGZpbGVTdGF0cy5zaXplID4gTUFYX0FVRElPX0ZJTEVfQllURVMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBdWRpb1ZhbGlkYXRpb25FcnJvcihgQXVkaW8gZmlsZSBleGNlZWRzIG1heGltdW0gc3VwcG9ydGVkIHNpemUgb2YgJHtmb3JtYXRCeXRlcyhNQVhfQVVESU9fRklMRV9CWVRFUyl9LmApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFZhbGlkYXRlIGF1ZGlvIGZpbGUgY29udGVudCBiZWZvcmUgcHJvY2Vzc2luZ1xuICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCB2YWxpZGF0ZUF1ZGlvRmlsZSh2YWxpZGF0ZWRBdWRpb1BhdGgpO1xuICAgICAgICAgIGlmICghdmFsaWRhdGlvbi5pc1ZhbGlkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXVkaW9WYWxpZGF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgIHZhbGlkYXRpb24uZXJyb3IgfHwgXCJBdWRpbyB2YWxpZGF0aW9uIGZhaWxlZFwiLFxuICAgICAgICAgICAgICB7IGhpbnQ6IHZhbGlkYXRpb24uaGludCB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIExvZyBhdWRpbyBkZXRhaWxzIGlmIHZhbGlkYXRpb24gc3VjY2VlZGVkXG4gICAgICAgICAgaWYgKHZhbGlkYXRpb24uZGV0YWlscykge1xuICAgICAgICAgICAgY29uc3QgeyBjb2RlYywgYml0cmF0ZSwgZHVyYXRpb24gfSA9IHZhbGlkYXRpb24uZGV0YWlscztcbiAgICAgICAgICAgIGlmIChkdXJhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHNhZmVMb2coJ2luZm8nLCB7IGR1cmF0aW9uLCBjb2RlYywgYml0cmF0ZSB9LCBgQXVkaW86ICR7ZHVyYXRpb24udG9GaXhlZCgxKX1zLCBjb2RlYzogJHtjb2RlY30sIGJpdHJhdGU6ICR7Yml0cmF0ZX1gKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNhZmVMb2coJ2luZm8nLCB7IGNvZGVjLCBiaXRyYXRlIH0sIGBBdWRpbzogY29kZWM6ICR7Y29kZWN9LCBiaXRyYXRlOiAke2JpdHJhdGV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgZ2VtaW5pID0gZ2V0R2VtaW5pU2VydmljZSgpO1xuXG4gICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25zQmFzZSA9IFtcbiAgICAgICAgICAgIFwiWW91IGFyZSBhIHByb2Zlc3Npb25hbCBIUiBtZWV0aW5nIHRyYW5zY3JpYmVyLlwiLFxuICAgICAgICAgICAgYEF1ZGlvIGxhbmd1YWdlIGhpbnQ6ICR7aW5wdXRMYW5ndWFnZX0uYCxcbiAgICAgICAgICAgIGBPdXRwdXQgbGFuZ3VhZ2U6ICR7b3V0cHV0TGFuZ3VhZ2V9LmAsXG4gICAgICAgICAgICBcIlJldHVybiBPTkxZIEpTT04gd2l0aCBrZXlzOiB0cmFuc2NyaXB0IChzdHJpbmcpLCBzZWdtZW50cyAoYXJyYXkgb2Yge3N0YXJ0LCBlbmQsIHNwZWFrZXIsIHRleHR9KS5cIixcbiAgICAgICAgICAgIGRpYXJpemVcbiAgICAgICAgICAgICAgPyBcIlBlcmZvcm0gc3BlYWtlciBkaWFyaXphdGlvbjsgaW5mZXIgJ01hbmFnZXInLydIUkJQJyBpZiBvYnZpb3VzIGVsc2UgU1BFQUtFUl8xLi5uLlwiXG4gICAgICAgICAgICAgIDogXCJObyBkaWFyaXphdGlvbjsgc2V0IHNwZWFrZXIgdG8gJ1NQRUFLRVJfMScuXCIsXG4gICAgICAgICAgICB0aW1lc3RhbXBzID8gXCJJbmNsdWRlIHN0YXJ0L2VuZCB0aW1lcyBISDpNTTpTUy5cIiA6IFwiU2V0IHN0YXJ0L2VuZCB0byBudWxsLlwiXG4gICAgICAgICAgXTtcblxuICAgICAgICAgIGNvbnN0IG1vZGVsSWQgPSBNT0RFTFMuR0VNSU5JX1BSTztcblxuICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gYXdhaXQgcHJvYmVEdXJhdGlvbih2YWxpZGF0ZWRBdWRpb1BhdGgpO1xuICAgICAgICAgIGNvbnN0IGNodW5rU2Vjb25kcyA9IEdFTUlOSV9DSFVOS19TRUNPTkRTO1xuICAgICAgICAgIGNvbnN0IHNob3VsZENodW5rRGVmYXVsdCA9IGR1cmF0aW9uID09PSBudWxsID8gdHJ1ZSA6IGR1cmF0aW9uID4gR0VNSU5JX1NJTkdMRV9QQVNTX01BWDtcblxuICAgICAgICAgIGNvbnN0IHByZWZlclByZXNpZ25lZCA9IEdFTUlOSV9JTlBVVF9NT0RFID09PSBcInByZXNpZ25lZFwiO1xuXG4gICAgICAgICAgLy8gV2FybiB1c2VyIGFib3V0IGxvbmcgcHJvY2Vzc2luZyB0aW1lcyBmb3IgbGFyZ2VyIGZpbGVzXG4gICAgICAgICAgaWYgKGR1cmF0aW9uICYmIGR1cmF0aW9uID4gMTIwKSB7XG4gICAgICAgICAgICBjb25zdCBlc3RpbWF0ZWRNaW51dGVzID0gTWF0aC5jZWlsKGR1cmF0aW9uIC8gNjApO1xuICAgICAgICAgICAgc2FmZUxvZyhcbiAgICAgICAgICAgICAgJ2luZm8nLFxuICAgICAgICAgICAgICB7IGR1cmF0aW9uLCBlc3RpbWF0ZWRNaW51dGVzIH0sXG4gICAgICAgICAgICAgIGDij7HvuI8gIEF1ZGlvIGlzICR7ZXN0aW1hdGVkTWludXRlc30gbWludXRlcyBsb25nLiBUcmFuc2NyaXB0aW9uIG1heSB0YWtlIDUtMTAgbWludXRlcy4gUHJvZ3Jlc3MgdXBkYXRlcyB3aWxsIGFwcGVhciBwZXJpb2RpY2FsbHkuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBydW5TaW5nbGVWaWFTM0FuZFVwbG9hZCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIEZvciBhdWRpdDogc3RvcmUgb24gUzMsIHRoZW4gdXBsb2FkIHRoZSBsb2NhbCBmaWxlIHRvIEdlbWluaSBGaWxlIEFQSVxuICAgICAgICAgICAgc2FmZUxvZygnaW5mbycsIHsgbW9kZTogJ3MzK3VwbG9hZCcgfSwgXCLwn46kIFRyYW5zY3JpYmluZyBhdWRpbzogc3RvcmUgaW4gUzMsIHRoZW4gR2VtaW5pIHVwbG9hZCAoc2luZ2xlIHBhc3MpLi4uXCIpO1xuICAgICAgICAgICAgY29uc3QgczMgPSBnZXRTM1NlcnZpY2UoKTtcbiAgICAgICAgICAgIGNvbnN0IG1pbWVUeXBlID0gbWltZS5nZXRUeXBlKHZhbGlkYXRlZEF1ZGlvUGF0aCkgfHwgXCJhdWRpby93YXZcIjtcbiAgICAgICAgICAgIGxldCB1cGxvYWRlZEtleTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gICAgICAgICAgICBsZXQgdXBsb2FkZWRCdWNrZXQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgdXBsb2FkZWQgPSBhd2FpdCBzMy51cGxvYWRBbmRQcmVzaWduKHtcbiAgICAgICAgICAgICAgICBmaWxlUGF0aDogdmFsaWRhdGVkQXVkaW9QYXRoLFxuICAgICAgICAgICAgICAgIG1pbWVUeXBlLFxuICAgICAgICAgICAgICAgIGJ1Y2tldDogUzNfQlVDS0VULFxuICAgICAgICAgICAgICAgIHByZWZpeDogUzNfUFJFRklYLFxuICAgICAgICAgICAgICAgIGV4cGlyZXNJblNlY29uZHM6IFMzX1BSRVNJR05fVFRMX1NFQ09ORFNcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHVwbG9hZGVkS2V5ID0gdXBsb2FkZWQua2V5O1xuICAgICAgICAgICAgICB1cGxvYWRlZEJ1Y2tldCA9IHVwbG9hZGVkLmJ1Y2tldDtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY29uc3Qgc2UgPSBzYW5pdGl6ZUVycm9yKGUpO1xuICAgICAgICAgICAgICBzYWZlTG9nKCd3YXJuJywgeyBlcnJvcjogc2UgfSwgXCJTMyB1cGxvYWQvcHJlc2lnbiBmYWlsZWQ7IGNvbnRpbnVpbmcgd2l0aCBkaXJlY3QgR2VtaW5pIHVwbG9hZFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdHJhbnNjcmliZUNodW5rKHtcbiAgICAgICAgICAgICAgZmlsZVBhdGg6IHZhbGlkYXRlZEF1ZGlvUGF0aCxcbiAgICAgICAgICAgICAgb2Zmc2V0U2Vjb25kczogMCxcbiAgICAgICAgICAgICAgZ2VtaW5pLFxuICAgICAgICAgICAgICBtb2RlbElkLFxuICAgICAgICAgICAgICBpbnN0cnVjdGlvbnNCYXNlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHVwbG9hZGVkQnVja2V0ICYmIHVwbG9hZGVkS2V5ICYmIFMzX0RFTEVURV9BRlRFUikge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHMzLmRlbGV0ZU9iamVjdCh1cGxvYWRlZEJ1Y2tldCwgdXBsb2FkZWRLZXkpO1xuICAgICAgICAgICAgICB9IGNhdGNoIHsvKiBpZ25vcmUgKi99XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHRyYW5zY3JpcHQgPSByZXMudHJhbnNjcmlwdC50cmltKCkgfHwgcmVzLnNlZ21lbnRzLm1hcChzZWcgPT4gc2VnLnRleHQpLmpvaW4oXCJcXG5cIikudHJpbSgpO1xuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkU3VjY2Vzcyh0cmFuc2NyaXB0LCByZXMuc2VnbWVudHMsIG51bGwsIHtcbiAgICAgICAgICAgICAgdG90YWxDaHVua3M6IDEsXG4gICAgICAgICAgICAgIHByb2Nlc3NlZENodW5rczogMSxcbiAgICAgICAgICAgICAgc3RhcnRDaHVuazogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGNvbnN0IHJ1blNpbmdsZVZpYVVwbG9hZCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHNhZmVMb2coJ2luZm8nLCB7IG1vZGU6ICd1cGxvYWQnIH0sIFwi8J+OpCBUcmFuc2NyaWJpbmcgYXVkaW8gdmlhIFNESyB1cGxvYWQgKHNpbmdsZSBwYXNzKS4uLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRyYW5zY3JpYmVDaHVuayh7XG4gICAgICAgICAgICAgIGZpbGVQYXRoOiB2YWxpZGF0ZWRBdWRpb1BhdGgsXG4gICAgICAgICAgICAgIG9mZnNldFNlY29uZHM6IDAsXG4gICAgICAgICAgICAgIGdlbWluaSxcbiAgICAgICAgICAgICAgbW9kZWxJZCxcbiAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zQmFzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2NyaXB0ID0gcmVzLnRyYW5zY3JpcHQudHJpbSgpIHx8IHJlcy5zZWdtZW50cy5tYXAoc2VnID0+IHNlZy50ZXh0KS5qb2luKFwiXFxuXCIpLnRyaW0oKTtcbiAgICAgICAgICAgIHJldHVybiBidWlsZFN1Y2Nlc3ModHJhbnNjcmlwdCwgcmVzLnNlZ21lbnRzLCBudWxsLCB7XG4gICAgICAgICAgICAgIHRvdGFsQ2h1bmtzOiAxLFxuICAgICAgICAgICAgICBwcm9jZXNzZWRDaHVua3M6IDEsXG4gICAgICAgICAgICAgIHN0YXJ0Q2h1bms6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBQcmVmZXIgcHJlc2lnbmVkIHNpbmdsZS1wYXNzIHJlZ2FyZGxlc3Mgb2YgZHVyYXRpb247IGZhbGxiYWNrIHRvIGNodW5raW5nIG9uIGZhaWx1cmVcbiAgICAgICAgICBpZiAocHJlZmVyUHJlc2lnbmVkKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgcnVuU2luZ2xlVmlhUzNBbmRVcGxvYWQoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY29uc3Qgc2UgPSBzYW5pdGl6ZUVycm9yKGUpO1xuICAgICAgICAgICAgICBzYWZlTG9nKCd3YXJuJywgeyBlcnJvcjogc2UgfSwgXCJQcmVzaWduZWQgc2luZ2xlLXBhc3MgZmFpbGVkOyBjb25zaWRlcmluZyBmYWxsYmFja1wiKTtcbiAgICAgICAgICAgICAgLy8gUmVnYXJkbGVzcyBvZiBkdXJhdGlvbiwgdHJ5IFNESyB1cGxvYWQgb25jZSBiZWZvcmUgY2h1bmtpbmdcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgcnVuU2luZ2xlVmlhVXBsb2FkKCk7XG4gICAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICAgIC8vIGZhbGwgdGhyb3VnaCB0byBjaHVua2luZ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghc2hvdWxkQ2h1bmtEZWZhdWx0KSB7XG4gICAgICAgICAgICAgIHJldHVybiBhd2FpdCBydW5TaW5nbGVWaWFVcGxvYWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBub3JtYWxpemVkU3RhcnRDaHVuayA9XG4gICAgICAgICAgICBOdW1iZXIuaXNGaW5pdGUoc3RhcnRDaHVuaykgJiYgc3RhcnRDaHVuayA+IDBcbiAgICAgICAgICAgICAgPyBNYXRoLmZsb29yKHN0YXJ0Q2h1bmspXG4gICAgICAgICAgICAgIDogMDtcblxuICAgICAgICAgIC8vIElmIHdlIGdvdCBoZXJlLCB3ZSBlaXRoZXIgcHJlZmVyIHVwbG9hZCBtb2RlIGFuZCBuZWVkIGNodW5raW5nLCBvciBwcmVzaWduZWQgZmFpbGVkIGFuZCB3ZSBtdXN0IGNodW5rXG5cbiAgICAgICAgICBsZXQgdG1wRGlyOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3BsaXQgPSBhd2FpdCBzcGxpdEF1ZGlvKHZhbGlkYXRlZEF1ZGlvUGF0aCwgY2h1bmtTZWNvbmRzKTtcbiAgICAgICAgICAgIHRtcERpciA9IHNwbGl0LnRtcERpcjtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsQ2h1bmtzID0gc3BsaXQuY2h1bmtzLmxlbmd0aDtcblxuICAgICAgICAgICAgaWYgKCF0b3RhbENodW5rcykge1xuICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgcnVuU2luZ2xlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkU3RhcnRDaHVuayA+PSB0b3RhbENodW5rcykge1xuICAgICAgICAgICAgICByZXR1cm4gYnVpbGRTdWNjZXNzKFwiXCIsIFtdLCBudWxsLCB7XG4gICAgICAgICAgICAgICAgdG90YWxDaHVua3MsXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkQ2h1bmtzOiAwLFxuICAgICAgICAgICAgICAgIHN0YXJ0Q2h1bms6IG5vcm1hbGl6ZWRTdGFydENodW5rXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZW1haW5pbmdDaHVua3MgPSB0b3RhbENodW5rcyAtIG5vcm1hbGl6ZWRTdGFydENodW5rO1xuICAgICAgICAgICAgY29uc3QgYmF0Y2hTaXplID0gTWF0aC5taW4oTUFYX0NIVU5LU19QRVJfQ0FMTCwgTWF0aC5tYXgoMSwgcmVtYWluaW5nQ2h1bmtzKSk7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZENodW5rcyA9IHNwbGl0LmNodW5rcy5zbGljZShcbiAgICAgICAgICAgICAgbm9ybWFsaXplZFN0YXJ0Q2h1bmssXG4gICAgICAgICAgICAgIG5vcm1hbGl6ZWRTdGFydENodW5rICsgYmF0Y2hTaXplXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBjaHVua1Jlc3VsdHMgPSBhd2FpdCBydW5XaXRoQ29uY3VycmVuY3koXG4gICAgICAgICAgICAgIHNlbGVjdGVkQ2h1bmtzLFxuICAgICAgICAgICAgICBjaHVuayA9PlxuICAgICAgICAgICAgICAgIHRyYW5zY3JpYmVDaHVuayh7XG4gICAgICAgICAgICAgICAgICBmaWxlUGF0aDogY2h1bmsucGF0aCxcbiAgICAgICAgICAgICAgICAgIG9mZnNldFNlY29uZHM6IGNodW5rLm9mZnNldFNlY29uZHMsXG4gICAgICAgICAgICAgICAgICBnZW1pbmksXG4gICAgICAgICAgICAgICAgICBtb2RlbElkLFxuICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zQmFzZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAoY29tcGxldGVkLCB0b3RhbCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFic29sdXRlQ29tcGxldGVkID0gbm9ybWFsaXplZFN0YXJ0Q2h1bmsgKyBjb21wbGV0ZWQ7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwb3J0SW50ZXJ2YWwgPSBNYXRoLm1heCgxLCBNYXRoLm1pbig1LCBNYXRoLmNlaWwodG90YWxDaHVua3MgKiAwLjEpKSk7XG4gICAgICAgICAgICAgICAgaWYgKGFic29sdXRlQ29tcGxldGVkICUgcmVwb3J0SW50ZXJ2YWwgPT09IDAgfHwgY29tcGxldGVkID09PSB0b3RhbCkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IE1hdGguZmxvb3IoKGFic29sdXRlQ29tcGxldGVkIC8gdG90YWxDaHVua3MpICogMTAwKTtcbiAgICAgICAgICAgICAgICAgIHNhZmVMb2coXG4gICAgICAgICAgICAgICAgICAgICdpbmZvJyxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogYWJzb2x1dGVDb21wbGV0ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgdG90YWw6IHRvdGFsQ2h1bmtzLFxuICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgY2h1bmtTZWNvbmRzXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGDwn5OdIFRyYW5zY3JpYmVkICR7YWJzb2x1dGVDb21wbGV0ZWR9LyR7dG90YWxDaHVua3N9IGNodW5rcyAoJHtwZXJjZW50YWdlfSUpYFxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRyYW5zY3JpcHRQYXJ0cyA9IGNodW5rUmVzdWx0cy5tYXAociA9PiByLnRyYW5zY3JpcHQudHJpbSgpKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgICAgICBjb25zdCBtZXJnZWRTZWdtZW50cyA9IGNodW5rUmVzdWx0c1xuICAgICAgICAgICAgICAuZmxhdE1hcChyID0+IHIuc2VnbWVudHMpXG4gICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiAoYS5zdGFydFNlY29uZHMgPz8gSW5maW5pdHkpIC0gKGIuc3RhcnRTZWNvbmRzID8/IEluZmluaXR5KSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRyYW5zY3JpcHQgPVxuICAgICAgICAgICAgICB0cmFuc2NyaXB0UGFydHMuam9pbihcIlxcblxcblwiKS50cmltKCkgfHxcbiAgICAgICAgICAgICAgbWVyZ2VkU2VnbWVudHMubWFwKHNlZyA9PiBzZWcudGV4dCkuam9pbihcIlxcblwiKS50cmltKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IG5leHRDaHVua0luZGV4ID1cbiAgICAgICAgICAgICAgbm9ybWFsaXplZFN0YXJ0Q2h1bmsgKyBzZWxlY3RlZENodW5rcy5sZW5ndGggPCB0b3RhbENodW5rc1xuICAgICAgICAgICAgICAgID8gbm9ybWFsaXplZFN0YXJ0Q2h1bmsgKyBzZWxlY3RlZENodW5rcy5sZW5ndGhcbiAgICAgICAgICAgICAgICA6IG51bGw7XG5cbiAgICAgICAgICAgIHJldHVybiBidWlsZFN1Y2Nlc3ModHJhbnNjcmlwdCwgbWVyZ2VkU2VnbWVudHMsIG5leHRDaHVua0luZGV4LCB7XG4gICAgICAgICAgICAgIHRvdGFsQ2h1bmtzLFxuICAgICAgICAgICAgICBwcm9jZXNzZWRDaHVua3M6IHNlbGVjdGVkQ2h1bmtzLmxlbmd0aCxcbiAgICAgICAgICAgICAgc3RhcnRDaHVuazogbm9ybWFsaXplZFN0YXJ0Q2h1bmtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAodG1wRGlyKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGNsZWFudXBUZW1wRGlyKHRtcERpcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgICAgIC8vIE1DUCB0b29sLWxldmVsIGVycm9yIGhhbmRsZXIgLSBjb252ZXJ0IGFsbCBlcnJvcnMgdG8gbWNwRXJyb3IgZm9ybWF0XG4gICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQXVkaW9WYWxpZGF0aW9uRXJyb3IgfHxcbiAgICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBUcmFuc2NyaXB0aW9uRXJyb3IgfHxcbiAgICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBDb25maWd1cmF0aW9uRXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtY3BFcnJvcihlcnJvci5tZXNzYWdlLCBlcnJvci5tZXRhZGF0YSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gV3JhcCBvdGhlciBlcnJvcnMgaW4gVHJhbnNjcmlwdGlvbkVycm9yIHdpdGggaGVscGZ1bCBoaW50c1xuICAgICAgICAgIGNvbnN0IHNhbml0aXplZCA9IHNhbml0aXplRXJyb3IoZXJyb3IpO1xuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBzYW5pdGl6ZWQubWVzc2FnZTtcblxuICAgICAgICAgIGxldCBoaW50OiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKHNhbml0aXplZC5jb2RlID09PSBcIkVOT0VOVFwiICYmIG1lc3NhZ2UuaW5jbHVkZXMoXCJmZm1wZWdcIikpIHtcbiAgICAgICAgICAgIGhpbnQgPSBcImZmbXBlZyBpcyByZXF1aXJlZCBmb3IgY2h1bmtlZCB0cmFuc2NyaXB0aW9uLiBQbGVhc2UgaW5zdGFsbCBmZm1wZWcgb3IgcHJvdmlkZSBhIHNob3J0ZXIgYXVkaW8gY2xpcC5cIjtcbiAgICAgICAgICB9IGVsc2UgaWYgKC9mZm1wZWcvLnRlc3QobWVzc2FnZSkgJiYgL2V4aXRlZCB3aXRoIGNvZGUvLnRlc3QobWVzc2FnZSkpIHtcbiAgICAgICAgICAgIC8vIEV4dHJhY3QgZXhpdCBjb2RlIGZvciBtb3JlIHNwZWNpZmljIGVycm9yIG1lc3NhZ2VzXG4gICAgICAgICAgICBjb25zdCBleGl0Q29kZU1hdGNoID0gbWVzc2FnZS5tYXRjaCgvZXhpdGVkIHdpdGggY29kZSAoXFxkKykvKTtcbiAgICAgICAgICAgIGNvbnN0IGV4aXRDb2RlID0gZXhpdENvZGVNYXRjaCA/IHBhcnNlSW50KGV4aXRDb2RlTWF0Y2hbMV0pIDogbnVsbDtcblxuICAgICAgICAgICAgaWYgKGV4aXRDb2RlID09PSAxKSB7XG4gICAgICAgICAgICAgIGhpbnQgPSBcImZmbXBlZyByZXBvcnRlZCBhIGdlbmVyaWMgZXJyb3IuIFRoZSBhdWRpbyBmaWxlIG1heSBiZSBjb3JydXB0IG9yIGluIGFuIHVuc3VwcG9ydGVkIGZvcm1hdC4gVHJ5IHJlLWV4cG9ydGluZyBhcyBNUDMgb3IgV0FWLlwiO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChleGl0Q29kZSA9PT0gMjU1KSB7XG4gICAgICAgICAgICAgIGhpbnQgPSBcImZmbXBlZyBwcm9jZXNzaW5nIHdhcyBpbnRlcnJ1cHRlZC4gVGhpcyBtaWdodCBpbmRpY2F0ZSBhIHRpbWVvdXQgb3IgdGhlIGZpbGUgbWF5IGJlIHRvbyBsYXJnZS9jb3JydXB0IHRvIHByb2Nlc3MuXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV4aXRDb2RlID09PSAtMTEgfHwgbWVzc2FnZS5pbmNsdWRlcyhcIlNlZ21lbnRhdGlvbiBmYXVsdFwiKSkge1xuICAgICAgICAgICAgICBoaW50ID0gXCJmZm1wZWcgY3Jhc2hlZCAoc2VnbWVudGF0aW9uIGZhdWx0KS4gVGhlIGF1ZGlvIGZpbGUgaXMgbGlrZWx5IGNvcnJ1cHQgb3Igc2V2ZXJlbHkgZGFtYWdlZC4gVHJ5IHJlLWRvd25sb2FkaW5nIG9yIHJlLWV4cG9ydGluZyB0aGUgZmlsZS5cIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGhpbnQgPSBcImZmbXBlZyByZXBvcnRlZCBhbiBlcnJvciB3aGlsZSBjaHVua2luZyBhdWRpby4gVmVyaWZ5IGZmbXBlZyBpcyBpbnN0YWxsZWQgYW5kIHRoZSBhdWRpbyBmaWxlIGlzIHZhbGlkLlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHNhZmVMb2coXG4gICAgICAgICAgICAnd2FybicsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGVycm9yOiBzYW5pdGl6ZWQsXG4gICAgICAgICAgICAgIGhpbnRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIkdlbWluaSB0cmFuc2NyaXB0aW9uIHRvb2wgZmFpbGVkXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiBtY3BFcnJvcihtZXNzYWdlLCBoaW50ID8geyAuLi5zYW5pdGl6ZWQsIGhpbnQgfSA6IHNhbml0aXplZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG4gIF1cbn0pO1xuIl0sIm5hbWVzIjpbImNyZWF0ZVNka01jcFNlcnZlciIsInRvb2wiLCJ6IiwicGF0aCIsIm9zIiwibWltZSIsImNsZWFudXBUZW1wRGlyIiwic2FuaXRpemVFcnJvciIsInNhbml0aXplUGF0aCIsIm1jcEVycm9yIiwibWNwU3VjY2VzcyIsIkF1ZGlvVmFsaWRhdGlvbkVycm9yIiwiVHJhbnNjcmlwdGlvbkVycm9yIiwiQ29uZmlndXJhdGlvbkVycm9yIiwiY3JlYXRlQ2hpbGRMb2dnZXIiLCJzYWZlU3Bhd24iLCJ2YWxpZGF0ZUZpbGVQYXRoIiwiR0VNSU5JX0FQSV9LRVkiLCJNT0RFTFMiLCJHRU1JTklfQ0hVTktfU0VDT05EUyIsIkdFTUlOSV9TSU5HTEVfUEFTU19NQVgiLCJHRU1JTklfVFJBTlNDUklCRV9DT05DVVJSRU5DWSIsIkdFTUlOSV9UUkFOU0NSSUJFX1JFVFJJRVMiLCJBTExPV0VEX0FVRElPX0VYVEVOU0lPTlMiLCJHRU1JTklfSU5QVVRfTU9ERSIsIlMzX1BST0ZJTEUiLCJTM19CVUNLRVQiLCJTM19QUkVGSVgiLCJTM19QUkVTSUdOX1RUTF9TRUNPTkRTIiwiUzNfREVMRVRFX0FGVEVSIiwiaXNBdWRpb1Byb2JlRGF0YSIsImNyZWF0ZUdlbWluaVNlcnZpY2UiLCJjcmVhdGVGaWxlU3lzdGVtU2VydmljZSIsImNyZWF0ZVMzU2VydmljZSIsImxvZ2dlciIsInNhZmVMb2ciLCJsZXZlbCIsImRhdGEiLCJtZXNzYWdlIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImZzU2VydmljZSIsImdlbWluaVNlcnZpY2UiLCJnZXRHZW1pbmlTZXJ2aWNlIiwiczNTZXJ2aWNlIiwiZ2V0UzNTZXJ2aWNlIiwiTUFYX0FVRElPX0ZJTEVfQllURVMiLCJNSU5fQ0hVTktfU0VDT05EUyIsIk1BWF9DSFVOS1NfUEVSX0NBTEwiLCJmb3JtYXRCeXRlcyIsImJ5dGVzIiwiayIsInNpemVzIiwiaSIsIk1hdGgiLCJmbG9vciIsInJvdW5kIiwicG93IiwiZGVsYXkiLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImhhc1RpbWVvdXRTaWduYWwiLCJ2YWx1ZSIsInNlZW4iLCJXZWFrU2V0IiwidW5kZWZpbmVkIiwibG93ZXIiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiRXJyb3IiLCJvYmoiLCJoYXMiLCJhZGQiLCJrZXlzVG9JbnNwZWN0Iiwia2V5IiwiZmllbGQiLCJjYXVzZSIsIm1ldGFkYXRhIiwiaXNUaW1lb3V0TGlrZUVycm9yIiwiZXJyb3IiLCJyZWFzb24iLCJydW5XaXRoQ29uY3VycmVuY3kiLCJpdGVtcyIsIndvcmtlciIsIm9uUHJvZ3Jlc3MiLCJyZXN1bHRzIiwiQXJyYXkiLCJsZW5ndGgiLCJjdXJzb3IiLCJjb21wbGV0ZWQiLCJydW5uZXIiLCJpbmRleCIsIml0ZW0iLCJ3b3JrZXJzIiwiZnJvbSIsIm1pbiIsImFsbCIsInJ1bkNvbW1hbmQiLCJjb21tYW5kIiwiYXJncyIsInJlc3VsdCIsInRpbWVvdXQiLCJ2YWxpZGF0ZVBhdGhzIiwic3Rkb3V0Iiwic3RkZXJyIiwidmFsaWRhdGVBdWRpb0ZpbGUiLCJmaWxlUGF0aCIsInByb2JlRGF0YSIsInBhcnNlZCIsIkpTT04iLCJwYXJzZSIsInRyaW0iLCJpc1ZhbGlkIiwiaGludCIsInN0cmVhbXMiLCJmb3JtYXQiLCJhdWRpb1N0cmVhbSIsImZpbmQiLCJzIiwiY29kZWNfdHlwZSIsImhhc1ZpZGVvIiwic29tZSIsImNvZGVjIiwiY29kZWNfbmFtZSIsInN1cHBvcnRlZENvZGVjcyIsImlzS25vd25Db2RlYyIsInN1cHBvcnRlZCIsImR1cmF0aW9uIiwicGFyc2VGbG9hdCIsIk51bWJlciIsImlzRmluaXRlIiwiYml0cmF0ZSIsImJpdF9yYXRlIiwiYml0cmF0ZUZvcm1hdHRlZCIsInBhcnNlSW50IiwiZGV0YWlscyIsIlN0cmluZyIsInByb2JlRHVyYXRpb24iLCJzcGxpdEF1ZGlvIiwiY2h1bmtTZWNvbmRzIiwidG1wRGlyIiwibWtkdGVtcCIsImpvaW4iLCJ0bXBkaXIiLCJleHQiLCJleHRuYW1lIiwicGF0dGVybiIsImVzdGltYXRlZENodW5rcyIsImNlaWwiLCJlbnRyaWVzIiwicmVhZGRpciIsImNodW5rcyIsImZpbHRlciIsIm5hbWUiLCJzdGFydHNXaXRoIiwic29ydCIsIm1hcCIsIm9mZnNldFNlY29uZHMiLCJjaHVua0NvdW50IiwidG9TZWNvbmRzIiwidHJpbW1lZCIsInRlc3QiLCJudW0iLCJwYXJ0cyIsInNwbGl0IiwicCIsInBhcnQiLCJyZWR1Y2UiLCJhY2MiLCJmb3JtYXRUaW1lc3RhbXAiLCJzZWNvbmRzIiwidG90YWxNcyIsInBvc2l0aXZlTXMiLCJ0b3RhbFNlY29uZHMiLCJ0b3RhbE1pbnV0ZXMiLCJtIiwiaCIsIm1zUGFydCIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJub3JtYWxpemVTZWdtZW50cyIsInJhd1NlZ21lbnRzIiwic2VnIiwic3RhcnRTZWNvbmRzIiwic3RhcnQiLCJiZWdpbiIsImVuZFNlY29uZHMiLCJlbmQiLCJmaW5pc2giLCJ0byIsInRleHQiLCJ0cmFuc2NyaXB0Iiwic3BlYWtlciIsIkJvb2xlYW4iLCJ0cmFuc2NyaWJlQ2h1bmsiLCJwYXJhbXMiLCJnZW1pbmkiLCJtb2RlbElkIiwiaW5zdHJ1Y3Rpb25zQmFzZSIsImxhc3RFcnJvciIsImF0dGVtcHQiLCJtaW1lVHlwZSIsImdldFR5cGUiLCJ1cGxvYWRlZCIsInVwbG9hZEZpbGUiLCJmaWxlVXJpIiwidXJpIiwiZmlsZU1pbWUiLCJmaWxlTWltZVR5cGUiLCJvZmZzZXRJbnN0cnVjdGlvbiIsImluc3RydWN0aW9ucyIsImdlbmVyYXRlQ29udGVudCIsIm1vZGVsIiwiY29udGVudHMiLCJyb2xlIiwiZmlsZURhdGEiLCJjb25maWciLCJyZXNwb25zZU1pbWVUeXBlIiwicmVzcG9uc2UiLCJjbGVhbmVkIiwicmVwbGFjZSIsInRyYW5zY3JpcHRpb25EYXRhIiwiaXNBcnJheSIsInNlZ21lbnRzIiwiYmFzZUVycm9yIiwic2FuaXRpemVkIiwiY2h1bmtPZmZzZXRTZWNvbmRzIiwiY2h1bmtQYXRoIiwiYXR0ZW1wdHMiLCJidWlsZFN1Y2Nlc3MiLCJuZXh0Q2h1bmsiLCJpbmZvIiwicHJpbnRhYmxlU2VnbWVudHMiLCJwYXlsb2FkIiwidG90YWxDaHVua3MiLCJwcm9jZXNzZWRDaHVua3MiLCJzdGFydENodW5rIiwiZ2VtaW5pVHJhbnNjcmliZXIiLCJ2ZXJzaW9uIiwidG9vbHMiLCJhdWRpb1BhdGgiLCJzdHJpbmciLCJkZXNjcmliZSIsImlucHV0TGFuZ3VhZ2UiLCJkZWZhdWx0Iiwib3V0cHV0TGFuZ3VhZ2UiLCJkaWFyaXplIiwiYm9vbGVhbiIsInRpbWVzdGFtcHMiLCJudW1iZXIiLCJpbnQiLCJwYXRoVmFsaWRhdGlvbiIsIm11c3RFeGlzdCIsIm11c3RCZUZpbGUiLCJleHRlbnNpb25zIiwiYWxsb3dBYnNvbHV0ZSIsInZhbGlkIiwidmFsaWRhdGVkQXVkaW9QYXRoIiwic2FuaXRpemVkUGF0aCIsImZpbGVTdGF0cyIsInN0YXQiLCJzaXplIiwidmFsaWRhdGlvbiIsInRvRml4ZWQiLCJHRU1JTklfUFJPIiwic2hvdWxkQ2h1bmtEZWZhdWx0IiwicHJlZmVyUHJlc2lnbmVkIiwiZXN0aW1hdGVkTWludXRlcyIsInJ1blNpbmdsZVZpYVMzQW5kVXBsb2FkIiwibW9kZSIsInMzIiwidXBsb2FkZWRLZXkiLCJ1cGxvYWRlZEJ1Y2tldCIsInVwbG9hZEFuZFByZXNpZ24iLCJidWNrZXQiLCJwcmVmaXgiLCJleHBpcmVzSW5TZWNvbmRzIiwiZSIsInNlIiwicmVzIiwiZGVsZXRlT2JqZWN0IiwicnVuU2luZ2xlVmlhVXBsb2FkIiwibm9ybWFsaXplZFN0YXJ0Q2h1bmsiLCJydW5TaW5nbGUiLCJyZW1haW5pbmdDaHVua3MiLCJiYXRjaFNpemUiLCJtYXgiLCJzZWxlY3RlZENodW5rcyIsInNsaWNlIiwiY2h1bmtSZXN1bHRzIiwiY2h1bmsiLCJ0b3RhbCIsImFic29sdXRlQ29tcGxldGVkIiwicmVwb3J0SW50ZXJ2YWwiLCJwZXJjZW50YWdlIiwidHJhbnNjcmlwdFBhcnRzIiwiciIsIm1lcmdlZFNlZ21lbnRzIiwiZmxhdE1hcCIsImEiLCJiIiwiSW5maW5pdHkiLCJuZXh0Q2h1bmtJbmRleCIsImNvZGUiLCJleGl0Q29kZU1hdGNoIiwibWF0Y2giLCJleGl0Q29kZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../src/mcp/geminiTranscriber.ts\n");

/***/ }),

/***/ "(rsc)/../../src/mcp/pipGenerator.ts":
/*!*************************************!*\
  !*** ../../src/mcp/pipGenerator.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pipGenerator: () => (/* binding */ pipGenerator)\n/* harmony export */ });\n/* harmony import */ var _anthropic_ai_claude_agent_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @anthropic-ai/claude-agent-sdk */ \"(rsc)/../../node_modules/@anthropic-ai/claude-agent-sdk/sdk.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(rsc)/../../node_modules/zod/v3/types.js\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_sanitize_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/sanitize.js */ \"(rsc)/../../src/utils/sanitize.ts\");\n/* harmony import */ var _utils_safe_stringify_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/safe-stringify.js */ \"(rsc)/../../src/utils/safe-stringify.ts\");\n/* harmony import */ var _utils_mcp_helpers_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/mcp-helpers.js */ \"(rsc)/../../src/utils/mcp-helpers.ts\");\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../errors/index.js */ \"(rsc)/../../src/errors/index.ts\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../config.js */ \"(rsc)/../../src/config.ts\");\n/* harmony import */ var _services_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../services/index.js */ \"(rsc)/../../src/services/index.ts\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/logger.js */ \"(rsc)/../../src/utils/logger.ts\");\n\n\n\n\n\n\n\n\n\n\nconst logger = (0,_utils_logger_js__WEBPACK_IMPORTED_MODULE_8__.createChildLogger)(\"pip-generator\");\nasync function generateDraft(params, anthropicService, fsService) {\n    const promptPathResolved = node_path__WEBPACK_IMPORTED_MODULE_1__.resolve(params.promptPath);\n    const promptRaw = await fsService.readFile(promptPathResolved, \"utf-8\");\n    // Validate transcript is not empty or too short\n    if (!params.transcript || params.transcript.trim().length < 50) {\n        throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_5__.PIPGenerationError(\"Transcript is too short or empty. Ensure transcription completed successfully.\", {\n            transcriptLength: params.transcript?.length ?? 0\n        });\n    }\n    const transcriptLength = params.transcript.length;\n    const transcriptWordCount = params.transcript.split(/\\s+/).length;\n    try {\n        logger.info({\n            transcriptLength,\n            transcriptWordCount,\n            model: params.model\n        }, `📝 Generating PIP draft from transcript (${transcriptLength} chars, ~${transcriptWordCount} words)`);\n    } catch  {\n        console.log(`Generating PIP from transcript (${transcriptLength} chars, ~${transcriptWordCount} words)`);\n    }\n    const sanitizedTranscript = params.transcript.replace(/<END_TRANSCRIPT>/g, \"<END_TRANSCRIPT_ESCAPED>\");\n    const filledPrompt = promptRaw.split(\"{request.transcript}\").join(sanitizedTranscript);\n    const systemPrompt = `You are an HR specialist analyzing a meeting transcript. Extract only the performance issues that are explicitly discussed in the transcript. Follow the format instructions exactly. Do not add information not present in the transcript. Output in ${params.outputLanguage}.`;\n    const text = await anthropicService.generateMessage({\n        model: params.model,\n        maxTokens: params.maxOutputTokens,\n        temperature: params.temperature,\n        systemPrompt: systemPrompt,\n        userPrompt: filledPrompt\n    });\n    if (!text) {\n        throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_5__.PIPGenerationError(\"Claude returned an empty draft.\");\n    }\n    return text;\n}\n// Create services once at module level for reuse\n// This ensures we don't create new clients on every call\nlet anthropicService = null;\nconst fsService = (0,_services_index_js__WEBPACK_IMPORTED_MODULE_7__.createFileSystemService)();\nfunction getAnthropicService() {\n    if (!_config_js__WEBPACK_IMPORTED_MODULE_6__.ANTHROPIC_API_KEY) {\n        throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_5__.ConfigurationError(\"Missing ANTHROPIC_API_KEY for pip-generator tool.\");\n    }\n    if (!anthropicService) {\n        anthropicService = (0,_services_index_js__WEBPACK_IMPORTED_MODULE_7__.createAnthropicService)(_config_js__WEBPACK_IMPORTED_MODULE_6__.ANTHROPIC_API_KEY);\n    }\n    return anthropicService;\n}\nconst pipGenerator = (0,_anthropic_ai_claude_agent_sdk__WEBPACK_IMPORTED_MODULE_0__.createSdkMcpServer)({\n    name: \"pip-generator\",\n    version: \"0.1.0\",\n    tools: [\n        (0,_anthropic_ai_claude_agent_sdk__WEBPACK_IMPORTED_MODULE_0__.tool)(\"draft_pip\", \"Generate a PIP draft from a transcript using the local drafting prompt and Claude model.\", {\n            transcript: zod__WEBPACK_IMPORTED_MODULE_9__.string().min(1, \"Transcript is required.\"),\n            outputLanguage: zod__WEBPACK_IMPORTED_MODULE_9__.string().default(\"en\"),\n            promptPath: zod__WEBPACK_IMPORTED_MODULE_9__.string().default(_config_js__WEBPACK_IMPORTED_MODULE_6__.PIP_PROMPT_PATH),\n            model: zod__WEBPACK_IMPORTED_MODULE_9__.string().default(_config_js__WEBPACK_IMPORTED_MODULE_6__.MODELS.CLAUDE_PIP),\n            temperature: zod__WEBPACK_IMPORTED_MODULE_9__.number().min(0).max(1).default(_config_js__WEBPACK_IMPORTED_MODULE_6__.PIP_TEMPERATURE),\n            maxOutputTokens: zod__WEBPACK_IMPORTED_MODULE_9__.number().min(512).max(8192).default(_config_js__WEBPACK_IMPORTED_MODULE_6__.PIP_MAX_OUTPUT_TOKENS)\n        }, async ({ transcript, outputLanguage, promptPath, model, temperature, maxOutputTokens })=>{\n            try {\n                const anthropic = getAnthropicService();\n                const draft = await generateDraft({\n                    transcript,\n                    outputLanguage,\n                    promptPath,\n                    model,\n                    temperature,\n                    maxOutputTokens\n                }, anthropic, fsService);\n                return (0,_utils_mcp_helpers_js__WEBPACK_IMPORTED_MODULE_4__.mcpSuccess)({\n                    draft\n                });\n            } catch (error) {\n                // Check for custom errors first\n                if (error instanceof _errors_index_js__WEBPACK_IMPORTED_MODULE_5__.PIPGenerationError || error instanceof _errors_index_js__WEBPACK_IMPORTED_MODULE_5__.ConfigurationError) {\n                    return (0,_utils_safe_stringify_js__WEBPACK_IMPORTED_MODULE_3__.mcpError)(error.message, error.metadata);\n                }\n                // Wrap other errors in PIPGenerationError\n                const sanitized = (0,_utils_sanitize_js__WEBPACK_IMPORTED_MODULE_2__.sanitizeError)(error);\n                const context = {\n                    model,\n                    promptPath,\n                    outputLanguage,\n                    temperature,\n                    maxOutputTokens\n                };\n                return (0,_utils_safe_stringify_js__WEBPACK_IMPORTED_MODULE_3__.mcpError)(sanitized.message, {\n                    ...sanitized,\n                    context\n                });\n            }\n        })\n    ]\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Qyx1REFBZUE7WUFDN0RrQyxpQkFBaUI1Qyx1Q0FBUSxHQUFHcUQsR0FBRyxDQUFDLEtBQUtJLEdBQUcsQ0FBQyxNQUFNSCxPQUFPLENBQUMzQyw2REFBcUJBO1FBQzlFLEdBQ0EsT0FBTyxFQUFFYyxVQUFVLEVBQUVlLGNBQWMsRUFBRWxCLFVBQVUsRUFBRVUsS0FBSyxFQUFFYSxXQUFXLEVBQUVELGVBQWUsRUFBRTtZQUNwRixJQUFJO2dCQUNGLE1BQU1jLFlBQVlYO2dCQUNsQixNQUFNWSxRQUFRLE1BQU0zQyxjQUNsQjtvQkFDRVM7b0JBQ0FlO29CQUNBbEI7b0JBQ0FVO29CQUNBYTtvQkFDQUQ7Z0JBQ0YsR0FDQWMsV0FDQXZDO2dCQUVGLE9BQU9mLGlFQUFVQSxDQUFDO29CQUFFdUQ7Z0JBQU07WUFDNUIsRUFBRSxPQUFPQyxPQUFnQjtnQkFDdkIsZ0NBQWdDO2dCQUNoQyxJQUFJQSxpQkFBaUJ2RCxnRUFBa0JBLElBQUl1RCxpQkFBaUJ0RCxnRUFBa0JBLEVBQUU7b0JBQzlFLE9BQU9ILGtFQUFRQSxDQUFDeUQsTUFBTUMsT0FBTyxFQUFFRCxNQUFNRSxRQUFRO2dCQUMvQztnQkFFQSwwQ0FBMEM7Z0JBQzFDLE1BQU1DLFlBQVk3RCxpRUFBYUEsQ0FBQzBEO2dCQUNoQyxNQUFNSSxVQUFVO29CQUNkaEM7b0JBQ0FWO29CQUNBa0I7b0JBQ0FLO29CQUNBRDtnQkFDRjtnQkFDQSxPQUFPekMsa0VBQVFBLENBQUM0RCxVQUFVRixPQUFPLEVBQUU7b0JBQUUsR0FBR0UsU0FBUztvQkFBRUM7Z0JBQVE7WUFDN0Q7UUFDRjtLQUVIO0FBQ0gsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL0BwaXAvdWkvLi4vLi4vc3JjL21jcC9waXBHZW5lcmF0b3IudHM/ZjBiYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVTZGtNY3BTZXJ2ZXIsIHRvb2wgfSBmcm9tIFwiQGFudGhyb3BpYy1haS9jbGF1ZGUtYWdlbnQtc2RrXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tIFwibm9kZTpwYXRoXCI7XG5pbXBvcnQgeyBzYW5pdGl6ZUVycm9yIH0gZnJvbSBcIi4uL3V0aWxzL3Nhbml0aXplLmpzXCI7XG5pbXBvcnQgeyBtY3BFcnJvciB9IGZyb20gXCIuLi91dGlscy9zYWZlLXN0cmluZ2lmeS5qc1wiO1xuaW1wb3J0IHsgbWNwU3VjY2VzcyB9IGZyb20gXCIuLi91dGlscy9tY3AtaGVscGVycy5qc1wiO1xuaW1wb3J0IHsgUElQR2VuZXJhdGlvbkVycm9yLCBDb25maWd1cmF0aW9uRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzL2luZGV4LmpzXCI7XG5pbXBvcnQge1xuICBBTlRIUk9QSUNfQVBJX0tFWSxcbiAgTU9ERUxTLFxuICBQSVBfUFJPTVBUX1BBVEgsXG4gIFBJUF9URU1QRVJBVFVSRSxcbiAgUElQX01BWF9PVVRQVVRfVE9LRU5TXG59IGZyb20gXCIuLi9jb25maWcuanNcIjtcbmltcG9ydCB7XG4gIElBbnRocm9waWNTZXJ2aWNlLFxuICBJRmlsZVN5c3RlbVNlcnZpY2UsXG4gIGNyZWF0ZUFudGhyb3BpY1NlcnZpY2UsXG4gIGNyZWF0ZUZpbGVTeXN0ZW1TZXJ2aWNlXG59IGZyb20gXCIuLi9zZXJ2aWNlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQ2hpbGRMb2dnZXIgfSBmcm9tIFwiLi4vdXRpbHMvbG9nZ2VyLmpzXCI7XG5cbmNvbnN0IGxvZ2dlciA9IGNyZWF0ZUNoaWxkTG9nZ2VyKFwicGlwLWdlbmVyYXRvclwiKTtcblxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVEcmFmdChcbiAgcGFyYW1zOiB7XG4gICAgdHJhbnNjcmlwdDogc3RyaW5nO1xuICAgIG91dHB1dExhbmd1YWdlOiBzdHJpbmc7XG4gICAgcHJvbXB0UGF0aDogc3RyaW5nO1xuICAgIG1vZGVsOiBzdHJpbmc7XG4gICAgdGVtcGVyYXR1cmU6IG51bWJlcjtcbiAgICBtYXhPdXRwdXRUb2tlbnM6IG51bWJlcjtcbiAgfSxcbiAgYW50aHJvcGljU2VydmljZTogSUFudGhyb3BpY1NlcnZpY2UsXG4gIGZzU2VydmljZTogSUZpbGVTeXN0ZW1TZXJ2aWNlXG4pIHtcbiAgY29uc3QgcHJvbXB0UGF0aFJlc29sdmVkID0gcGF0aC5yZXNvbHZlKHBhcmFtcy5wcm9tcHRQYXRoKTtcbiAgY29uc3QgcHJvbXB0UmF3ID0gYXdhaXQgZnNTZXJ2aWNlLnJlYWRGaWxlKHByb21wdFBhdGhSZXNvbHZlZCwgXCJ1dGYtOFwiKSBhcyBzdHJpbmc7XG5cbiAgLy8gVmFsaWRhdGUgdHJhbnNjcmlwdCBpcyBub3QgZW1wdHkgb3IgdG9vIHNob3J0XG4gIGlmICghcGFyYW1zLnRyYW5zY3JpcHQgfHwgcGFyYW1zLnRyYW5zY3JpcHQudHJpbSgpLmxlbmd0aCA8IDUwKSB7XG4gICAgdGhyb3cgbmV3IFBJUEdlbmVyYXRpb25FcnJvcihcbiAgICAgIFwiVHJhbnNjcmlwdCBpcyB0b28gc2hvcnQgb3IgZW1wdHkuIEVuc3VyZSB0cmFuc2NyaXB0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuXCIsXG4gICAgICB7IHRyYW5zY3JpcHRMZW5ndGg6IHBhcmFtcy50cmFuc2NyaXB0Py5sZW5ndGggPz8gMCB9XG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IHRyYW5zY3JpcHRMZW5ndGggPSBwYXJhbXMudHJhbnNjcmlwdC5sZW5ndGg7XG4gIGNvbnN0IHRyYW5zY3JpcHRXb3JkQ291bnQgPSBwYXJhbXMudHJhbnNjcmlwdC5zcGxpdCgvXFxzKy8pLmxlbmd0aDtcbiAgdHJ5IHtcbiAgICBsb2dnZXIuaW5mbyhcbiAgICAgIHsgdHJhbnNjcmlwdExlbmd0aCwgdHJhbnNjcmlwdFdvcmRDb3VudCwgbW9kZWw6IHBhcmFtcy5tb2RlbCB9LFxuICAgICAgYPCfk50gR2VuZXJhdGluZyBQSVAgZHJhZnQgZnJvbSB0cmFuc2NyaXB0ICgke3RyYW5zY3JpcHRMZW5ndGh9IGNoYXJzLCB+JHt0cmFuc2NyaXB0V29yZENvdW50fSB3b3JkcylgXG4gICAgKTtcbiAgfSBjYXRjaCB7XG4gICAgY29uc29sZS5sb2coYEdlbmVyYXRpbmcgUElQIGZyb20gdHJhbnNjcmlwdCAoJHt0cmFuc2NyaXB0TGVuZ3RofSBjaGFycywgfiR7dHJhbnNjcmlwdFdvcmRDb3VudH0gd29yZHMpYCk7XG4gIH1cblxuICBjb25zdCBzYW5pdGl6ZWRUcmFuc2NyaXB0ID0gcGFyYW1zLnRyYW5zY3JpcHQucmVwbGFjZSgvPEVORF9UUkFOU0NSSVBUPi9nLCBcIjxFTkRfVFJBTlNDUklQVF9FU0NBUEVEPlwiKTtcbiAgY29uc3QgZmlsbGVkUHJvbXB0ID0gcHJvbXB0UmF3LnNwbGl0KFwie3JlcXVlc3QudHJhbnNjcmlwdH1cIikuam9pbihzYW5pdGl6ZWRUcmFuc2NyaXB0KTtcblxuICBjb25zdCBzeXN0ZW1Qcm9tcHQgPSBgWW91IGFyZSBhbiBIUiBzcGVjaWFsaXN0IGFuYWx5emluZyBhIG1lZXRpbmcgdHJhbnNjcmlwdC4gRXh0cmFjdCBvbmx5IHRoZSBwZXJmb3JtYW5jZSBpc3N1ZXMgdGhhdCBhcmUgZXhwbGljaXRseSBkaXNjdXNzZWQgaW4gdGhlIHRyYW5zY3JpcHQuIEZvbGxvdyB0aGUgZm9ybWF0IGluc3RydWN0aW9ucyBleGFjdGx5LiBEbyBub3QgYWRkIGluZm9ybWF0aW9uIG5vdCBwcmVzZW50IGluIHRoZSB0cmFuc2NyaXB0LiBPdXRwdXQgaW4gJHtwYXJhbXMub3V0cHV0TGFuZ3VhZ2V9LmA7XG5cbiAgY29uc3QgdGV4dCA9IGF3YWl0IGFudGhyb3BpY1NlcnZpY2UuZ2VuZXJhdGVNZXNzYWdlKHtcbiAgICBtb2RlbDogcGFyYW1zLm1vZGVsLFxuICAgIG1heFRva2VuczogcGFyYW1zLm1heE91dHB1dFRva2VucyxcbiAgICB0ZW1wZXJhdHVyZTogcGFyYW1zLnRlbXBlcmF0dXJlLFxuICAgIHN5c3RlbVByb21wdDogc3lzdGVtUHJvbXB0LFxuICAgIHVzZXJQcm9tcHQ6IGZpbGxlZFByb21wdFxuICB9KTtcblxuICBpZiAoIXRleHQpIHtcbiAgICB0aHJvdyBuZXcgUElQR2VuZXJhdGlvbkVycm9yKFwiQ2xhdWRlIHJldHVybmVkIGFuIGVtcHR5IGRyYWZ0LlwiKTtcbiAgfVxuICByZXR1cm4gdGV4dDtcbn1cblxuLy8gQ3JlYXRlIHNlcnZpY2VzIG9uY2UgYXQgbW9kdWxlIGxldmVsIGZvciByZXVzZVxuLy8gVGhpcyBlbnN1cmVzIHdlIGRvbid0IGNyZWF0ZSBuZXcgY2xpZW50cyBvbiBldmVyeSBjYWxsXG5sZXQgYW50aHJvcGljU2VydmljZTogSUFudGhyb3BpY1NlcnZpY2UgfCBudWxsID0gbnVsbDtcbmNvbnN0IGZzU2VydmljZTogSUZpbGVTeXN0ZW1TZXJ2aWNlID0gY3JlYXRlRmlsZVN5c3RlbVNlcnZpY2UoKTtcblxuZnVuY3Rpb24gZ2V0QW50aHJvcGljU2VydmljZSgpOiBJQW50aHJvcGljU2VydmljZSB7XG4gIGlmICghQU5USFJPUElDX0FQSV9LRVkpIHtcbiAgICB0aHJvdyBuZXcgQ29uZmlndXJhdGlvbkVycm9yKFwiTWlzc2luZyBBTlRIUk9QSUNfQVBJX0tFWSBmb3IgcGlwLWdlbmVyYXRvciB0b29sLlwiKTtcbiAgfVxuICBpZiAoIWFudGhyb3BpY1NlcnZpY2UpIHtcbiAgICBhbnRocm9waWNTZXJ2aWNlID0gY3JlYXRlQW50aHJvcGljU2VydmljZShBTlRIUk9QSUNfQVBJX0tFWSk7XG4gIH1cbiAgcmV0dXJuIGFudGhyb3BpY1NlcnZpY2U7XG59XG5cbmV4cG9ydCBjb25zdCBwaXBHZW5lcmF0b3IgPSBjcmVhdGVTZGtNY3BTZXJ2ZXIoe1xuICBuYW1lOiBcInBpcC1nZW5lcmF0b3JcIixcbiAgdmVyc2lvbjogXCIwLjEuMFwiLFxuICB0b29sczogW1xuICAgIHRvb2woXG4gICAgICBcImRyYWZ0X3BpcFwiLFxuICAgICAgXCJHZW5lcmF0ZSBhIFBJUCBkcmFmdCBmcm9tIGEgdHJhbnNjcmlwdCB1c2luZyB0aGUgbG9jYWwgZHJhZnRpbmcgcHJvbXB0IGFuZCBDbGF1ZGUgbW9kZWwuXCIsXG4gICAgICB7XG4gICAgICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubWluKDEsIFwiVHJhbnNjcmlwdCBpcyByZXF1aXJlZC5cIiksXG4gICAgICAgIG91dHB1dExhbmd1YWdlOiB6LnN0cmluZygpLmRlZmF1bHQoXCJlblwiKSxcbiAgICAgICAgcHJvbXB0UGF0aDogei5zdHJpbmcoKS5kZWZhdWx0KFBJUF9QUk9NUFRfUEFUSCksXG4gICAgICAgIG1vZGVsOiB6LnN0cmluZygpLmRlZmF1bHQoTU9ERUxTLkNMQVVERV9QSVApLFxuICAgICAgICB0ZW1wZXJhdHVyZTogei5udW1iZXIoKS5taW4oMCkubWF4KDEpLmRlZmF1bHQoUElQX1RFTVBFUkFUVVJFKSxcbiAgICAgICAgbWF4T3V0cHV0VG9rZW5zOiB6Lm51bWJlcigpLm1pbig1MTIpLm1heCg4MTkyKS5kZWZhdWx0KFBJUF9NQVhfT1VUUFVUX1RPS0VOUylcbiAgICAgIH0sXG4gICAgICBhc3luYyAoeyB0cmFuc2NyaXB0LCBvdXRwdXRMYW5ndWFnZSwgcHJvbXB0UGF0aCwgbW9kZWwsIHRlbXBlcmF0dXJlLCBtYXhPdXRwdXRUb2tlbnMgfSkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGFudGhyb3BpYyA9IGdldEFudGhyb3BpY1NlcnZpY2UoKTtcbiAgICAgICAgICBjb25zdCBkcmFmdCA9IGF3YWl0IGdlbmVyYXRlRHJhZnQoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRyYW5zY3JpcHQsXG4gICAgICAgICAgICAgIG91dHB1dExhbmd1YWdlLFxuICAgICAgICAgICAgICBwcm9tcHRQYXRoLFxuICAgICAgICAgICAgICBtb2RlbCxcbiAgICAgICAgICAgICAgdGVtcGVyYXR1cmUsXG4gICAgICAgICAgICAgIG1heE91dHB1dFRva2Vuc1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFudGhyb3BpYyxcbiAgICAgICAgICAgIGZzU2VydmljZVxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIG1jcFN1Y2Nlc3MoeyBkcmFmdCB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAvLyBDaGVjayBmb3IgY3VzdG9tIGVycm9ycyBmaXJzdFxuICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFBJUEdlbmVyYXRpb25FcnJvciB8fCBlcnJvciBpbnN0YW5jZW9mIENvbmZpZ3VyYXRpb25FcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIG1jcEVycm9yKGVycm9yLm1lc3NhZ2UsIGVycm9yLm1ldGFkYXRhKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBXcmFwIG90aGVyIGVycm9ycyBpbiBQSVBHZW5lcmF0aW9uRXJyb3JcbiAgICAgICAgICBjb25zdCBzYW5pdGl6ZWQgPSBzYW5pdGl6ZUVycm9yKGVycm9yKTtcbiAgICAgICAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICAgICAgbW9kZWwsXG4gICAgICAgICAgICBwcm9tcHRQYXRoLFxuICAgICAgICAgICAgb3V0cHV0TGFuZ3VhZ2UsXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZSxcbiAgICAgICAgICAgIG1heE91dHB1dFRva2Vuc1xuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIG1jcEVycm9yKHNhbml0aXplZC5tZXNzYWdlLCB7IC4uLnNhbml0aXplZCwgY29udGV4dCB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIClcbiAgXVxufSk7XG4iXSwibmFtZXMiOlsiY3JlYXRlU2RrTWNwU2VydmVyIiwidG9vbCIsInoiLCJwYXRoIiwic2FuaXRpemVFcnJvciIsIm1jcEVycm9yIiwibWNwU3VjY2VzcyIsIlBJUEdlbmVyYXRpb25FcnJvciIsIkNvbmZpZ3VyYXRpb25FcnJvciIsIkFOVEhST1BJQ19BUElfS0VZIiwiTU9ERUxTIiwiUElQX1BST01QVF9QQVRIIiwiUElQX1RFTVBFUkFUVVJFIiwiUElQX01BWF9PVVRQVVRfVE9LRU5TIiwiY3JlYXRlQW50aHJvcGljU2VydmljZSIsImNyZWF0ZUZpbGVTeXN0ZW1TZXJ2aWNlIiwiY3JlYXRlQ2hpbGRMb2dnZXIiLCJsb2dnZXIiLCJnZW5lcmF0ZURyYWZ0IiwicGFyYW1zIiwiYW50aHJvcGljU2VydmljZSIsImZzU2VydmljZSIsInByb21wdFBhdGhSZXNvbHZlZCIsInJlc29sdmUiLCJwcm9tcHRQYXRoIiwicHJvbXB0UmF3IiwicmVhZEZpbGUiLCJ0cmFuc2NyaXB0IiwidHJpbSIsImxlbmd0aCIsInRyYW5zY3JpcHRMZW5ndGgiLCJ0cmFuc2NyaXB0V29yZENvdW50Iiwic3BsaXQiLCJpbmZvIiwibW9kZWwiLCJjb25zb2xlIiwibG9nIiwic2FuaXRpemVkVHJhbnNjcmlwdCIsInJlcGxhY2UiLCJmaWxsZWRQcm9tcHQiLCJqb2luIiwic3lzdGVtUHJvbXB0Iiwib3V0cHV0TGFuZ3VhZ2UiLCJ0ZXh0IiwiZ2VuZXJhdGVNZXNzYWdlIiwibWF4VG9rZW5zIiwibWF4T3V0cHV0VG9rZW5zIiwidGVtcGVyYXR1cmUiLCJ1c2VyUHJvbXB0IiwiZ2V0QW50aHJvcGljU2VydmljZSIsInBpcEdlbmVyYXRvciIsIm5hbWUiLCJ2ZXJzaW9uIiwidG9vbHMiLCJzdHJpbmciLCJtaW4iLCJkZWZhdWx0IiwiQ0xBVURFX1BJUCIsIm51bWJlciIsIm1heCIsImFudGhyb3BpYyIsImRyYWZ0IiwiZXJyb3IiLCJtZXNzYWdlIiwibWV0YWRhdGEiLCJzYW5pdGl6ZWQiLCJjb250ZXh0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../src/mcp/pipGenerator.ts\n");

/***/ }),

/***/ "(rsc)/../../src/services/AnthropicService.ts":
/*!**********************************************!*\
  !*** ../../src/services/AnthropicService.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnthropicService: () => (/* binding */ AnthropicService),\n/* harmony export */   createAnthropicService: () => (/* binding */ createAnthropicService)\n/* harmony export */ });\n/* harmony import */ var _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @anthropic-ai/sdk */ \"(rsc)/../../node_modules/@anthropic-ai/sdk/index.mjs\");\n/**\n * Anthropic Service - Dependency Injection Wrapper for Anthropic SDK\n *\n * This service encapsulates all interactions with the Anthropic API,\n * making the codebase more testable and maintainable by allowing\n * dependencies to be injected rather than created inline.\n *\n * @example\n * ```typescript\n * const service = createAnthropicService(apiKey);\n * const response = await service.generateMessage({\n *   model: \"claude-sonnet-4-5-20250929\",\n *   maxTokens: 4096,\n *   temperature: 0.2,\n *   systemPrompt: \"You are an HR specialist\",\n *   userPrompt: \"Draft a PIP...\"\n * });\n * ```\n */ \n/**\n * Implementation of the Anthropic service\n *\n * Wraps the Anthropic SDK client and provides a clean interface\n * for message generation operations.\n */ class AnthropicService {\n    /**\n   * Create a new Anthropic service instance\n   *\n   * @param apiKey - Anthropic API key for authentication\n   */ constructor(apiKey){\n        this.client = new _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n            apiKey\n        });\n    }\n    /**\n   * Generate a text message using Claude\n   *\n   * @param params - Message generation parameters\n   * @returns The generated text content (all text blocks joined)\n   * @throws Error if the API call fails or returns empty content\n   */ async generateMessage(params) {\n        const response = await this.client.messages.create({\n            model: params.model,\n            max_tokens: params.maxTokens,\n            temperature: params.temperature,\n            system: params.systemPrompt,\n            messages: [\n                {\n                    role: \"user\",\n                    content: params.userPrompt\n                }\n            ]\n        });\n        // Extract and join all text blocks from the response\n        const text = response.content.filter((block)=>block.type === \"text\").map((block)=>block.text).join(\"\").trim();\n        return text;\n    }\n}\n/**\n * Factory function to create an Anthropic service instance\n *\n * This pattern allows for easy service creation while maintaining\n * the ability to swap implementations for testing.\n *\n * @param apiKey - Anthropic API key for authentication\n * @returns An instance of IAnthropicService\n *\n * @example\n * ```typescript\n * const service = createAnthropicService(process.env.ANTHROPIC_API_KEY!);\n * const draft = await service.generateMessage({...});\n * ```\n */ function createAnthropicService(apiKey) {\n    return new AnthropicService(apiKey);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vc3JjL3NlcnZpY2VzL0FudGhyb3BpY1NlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQWtCQyxHQUV5QztBQXdDMUM7Ozs7O0NBS0MsR0FDTSxNQUFNQztJQUdYOzs7O0dBSUMsR0FDREMsWUFBWUMsTUFBYyxDQUFFO1FBQzFCLElBQUksQ0FBQ0MsTUFBTSxHQUFHLElBQUlKLHlEQUFTQSxDQUFDO1lBQUVHO1FBQU87SUFDdkM7SUFFQTs7Ozs7O0dBTUMsR0FDRCxNQUFNRSxnQkFBZ0JDLE1BQXFCLEVBQW1CO1FBQzVELE1BQU1DLFdBQVcsTUFBTSxJQUFJLENBQUNILE1BQU0sQ0FBQ0ksUUFBUSxDQUFDQyxNQUFNLENBQUM7WUFDakRDLE9BQU9KLE9BQU9JLEtBQUs7WUFDbkJDLFlBQVlMLE9BQU9NLFNBQVM7WUFDNUJDLGFBQWFQLE9BQU9PLFdBQVc7WUFDL0JDLFFBQVFSLE9BQU9TLFlBQVk7WUFDM0JQLFVBQVU7Z0JBQ1I7b0JBQ0VRLE1BQU07b0JBQ05DLFNBQVNYLE9BQU9ZLFVBQVU7Z0JBQzVCO2FBQ0Q7UUFDSDtRQUVBLHFEQUFxRDtRQUNyRCxNQUFNQyxPQUFPWixTQUFTVSxPQUFPLENBQzFCRyxNQUFNLENBQUMsQ0FBQ0MsUUFBOEJBLE1BQU1DLElBQUksS0FBSyxRQUNyREMsR0FBRyxDQUFDRixDQUFBQSxRQUFTQSxNQUFNRixJQUFJLEVBQ3ZCSyxJQUFJLENBQUMsSUFDTEMsSUFBSTtRQUVQLE9BQU9OO0lBQ1Q7QUFDRjtBQUVBOzs7Ozs7Ozs7Ozs7OztDQWNDLEdBQ00sU0FBU08sdUJBQXVCdkIsTUFBYztJQUNuRCxPQUFPLElBQUlGLGlCQUFpQkU7QUFDOUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AcGlwL3VpLy4uLy4uL3NyYy9zZXJ2aWNlcy9BbnRocm9waWNTZXJ2aWNlLnRzPzBiYTciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBbnRocm9waWMgU2VydmljZSAtIERlcGVuZGVuY3kgSW5qZWN0aW9uIFdyYXBwZXIgZm9yIEFudGhyb3BpYyBTREtcbiAqXG4gKiBUaGlzIHNlcnZpY2UgZW5jYXBzdWxhdGVzIGFsbCBpbnRlcmFjdGlvbnMgd2l0aCB0aGUgQW50aHJvcGljIEFQSSxcbiAqIG1ha2luZyB0aGUgY29kZWJhc2UgbW9yZSB0ZXN0YWJsZSBhbmQgbWFpbnRhaW5hYmxlIGJ5IGFsbG93aW5nXG4gKiBkZXBlbmRlbmNpZXMgdG8gYmUgaW5qZWN0ZWQgcmF0aGVyIHRoYW4gY3JlYXRlZCBpbmxpbmUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHNlcnZpY2UgPSBjcmVhdGVBbnRocm9waWNTZXJ2aWNlKGFwaUtleSk7XG4gKiBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNlcnZpY2UuZ2VuZXJhdGVNZXNzYWdlKHtcbiAqICAgbW9kZWw6IFwiY2xhdWRlLXNvbm5ldC00LTUtMjAyNTA5MjlcIixcbiAqICAgbWF4VG9rZW5zOiA0MDk2LFxuICogICB0ZW1wZXJhdHVyZTogMC4yLFxuICogICBzeXN0ZW1Qcm9tcHQ6IFwiWW91IGFyZSBhbiBIUiBzcGVjaWFsaXN0XCIsXG4gKiAgIHVzZXJQcm9tcHQ6IFwiRHJhZnQgYSBQSVAuLi5cIlxuICogfSk7XG4gKiBgYGBcbiAqL1xuXG5pbXBvcnQgQW50aHJvcGljIGZyb20gXCJAYW50aHJvcGljLWFpL3Nka1wiO1xuaW1wb3J0IHR5cGUgeyBUZXh0QmxvY2sgfSBmcm9tIFwiQGFudGhyb3BpYy1haS9zZGsvcmVzb3VyY2VzL21lc3NhZ2VzXCI7XG5cbi8qKlxuICogUGFyYW1ldGVycyBmb3IgbWVzc2FnZSBnZW5lcmF0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZVBhcmFtcyB7XG4gIC8qKiBNb2RlbCBpZGVudGlmaWVyIChlLmcuLCBcImNsYXVkZS1zb25uZXQtNC01LTIwMjUwOTI5XCIpICovXG4gIG1vZGVsOiBzdHJpbmc7XG4gIC8qKiBNYXhpbXVtIG51bWJlciBvZiB0b2tlbnMgdG8gZ2VuZXJhdGUgKi9cbiAgbWF4VG9rZW5zOiBudW1iZXI7XG4gIC8qKiBUZW1wZXJhdHVyZSBmb3IgcmFuZG9tbmVzcyAoMC0xKSAqL1xuICB0ZW1wZXJhdHVyZTogbnVtYmVyO1xuICAvKiogU3lzdGVtIHByb21wdCB0byBzZXQgYmVoYXZpb3IvY29udGV4dCAqL1xuICBzeXN0ZW1Qcm9tcHQ6IHN0cmluZztcbiAgLyoqIFVzZXIgcHJvbXB0IHdpdGggdGhlIGFjdHVhbCByZXF1ZXN0ICovXG4gIHVzZXJQcm9tcHQ6IHN0cmluZztcbn1cblxuLyoqXG4gKiBJbnRlcmZhY2UgZm9yIEFudGhyb3BpYyBzZXJ2aWNlIG9wZXJhdGlvbnNcbiAqXG4gKiBUaGlzIGludGVyZmFjZSBhbGxvd3MgZm9yIGVhc3kgbW9ja2luZyBpbiB0ZXN0czpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IG1vY2tTZXJ2aWNlOiBJQW50aHJvcGljU2VydmljZSA9IHtcbiAqICAgZ2VuZXJhdGVNZXNzYWdlOiBhc3luYyAoKSA9PiBcIm1vY2sgcmVzcG9uc2VcIlxuICogfTtcbiAqIGBgYFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElBbnRocm9waWNTZXJ2aWNlIHtcbiAgLyoqXG4gICAqIEdlbmVyYXRlIGEgdGV4dCBtZXNzYWdlIHVzaW5nIENsYXVkZVxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gTWVzc2FnZSBnZW5lcmF0aW9uIHBhcmFtZXRlcnNcbiAgICogQHJldHVybnMgVGhlIGdlbmVyYXRlZCB0ZXh0IGNvbnRlbnRcbiAgICogQHRocm93cyBFcnJvciBpZiB0aGUgQVBJIGNhbGwgZmFpbHMgb3IgcmV0dXJucyBlbXB0eSBjb250ZW50XG4gICAqL1xuICBnZW5lcmF0ZU1lc3NhZ2UocGFyYW1zOiBNZXNzYWdlUGFyYW1zKTogUHJvbWlzZTxzdHJpbmc+O1xufVxuXG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIHRoZSBBbnRocm9waWMgc2VydmljZVxuICpcbiAqIFdyYXBzIHRoZSBBbnRocm9waWMgU0RLIGNsaWVudCBhbmQgcHJvdmlkZXMgYSBjbGVhbiBpbnRlcmZhY2VcbiAqIGZvciBtZXNzYWdlIGdlbmVyYXRpb24gb3BlcmF0aW9ucy5cbiAqL1xuZXhwb3J0IGNsYXNzIEFudGhyb3BpY1NlcnZpY2UgaW1wbGVtZW50cyBJQW50aHJvcGljU2VydmljZSB7XG4gIHByaXZhdGUgY2xpZW50OiBBbnRocm9waWM7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBBbnRocm9waWMgc2VydmljZSBpbnN0YW5jZVxuICAgKlxuICAgKiBAcGFyYW0gYXBpS2V5IC0gQW50aHJvcGljIEFQSSBrZXkgZm9yIGF1dGhlbnRpY2F0aW9uXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhcGlLZXk6IHN0cmluZykge1xuICAgIHRoaXMuY2xpZW50ID0gbmV3IEFudGhyb3BpYyh7IGFwaUtleSB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBhIHRleHQgbWVzc2FnZSB1c2luZyBDbGF1ZGVcbiAgICpcbiAgICogQHBhcmFtIHBhcmFtcyAtIE1lc3NhZ2UgZ2VuZXJhdGlvbiBwYXJhbWV0ZXJzXG4gICAqIEByZXR1cm5zIFRoZSBnZW5lcmF0ZWQgdGV4dCBjb250ZW50IChhbGwgdGV4dCBibG9ja3Mgam9pbmVkKVxuICAgKiBAdGhyb3dzIEVycm9yIGlmIHRoZSBBUEkgY2FsbCBmYWlscyBvciByZXR1cm5zIGVtcHR5IGNvbnRlbnRcbiAgICovXG4gIGFzeW5jIGdlbmVyYXRlTWVzc2FnZShwYXJhbXM6IE1lc3NhZ2VQYXJhbXMpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jbGllbnQubWVzc2FnZXMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiBwYXJhbXMubW9kZWwsXG4gICAgICBtYXhfdG9rZW5zOiBwYXJhbXMubWF4VG9rZW5zLFxuICAgICAgdGVtcGVyYXR1cmU6IHBhcmFtcy50ZW1wZXJhdHVyZSxcbiAgICAgIHN5c3RlbTogcGFyYW1zLnN5c3RlbVByb21wdCxcbiAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICBjb250ZW50OiBwYXJhbXMudXNlclByb21wdFxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSk7XG5cbiAgICAvLyBFeHRyYWN0IGFuZCBqb2luIGFsbCB0ZXh0IGJsb2NrcyBmcm9tIHRoZSByZXNwb25zZVxuICAgIGNvbnN0IHRleHQgPSByZXNwb25zZS5jb250ZW50XG4gICAgICAuZmlsdGVyKChibG9jayk6IGJsb2NrIGlzIFRleHRCbG9jayA9PiBibG9jay50eXBlID09PSBcInRleHRcIilcbiAgICAgIC5tYXAoYmxvY2sgPT4gYmxvY2sudGV4dClcbiAgICAgIC5qb2luKFwiXCIpXG4gICAgICAudHJpbSgpO1xuXG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cbn1cblxuLyoqXG4gKiBGYWN0b3J5IGZ1bmN0aW9uIHRvIGNyZWF0ZSBhbiBBbnRocm9waWMgc2VydmljZSBpbnN0YW5jZVxuICpcbiAqIFRoaXMgcGF0dGVybiBhbGxvd3MgZm9yIGVhc3kgc2VydmljZSBjcmVhdGlvbiB3aGlsZSBtYWludGFpbmluZ1xuICogdGhlIGFiaWxpdHkgdG8gc3dhcCBpbXBsZW1lbnRhdGlvbnMgZm9yIHRlc3RpbmcuXG4gKlxuICogQHBhcmFtIGFwaUtleSAtIEFudGhyb3BpYyBBUEkga2V5IGZvciBhdXRoZW50aWNhdGlvblxuICogQHJldHVybnMgQW4gaW5zdGFuY2Ugb2YgSUFudGhyb3BpY1NlcnZpY2VcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3Qgc2VydmljZSA9IGNyZWF0ZUFudGhyb3BpY1NlcnZpY2UocHJvY2Vzcy5lbnYuQU5USFJPUElDX0FQSV9LRVkhKTtcbiAqIGNvbnN0IGRyYWZ0ID0gYXdhaXQgc2VydmljZS5nZW5lcmF0ZU1lc3NhZ2Uoey4uLn0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBbnRocm9waWNTZXJ2aWNlKGFwaUtleTogc3RyaW5nKTogSUFudGhyb3BpY1NlcnZpY2Uge1xuICByZXR1cm4gbmV3IEFudGhyb3BpY1NlcnZpY2UoYXBpS2V5KTtcbn1cbiJdLCJuYW1lcyI6WyJBbnRocm9waWMiLCJBbnRocm9waWNTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJhcGlLZXkiLCJjbGllbnQiLCJnZW5lcmF0ZU1lc3NhZ2UiLCJwYXJhbXMiLCJyZXNwb25zZSIsIm1lc3NhZ2VzIiwiY3JlYXRlIiwibW9kZWwiLCJtYXhfdG9rZW5zIiwibWF4VG9rZW5zIiwidGVtcGVyYXR1cmUiLCJzeXN0ZW0iLCJzeXN0ZW1Qcm9tcHQiLCJyb2xlIiwiY29udGVudCIsInVzZXJQcm9tcHQiLCJ0ZXh0IiwiZmlsdGVyIiwiYmxvY2siLCJ0eXBlIiwibWFwIiwiam9pbiIsInRyaW0iLCJjcmVhdGVBbnRocm9waWNTZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../src/services/AnthropicService.ts\n");

/***/ }),

/***/ "(rsc)/../../src/services/FileSystemService.ts":
/*!***********************************************!*\
  !*** ../../src/services/FileSystemService.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FileSystemService: () => (/* binding */ FileSystemService),\n/* harmony export */   createFileSystemService: () => (/* binding */ createFileSystemService)\n/* harmony export */ });\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:fs/promises */ \"node:fs/promises\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_fs_promises__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:fs */ \"node:fs\");\n/* harmony import */ var node_fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_fs__WEBPACK_IMPORTED_MODULE_1__);\n/**\n * File System Service - Dependency Injection Wrapper for Node.js fs module\n *\n * This service encapsulates all file system operations, making the codebase\n * more testable by allowing file system interactions to be mocked.\n *\n * @example\n * ```typescript\n * const service = createFileSystemService();\n * const content = await service.readFile(\"/path/to/file.txt\", \"utf-8\");\n * await service.writeFile(\"/path/to/output.txt\", \"content\");\n * ```\n */ \n\n/**\n * Implementation of the file system service\n *\n * Wraps the Node.js fs module and provides a clean interface\n * for file system operations.\n */ class FileSystemService {\n    /**\n   * Read file contents asynchronously\n   */ async readFile(path, encoding) {\n        if (encoding) {\n            return await node_fs_promises__WEBPACK_IMPORTED_MODULE_0__.readFile(path, encoding);\n        }\n        return await node_fs_promises__WEBPACK_IMPORTED_MODULE_0__.readFile(path);\n    }\n    /**\n   * Write content to a file asynchronously\n   */ async writeFile(path, data) {\n        await node_fs_promises__WEBPACK_IMPORTED_MODULE_0__.writeFile(path, data);\n    }\n    /**\n   * Create a directory asynchronously\n   */ async mkdir(path, options) {\n        await node_fs_promises__WEBPACK_IMPORTED_MODULE_0__.mkdir(path, options);\n    }\n    /**\n   * Check if a file or directory exists asynchronously\n   */ async exists(path) {\n        try {\n            await node_fs_promises__WEBPACK_IMPORTED_MODULE_0__.access(path);\n            return true;\n        } catch  {\n            return false;\n        }\n    }\n    /**\n   * Check if a file or directory exists synchronously\n   */ existsSync(path) {\n        return node_fs__WEBPACK_IMPORTED_MODULE_1__.existsSync(path);\n    }\n    /**\n   * Read directory contents asynchronously\n   */ async readdir(path) {\n        return await node_fs_promises__WEBPACK_IMPORTED_MODULE_0__.readdir(path);\n    }\n    /**\n   * Create a temporary directory asynchronously\n   */ async mkdtemp(prefix) {\n        return await node_fs_promises__WEBPACK_IMPORTED_MODULE_0__.mkdtemp(prefix);\n    }\n    /**\n   * Remove a directory and its contents recursively asynchronously\n   */ async rm(path, options) {\n        await node_fs_promises__WEBPACK_IMPORTED_MODULE_0__.rm(path, options);\n    }\n    /**\n   * Get file or directory statistics asynchronously\n   */ async stat(path) {\n        const stats = await node_fs_promises__WEBPACK_IMPORTED_MODULE_0__.stat(path);\n        return {\n            size: stats.size,\n            isFile: ()=>stats.isFile(),\n            isDirectory: ()=>stats.isDirectory()\n        };\n    }\n}\n/**\n * Factory function to create a file system service instance\n *\n * This pattern allows for easy service creation while maintaining\n * the ability to swap implementations for testing.\n *\n * @returns An instance of IFileSystemService\n *\n * @example\n * ```typescript\n * const service = createFileSystemService();\n * const content = await service.readFile(\"/path/to/file.txt\", \"utf-8\");\n * ```\n */ function createFileSystemService() {\n    return new FileSystemService();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vc3JjL3NlcnZpY2VzL0ZpbGVTeXN0ZW1TZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Q0FZQyxHQUVzQztBQUNMO0FBMEdsQzs7Ozs7Q0FLQyxHQUNNLE1BQU1FO0lBQ1g7O0dBRUMsR0FDRCxNQUFNQyxTQUFTQyxJQUFZLEVBQUVDLFFBQWdDLEVBQTRCO1FBQ3ZGLElBQUlBLFVBQVU7WUFDWixPQUFPLE1BQU1MLHNEQUFXLENBQUNJLE1BQU1DO1FBQ2pDO1FBQ0EsT0FBTyxNQUFNTCxzREFBVyxDQUFDSTtJQUMzQjtJQUVBOztHQUVDLEdBQ0QsTUFBTUUsVUFBVUYsSUFBWSxFQUFFRyxJQUFxQixFQUFpQjtRQUNsRSxNQUFNUCx1REFBWSxDQUFDSSxNQUFNRztJQUMzQjtJQUVBOztHQUVDLEdBQ0QsTUFBTUMsTUFBTUosSUFBWSxFQUFFSyxPQUFzQixFQUFpQjtRQUMvRCxNQUFNVCxtREFBUSxDQUFDSSxNQUFNSztJQUN2QjtJQUVBOztHQUVDLEdBQ0QsTUFBTUMsT0FBT04sSUFBWSxFQUFvQjtRQUMzQyxJQUFJO1lBQ0YsTUFBTUosb0RBQVMsQ0FBQ0k7WUFDaEIsT0FBTztRQUNULEVBQUUsT0FBTTtZQUNOLE9BQU87UUFDVDtJQUNGO0lBRUE7O0dBRUMsR0FDRFEsV0FBV1IsSUFBWSxFQUFXO1FBQ2hDLE9BQU9ILCtDQUFpQixDQUFDRztJQUMzQjtJQUVBOztHQUVDLEdBQ0QsTUFBTVMsUUFBUVQsSUFBWSxFQUFxQjtRQUM3QyxPQUFPLE1BQU1KLHFEQUFVLENBQUNJO0lBQzFCO0lBRUE7O0dBRUMsR0FDRCxNQUFNVSxRQUFRQyxNQUFjLEVBQW1CO1FBQzdDLE9BQU8sTUFBTWYscURBQVUsQ0FBQ2U7SUFDMUI7SUFFQTs7R0FFQyxHQUNELE1BQU1DLEdBQUdaLElBQVksRUFBRUssT0FBa0QsRUFBaUI7UUFDeEYsTUFBTVQsZ0RBQUssQ0FBQ0ksTUFBTUs7SUFDcEI7SUFFQTs7R0FFQyxHQUNELE1BQU1RLEtBQUtiLElBQVksRUFBZ0Y7UUFDckcsTUFBTWMsUUFBUSxNQUFNbEIsa0RBQU8sQ0FBQ0k7UUFDNUIsT0FBTztZQUNMZSxNQUFNRCxNQUFNQyxJQUFJO1lBQ2hCQyxRQUFRLElBQU1GLE1BQU1FLE1BQU07WUFDMUJDLGFBQWEsSUFBTUgsTUFBTUcsV0FBVztRQUN0QztJQUNGO0FBQ0Y7QUFFQTs7Ozs7Ozs7Ozs7OztDQWFDLEdBQ00sU0FBU0M7SUFDZCxPQUFPLElBQUlwQjtBQUNiIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHBpcC91aS8uLi8uLi9zcmMvc2VydmljZXMvRmlsZVN5c3RlbVNlcnZpY2UudHM/NjcyYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEZpbGUgU3lzdGVtIFNlcnZpY2UgLSBEZXBlbmRlbmN5IEluamVjdGlvbiBXcmFwcGVyIGZvciBOb2RlLmpzIGZzIG1vZHVsZVxuICpcbiAqIFRoaXMgc2VydmljZSBlbmNhcHN1bGF0ZXMgYWxsIGZpbGUgc3lzdGVtIG9wZXJhdGlvbnMsIG1ha2luZyB0aGUgY29kZWJhc2VcbiAqIG1vcmUgdGVzdGFibGUgYnkgYWxsb3dpbmcgZmlsZSBzeXN0ZW0gaW50ZXJhY3Rpb25zIHRvIGJlIG1vY2tlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3Qgc2VydmljZSA9IGNyZWF0ZUZpbGVTeXN0ZW1TZXJ2aWNlKCk7XG4gKiBjb25zdCBjb250ZW50ID0gYXdhaXQgc2VydmljZS5yZWFkRmlsZShcIi9wYXRoL3RvL2ZpbGUudHh0XCIsIFwidXRmLThcIik7XG4gKiBhd2FpdCBzZXJ2aWNlLndyaXRlRmlsZShcIi9wYXRoL3RvL291dHB1dC50eHRcIiwgXCJjb250ZW50XCIpO1xuICogYGBgXG4gKi9cblxuaW1wb3J0ICogYXMgZnMgZnJvbSBcIm5vZGU6ZnMvcHJvbWlzZXNcIjtcbmltcG9ydCAqIGFzIGZzc3luYyBmcm9tIFwibm9kZTpmc1wiO1xuXG4vKipcbiAqIE9wdGlvbnMgZm9yIG1rZGlyIG9wZXJhdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1rZGlyT3B0aW9ucyB7XG4gIC8qKiBDcmVhdGUgcGFyZW50IGRpcmVjdG9yaWVzIGlmIHRoZXkgZG9uJ3QgZXhpc3QgKi9cbiAgcmVjdXJzaXZlPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBJbnRlcmZhY2UgZm9yIGZpbGUgc3lzdGVtIHNlcnZpY2Ugb3BlcmF0aW9uc1xuICpcbiAqIFRoaXMgaW50ZXJmYWNlIGFsbG93cyBmb3IgZWFzeSBtb2NraW5nIGluIHRlc3RzOlxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgbW9ja0ZzOiBJRmlsZVN5c3RlbVNlcnZpY2UgPSB7XG4gKiAgIHJlYWRGaWxlOiBhc3luYyAoKSA9PiBcIm1vY2sgY29udGVudFwiLFxuICogICB3cml0ZUZpbGU6IGFzeW5jICgpID0+IHt9LFxuICogICBta2RpcjogYXN5bmMgKCkgPT4ge30sXG4gKiAgIGV4aXN0czogYXN5bmMgKCkgPT4gdHJ1ZSxcbiAqICAgZXhpc3RzU3luYzogKCkgPT4gdHJ1ZVxuICogfTtcbiAqIGBgYFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElGaWxlU3lzdGVtU2VydmljZSB7XG4gIC8qKlxuICAgKiBSZWFkIGZpbGUgY29udGVudHMgYXN5bmNocm9ub3VzbHlcbiAgICpcbiAgICogQHBhcmFtIHBhdGggLSBQYXRoIHRvIHRoZSBmaWxlIHRvIHJlYWRcbiAgICogQHBhcmFtIGVuY29kaW5nIC0gVGV4dCBlbmNvZGluZyAoZS5nLiwgXCJ1dGYtOFwiKSBvciBudWxsIGZvciBCdWZmZXJcbiAgICogQHJldHVybnMgRmlsZSBjb250ZW50cyBhcyBzdHJpbmcgKGlmIGVuY29kaW5nIHNwZWNpZmllZCkgb3IgQnVmZmVyXG4gICAqIEB0aHJvd3MgRXJyb3IgaWYgZmlsZSBkb2Vzbid0IGV4aXN0IG9yIGNhbm5vdCBiZSByZWFkXG4gICAqL1xuICByZWFkRmlsZShwYXRoOiBzdHJpbmcsIGVuY29kaW5nPzogQnVmZmVyRW5jb2RpbmcgfCBudWxsKTogUHJvbWlzZTxzdHJpbmcgfCBCdWZmZXI+O1xuXG4gIC8qKlxuICAgKiBXcml0ZSBjb250ZW50IHRvIGEgZmlsZSBhc3luY2hyb25vdXNseVxuICAgKlxuICAgKiBAcGFyYW0gcGF0aCAtIFBhdGggdG8gdGhlIGZpbGUgdG8gd3JpdGVcbiAgICogQHBhcmFtIGRhdGEgLSBDb250ZW50IHRvIHdyaXRlIChzdHJpbmcgb3IgQnVmZmVyKVxuICAgKiBAdGhyb3dzIEVycm9yIGlmIGZpbGUgY2Fubm90IGJlIHdyaXR0ZW5cbiAgICovXG4gIHdyaXRlRmlsZShwYXRoOiBzdHJpbmcsIGRhdGE6IHN0cmluZyB8IEJ1ZmZlcik6IFByb21pc2U8dm9pZD47XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGRpcmVjdG9yeSBhc3luY2hyb25vdXNseVxuICAgKlxuICAgKiBAcGFyYW0gcGF0aCAtIFBhdGggdG8gdGhlIGRpcmVjdG9yeSB0byBjcmVhdGVcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGxpa2UgcmVjdXJzaXZlIGRpcmVjdG9yeSBjcmVhdGlvblxuICAgKiBAdGhyb3dzIEVycm9yIGlmIGRpcmVjdG9yeSBjYW5ub3QgYmUgY3JlYXRlZFxuICAgKi9cbiAgbWtkaXIocGF0aDogc3RyaW5nLCBvcHRpb25zPzogTWtkaXJPcHRpb25zKTogUHJvbWlzZTx2b2lkPjtcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBmaWxlIG9yIGRpcmVjdG9yeSBleGlzdHMgYXN5bmNocm9ub3VzbHlcbiAgICpcbiAgICogQHBhcmFtIHBhdGggLSBQYXRoIHRvIGNoZWNrXG4gICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHBhdGggZXhpc3RzLCBmYWxzZSBvdGhlcndpc2VcbiAgICovXG4gIGV4aXN0cyhwYXRoOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+O1xuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGZpbGUgb3IgZGlyZWN0b3J5IGV4aXN0cyBzeW5jaHJvbm91c2x5XG4gICAqXG4gICAqIEBwYXJhbSBwYXRoIC0gUGF0aCB0byBjaGVja1xuICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBwYXRoIGV4aXN0cywgZmFsc2Ugb3RoZXJ3aXNlXG4gICAqL1xuICBleGlzdHNTeW5jKHBhdGg6IHN0cmluZyk6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFJlYWQgZGlyZWN0b3J5IGNvbnRlbnRzIGFzeW5jaHJvbm91c2x5XG4gICAqXG4gICAqIEBwYXJhbSBwYXRoIC0gUGF0aCB0byB0aGUgZGlyZWN0b3J5IHRvIHJlYWRcbiAgICogQHJldHVybnMgQXJyYXkgb2YgZmlsZSBhbmQgZGlyZWN0b3J5IG5hbWVzXG4gICAqIEB0aHJvd3MgRXJyb3IgaWYgZGlyZWN0b3J5IGNhbm5vdCBiZSByZWFkXG4gICAqL1xuICByZWFkZGlyKHBhdGg6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSB0ZW1wb3JhcnkgZGlyZWN0b3J5IGFzeW5jaHJvbm91c2x5XG4gICAqXG4gICAqIEBwYXJhbSBwcmVmaXggLSBQcmVmaXggZm9yIHRoZSB0ZW1wb3JhcnkgZGlyZWN0b3J5IG5hbWVcbiAgICogQHJldHVybnMgUGF0aCB0byB0aGUgY3JlYXRlZCB0ZW1wb3JhcnkgZGlyZWN0b3J5XG4gICAqIEB0aHJvd3MgRXJyb3IgaWYgZGlyZWN0b3J5IGNhbm5vdCBiZSBjcmVhdGVkXG4gICAqL1xuICBta2R0ZW1wKHByZWZpeDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBkaXJlY3RvcnkgYW5kIGl0cyBjb250ZW50cyByZWN1cnNpdmVseSBhc3luY2hyb25vdXNseVxuICAgKlxuICAgKiBAcGFyYW0gcGF0aCAtIFBhdGggdG8gdGhlIGRpcmVjdG9yeSB0byByZW1vdmVcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGxpa2UgcmVjdXJzaXZlIHJlbW92YWxcbiAgICogQHRocm93cyBFcnJvciBpZiBkaXJlY3RvcnkgY2Fubm90IGJlIHJlbW92ZWRcbiAgICovXG4gIHJtKHBhdGg6IHN0cmluZywgb3B0aW9ucz86IHsgcmVjdXJzaXZlPzogYm9vbGVhbjsgZm9yY2U/OiBib29sZWFuIH0pOiBQcm9taXNlPHZvaWQ+O1xuXG4gIC8qKlxuICAgKiBHZXQgZmlsZSBvciBkaXJlY3Rvcnkgc3RhdGlzdGljcyBhc3luY2hyb25vdXNseVxuICAgKlxuICAgKiBAcGFyYW0gcGF0aCAtIFBhdGggdG8gdGhlIGZpbGUgb3IgZGlyZWN0b3J5XG4gICAqIEByZXR1cm5zIEZpbGUgc3RhdGlzdGljcyBpbmNsdWRpbmcgc2l6ZSwgbW9kaWZpY2F0aW9uIHRpbWUsIGV0Yy5cbiAgICogQHRocm93cyBFcnJvciBpZiBwYXRoIGRvZXNuJ3QgZXhpc3Qgb3IgY2Fubm90IGJlIGFjY2Vzc2VkXG4gICAqL1xuICBzdGF0KHBhdGg6IHN0cmluZyk6IFByb21pc2U8eyBzaXplOiBudW1iZXI7IGlzRmlsZTogKCkgPT4gYm9vbGVhbjsgaXNEaXJlY3Rvcnk6ICgpID0+IGJvb2xlYW4gfT47XG59XG5cbi8qKlxuICogSW1wbGVtZW50YXRpb24gb2YgdGhlIGZpbGUgc3lzdGVtIHNlcnZpY2VcbiAqXG4gKiBXcmFwcyB0aGUgTm9kZS5qcyBmcyBtb2R1bGUgYW5kIHByb3ZpZGVzIGEgY2xlYW4gaW50ZXJmYWNlXG4gKiBmb3IgZmlsZSBzeXN0ZW0gb3BlcmF0aW9ucy5cbiAqL1xuZXhwb3J0IGNsYXNzIEZpbGVTeXN0ZW1TZXJ2aWNlIGltcGxlbWVudHMgSUZpbGVTeXN0ZW1TZXJ2aWNlIHtcbiAgLyoqXG4gICAqIFJlYWQgZmlsZSBjb250ZW50cyBhc3luY2hyb25vdXNseVxuICAgKi9cbiAgYXN5bmMgcmVhZEZpbGUocGF0aDogc3RyaW5nLCBlbmNvZGluZz86IEJ1ZmZlckVuY29kaW5nIHwgbnVsbCk6IFByb21pc2U8c3RyaW5nIHwgQnVmZmVyPiB7XG4gICAgaWYgKGVuY29kaW5nKSB7XG4gICAgICByZXR1cm4gYXdhaXQgZnMucmVhZEZpbGUocGF0aCwgZW5jb2RpbmcpO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgZnMucmVhZEZpbGUocGF0aCk7XG4gIH1cblxuICAvKipcbiAgICogV3JpdGUgY29udGVudCB0byBhIGZpbGUgYXN5bmNocm9ub3VzbHlcbiAgICovXG4gIGFzeW5jIHdyaXRlRmlsZShwYXRoOiBzdHJpbmcsIGRhdGE6IHN0cmluZyB8IEJ1ZmZlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IGZzLndyaXRlRmlsZShwYXRoLCBkYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBkaXJlY3RvcnkgYXN5bmNocm9ub3VzbHlcbiAgICovXG4gIGFzeW5jIG1rZGlyKHBhdGg6IHN0cmluZywgb3B0aW9ucz86IE1rZGlyT3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IGZzLm1rZGlyKHBhdGgsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgZmlsZSBvciBkaXJlY3RvcnkgZXhpc3RzIGFzeW5jaHJvbm91c2x5XG4gICAqL1xuICBhc3luYyBleGlzdHMocGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGZzLmFjY2VzcyhwYXRoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGZpbGUgb3IgZGlyZWN0b3J5IGV4aXN0cyBzeW5jaHJvbm91c2x5XG4gICAqL1xuICBleGlzdHNTeW5jKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmc3N5bmMuZXhpc3RzU3luYyhwYXRoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkIGRpcmVjdG9yeSBjb250ZW50cyBhc3luY2hyb25vdXNseVxuICAgKi9cbiAgYXN5bmMgcmVhZGRpcihwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgcmV0dXJuIGF3YWl0IGZzLnJlYWRkaXIocGF0aCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgdGVtcG9yYXJ5IGRpcmVjdG9yeSBhc3luY2hyb25vdXNseVxuICAgKi9cbiAgYXN5bmMgbWtkdGVtcChwcmVmaXg6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIGF3YWl0IGZzLm1rZHRlbXAocHJlZml4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBkaXJlY3RvcnkgYW5kIGl0cyBjb250ZW50cyByZWN1cnNpdmVseSBhc3luY2hyb25vdXNseVxuICAgKi9cbiAgYXN5bmMgcm0ocGF0aDogc3RyaW5nLCBvcHRpb25zPzogeyByZWN1cnNpdmU/OiBib29sZWFuOyBmb3JjZT86IGJvb2xlYW4gfSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IGZzLnJtKHBhdGgsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBmaWxlIG9yIGRpcmVjdG9yeSBzdGF0aXN0aWNzIGFzeW5jaHJvbm91c2x5XG4gICAqL1xuICBhc3luYyBzdGF0KHBhdGg6IHN0cmluZyk6IFByb21pc2U8eyBzaXplOiBudW1iZXI7IGlzRmlsZTogKCkgPT4gYm9vbGVhbjsgaXNEaXJlY3Rvcnk6ICgpID0+IGJvb2xlYW4gfT4ge1xuICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgZnMuc3RhdChwYXRoKTtcbiAgICByZXR1cm4ge1xuICAgICAgc2l6ZTogc3RhdHMuc2l6ZSxcbiAgICAgIGlzRmlsZTogKCkgPT4gc3RhdHMuaXNGaWxlKCksXG4gICAgICBpc0RpcmVjdG9yeTogKCkgPT4gc3RhdHMuaXNEaXJlY3RvcnkoKVxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBGYWN0b3J5IGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIGZpbGUgc3lzdGVtIHNlcnZpY2UgaW5zdGFuY2VcbiAqXG4gKiBUaGlzIHBhdHRlcm4gYWxsb3dzIGZvciBlYXN5IHNlcnZpY2UgY3JlYXRpb24gd2hpbGUgbWFpbnRhaW5pbmdcbiAqIHRoZSBhYmlsaXR5IHRvIHN3YXAgaW1wbGVtZW50YXRpb25zIGZvciB0ZXN0aW5nLlxuICpcbiAqIEByZXR1cm5zIEFuIGluc3RhbmNlIG9mIElGaWxlU3lzdGVtU2VydmljZVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBzZXJ2aWNlID0gY3JlYXRlRmlsZVN5c3RlbVNlcnZpY2UoKTtcbiAqIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBzZXJ2aWNlLnJlYWRGaWxlKFwiL3BhdGgvdG8vZmlsZS50eHRcIiwgXCJ1dGYtOFwiKTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRmlsZVN5c3RlbVNlcnZpY2UoKTogSUZpbGVTeXN0ZW1TZXJ2aWNlIHtcbiAgcmV0dXJuIG5ldyBGaWxlU3lzdGVtU2VydmljZSgpO1xufVxuIl0sIm5hbWVzIjpbImZzIiwiZnNzeW5jIiwiRmlsZVN5c3RlbVNlcnZpY2UiLCJyZWFkRmlsZSIsInBhdGgiLCJlbmNvZGluZyIsIndyaXRlRmlsZSIsImRhdGEiLCJta2RpciIsIm9wdGlvbnMiLCJleGlzdHMiLCJhY2Nlc3MiLCJleGlzdHNTeW5jIiwicmVhZGRpciIsIm1rZHRlbXAiLCJwcmVmaXgiLCJybSIsInN0YXQiLCJzdGF0cyIsInNpemUiLCJpc0ZpbGUiLCJpc0RpcmVjdG9yeSIsImNyZWF0ZUZpbGVTeXN0ZW1TZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../src/services/FileSystemService.ts\n");

/***/ }),

/***/ "(rsc)/../../src/services/GeminiService.ts":
/*!*******************************************!*\
  !*** ../../src/services/GeminiService.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GeminiService: () => (/* binding */ GeminiService),\n/* harmony export */   createGeminiService: () => (/* binding */ createGeminiService)\n/* harmony export */ });\n/**\n * Gemini Service - Dependency Injection Wrapper for Google Gen AI SDK\n *\n * This service encapsulates all interactions with the Gemini API,\n * making the codebase more testable and maintainable by allowing\n * dependencies to be injected rather than created inline.\n *\n * @example\n * ```typescript\n * const service = createGeminiService(apiKey);\n * const uploadedFile = await service.uploadFile(\"/path/to/audio.mp3\", \"audio/mp3\");\n * const result = await service.generateContent({\n *   model: \"gemini-2.5-pro\",\n *   contents: [...],\n *   config: { responseMimeType: \"application/json\" }\n * });\n * ```\n */ /**\n * Uploaded file information returned by Gemini\n */ /**\n * Implementation of the Gemini service\n *\n * Wraps the Google Gen AI SDK and provides a clean interface\n * for file upload and content generation operations.\n */ class GeminiService {\n    /**\n   * Create a new Gemini service instance\n   *\n   * @param apiKey - Gemini API key for authentication\n   */ constructor(apiKey){\n        // Lazy-load the Google Gen AI SDK to avoid import errors if not installed\n        // This is safe because the service is only created when needed\n        const loadGeminiSDK = async ()=>{\n            const { GoogleGenAI } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/google-auth-library\"), __webpack_require__.e(\"vendor-chunks/uuid\"), __webpack_require__.e(\"vendor-chunks/ws\"), __webpack_require__.e(\"vendor-chunks/gaxios\"), __webpack_require__.e(\"vendor-chunks/whatwg-url\"), __webpack_require__.e(\"vendor-chunks/jws\"), __webpack_require__.e(\"vendor-chunks/debug\"), __webpack_require__.e(\"vendor-chunks/json-bigint\"), __webpack_require__.e(\"vendor-chunks/google-logging-utils\"), __webpack_require__.e(\"vendor-chunks/tr46\"), __webpack_require__.e(\"vendor-chunks/https-proxy-agent\"), __webpack_require__.e(\"vendor-chunks/gcp-metadata\"), __webpack_require__.e(\"vendor-chunks/ecdsa-sig-formatter\"), __webpack_require__.e(\"vendor-chunks/agent-base\"), __webpack_require__.e(\"vendor-chunks/node-fetch\"), __webpack_require__.e(\"vendor-chunks/webidl-conversions\"), __webpack_require__.e(\"vendor-chunks/supports-color\"), __webpack_require__.e(\"vendor-chunks/safe-buffer\"), __webpack_require__.e(\"vendor-chunks/ms\"), __webpack_require__.e(\"vendor-chunks/jwa\"), __webpack_require__.e(\"vendor-chunks/is-stream\"), __webpack_require__.e(\"vendor-chunks/has-flag\"), __webpack_require__.e(\"vendor-chunks/gtoken\"), __webpack_require__.e(\"vendor-chunks/extend\"), __webpack_require__.e(\"vendor-chunks/buffer-equal-constant-time\"), __webpack_require__.e(\"vendor-chunks/bignumber.js\"), __webpack_require__.e(\"vendor-chunks/base64-js\"), __webpack_require__.e(\"vendor-chunks/@google\"), __webpack_require__.e(\"_3713-_8e41\")]).then(__webpack_require__.t.bind(__webpack_require__, /*! @google/genai */ \"(rsc)/../../node_modules/@google/genai/dist/node/index.js\", 19));\n            return new GoogleGenAI({\n                apiKey\n            });\n        };\n        // Store the promise for lazy initialization\n        this.aiPromise = loadGeminiSDK();\n    }\n    /**\n   * Ensure the AI client is initialized\n   */ async ensureClient() {\n        if (!this.ai) {\n            this.ai = await this.aiPromise;\n        }\n        return this.ai;\n    }\n    /**\n   * Upload a file to Gemini for processing\n   *\n   * @param filePath - Absolute path to the file to upload\n   * @param mimeType - MIME type of the file\n   * @returns Upload result with file URI and metadata\n   */ async uploadFile(filePath, mimeType) {\n        const ai = await this.ensureClient();\n        const uploaded = await ai.files.upload({\n            file: filePath,\n            config: {\n                mimeType\n            }\n        });\n        // Normalize the response structure (API may return different shapes)\n        const uploadedFile = uploaded.file ?? uploaded;\n        return {\n            uri: uploadedFile?.uri,\n            fileUri: uploadedFile?.fileUri,\n            mimeType: uploadedFile?.mimeType,\n            fileMimeType: uploadedFile?.fileMimeType\n        };\n    }\n    /**\n   * Generate content using Gemini model\n   *\n   * @param params - Content generation parameters\n   * @returns Generated content result\n   */ async generateContent(params) {\n        const ai = await this.ensureClient();\n        const result = await ai.models.generateContent({\n            model: params.model,\n            contents: params.contents,\n            config: params.config\n        });\n        return {\n            text: result.text,\n            response: result.response\n        };\n    }\n}\n/**\n * Factory function to create a Gemini service instance\n *\n * This pattern allows for easy service creation while maintaining\n * the ability to swap implementations for testing.\n *\n * @param apiKey - Gemini API key for authentication\n * @returns An instance of IGeminiService\n *\n * @example\n * ```typescript\n * const service = createGeminiService(process.env.GEMINI_API_KEY!);\n * const uploaded = await service.uploadFile(\"/audio.mp3\", \"audio/mp3\");\n * ```\n */ function createGeminiService(apiKey) {\n    return new GeminiService(apiKey);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vc3JjL3NlcnZpY2VzL0dlbWluaVNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FpQkMsR0FFRDs7Q0FFQyxHQTBFRDs7Ozs7Q0FLQyxHQUNNLE1BQU1BO0lBR1g7Ozs7R0FJQyxHQUNEQyxZQUFZQyxNQUFjLENBQUU7UUFDMUIsMEVBQTBFO1FBQzFFLCtEQUErRDtRQUMvRCxNQUFNQyxnQkFBZ0I7WUFDcEIsTUFBTSxFQUFFQyxXQUFXLEVBQUUsR0FBRyxNQUFNLHFtREFBdUI7WUFDckQsT0FBTyxJQUFJQSxZQUFZO2dCQUFFRjtZQUFPO1FBQ2xDO1FBRUEsNENBQTRDO1FBQzVDLElBQUksQ0FBQ0csU0FBUyxHQUFHRjtJQUNuQjtJQUlBOztHQUVDLEdBQ0QsTUFBY0csZUFBZTtRQUMzQixJQUFJLENBQUMsSUFBSSxDQUFDQyxFQUFFLEVBQUU7WUFDWixJQUFJLENBQUNBLEVBQUUsR0FBRyxNQUFNLElBQUksQ0FBQ0YsU0FBUztRQUNoQztRQUNBLE9BQU8sSUFBSSxDQUFDRSxFQUFFO0lBQ2hCO0lBRUE7Ozs7OztHQU1DLEdBQ0QsTUFBTUMsV0FBV0MsUUFBZ0IsRUFBRUMsUUFBZ0IsRUFBeUI7UUFDMUUsTUFBTUgsS0FBSyxNQUFNLElBQUksQ0FBQ0QsWUFBWTtRQUVsQyxNQUFNSyxXQUFXLE1BQU1KLEdBQUdLLEtBQUssQ0FBQ0MsTUFBTSxDQUFDO1lBQ3JDQyxNQUFNTDtZQUNOTSxRQUFRO2dCQUFFTDtZQUFTO1FBQ3JCO1FBRUEscUVBQXFFO1FBQ3JFLE1BQU1NLGVBQW9CLFNBQWtCRixJQUFJLElBQUlIO1FBRXBELE9BQU87WUFDTE0sS0FBS0QsY0FBY0M7WUFDbkJDLFNBQVNGLGNBQWNFO1lBQ3ZCUixVQUFVTSxjQUFjTjtZQUN4QlMsY0FBY0gsY0FBY0c7UUFDOUI7SUFDRjtJQUVBOzs7OztHQUtDLEdBQ0QsTUFBTUMsZ0JBQWdCQyxNQUE2QixFQUFrQztRQUNuRixNQUFNZCxLQUFLLE1BQU0sSUFBSSxDQUFDRCxZQUFZO1FBRWxDLE1BQU1nQixTQUFTLE1BQU1mLEdBQUdnQixNQUFNLENBQUNILGVBQWUsQ0FBQztZQUM3Q0ksT0FBT0gsT0FBT0csS0FBSztZQUNuQkMsVUFBVUosT0FBT0ksUUFBUTtZQUN6QlYsUUFBUU0sT0FBT04sTUFBTTtRQUN2QjtRQUVBLE9BQU87WUFDTFcsTUFBTSxPQUFnQkEsSUFBSTtZQUMxQkMsVUFBVSxPQUFnQkEsUUFBUTtRQUNwQztJQUNGO0FBQ0Y7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Q0FjQyxHQUNNLFNBQVNDLG9CQUFvQjFCLE1BQWM7SUFDaEQsT0FBTyxJQUFJRixjQUFjRTtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL0BwaXAvdWkvLi4vLi4vc3JjL3NlcnZpY2VzL0dlbWluaVNlcnZpY2UudHM/MDA2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEdlbWluaSBTZXJ2aWNlIC0gRGVwZW5kZW5jeSBJbmplY3Rpb24gV3JhcHBlciBmb3IgR29vZ2xlIEdlbiBBSSBTREtcbiAqXG4gKiBUaGlzIHNlcnZpY2UgZW5jYXBzdWxhdGVzIGFsbCBpbnRlcmFjdGlvbnMgd2l0aCB0aGUgR2VtaW5pIEFQSSxcbiAqIG1ha2luZyB0aGUgY29kZWJhc2UgbW9yZSB0ZXN0YWJsZSBhbmQgbWFpbnRhaW5hYmxlIGJ5IGFsbG93aW5nXG4gKiBkZXBlbmRlbmNpZXMgdG8gYmUgaW5qZWN0ZWQgcmF0aGVyIHRoYW4gY3JlYXRlZCBpbmxpbmUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHNlcnZpY2UgPSBjcmVhdGVHZW1pbmlTZXJ2aWNlKGFwaUtleSk7XG4gKiBjb25zdCB1cGxvYWRlZEZpbGUgPSBhd2FpdCBzZXJ2aWNlLnVwbG9hZEZpbGUoXCIvcGF0aC90by9hdWRpby5tcDNcIiwgXCJhdWRpby9tcDNcIik7XG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmdlbmVyYXRlQ29udGVudCh7XG4gKiAgIG1vZGVsOiBcImdlbWluaS0yLjUtcHJvXCIsXG4gKiAgIGNvbnRlbnRzOiBbLi4uXSxcbiAqICAgY29uZmlnOiB7IHJlc3BvbnNlTWltZVR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiIH1cbiAqIH0pO1xuICogYGBgXG4gKi9cblxuLyoqXG4gKiBVcGxvYWRlZCBmaWxlIGluZm9ybWF0aW9uIHJldHVybmVkIGJ5IEdlbWluaVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVwbG9hZGVkRmlsZSB7XG4gIC8qKiBVUkkgcmVmZXJlbmNlIGZvciB0aGUgdXBsb2FkZWQgZmlsZSAqL1xuICB1cmk/OiBzdHJpbmc7XG4gIC8qKiBBbHRlcm5hdGl2ZSBVUkkgZmllbGQgbmFtZSAqL1xuICBmaWxlVXJpPzogc3RyaW5nO1xuICAvKiogTUlNRSB0eXBlIG9mIHRoZSB1cGxvYWRlZCBmaWxlICovXG4gIG1pbWVUeXBlPzogc3RyaW5nO1xuICAvKiogQWx0ZXJuYXRpdmUgTUlNRSB0eXBlIGZpZWxkIG5hbWUgKi9cbiAgZmlsZU1pbWVUeXBlPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFBhcmFtZXRlcnMgZm9yIGNvbnRlbnQgZ2VuZXJhdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIEdlbmVyYXRlQ29udGVudFBhcmFtcyB7XG4gIC8qKiBNb2RlbCBpZGVudGlmaWVyIChlLmcuLCBcImdlbWluaS0yLjUtcHJvXCIpICovXG4gIG1vZGVsOiBzdHJpbmc7XG4gIC8qKiBBcnJheSBvZiBjb250ZW50IGl0ZW1zIHdpdGggcm9sZXMgYW5kIHBhcnRzICovXG4gIGNvbnRlbnRzOiBBcnJheTx7XG4gICAgcm9sZTogc3RyaW5nO1xuICAgIHBhcnRzOiBBcnJheTx7IHRleHQ/OiBzdHJpbmc7IGZpbGVEYXRhPzogeyBmaWxlVXJpOiBzdHJpbmc7IG1pbWVUeXBlOiBzdHJpbmcgfSB9PjtcbiAgfT47XG4gIC8qKiBDb25maWd1cmF0aW9uIG9wdGlvbnMgKi9cbiAgY29uZmlnPzoge1xuICAgIC8qKiBFeHBlY3RlZCByZXNwb25zZSBNSU1FIHR5cGUgKi9cbiAgICByZXNwb25zZU1pbWVUeXBlPzogc3RyaW5nO1xuICB9O1xufVxuXG4vKipcbiAqIFJlc3VsdCBmcm9tIGNvbnRlbnQgZ2VuZXJhdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIEdlbmVyYXRlQ29udGVudFJlc3VsdCB7XG4gIC8qKiBHZW5lcmF0ZWQgdGV4dCBjb250ZW50ICovXG4gIHRleHQ/OiBzdHJpbmc7XG4gIC8qKiBSZXNwb25zZSBvYmplY3QgKG1heSBjb250YWluIG5lc3RlZCB0ZXh0IGdldHRlcikgKi9cbiAgcmVzcG9uc2U/OiB7XG4gICAgdGV4dD86ICgpID0+IHN0cmluZztcbiAgfTtcbn1cblxuLyoqXG4gKiBJbnRlcmZhY2UgZm9yIEdlbWluaSBzZXJ2aWNlIG9wZXJhdGlvbnNcbiAqXG4gKiBUaGlzIGludGVyZmFjZSBhbGxvd3MgZm9yIGVhc3kgbW9ja2luZyBpbiB0ZXN0czpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IG1vY2tTZXJ2aWNlOiBJR2VtaW5pU2VydmljZSA9IHtcbiAqICAgdXBsb2FkRmlsZTogYXN5bmMgKCkgPT4gKHsgdXJpOiBcIm1vY2s6Ly91cmlcIiwgbWltZVR5cGU6IFwiYXVkaW8vbXAzXCIgfSksXG4gKiAgIGdlbmVyYXRlQ29udGVudDogYXN5bmMgKCkgPT4gKHsgdGV4dDogXCJtb2NrIHRyYW5zY3JpcHRcIiB9KVxuICogfTtcbiAqIGBgYFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElHZW1pbmlTZXJ2aWNlIHtcbiAgLyoqXG4gICAqIFVwbG9hZCBhIGZpbGUgdG8gR2VtaW5pIGZvciBwcm9jZXNzaW5nXG4gICAqXG4gICAqIEBwYXJhbSBmaWxlUGF0aCAtIEFic29sdXRlIHBhdGggdG8gdGhlIGZpbGUgdG8gdXBsb2FkXG4gICAqIEBwYXJhbSBtaW1lVHlwZSAtIE1JTUUgdHlwZSBvZiB0aGUgZmlsZSAoZS5nLiwgXCJhdWRpby9tcDNcIilcbiAgICogQHJldHVybnMgVXBsb2FkIHJlc3VsdCB3aXRoIGZpbGUgVVJJIGFuZCBtZXRhZGF0YVxuICAgKiBAdGhyb3dzIEVycm9yIGlmIHVwbG9hZCBmYWlsc1xuICAgKi9cbiAgdXBsb2FkRmlsZShmaWxlUGF0aDogc3RyaW5nLCBtaW1lVHlwZTogc3RyaW5nKTogUHJvbWlzZTxVcGxvYWRlZEZpbGU+O1xuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBjb250ZW50IHVzaW5nIEdlbWluaSBtb2RlbFxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQ29udGVudCBnZW5lcmF0aW9uIHBhcmFtZXRlcnNcbiAgICogQHJldHVybnMgR2VuZXJhdGVkIGNvbnRlbnQgcmVzdWx0XG4gICAqIEB0aHJvd3MgRXJyb3IgaWYgZ2VuZXJhdGlvbiBmYWlsc1xuICAgKi9cbiAgZ2VuZXJhdGVDb250ZW50KHBhcmFtczogR2VuZXJhdGVDb250ZW50UGFyYW1zKTogUHJvbWlzZTxHZW5lcmF0ZUNvbnRlbnRSZXN1bHQ+O1xufVxuXG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIHRoZSBHZW1pbmkgc2VydmljZVxuICpcbiAqIFdyYXBzIHRoZSBHb29nbGUgR2VuIEFJIFNESyBhbmQgcHJvdmlkZXMgYSBjbGVhbiBpbnRlcmZhY2VcbiAqIGZvciBmaWxlIHVwbG9hZCBhbmQgY29udGVudCBnZW5lcmF0aW9uIG9wZXJhdGlvbnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBHZW1pbmlTZXJ2aWNlIGltcGxlbWVudHMgSUdlbWluaVNlcnZpY2Uge1xuICBwcml2YXRlIGFpOiBhbnk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBHZW1pbmkgc2VydmljZSBpbnN0YW5jZVxuICAgKlxuICAgKiBAcGFyYW0gYXBpS2V5IC0gR2VtaW5pIEFQSSBrZXkgZm9yIGF1dGhlbnRpY2F0aW9uXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhcGlLZXk6IHN0cmluZykge1xuICAgIC8vIExhenktbG9hZCB0aGUgR29vZ2xlIEdlbiBBSSBTREsgdG8gYXZvaWQgaW1wb3J0IGVycm9ycyBpZiBub3QgaW5zdGFsbGVkXG4gICAgLy8gVGhpcyBpcyBzYWZlIGJlY2F1c2UgdGhlIHNlcnZpY2UgaXMgb25seSBjcmVhdGVkIHdoZW4gbmVlZGVkXG4gICAgY29uc3QgbG9hZEdlbWluaVNESyA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgR29vZ2xlR2VuQUkgfSA9IGF3YWl0IGltcG9ydChcIkBnb29nbGUvZ2VuYWlcIik7XG4gICAgICByZXR1cm4gbmV3IEdvb2dsZUdlbkFJKHsgYXBpS2V5IH0pO1xuICAgIH07XG5cbiAgICAvLyBTdG9yZSB0aGUgcHJvbWlzZSBmb3IgbGF6eSBpbml0aWFsaXphdGlvblxuICAgIHRoaXMuYWlQcm9taXNlID0gbG9hZEdlbWluaVNESygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhaVByb21pc2U6IFByb21pc2U8YW55PjtcblxuICAvKipcbiAgICogRW5zdXJlIHRoZSBBSSBjbGllbnQgaXMgaW5pdGlhbGl6ZWRcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZW5zdXJlQ2xpZW50KCkge1xuICAgIGlmICghdGhpcy5haSkge1xuICAgICAgdGhpcy5haSA9IGF3YWl0IHRoaXMuYWlQcm9taXNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5haTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGxvYWQgYSBmaWxlIHRvIEdlbWluaSBmb3IgcHJvY2Vzc2luZ1xuICAgKlxuICAgKiBAcGFyYW0gZmlsZVBhdGggLSBBYnNvbHV0ZSBwYXRoIHRvIHRoZSBmaWxlIHRvIHVwbG9hZFxuICAgKiBAcGFyYW0gbWltZVR5cGUgLSBNSU1FIHR5cGUgb2YgdGhlIGZpbGVcbiAgICogQHJldHVybnMgVXBsb2FkIHJlc3VsdCB3aXRoIGZpbGUgVVJJIGFuZCBtZXRhZGF0YVxuICAgKi9cbiAgYXN5bmMgdXBsb2FkRmlsZShmaWxlUGF0aDogc3RyaW5nLCBtaW1lVHlwZTogc3RyaW5nKTogUHJvbWlzZTxVcGxvYWRlZEZpbGU+IHtcbiAgICBjb25zdCBhaSA9IGF3YWl0IHRoaXMuZW5zdXJlQ2xpZW50KCk7XG5cbiAgICBjb25zdCB1cGxvYWRlZCA9IGF3YWl0IGFpLmZpbGVzLnVwbG9hZCh7XG4gICAgICBmaWxlOiBmaWxlUGF0aCxcbiAgICAgIGNvbmZpZzogeyBtaW1lVHlwZSB9XG4gICAgfSk7XG5cbiAgICAvLyBOb3JtYWxpemUgdGhlIHJlc3BvbnNlIHN0cnVjdHVyZSAoQVBJIG1heSByZXR1cm4gZGlmZmVyZW50IHNoYXBlcylcbiAgICBjb25zdCB1cGxvYWRlZEZpbGU6IGFueSA9ICh1cGxvYWRlZCBhcyBhbnkpLmZpbGUgPz8gdXBsb2FkZWQ7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdXJpOiB1cGxvYWRlZEZpbGU/LnVyaSxcbiAgICAgIGZpbGVVcmk6IHVwbG9hZGVkRmlsZT8uZmlsZVVyaSxcbiAgICAgIG1pbWVUeXBlOiB1cGxvYWRlZEZpbGU/Lm1pbWVUeXBlLFxuICAgICAgZmlsZU1pbWVUeXBlOiB1cGxvYWRlZEZpbGU/LmZpbGVNaW1lVHlwZVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY29udGVudCB1c2luZyBHZW1pbmkgbW9kZWxcbiAgICpcbiAgICogQHBhcmFtIHBhcmFtcyAtIENvbnRlbnQgZ2VuZXJhdGlvbiBwYXJhbWV0ZXJzXG4gICAqIEByZXR1cm5zIEdlbmVyYXRlZCBjb250ZW50IHJlc3VsdFxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVDb250ZW50KHBhcmFtczogR2VuZXJhdGVDb250ZW50UGFyYW1zKTogUHJvbWlzZTxHZW5lcmF0ZUNvbnRlbnRSZXN1bHQ+IHtcbiAgICBjb25zdCBhaSA9IGF3YWl0IHRoaXMuZW5zdXJlQ2xpZW50KCk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhaS5tb2RlbHMuZ2VuZXJhdGVDb250ZW50KHtcbiAgICAgIG1vZGVsOiBwYXJhbXMubW9kZWwsXG4gICAgICBjb250ZW50czogcGFyYW1zLmNvbnRlbnRzLFxuICAgICAgY29uZmlnOiBwYXJhbXMuY29uZmlnXG4gICAgfSBhcyBhbnkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRleHQ6IChyZXN1bHQgYXMgYW55KS50ZXh0LFxuICAgICAgcmVzcG9uc2U6IChyZXN1bHQgYXMgYW55KS5yZXNwb25zZVxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBGYWN0b3J5IGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIEdlbWluaSBzZXJ2aWNlIGluc3RhbmNlXG4gKlxuICogVGhpcyBwYXR0ZXJuIGFsbG93cyBmb3IgZWFzeSBzZXJ2aWNlIGNyZWF0aW9uIHdoaWxlIG1haW50YWluaW5nXG4gKiB0aGUgYWJpbGl0eSB0byBzd2FwIGltcGxlbWVudGF0aW9ucyBmb3IgdGVzdGluZy5cbiAqXG4gKiBAcGFyYW0gYXBpS2V5IC0gR2VtaW5pIEFQSSBrZXkgZm9yIGF1dGhlbnRpY2F0aW9uXG4gKiBAcmV0dXJucyBBbiBpbnN0YW5jZSBvZiBJR2VtaW5pU2VydmljZVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBzZXJ2aWNlID0gY3JlYXRlR2VtaW5pU2VydmljZShwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWSEpO1xuICogY29uc3QgdXBsb2FkZWQgPSBhd2FpdCBzZXJ2aWNlLnVwbG9hZEZpbGUoXCIvYXVkaW8ubXAzXCIsIFwiYXVkaW8vbXAzXCIpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHZW1pbmlTZXJ2aWNlKGFwaUtleTogc3RyaW5nKTogSUdlbWluaVNlcnZpY2Uge1xuICByZXR1cm4gbmV3IEdlbWluaVNlcnZpY2UoYXBpS2V5KTtcbn1cbiJdLCJuYW1lcyI6WyJHZW1pbmlTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJhcGlLZXkiLCJsb2FkR2VtaW5pU0RLIiwiR29vZ2xlR2VuQUkiLCJhaVByb21pc2UiLCJlbnN1cmVDbGllbnQiLCJhaSIsInVwbG9hZEZpbGUiLCJmaWxlUGF0aCIsIm1pbWVUeXBlIiwidXBsb2FkZWQiLCJmaWxlcyIsInVwbG9hZCIsImZpbGUiLCJjb25maWciLCJ1cGxvYWRlZEZpbGUiLCJ1cmkiLCJmaWxlVXJpIiwiZmlsZU1pbWVUeXBlIiwiZ2VuZXJhdGVDb250ZW50IiwicGFyYW1zIiwicmVzdWx0IiwibW9kZWxzIiwibW9kZWwiLCJjb250ZW50cyIsInRleHQiLCJyZXNwb25zZSIsImNyZWF0ZUdlbWluaVNlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../src/services/GeminiService.ts\n");

/***/ }),

/***/ "(rsc)/../../src/services/S3Service.ts":
/*!***************************************!*\
  !*** ../../src/services/S3Service.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   S3Service: () => (/* binding */ S3Service),\n/* harmony export */   createS3Service: () => (/* binding */ createS3Service)\n/* harmony export */ });\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_shell_safe_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/shell-safe.js */ \"(rsc)/../../src/utils/shell-safe.ts\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/logger.js */ \"(rsc)/../../src/utils/logger.ts\");\n/* harmony import */ var _utils_sanitize_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/sanitize.js */ \"(rsc)/../../src/utils/sanitize.ts\");\n\n\n\n\n\nclass S3Service {\n    constructor(profile){\n        this.profile = profile;\n        this.logger = (0,_utils_logger_js__WEBPACK_IMPORTED_MODULE_3__.createChildLogger)(\"s3-service\");\n    }\n    async aws(args, opts) {\n        // Use validatePaths: false to allow s3:// URIs\n        try {\n            return await (0,_utils_shell_safe_js__WEBPACK_IMPORTED_MODULE_2__.safeSpawn)(\"aws\", args, {\n                timeout: opts?.timeout ?? 120000,\n                validatePaths: false\n            });\n        } catch (err) {\n            const msg = String(err?.message || err || \"\");\n            const ssoExpired = /Token has expired and refresh failed|SSO.+expired|sso login required/i.test(msg);\n            if (!ssoExpired) throw err;\n            // Attempt interactive SSO login (opens browser) then retry once\n            this.logger.info({\n                profile: this.profile\n            }, \"AWS SSO token expired; attempting 'aws sso login'\");\n            try {\n                await (0,_utils_shell_safe_js__WEBPACK_IMPORTED_MODULE_2__.safeSpawn)(\"aws\", [\n                    \"sso\",\n                    \"login\",\n                    \"--profile\",\n                    this.profile\n                ], {\n                    timeout: 10 * 60 * 1000,\n                    validatePaths: false\n                });\n            } catch (e1) {\n                // As a fallback, try device code flow (no-browser)\n                this.logger.warn({\n                    profile: this.profile\n                }, \"Interactive SSO login failed; attempting device code (--no-browser)\");\n                await (0,_utils_shell_safe_js__WEBPACK_IMPORTED_MODULE_2__.safeSpawn)(\"aws\", [\n                    \"sso\",\n                    \"login\",\n                    \"--no-browser\",\n                    \"--profile\",\n                    this.profile\n                ], {\n                    timeout: 10 * 60 * 1000,\n                    validatePaths: false\n                });\n            }\n            // Retry original command once\n            return await (0,_utils_shell_safe_js__WEBPACK_IMPORTED_MODULE_2__.safeSpawn)(\"aws\", args, {\n                timeout: opts?.timeout ?? 120000,\n                validatePaths: false\n            });\n        }\n    }\n    async getRegion() {\n        try {\n            const { stdout } = await this.aws([\n                \"configure\",\n                \"get\",\n                \"region\",\n                \"--profile\",\n                this.profile\n            ], {\n                timeout: 10000\n            });\n            const region = stdout.trim() || \"us-east-1\";\n            return region;\n        } catch  {\n            return \"us-east-1\";\n        }\n    }\n    async getAccountId() {\n        try {\n            const { stdout } = await this.aws([\n                \"sts\",\n                \"get-caller-identity\",\n                \"--query\",\n                \"Account\",\n                \"--output\",\n                \"text\",\n                \"--profile\",\n                this.profile\n            ], {\n                timeout: 10000\n            });\n            return stdout.trim() || null;\n        } catch  {\n            return null;\n        }\n    }\n    async bucketExists(bucket) {\n        try {\n            await this.aws([\n                \"s3api\",\n                \"head-bucket\",\n                \"--bucket\",\n                bucket,\n                \"--profile\",\n                this.profile\n            ], {\n                timeout: 15000\n            });\n            return true;\n        } catch  {\n            return false;\n        }\n    }\n    async ensureCors(bucket) {\n        // Try to read CORS; if missing, apply a permissive read CORS suitable for presigned GET\n        try {\n            await this.aws([\n                \"s3api\",\n                \"get-bucket-cors\",\n                \"--bucket\",\n                bucket,\n                \"--profile\",\n                this.profile\n            ], {\n                timeout: 10000\n            });\n            // If the command succeeds, leave existing CORS as-is\n            return;\n        } catch  {\n            const corsConfig = {\n                CORSRules: [\n                    {\n                        AllowedOrigins: [\n                            \"*\"\n                        ],\n                        AllowedMethods: [\n                            \"GET\",\n                            \"HEAD\"\n                        ],\n                        AllowedHeaders: [\n                            \"*\"\n                        ],\n                        ExposeHeaders: [\n                            \"ETag\"\n                        ],\n                        MaxAgeSeconds: 300\n                    }\n                ]\n            };\n            const json = JSON.stringify(corsConfig);\n            try {\n                await this.aws([\n                    \"s3api\",\n                    \"put-bucket-cors\",\n                    \"--bucket\",\n                    bucket,\n                    \"--cors-configuration\",\n                    json,\n                    \"--profile\",\n                    this.profile\n                ], {\n                    timeout: 10000\n                });\n                this.logger.info({\n                    bucket\n                }, \"Applied default S3 CORS configuration\");\n            } catch (err) {\n                const e = (0,_utils_sanitize_js__WEBPACK_IMPORTED_MODULE_4__.sanitizeError)(err);\n                this.logger.warn({\n                    err: e,\n                    bucket\n                }, \"Failed to set CORS (continuing)\");\n            }\n        }\n    }\n    async ensureBucket(explicitBucket) {\n        const region = await this.getRegion();\n        let bucket = (explicitBucket || \"\").trim();\n        if (!bucket) {\n            const acct = await this.getAccountId();\n            const base = \"pip-agent-autonomous-audio\";\n            const suffix = acct ? `${acct}-${region}` : `${region}-${(0,node_crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)().slice(0, 8)}`;\n            bucket = `${base}-${suffix}`.toLowerCase();\n        }\n        const exists = await this.bucketExists(bucket);\n        if (!exists) {\n            try {\n                if (region === \"us-east-1\") {\n                    await this.aws([\n                        \"s3api\",\n                        \"create-bucket\",\n                        \"--bucket\",\n                        bucket,\n                        \"--region\",\n                        region,\n                        \"--profile\",\n                        this.profile\n                    ]);\n                } else {\n                    await this.aws([\n                        \"s3api\",\n                        \"create-bucket\",\n                        \"--bucket\",\n                        bucket,\n                        \"--region\",\n                        region,\n                        \"--create-bucket-configuration\",\n                        `LocationConstraint=${region}`,\n                        \"--profile\",\n                        this.profile\n                    ]);\n                }\n                this.logger.info({\n                    bucket,\n                    region\n                }, \"Created S3 bucket\");\n                await this.ensureCors(bucket);\n            } catch (err) {\n                const e = (0,_utils_sanitize_js__WEBPACK_IMPORTED_MODULE_4__.sanitizeError)(err);\n                this.logger.error({\n                    err: e,\n                    bucket,\n                    region\n                }, \"Failed to create bucket\");\n                throw new Error(`Failed to create S3 bucket '${bucket}' in ${region}: ${e.message || e}`);\n            }\n        }\n        return {\n            bucket,\n            region\n        };\n    }\n    buildKey(prefix, filePath) {\n        const date = new Date();\n        const yyyy = date.getUTCFullYear();\n        const mm = String(date.getUTCMonth() + 1).padStart(2, \"0\");\n        const dd = String(date.getUTCDate()).padStart(2, \"0\");\n        const name = (0,node_path__WEBPACK_IMPORTED_MODULE_0__.basename)(filePath);\n        const ext = (0,node_path__WEBPACK_IMPORTED_MODULE_0__.extname)(name) || \".bin\";\n        const id = (0,node_crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)();\n        const safePrefix = (prefix || \"audio\").replace(/^\\/+|\\/+$/g, \"\");\n        return `${safePrefix}/${yyyy}-${mm}-${dd}/${id}${ext}`;\n    }\n    async uploadAndPresign(params) {\n        const { filePath, mimeType, bucket: bucketMaybe, prefix, expiresInSeconds } = params;\n        const { bucket, region } = await this.ensureBucket(bucketMaybe);\n        await this.ensureCors(bucket);\n        const key = this.buildKey(prefix, filePath);\n        // Upload\n        await this.aws([\n            \"s3\",\n            \"cp\",\n            filePath,\n            `s3://${bucket}/${key}`,\n            \"--content-type\",\n            mimeType,\n            \"--only-show-errors\",\n            \"--profile\",\n            this.profile\n        ], {\n            timeout: 10 * 60 * 1000\n        });\n        // Presign\n        const { stdout } = await this.aws([\n            \"s3\",\n            \"presign\",\n            `s3://${bucket}/${key}`,\n            \"--expires-in\",\n            String(Math.max(60, expiresInSeconds)),\n            \"--profile\",\n            this.profile\n        ], {\n            timeout: 15000\n        });\n        const url = stdout.trim();\n        if (!url.startsWith(\"http\")) {\n            throw new Error(\"Failed to generate presigned URL\");\n        }\n        this.logger.info({\n            bucket,\n            key,\n            region,\n            expiresInSeconds\n        }, \"Uploaded and presigned S3 object\");\n        return {\n            bucket,\n            key,\n            url,\n            region\n        };\n    }\n    async deleteObject(bucket, key) {\n        try {\n            await this.aws([\n                \"s3\",\n                \"rm\",\n                `s3://${bucket}/${key}`,\n                \"--only-show-errors\",\n                \"--profile\",\n                this.profile\n            ], {\n                timeout: 20000\n            });\n            this.logger.info({\n                bucket,\n                key\n            }, \"Deleted S3 object\");\n        } catch (err) {\n            const e = (0,_utils_sanitize_js__WEBPACK_IMPORTED_MODULE_4__.sanitizeError)(err);\n            this.logger.warn({\n                err: e,\n                bucket,\n                key\n            }, \"Failed to delete S3 object (continuing)\");\n        }\n    }\n}\nfunction createS3Service(profile) {\n    return new S3Service(profile);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1lBQUksR0FBRztRQUM1QztJQUNGO0FBQ0Y7QUFFTyxTQUFTTSxnQkFBZ0J6RSxPQUFlO0lBQzdDLE9BQU8sSUFBSUYsVUFBVUU7QUFDdkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AcGlwL3VpLy4uLy4uL3NyYy9zZXJ2aWNlcy9TM1NlcnZpY2UudHM/ZDc3ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBiYXNlbmFtZSwgZXh0bmFtZSwgam9pbiB9IGZyb20gXCJub2RlOnBhdGhcIjtcbmltcG9ydCB7IHJhbmRvbVVVSUQgfSBmcm9tIFwibm9kZTpjcnlwdG9cIjtcbmltcG9ydCB7IHNhZmVTcGF3biB9IGZyb20gXCIuLi91dGlscy9zaGVsbC1zYWZlLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVDaGlsZExvZ2dlciB9IGZyb20gXCIuLi91dGlscy9sb2dnZXIuanNcIjtcbmltcG9ydCB7IHNhbml0aXplRXJyb3IgfSBmcm9tIFwiLi4vdXRpbHMvc2FuaXRpemUuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBVcGxvYWRSZXN1bHQge1xuICBidWNrZXQ6IHN0cmluZztcbiAga2V5OiBzdHJpbmc7XG4gIHVybDogc3RyaW5nOyAvLyBwcmVzaWduZWQgVVJMXG4gIHJlZ2lvbjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTM1NlcnZpY2Uge1xuICBlbnN1cmVCdWNrZXQoYnVja2V0Pzogc3RyaW5nKTogUHJvbWlzZTx7IGJ1Y2tldDogc3RyaW5nOyByZWdpb246IHN0cmluZyB9PjtcbiAgdXBsb2FkQW5kUHJlc2lnbihwYXJhbXM6IHtcbiAgICBmaWxlUGF0aDogc3RyaW5nO1xuICAgIG1pbWVUeXBlOiBzdHJpbmc7XG4gICAgYnVja2V0Pzogc3RyaW5nO1xuICAgIHByZWZpeD86IHN0cmluZztcbiAgICBleHBpcmVzSW5TZWNvbmRzOiBudW1iZXI7XG4gIH0pOiBQcm9taXNlPFVwbG9hZFJlc3VsdD47XG4gIGRlbGV0ZU9iamVjdChidWNrZXQ6IHN0cmluZywga2V5OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xufVxuXG5leHBvcnQgY2xhc3MgUzNTZXJ2aWNlIGltcGxlbWVudHMgSVMzU2VydmljZSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcHJvZmlsZTogc3RyaW5nKSB7fVxuXG4gIHByaXZhdGUgbG9nZ2VyID0gY3JlYXRlQ2hpbGRMb2dnZXIoXCJzMy1zZXJ2aWNlXCIpO1xuXG4gIHByaXZhdGUgYXN5bmMgYXdzKGFyZ3M6IHN0cmluZ1tdLCBvcHRzPzogeyB0aW1lb3V0PzogbnVtYmVyIH0pIHtcbiAgICAvLyBVc2UgdmFsaWRhdGVQYXRoczogZmFsc2UgdG8gYWxsb3cgczM6Ly8gVVJJc1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgc2FmZVNwYXduKFwiYXdzXCIsIGFyZ3MsIHsgdGltZW91dDogb3B0cz8udGltZW91dCA/PyAxMjAwMDAsIHZhbGlkYXRlUGF0aHM6IGZhbHNlIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc3QgbXNnID0gU3RyaW5nKChlcnIgYXMgYW55KT8ubWVzc2FnZSB8fCBlcnIgfHwgXCJcIik7XG4gICAgICBjb25zdCBzc29FeHBpcmVkID0gL1Rva2VuIGhhcyBleHBpcmVkIGFuZCByZWZyZXNoIGZhaWxlZHxTU08uK2V4cGlyZWR8c3NvIGxvZ2luIHJlcXVpcmVkL2kudGVzdChtc2cpO1xuICAgICAgaWYgKCFzc29FeHBpcmVkKSB0aHJvdyBlcnI7XG4gICAgICAvLyBBdHRlbXB0IGludGVyYWN0aXZlIFNTTyBsb2dpbiAob3BlbnMgYnJvd3NlcikgdGhlbiByZXRyeSBvbmNlXG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKHsgcHJvZmlsZTogdGhpcy5wcm9maWxlIH0sIFwiQVdTIFNTTyB0b2tlbiBleHBpcmVkOyBhdHRlbXB0aW5nICdhd3Mgc3NvIGxvZ2luJ1wiKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHNhZmVTcGF3bihcImF3c1wiLCBbXCJzc29cIiwgXCJsb2dpblwiLCBcIi0tcHJvZmlsZVwiLCB0aGlzLnByb2ZpbGVdLCB7IHRpbWVvdXQ6IDEwICogNjAgKiAxMDAwLCB2YWxpZGF0ZVBhdGhzOiBmYWxzZSB9KTtcbiAgICAgIH0gY2F0Y2ggKGUxKSB7XG4gICAgICAgIC8vIEFzIGEgZmFsbGJhY2ssIHRyeSBkZXZpY2UgY29kZSBmbG93IChuby1icm93c2VyKVxuICAgICAgICB0aGlzLmxvZ2dlci53YXJuKHsgcHJvZmlsZTogdGhpcy5wcm9maWxlIH0sIFwiSW50ZXJhY3RpdmUgU1NPIGxvZ2luIGZhaWxlZDsgYXR0ZW1wdGluZyBkZXZpY2UgY29kZSAoLS1uby1icm93c2VyKVwiKTtcbiAgICAgICAgYXdhaXQgc2FmZVNwYXduKFwiYXdzXCIsIFtcInNzb1wiLCBcImxvZ2luXCIsIFwiLS1uby1icm93c2VyXCIsIFwiLS1wcm9maWxlXCIsIHRoaXMucHJvZmlsZV0sIHsgdGltZW91dDogMTAgKiA2MCAqIDEwMDAsIHZhbGlkYXRlUGF0aHM6IGZhbHNlIH0pO1xuICAgICAgfVxuICAgICAgLy8gUmV0cnkgb3JpZ2luYWwgY29tbWFuZCBvbmNlXG4gICAgICByZXR1cm4gYXdhaXQgc2FmZVNwYXduKFwiYXdzXCIsIGFyZ3MsIHsgdGltZW91dDogb3B0cz8udGltZW91dCA/PyAxMjAwMDAsIHZhbGlkYXRlUGF0aHM6IGZhbHNlIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0UmVnaW9uKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc3Rkb3V0IH0gPSBhd2FpdCB0aGlzLmF3cyhbXCJjb25maWd1cmVcIiwgXCJnZXRcIiwgXCJyZWdpb25cIiwgXCItLXByb2ZpbGVcIiwgdGhpcy5wcm9maWxlXSwgeyB0aW1lb3V0OiAxMDAwMCB9KTtcbiAgICAgIGNvbnN0IHJlZ2lvbiA9IHN0ZG91dC50cmltKCkgfHwgXCJ1cy1lYXN0LTFcIjtcbiAgICAgIHJldHVybiByZWdpb247XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gXCJ1cy1lYXN0LTFcIjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldEFjY291bnRJZCgpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBzdGRvdXQgfSA9IGF3YWl0IHRoaXMuYXdzKFtcInN0c1wiLCBcImdldC1jYWxsZXItaWRlbnRpdHlcIiwgXCItLXF1ZXJ5XCIsIFwiQWNjb3VudFwiLCBcIi0tb3V0cHV0XCIsIFwidGV4dFwiLCBcIi0tcHJvZmlsZVwiLCB0aGlzLnByb2ZpbGVdLCB7IHRpbWVvdXQ6IDEwMDAwIH0pO1xuICAgICAgcmV0dXJuIHN0ZG91dC50cmltKCkgfHwgbnVsbDtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYnVja2V0RXhpc3RzKGJ1Y2tldDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuYXdzKFtcInMzYXBpXCIsIFwiaGVhZC1idWNrZXRcIiwgXCItLWJ1Y2tldFwiLCBidWNrZXQsIFwiLS1wcm9maWxlXCIsIHRoaXMucHJvZmlsZV0sIHsgdGltZW91dDogMTUwMDAgfSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGVuc3VyZUNvcnMoYnVja2V0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBUcnkgdG8gcmVhZCBDT1JTOyBpZiBtaXNzaW5nLCBhcHBseSBhIHBlcm1pc3NpdmUgcmVhZCBDT1JTIHN1aXRhYmxlIGZvciBwcmVzaWduZWQgR0VUXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuYXdzKFtcInMzYXBpXCIsIFwiZ2V0LWJ1Y2tldC1jb3JzXCIsIFwiLS1idWNrZXRcIiwgYnVja2V0LCBcIi0tcHJvZmlsZVwiLCB0aGlzLnByb2ZpbGVdLCB7IHRpbWVvdXQ6IDEwMDAwIH0pO1xuICAgICAgLy8gSWYgdGhlIGNvbW1hbmQgc3VjY2VlZHMsIGxlYXZlIGV4aXN0aW5nIENPUlMgYXMtaXNcbiAgICAgIHJldHVybjtcbiAgICB9IGNhdGNoIHtcbiAgICAgIGNvbnN0IGNvcnNDb25maWcgPSB7XG4gICAgICAgIENPUlNSdWxlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIEFsbG93ZWRPcmlnaW5zOiBbXCIqXCJdLFxuICAgICAgICAgICAgQWxsb3dlZE1ldGhvZHM6IFtcIkdFVFwiLCBcIkhFQURcIl0sXG4gICAgICAgICAgICBBbGxvd2VkSGVhZGVyczogW1wiKlwiXSxcbiAgICAgICAgICAgIEV4cG9zZUhlYWRlcnM6IFtcIkVUYWdcIl0sXG4gICAgICAgICAgICBNYXhBZ2VTZWNvbmRzOiAzMDBcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkoY29yc0NvbmZpZyk7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLmF3cyhbXG4gICAgICAgICAgXCJzM2FwaVwiLCBcInB1dC1idWNrZXQtY29yc1wiLFxuICAgICAgICAgIFwiLS1idWNrZXRcIiwgYnVja2V0LFxuICAgICAgICAgIFwiLS1jb3JzLWNvbmZpZ3VyYXRpb25cIiwganNvbixcbiAgICAgICAgICBcIi0tcHJvZmlsZVwiLCB0aGlzLnByb2ZpbGVcbiAgICAgICAgXSwgeyB0aW1lb3V0OiAxMDAwMCB9KTtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyh7IGJ1Y2tldCB9LCBcIkFwcGxpZWQgZGVmYXVsdCBTMyBDT1JTIGNvbmZpZ3VyYXRpb25cIik7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc3QgZSA9IHNhbml0aXplRXJyb3IoZXJyKTtcbiAgICAgICAgdGhpcy5sb2dnZXIud2Fybih7IGVycjogZSwgYnVja2V0IH0sIFwiRmFpbGVkIHRvIHNldCBDT1JTIChjb250aW51aW5nKVwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBlbnN1cmVCdWNrZXQoZXhwbGljaXRCdWNrZXQ/OiBzdHJpbmcpOiBQcm9taXNlPHsgYnVja2V0OiBzdHJpbmc7IHJlZ2lvbjogc3RyaW5nIH0+IHtcbiAgICBjb25zdCByZWdpb24gPSBhd2FpdCB0aGlzLmdldFJlZ2lvbigpO1xuICAgIGxldCBidWNrZXQgPSAoZXhwbGljaXRCdWNrZXQgfHwgXCJcIikudHJpbSgpO1xuXG4gICAgaWYgKCFidWNrZXQpIHtcbiAgICAgIGNvbnN0IGFjY3QgPSBhd2FpdCB0aGlzLmdldEFjY291bnRJZCgpO1xuICAgICAgY29uc3QgYmFzZSA9IFwicGlwLWFnZW50LWF1dG9ub21vdXMtYXVkaW9cIjtcbiAgICAgIGNvbnN0IHN1ZmZpeCA9IGFjY3QgPyBgJHthY2N0fS0ke3JlZ2lvbn1gIDogYCR7cmVnaW9ufS0ke3JhbmRvbVVVSUQoKS5zbGljZSgwLCA4KX1gO1xuICAgICAgYnVja2V0ID0gYCR7YmFzZX0tJHtzdWZmaXh9YC50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYnVja2V0RXhpc3RzKGJ1Y2tldCk7XG4gICAgaWYgKCFleGlzdHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChyZWdpb24gPT09IFwidXMtZWFzdC0xXCIpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmF3cyhbXCJzM2FwaVwiLCBcImNyZWF0ZS1idWNrZXRcIiwgXCItLWJ1Y2tldFwiLCBidWNrZXQsIFwiLS1yZWdpb25cIiwgcmVnaW9uLCBcIi0tcHJvZmlsZVwiLCB0aGlzLnByb2ZpbGVdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmF3cyhbXG4gICAgICAgICAgICBcInMzYXBpXCIsIFwiY3JlYXRlLWJ1Y2tldFwiLFxuICAgICAgICAgICAgXCItLWJ1Y2tldFwiLCBidWNrZXQsXG4gICAgICAgICAgICBcIi0tcmVnaW9uXCIsIHJlZ2lvbixcbiAgICAgICAgICAgIFwiLS1jcmVhdGUtYnVja2V0LWNvbmZpZ3VyYXRpb25cIiwgYExvY2F0aW9uQ29uc3RyYWludD0ke3JlZ2lvbn1gLFxuICAgICAgICAgICAgXCItLXByb2ZpbGVcIiwgdGhpcy5wcm9maWxlXG4gICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyh7IGJ1Y2tldCwgcmVnaW9uIH0sIFwiQ3JlYXRlZCBTMyBidWNrZXRcIik7XG4gICAgICAgIGF3YWl0IHRoaXMuZW5zdXJlQ29ycyhidWNrZXQpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnN0IGUgPSBzYW5pdGl6ZUVycm9yKGVycik7XG4gICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKHsgZXJyOiBlLCBidWNrZXQsIHJlZ2lvbiB9LCBcIkZhaWxlZCB0byBjcmVhdGUgYnVja2V0XCIpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgUzMgYnVja2V0ICcke2J1Y2tldH0nIGluICR7cmVnaW9ufTogJHtlLm1lc3NhZ2UgfHwgZX1gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBidWNrZXQsIHJlZ2lvbiB9O1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZEtleShwcmVmaXg6IHN0cmluZyB8IHVuZGVmaW5lZCwgZmlsZVBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgeXl5eSA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICBjb25zdCBtbSA9IFN0cmluZyhkYXRlLmdldFVUQ01vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gICAgY29uc3QgZGQgPSBTdHJpbmcoZGF0ZS5nZXRVVENEYXRlKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICBjb25zdCBuYW1lID0gYmFzZW5hbWUoZmlsZVBhdGgpO1xuICAgIGNvbnN0IGV4dCA9IGV4dG5hbWUobmFtZSkgfHwgXCIuYmluXCI7XG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgY29uc3Qgc2FmZVByZWZpeCA9IChwcmVmaXggfHwgXCJhdWRpb1wiKS5yZXBsYWNlKC9eXFwvK3xcXC8rJC9nLCBcIlwiKTtcbiAgICByZXR1cm4gYCR7c2FmZVByZWZpeH0vJHt5eXl5fS0ke21tfS0ke2RkfS8ke2lkfSR7ZXh0fWA7XG4gIH1cblxuICBhc3luYyB1cGxvYWRBbmRQcmVzaWduKHBhcmFtczoge1xuICAgIGZpbGVQYXRoOiBzdHJpbmc7XG4gICAgbWltZVR5cGU6IHN0cmluZztcbiAgICBidWNrZXQ/OiBzdHJpbmc7XG4gICAgcHJlZml4Pzogc3RyaW5nO1xuICAgIGV4cGlyZXNJblNlY29uZHM6IG51bWJlcjtcbiAgfSk6IFByb21pc2U8VXBsb2FkUmVzdWx0PiB7XG4gICAgY29uc3QgeyBmaWxlUGF0aCwgbWltZVR5cGUsIGJ1Y2tldDogYnVja2V0TWF5YmUsIHByZWZpeCwgZXhwaXJlc0luU2Vjb25kcyB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IHsgYnVja2V0LCByZWdpb24gfSA9IGF3YWl0IHRoaXMuZW5zdXJlQnVja2V0KGJ1Y2tldE1heWJlKTtcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUNvcnMoYnVja2V0KTtcbiAgICBjb25zdCBrZXkgPSB0aGlzLmJ1aWxkS2V5KHByZWZpeCwgZmlsZVBhdGgpO1xuXG4gICAgLy8gVXBsb2FkXG4gICAgYXdhaXQgdGhpcy5hd3MoW1xuICAgICAgXCJzM1wiLCBcImNwXCIsXG4gICAgICBmaWxlUGF0aCxcbiAgICAgIGBzMzovLyR7YnVja2V0fS8ke2tleX1gLFxuICAgICAgXCItLWNvbnRlbnQtdHlwZVwiLCBtaW1lVHlwZSxcbiAgICAgIFwiLS1vbmx5LXNob3ctZXJyb3JzXCIsXG4gICAgICBcIi0tcHJvZmlsZVwiLCB0aGlzLnByb2ZpbGVcbiAgICBdLCB7IHRpbWVvdXQ6IDEwICogNjAgKiAxMDAwIH0pO1xuXG4gICAgLy8gUHJlc2lnblxuICAgIGNvbnN0IHsgc3Rkb3V0IH0gPSBhd2FpdCB0aGlzLmF3cyhbXG4gICAgICBcInMzXCIsIFwicHJlc2lnblwiLFxuICAgICAgYHMzOi8vJHtidWNrZXR9LyR7a2V5fWAsXG4gICAgICBcIi0tZXhwaXJlcy1pblwiLCBTdHJpbmcoTWF0aC5tYXgoNjAsIGV4cGlyZXNJblNlY29uZHMpKSxcbiAgICAgIFwiLS1wcm9maWxlXCIsIHRoaXMucHJvZmlsZVxuICAgIF0sIHsgdGltZW91dDogMTUwMDAgfSk7XG5cbiAgICBjb25zdCB1cmwgPSBzdGRvdXQudHJpbSgpO1xuICAgIGlmICghdXJsLnN0YXJ0c1dpdGgoXCJodHRwXCIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZ2VuZXJhdGUgcHJlc2lnbmVkIFVSTFwiKTtcbiAgICB9XG5cbiAgICB0aGlzLmxvZ2dlci5pbmZvKHsgYnVja2V0LCBrZXksIHJlZ2lvbiwgZXhwaXJlc0luU2Vjb25kcyB9LCBcIlVwbG9hZGVkIGFuZCBwcmVzaWduZWQgUzMgb2JqZWN0XCIpO1xuICAgIHJldHVybiB7IGJ1Y2tldCwga2V5LCB1cmwsIHJlZ2lvbiB9O1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlT2JqZWN0KGJ1Y2tldDogc3RyaW5nLCBrZXk6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmF3cyhbXCJzM1wiLCBcInJtXCIsIGBzMzovLyR7YnVja2V0fS8ke2tleX1gLCBcIi0tb25seS1zaG93LWVycm9yc1wiLCBcIi0tcHJvZmlsZVwiLCB0aGlzLnByb2ZpbGVdLCB7IHRpbWVvdXQ6IDIwMDAwIH0pO1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbyh7IGJ1Y2tldCwga2V5IH0sIFwiRGVsZXRlZCBTMyBvYmplY3RcIik7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zdCBlID0gc2FuaXRpemVFcnJvcihlcnIpO1xuICAgICAgdGhpcy5sb2dnZXIud2Fybih7IGVycjogZSwgYnVja2V0LCBrZXkgfSwgXCJGYWlsZWQgdG8gZGVsZXRlIFMzIG9iamVjdCAoY29udGludWluZylcIik7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTM1NlcnZpY2UocHJvZmlsZTogc3RyaW5nKTogSVMzU2VydmljZSB7XG4gIHJldHVybiBuZXcgUzNTZXJ2aWNlKHByb2ZpbGUpO1xufVxuIl0sIm5hbWVzIjpbImJhc2VuYW1lIiwiZXh0bmFtZSIsInJhbmRvbVVVSUQiLCJzYWZlU3Bhd24iLCJjcmVhdGVDaGlsZExvZ2dlciIsInNhbml0aXplRXJyb3IiLCJTM1NlcnZpY2UiLCJjb25zdHJ1Y3RvciIsInByb2ZpbGUiLCJsb2dnZXIiLCJhd3MiLCJhcmdzIiwib3B0cyIsInRpbWVvdXQiLCJ2YWxpZGF0ZVBhdGhzIiwiZXJyIiwibXNnIiwiU3RyaW5nIiwibWVzc2FnZSIsInNzb0V4cGlyZWQiLCJ0ZXN0IiwiaW5mbyIsImUxIiwid2FybiIsImdldFJlZ2lvbiIsInN0ZG91dCIsInJlZ2lvbiIsInRyaW0iLCJnZXRBY2NvdW50SWQiLCJidWNrZXRFeGlzdHMiLCJidWNrZXQiLCJlbnN1cmVDb3JzIiwiY29yc0NvbmZpZyIsIkNPUlNSdWxlcyIsIkFsbG93ZWRPcmlnaW5zIiwiQWxsb3dlZE1ldGhvZHMiLCJBbGxvd2VkSGVhZGVycyIsIkV4cG9zZUhlYWRlcnMiLCJNYXhBZ2VTZWNvbmRzIiwianNvbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJlIiwiZW5zdXJlQnVja2V0IiwiZXhwbGljaXRCdWNrZXQiLCJhY2N0IiwiYmFzZSIsInN1ZmZpeCIsInNsaWNlIiwidG9Mb3dlckNhc2UiLCJleGlzdHMiLCJlcnJvciIsIkVycm9yIiwiYnVpbGRLZXkiLCJwcmVmaXgiLCJmaWxlUGF0aCIsImRhdGUiLCJEYXRlIiwieXl5eSIsImdldFVUQ0Z1bGxZZWFyIiwibW0iLCJnZXRVVENNb250aCIsInBhZFN0YXJ0IiwiZGQiLCJnZXRVVENEYXRlIiwibmFtZSIsImV4dCIsImlkIiwic2FmZVByZWZpeCIsInJlcGxhY2UiLCJ1cGxvYWRBbmRQcmVzaWduIiwicGFyYW1zIiwibWltZVR5cGUiLCJidWNrZXRNYXliZSIsImV4cGlyZXNJblNlY29uZHMiLCJrZXkiLCJNYXRoIiwibWF4IiwidXJsIiwic3RhcnRzV2l0aCIsImRlbGV0ZU9iamVjdCIsImNyZWF0ZVMzU2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../src/services/S3Service.ts\n");

/***/ }),

/***/ "(rsc)/../../src/services/ServiceContainer.ts":
/*!**********************************************!*\
  !*** ../../src/services/ServiceContainer.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ServiceContainer: () => (/* binding */ ServiceContainer),\n/* harmony export */   createServiceContainer: () => (/* binding */ createServiceContainer)\n/* harmony export */ });\n/**\n * Service Container - Simple Dependency Injection Container\n *\n * This container manages service instances and their lifecycle,\n * providing a centralized place to register and resolve dependencies.\n *\n * Features:\n * - Singleton management: Services are created once and reused\n * - Factory pattern: Services are created lazily when first requested\n * - Type-safe: Full TypeScript support with generics\n *\n * @example\n * ```typescript\n * const container = createServiceContainer();\n *\n * // Register services\n * container.register('anthropic', () =>\n *   createAnthropicService(process.env.ANTHROPIC_API_KEY!)\n * );\n * container.register('gemini', () =>\n *   createGeminiService(process.env.GEMINI_API_KEY!)\n * );\n *\n * // Resolve services\n * const anthropic = container.resolve<IAnthropicService>('anthropic');\n * const gemini = container.resolve<IGeminiService>('gemini');\n * ```\n */ /**\n * Factory function type for creating service instances\n */ /**\n * Service container for dependency injection\n *\n * This simple container provides basic DI functionality:\n * - register: Add a service factory\n * - resolve: Get or create a service instance (singleton)\n * - has: Check if a service is registered\n * - clear: Remove all registered services\n */ class ServiceContainer {\n    /**\n   * Register a service factory\n   *\n   * @param name - Service identifier (e.g., \"anthropic\", \"gemini\")\n   * @param factory - Factory function that creates the service\n   *\n   * @example\n   * ```typescript\n   * container.register('anthropic', () =>\n   *   createAnthropicService(apiKey)\n   * );\n   * ```\n   */ register(name, factory) {\n        this.factories.set(name, factory);\n    }\n    /**\n   * Resolve a service instance (creates if needed, then caches)\n   *\n   * @param name - Service identifier\n   * @returns The service instance\n   * @throws Error if service is not registered\n   *\n   * @example\n   * ```typescript\n   * const anthropic = container.resolve<IAnthropicService>('anthropic');\n   * ```\n   */ resolve(name) {\n        // Return cached instance if available\n        if (this.instances.has(name)) {\n            return this.instances.get(name);\n        }\n        // Get factory and create instance\n        const factory = this.factories.get(name);\n        if (!factory) {\n            throw new Error(`Service '${name}' is not registered in the container`);\n        }\n        const instance = factory();\n        this.instances.set(name, instance);\n        return instance;\n    }\n    /**\n   * Check if a service is registered\n   *\n   * @param name - Service identifier\n   * @returns true if the service is registered, false otherwise\n   */ has(name) {\n        return this.factories.has(name);\n    }\n    /**\n   * Clear all registered services and cached instances\n   *\n   * Useful for testing or resetting the container state.\n   */ clear() {\n        this.factories.clear();\n        this.instances.clear();\n    }\n    /**\n   * Get all registered service names\n   *\n   * @returns Array of service identifiers\n   */ getRegisteredServices() {\n        return Array.from(this.factories.keys());\n    }\n    constructor(){\n        this.factories = new Map();\n        this.instances = new Map();\n    }\n}\n/**\n * Factory function to create a new service container\n *\n * @returns A new ServiceContainer instance\n *\n * @example\n * ```typescript\n * const container = createServiceContainer();\n * container.register('anthropic', () => createAnthropicService(apiKey));\n * ```\n */ function createServiceContainer() {\n    return new ServiceContainer();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vc3JjL3NlcnZpY2VzL1NlcnZpY2VDb250YWluZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBMkJDLEdBRUQ7O0NBRUMsR0FHRDs7Ozs7Ozs7Q0FRQyxHQUNNLE1BQU1BO0lBSVg7Ozs7Ozs7Ozs7OztHQVlDLEdBQ0RDLFNBQVlDLElBQVksRUFBRUMsT0FBMEIsRUFBUTtRQUMxRCxJQUFJLENBQUNDLFNBQVMsQ0FBQ0MsR0FBRyxDQUFDSCxNQUFNQztJQUMzQjtJQUVBOzs7Ozs7Ozs7OztHQVdDLEdBQ0RHLFFBQVdKLElBQVksRUFBSztRQUMxQixzQ0FBc0M7UUFDdEMsSUFBSSxJQUFJLENBQUNLLFNBQVMsQ0FBQ0MsR0FBRyxDQUFDTixPQUFPO1lBQzVCLE9BQU8sSUFBSSxDQUFDSyxTQUFTLENBQUNFLEdBQUcsQ0FBQ1A7UUFDNUI7UUFFQSxrQ0FBa0M7UUFDbEMsTUFBTUMsVUFBVSxJQUFJLENBQUNDLFNBQVMsQ0FBQ0ssR0FBRyxDQUFDUDtRQUNuQyxJQUFJLENBQUNDLFNBQVM7WUFDWixNQUFNLElBQUlPLE1BQU0sQ0FBQyxTQUFTLEVBQUVSLEtBQUssb0NBQW9DLENBQUM7UUFDeEU7UUFFQSxNQUFNUyxXQUFXUjtRQUNqQixJQUFJLENBQUNJLFNBQVMsQ0FBQ0YsR0FBRyxDQUFDSCxNQUFNUztRQUN6QixPQUFPQTtJQUNUO0lBRUE7Ozs7O0dBS0MsR0FDREgsSUFBSU4sSUFBWSxFQUFXO1FBQ3pCLE9BQU8sSUFBSSxDQUFDRSxTQUFTLENBQUNJLEdBQUcsQ0FBQ047SUFDNUI7SUFFQTs7OztHQUlDLEdBQ0RVLFFBQWM7UUFDWixJQUFJLENBQUNSLFNBQVMsQ0FBQ1EsS0FBSztRQUNwQixJQUFJLENBQUNMLFNBQVMsQ0FBQ0ssS0FBSztJQUN0QjtJQUVBOzs7O0dBSUMsR0FDREMsd0JBQWtDO1FBQ2hDLE9BQU9DLE1BQU1DLElBQUksQ0FBQyxJQUFJLENBQUNYLFNBQVMsQ0FBQ1ksSUFBSTtJQUN2Qzs7YUE1RVFaLFlBQVksSUFBSWE7YUFDaEJWLFlBQVksSUFBSVU7O0FBNEUxQjtBQUVBOzs7Ozs7Ozs7O0NBVUMsR0FDTSxTQUFTQztJQUNkLE9BQU8sSUFBSWxCO0FBQ2IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AcGlwL3VpLy4uLy4uL3NyYy9zZXJ2aWNlcy9TZXJ2aWNlQ29udGFpbmVyLnRzP2MwMTUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTZXJ2aWNlIENvbnRhaW5lciAtIFNpbXBsZSBEZXBlbmRlbmN5IEluamVjdGlvbiBDb250YWluZXJcbiAqXG4gKiBUaGlzIGNvbnRhaW5lciBtYW5hZ2VzIHNlcnZpY2UgaW5zdGFuY2VzIGFuZCB0aGVpciBsaWZlY3ljbGUsXG4gKiBwcm92aWRpbmcgYSBjZW50cmFsaXplZCBwbGFjZSB0byByZWdpc3RlciBhbmQgcmVzb2x2ZSBkZXBlbmRlbmNpZXMuXG4gKlxuICogRmVhdHVyZXM6XG4gKiAtIFNpbmdsZXRvbiBtYW5hZ2VtZW50OiBTZXJ2aWNlcyBhcmUgY3JlYXRlZCBvbmNlIGFuZCByZXVzZWRcbiAqIC0gRmFjdG9yeSBwYXR0ZXJuOiBTZXJ2aWNlcyBhcmUgY3JlYXRlZCBsYXppbHkgd2hlbiBmaXJzdCByZXF1ZXN0ZWRcbiAqIC0gVHlwZS1zYWZlOiBGdWxsIFR5cGVTY3JpcHQgc3VwcG9ydCB3aXRoIGdlbmVyaWNzXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGNvbnRhaW5lciA9IGNyZWF0ZVNlcnZpY2VDb250YWluZXIoKTtcbiAqXG4gKiAvLyBSZWdpc3RlciBzZXJ2aWNlc1xuICogY29udGFpbmVyLnJlZ2lzdGVyKCdhbnRocm9waWMnLCAoKSA9PlxuICogICBjcmVhdGVBbnRocm9waWNTZXJ2aWNlKHByb2Nlc3MuZW52LkFOVEhST1BJQ19BUElfS0VZISlcbiAqICk7XG4gKiBjb250YWluZXIucmVnaXN0ZXIoJ2dlbWluaScsICgpID0+XG4gKiAgIGNyZWF0ZUdlbWluaVNlcnZpY2UocHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkhKVxuICogKTtcbiAqXG4gKiAvLyBSZXNvbHZlIHNlcnZpY2VzXG4gKiBjb25zdCBhbnRocm9waWMgPSBjb250YWluZXIucmVzb2x2ZTxJQW50aHJvcGljU2VydmljZT4oJ2FudGhyb3BpYycpO1xuICogY29uc3QgZ2VtaW5pID0gY29udGFpbmVyLnJlc29sdmU8SUdlbWluaVNlcnZpY2U+KCdnZW1pbmknKTtcbiAqIGBgYFxuICovXG5cbi8qKlxuICogRmFjdG9yeSBmdW5jdGlvbiB0eXBlIGZvciBjcmVhdGluZyBzZXJ2aWNlIGluc3RhbmNlc1xuICovXG50eXBlIFNlcnZpY2VGYWN0b3J5PFQgPSBhbnk+ID0gKCkgPT4gVDtcblxuLyoqXG4gKiBTZXJ2aWNlIGNvbnRhaW5lciBmb3IgZGVwZW5kZW5jeSBpbmplY3Rpb25cbiAqXG4gKiBUaGlzIHNpbXBsZSBjb250YWluZXIgcHJvdmlkZXMgYmFzaWMgREkgZnVuY3Rpb25hbGl0eTpcbiAqIC0gcmVnaXN0ZXI6IEFkZCBhIHNlcnZpY2UgZmFjdG9yeVxuICogLSByZXNvbHZlOiBHZXQgb3IgY3JlYXRlIGEgc2VydmljZSBpbnN0YW5jZSAoc2luZ2xldG9uKVxuICogLSBoYXM6IENoZWNrIGlmIGEgc2VydmljZSBpcyByZWdpc3RlcmVkXG4gKiAtIGNsZWFyOiBSZW1vdmUgYWxsIHJlZ2lzdGVyZWQgc2VydmljZXNcbiAqL1xuZXhwb3J0IGNsYXNzIFNlcnZpY2VDb250YWluZXIge1xuICBwcml2YXRlIGZhY3RvcmllcyA9IG5ldyBNYXA8c3RyaW5nLCBTZXJ2aWNlRmFjdG9yeT4oKTtcbiAgcHJpdmF0ZSBpbnN0YW5jZXMgPSBuZXcgTWFwPHN0cmluZywgYW55PigpO1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIHNlcnZpY2UgZmFjdG9yeVxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSAtIFNlcnZpY2UgaWRlbnRpZmllciAoZS5nLiwgXCJhbnRocm9waWNcIiwgXCJnZW1pbmlcIilcbiAgICogQHBhcmFtIGZhY3RvcnkgLSBGYWN0b3J5IGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyB0aGUgc2VydmljZVxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIGNvbnRhaW5lci5yZWdpc3RlcignYW50aHJvcGljJywgKCkgPT5cbiAgICogICBjcmVhdGVBbnRocm9waWNTZXJ2aWNlKGFwaUtleSlcbiAgICogKTtcbiAgICogYGBgXG4gICAqL1xuICByZWdpc3RlcjxUPihuYW1lOiBzdHJpbmcsIGZhY3Rvcnk6IFNlcnZpY2VGYWN0b3J5PFQ+KTogdm9pZCB7XG4gICAgdGhpcy5mYWN0b3JpZXMuc2V0KG5hbWUsIGZhY3RvcnkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc29sdmUgYSBzZXJ2aWNlIGluc3RhbmNlIChjcmVhdGVzIGlmIG5lZWRlZCwgdGhlbiBjYWNoZXMpXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gU2VydmljZSBpZGVudGlmaWVyXG4gICAqIEByZXR1cm5zIFRoZSBzZXJ2aWNlIGluc3RhbmNlXG4gICAqIEB0aHJvd3MgRXJyb3IgaWYgc2VydmljZSBpcyBub3QgcmVnaXN0ZXJlZFxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIGNvbnN0IGFudGhyb3BpYyA9IGNvbnRhaW5lci5yZXNvbHZlPElBbnRocm9waWNTZXJ2aWNlPignYW50aHJvcGljJyk7XG4gICAqIGBgYFxuICAgKi9cbiAgcmVzb2x2ZTxUPihuYW1lOiBzdHJpbmcpOiBUIHtcbiAgICAvLyBSZXR1cm4gY2FjaGVkIGluc3RhbmNlIGlmIGF2YWlsYWJsZVxuICAgIGlmICh0aGlzLmluc3RhbmNlcy5oYXMobmFtZSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5nZXQobmFtZSkgYXMgVDtcbiAgICB9XG5cbiAgICAvLyBHZXQgZmFjdG9yeSBhbmQgY3JlYXRlIGluc3RhbmNlXG4gICAgY29uc3QgZmFjdG9yeSA9IHRoaXMuZmFjdG9yaWVzLmdldChuYW1lKTtcbiAgICBpZiAoIWZhY3RvcnkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgU2VydmljZSAnJHtuYW1lfScgaXMgbm90IHJlZ2lzdGVyZWQgaW4gdGhlIGNvbnRhaW5lcmApO1xuICAgIH1cblxuICAgIGNvbnN0IGluc3RhbmNlID0gZmFjdG9yeSgpO1xuICAgIHRoaXMuaW5zdGFuY2VzLnNldChuYW1lLCBpbnN0YW5jZSk7XG4gICAgcmV0dXJuIGluc3RhbmNlIGFzIFQ7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBzZXJ2aWNlIGlzIHJlZ2lzdGVyZWRcbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBTZXJ2aWNlIGlkZW50aWZpZXJcbiAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgc2VydmljZSBpcyByZWdpc3RlcmVkLCBmYWxzZSBvdGhlcndpc2VcbiAgICovXG4gIGhhcyhuYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5mYWN0b3JpZXMuaGFzKG5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGFsbCByZWdpc3RlcmVkIHNlcnZpY2VzIGFuZCBjYWNoZWQgaW5zdGFuY2VzXG4gICAqXG4gICAqIFVzZWZ1bCBmb3IgdGVzdGluZyBvciByZXNldHRpbmcgdGhlIGNvbnRhaW5lciBzdGF0ZS5cbiAgICovXG4gIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuZmFjdG9yaWVzLmNsZWFyKCk7XG4gICAgdGhpcy5pbnN0YW5jZXMuY2xlYXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIHJlZ2lzdGVyZWQgc2VydmljZSBuYW1lc1xuICAgKlxuICAgKiBAcmV0dXJucyBBcnJheSBvZiBzZXJ2aWNlIGlkZW50aWZpZXJzXG4gICAqL1xuICBnZXRSZWdpc3RlcmVkU2VydmljZXMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZmFjdG9yaWVzLmtleXMoKSk7XG4gIH1cbn1cblxuLyoqXG4gKiBGYWN0b3J5IGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIG5ldyBzZXJ2aWNlIGNvbnRhaW5lclxuICpcbiAqIEByZXR1cm5zIEEgbmV3IFNlcnZpY2VDb250YWluZXIgaW5zdGFuY2VcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgY29udGFpbmVyID0gY3JlYXRlU2VydmljZUNvbnRhaW5lcigpO1xuICogY29udGFpbmVyLnJlZ2lzdGVyKCdhbnRocm9waWMnLCAoKSA9PiBjcmVhdGVBbnRocm9waWNTZXJ2aWNlKGFwaUtleSkpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXJ2aWNlQ29udGFpbmVyKCk6IFNlcnZpY2VDb250YWluZXIge1xuICByZXR1cm4gbmV3IFNlcnZpY2VDb250YWluZXIoKTtcbn1cbiJdLCJuYW1lcyI6WyJTZXJ2aWNlQ29udGFpbmVyIiwicmVnaXN0ZXIiLCJuYW1lIiwiZmFjdG9yeSIsImZhY3RvcmllcyIsInNldCIsInJlc29sdmUiLCJpbnN0YW5jZXMiLCJoYXMiLCJnZXQiLCJFcnJvciIsImluc3RhbmNlIiwiY2xlYXIiLCJnZXRSZWdpc3RlcmVkU2VydmljZXMiLCJBcnJheSIsImZyb20iLCJrZXlzIiwiTWFwIiwiY3JlYXRlU2VydmljZUNvbnRhaW5lciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../src/services/ServiceContainer.ts\n");

/***/ }),

/***/ "(rsc)/../../src/services/index.ts":
/*!***********************************!*\
  !*** ../../src/services/index.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnthropicService: () => (/* reexport safe */ _AnthropicService_js__WEBPACK_IMPORTED_MODULE_0__.AnthropicService),\n/* harmony export */   FileSystemService: () => (/* reexport safe */ _FileSystemService_js__WEBPACK_IMPORTED_MODULE_3__.FileSystemService),\n/* harmony export */   GeminiService: () => (/* reexport safe */ _GeminiService_js__WEBPACK_IMPORTED_MODULE_1__.GeminiService),\n/* harmony export */   S3Service: () => (/* reexport safe */ _S3Service_js__WEBPACK_IMPORTED_MODULE_2__.S3Service),\n/* harmony export */   ServiceContainer: () => (/* reexport safe */ _ServiceContainer_js__WEBPACK_IMPORTED_MODULE_4__.ServiceContainer),\n/* harmony export */   createAnthropicService: () => (/* reexport safe */ _AnthropicService_js__WEBPACK_IMPORTED_MODULE_0__.createAnthropicService),\n/* harmony export */   createFileSystemService: () => (/* reexport safe */ _FileSystemService_js__WEBPACK_IMPORTED_MODULE_3__.createFileSystemService),\n/* harmony export */   createGeminiService: () => (/* reexport safe */ _GeminiService_js__WEBPACK_IMPORTED_MODULE_1__.createGeminiService),\n/* harmony export */   createS3Service: () => (/* reexport safe */ _S3Service_js__WEBPACK_IMPORTED_MODULE_2__.createS3Service),\n/* harmony export */   createServiceContainer: () => (/* reexport safe */ _ServiceContainer_js__WEBPACK_IMPORTED_MODULE_4__.createServiceContainer)\n/* harmony export */ });\n/* harmony import */ var _AnthropicService_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AnthropicService.js */ \"(rsc)/../../src/services/AnthropicService.ts\");\n/* harmony import */ var _GeminiService_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GeminiService.js */ \"(rsc)/../../src/services/GeminiService.ts\");\n/* harmony import */ var _S3Service_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./S3Service.js */ \"(rsc)/../../src/services/S3Service.ts\");\n/* harmony import */ var _FileSystemService_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./FileSystemService.js */ \"(rsc)/../../src/services/FileSystemService.ts\");\n/* harmony import */ var _ServiceContainer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ServiceContainer.js */ \"(rsc)/../../src/services/ServiceContainer.ts\");\n/**\n * Services Module - Centralized Dependency Injection\n *\n * This module exports all service interfaces, implementations, and factory functions\n * for dependency injection throughout the application.\n *\n * Benefits:\n * - Better testability: Services can be easily mocked\n * - Loose coupling: Components depend on interfaces, not concrete implementations\n * - Single point of configuration: All service creation goes through factory functions\n *\n * @example\n * ```typescript\n * import {\n *   createAnthropicService,\n *   createGeminiService,\n *   createFileSystemService,\n *   IAnthropicService\n * } from \"./services/index.js\";\n *\n * // Create services with real implementations\n * const anthropic = createAnthropicService(apiKey);\n * const gemini = createGeminiService(apiKey);\n * const fs = createFileSystemService();\n *\n * // Or mock for testing\n * const mockAnthropic: IAnthropicService = {\n *   generateMessage: async () => \"test response\"\n * };\n * ```\n */ // Anthropic Service\n\n// Gemini Service\n\n// S3 Service\n\n// File System Service\n\n// Service Container (optional but recommended)\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vc3JjL3NlcnZpY2VzL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0E4QkMsR0FFRCxvQkFBb0I7QUFJVztBQU0vQixpQkFBaUI7QUFJVztBQVE1QixhQUFhO0FBSVc7QUFNeEIsc0JBQXNCO0FBSVU7QUFNaEMsK0NBQStDO0FBSWhCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHBpcC91aS8uLi8uLi9zcmMvc2VydmljZXMvaW5kZXgudHM/ZGFhOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNlcnZpY2VzIE1vZHVsZSAtIENlbnRyYWxpemVkIERlcGVuZGVuY3kgSW5qZWN0aW9uXG4gKlxuICogVGhpcyBtb2R1bGUgZXhwb3J0cyBhbGwgc2VydmljZSBpbnRlcmZhY2VzLCBpbXBsZW1lbnRhdGlvbnMsIGFuZCBmYWN0b3J5IGZ1bmN0aW9uc1xuICogZm9yIGRlcGVuZGVuY3kgaW5qZWN0aW9uIHRocm91Z2hvdXQgdGhlIGFwcGxpY2F0aW9uLlxuICpcbiAqIEJlbmVmaXRzOlxuICogLSBCZXR0ZXIgdGVzdGFiaWxpdHk6IFNlcnZpY2VzIGNhbiBiZSBlYXNpbHkgbW9ja2VkXG4gKiAtIExvb3NlIGNvdXBsaW5nOiBDb21wb25lbnRzIGRlcGVuZCBvbiBpbnRlcmZhY2VzLCBub3QgY29uY3JldGUgaW1wbGVtZW50YXRpb25zXG4gKiAtIFNpbmdsZSBwb2ludCBvZiBjb25maWd1cmF0aW9uOiBBbGwgc2VydmljZSBjcmVhdGlvbiBnb2VzIHRocm91Z2ggZmFjdG9yeSBmdW5jdGlvbnNcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHtcbiAqICAgY3JlYXRlQW50aHJvcGljU2VydmljZSxcbiAqICAgY3JlYXRlR2VtaW5pU2VydmljZSxcbiAqICAgY3JlYXRlRmlsZVN5c3RlbVNlcnZpY2UsXG4gKiAgIElBbnRocm9waWNTZXJ2aWNlXG4gKiB9IGZyb20gXCIuL3NlcnZpY2VzL2luZGV4LmpzXCI7XG4gKlxuICogLy8gQ3JlYXRlIHNlcnZpY2VzIHdpdGggcmVhbCBpbXBsZW1lbnRhdGlvbnNcbiAqIGNvbnN0IGFudGhyb3BpYyA9IGNyZWF0ZUFudGhyb3BpY1NlcnZpY2UoYXBpS2V5KTtcbiAqIGNvbnN0IGdlbWluaSA9IGNyZWF0ZUdlbWluaVNlcnZpY2UoYXBpS2V5KTtcbiAqIGNvbnN0IGZzID0gY3JlYXRlRmlsZVN5c3RlbVNlcnZpY2UoKTtcbiAqXG4gKiAvLyBPciBtb2NrIGZvciB0ZXN0aW5nXG4gKiBjb25zdCBtb2NrQW50aHJvcGljOiBJQW50aHJvcGljU2VydmljZSA9IHtcbiAqICAgZ2VuZXJhdGVNZXNzYWdlOiBhc3luYyAoKSA9PiBcInRlc3QgcmVzcG9uc2VcIlxuICogfTtcbiAqIGBgYFxuICovXG5cbi8vIEFudGhyb3BpYyBTZXJ2aWNlXG5leHBvcnQge1xuICBBbnRocm9waWNTZXJ2aWNlLFxuICBjcmVhdGVBbnRocm9waWNTZXJ2aWNlXG59IGZyb20gXCIuL0FudGhyb3BpY1NlcnZpY2UuanNcIjtcbmV4cG9ydCB0eXBlIHtcbiAgSUFudGhyb3BpY1NlcnZpY2UsXG4gIE1lc3NhZ2VQYXJhbXNcbn0gZnJvbSBcIi4vQW50aHJvcGljU2VydmljZS5qc1wiO1xuXG4vLyBHZW1pbmkgU2VydmljZVxuZXhwb3J0IHtcbiAgR2VtaW5pU2VydmljZSxcbiAgY3JlYXRlR2VtaW5pU2VydmljZVxufSBmcm9tIFwiLi9HZW1pbmlTZXJ2aWNlLmpzXCI7XG5leHBvcnQgdHlwZSB7XG4gIElHZW1pbmlTZXJ2aWNlLFxuICBVcGxvYWRlZEZpbGUsXG4gIEdlbmVyYXRlQ29udGVudFBhcmFtcyxcbiAgR2VuZXJhdGVDb250ZW50UmVzdWx0XG59IGZyb20gXCIuL0dlbWluaVNlcnZpY2UuanNcIjtcblxuLy8gUzMgU2VydmljZVxuZXhwb3J0IHtcbiAgUzNTZXJ2aWNlLFxuICBjcmVhdGVTM1NlcnZpY2Vcbn0gZnJvbSBcIi4vUzNTZXJ2aWNlLmpzXCI7XG5leHBvcnQgdHlwZSB7XG4gIElTM1NlcnZpY2UsXG4gIFVwbG9hZFJlc3VsdFxufSBmcm9tIFwiLi9TM1NlcnZpY2UuanNcIjtcblxuLy8gRmlsZSBTeXN0ZW0gU2VydmljZVxuZXhwb3J0IHtcbiAgRmlsZVN5c3RlbVNlcnZpY2UsXG4gIGNyZWF0ZUZpbGVTeXN0ZW1TZXJ2aWNlXG59IGZyb20gXCIuL0ZpbGVTeXN0ZW1TZXJ2aWNlLmpzXCI7XG5leHBvcnQgdHlwZSB7XG4gIElGaWxlU3lzdGVtU2VydmljZSxcbiAgTWtkaXJPcHRpb25zXG59IGZyb20gXCIuL0ZpbGVTeXN0ZW1TZXJ2aWNlLmpzXCI7XG5cbi8vIFNlcnZpY2UgQ29udGFpbmVyIChvcHRpb25hbCBidXQgcmVjb21tZW5kZWQpXG5leHBvcnQge1xuICBTZXJ2aWNlQ29udGFpbmVyLFxuICBjcmVhdGVTZXJ2aWNlQ29udGFpbmVyXG59IGZyb20gXCIuL1NlcnZpY2VDb250YWluZXIuanNcIjtcbiJdLCJuYW1lcyI6WyJBbnRocm9waWNTZXJ2aWNlIiwiY3JlYXRlQW50aHJvcGljU2VydmljZSIsIkdlbWluaVNlcnZpY2UiLCJjcmVhdGVHZW1pbmlTZXJ2aWNlIiwiUzNTZXJ2aWNlIiwiY3JlYXRlUzNTZXJ2aWNlIiwiRmlsZVN5c3RlbVNlcnZpY2UiLCJjcmVhdGVGaWxlU3lzdGVtU2VydmljZSIsIlNlcnZpY2VDb250YWluZXIiLCJjcmVhdGVTZXJ2aWNlQ29udGFpbmVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../src/services/index.ts\n");

/***/ }),

/***/ "(rsc)/../../src/types/index.ts":
/*!********************************!*\
  !*** ../../src/types/index.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getErrorMessage: () => (/* binding */ getErrorMessage),\n/* harmony export */   hasUsage: () => (/* binding */ hasUsage),\n/* harmony export */   isAssistantMessage: () => (/* binding */ isAssistantMessage),\n/* harmony export */   isAudioProbeData: () => (/* binding */ isAudioProbeData),\n/* harmony export */   isDocxImport: () => (/* binding */ isDocxImport),\n/* harmony export */   isErrorWithMessage: () => (/* binding */ isErrorWithMessage),\n/* harmony export */   isGeminiTranscriptionResult: () => (/* binding */ isGeminiTranscriptionResult),\n/* harmony export */   isPipelineError: () => (/* binding */ isPipelineError),\n/* harmony export */   isPipelineSuccess: () => (/* binding */ isPipelineSuccess),\n/* harmony export */   isResultMessage: () => (/* binding */ isResultMessage),\n/* harmony export */   isStreamEvent: () => (/* binding */ isStreamEvent),\n/* harmony export */   isSystemMessage: () => (/* binding */ isSystemMessage),\n/* harmony export */   isToolResultEvent: () => (/* binding */ isToolResultEvent),\n/* harmony export */   isToolUseEvent: () => (/* binding */ isToolUseEvent)\n/* harmony export */ });\n/**\n * Type definitions for the PIP Agent Autonomous application\n * This file provides proper TypeScript types to eliminate all 'any' usage\n */ // ===== Claude Agent SDK Stream Message Types =====\n/**\n * Type guard to check if a message is an assistant message\n */ function isAssistantMessage(msg) {\n    return msg.type === \"assistant\";\n}\n/**\n * Type guard to check if a message is a stream event\n */ function isStreamEvent(msg) {\n    return msg.type === \"stream_event\";\n}\n/**\n * Type guard to check if a message is a result message\n */ function isResultMessage(msg) {\n    return msg.type === \"result\";\n}\n/**\n * Type guard to check if a message is a system message\n */ function isSystemMessage(msg) {\n    return msg.type === \"system\";\n}\n/**\n * Type guard to check if a message has usage metrics\n */ function hasUsage(msg) {\n    return typeof msg === \"object\" && msg !== null && \"usage\" in msg && typeof msg.usage === \"object\";\n}\n/**\n * Type guard for Gemini transcription result\n */ function isGeminiTranscriptionResult(data) {\n    return typeof data === \"object\" && data !== null && (typeof data.transcript === \"string\" || Array.isArray(data.segments));\n}\n/**\n * Type guard for audio probe data\n */ function isAudioProbeData(data) {\n    return typeof data === \"object\" && data !== null && \"streams\" in data && Array.isArray(data.streams) && \"format\" in data && typeof data.format === \"object\";\n}\n/**\n * Type guard for docx import\n */ function isDocxImport(module) {\n    return typeof module === \"object\" && module !== null && \"Document\" in module && \"Packer\" in module && \"Paragraph\" in module && \"HeadingLevel\" in module && \"TextRun\" in module;\n}\n/**\n * Type guard for pipeline success\n */ function isPipelineSuccess(result) {\n    return typeof result === \"object\" && result !== null && result.status === \"ok\" && typeof result.draft === \"string\";\n}\n/**\n * Type guard for pipeline error\n */ function isPipelineError(result) {\n    return typeof result === \"object\" && result !== null && result.status === \"error\" && typeof result.message === \"string\";\n}\n/**\n * Type guard for tool use event\n */ function isToolUseEvent(data) {\n    return typeof data === \"object\" && data !== null && data.type === \"tool_use\" && typeof data.name === \"string\";\n}\n/**\n * Type guard for tool result event\n */ function isToolResultEvent(data) {\n    return typeof data === \"object\" && data !== null && data.type === \"tool_result\";\n}\n/**\n * Type guard for error-like objects\n */ function isErrorWithMessage(error) {\n    return typeof error === \"object\" && error !== null && \"message\" in error && typeof error.message === \"string\";\n}\n/**\n * Extracts error message from unknown error type\n */ function getErrorMessage(error) {\n    if (isErrorWithMessage(error)) {\n        return error.message;\n    }\n    return String(error);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vc3JjL3R5cGVzL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7OztDQUdDLEdBdUJELG9EQUFvRDtBQUVwRDs7Q0FFQyxHQUNNLFNBQVNBLG1CQUFtQkMsR0FBZTtJQUNoRCxPQUFPQSxJQUFJQyxJQUFJLEtBQUs7QUFDdEI7QUFFQTs7Q0FFQyxHQUNNLFNBQVNDLGNBQWNGLEdBQWU7SUFDM0MsT0FBT0EsSUFBSUMsSUFBSSxLQUFLO0FBQ3RCO0FBRUE7O0NBRUMsR0FDTSxTQUFTRSxnQkFBZ0JILEdBQWU7SUFDN0MsT0FBT0EsSUFBSUMsSUFBSSxLQUFLO0FBQ3RCO0FBRUE7O0NBRUMsR0FDTSxTQUFTRyxnQkFBZ0JKLEdBQWU7SUFDN0MsT0FBT0EsSUFBSUMsSUFBSSxLQUFLO0FBQ3RCO0FBV0E7O0NBRUMsR0FDTSxTQUFTSSxTQUFTTCxHQUFZO0lBQ25DLE9BQ0UsT0FBT0EsUUFBUSxZQUNmQSxRQUFRLFFBQ1IsV0FBV0EsT0FDWCxPQUFPLElBQTBCTSxLQUFLLEtBQUs7QUFFL0M7QUE4RkE7O0NBRUMsR0FDTSxTQUFTQyw0QkFDZEMsSUFBYTtJQUViLE9BQ0UsT0FBT0EsU0FBUyxZQUNoQkEsU0FBUyxRQUNSLFFBQU8sS0FBb0NDLFVBQVUsS0FBSyxZQUN6REMsTUFBTUMsT0FBTyxDQUFDLEtBQW9DQyxRQUFRO0FBRWhFO0FBa0NBOztDQUVDLEdBQ00sU0FBU0MsaUJBQWlCTCxJQUFhO0lBQzVDLE9BQ0UsT0FBT0EsU0FBUyxZQUNoQkEsU0FBUyxRQUNULGFBQWFBLFFBQ2JFLE1BQU1DLE9BQU8sQ0FBQyxLQUF5QkcsT0FBTyxLQUM5QyxZQUFZTixRQUNaLE9BQU8sS0FBeUJPLE1BQU0sS0FBSztBQUUvQztBQW1CQTs7Q0FFQyxHQUNNLFNBQVNDLGFBQWFDLE1BQWU7SUFDMUMsT0FDRSxPQUFPQSxXQUFXLFlBQ2xCQSxXQUFXLFFBQ1gsY0FBY0EsVUFDZCxZQUFZQSxVQUNaLGVBQWVBLFVBQ2Ysa0JBQWtCQSxVQUNsQixhQUFhQTtBQUVqQjtBQTBCQTs7Q0FFQyxHQUNNLFNBQVNDLGtCQUFrQkMsTUFBZTtJQUMvQyxPQUNFLE9BQU9BLFdBQVcsWUFDbEJBLFdBQVcsUUFDWCxPQUEyQkMsTUFBTSxLQUFLLFFBQ3RDLE9BQU8sT0FBNEJDLEtBQUssS0FBSztBQUVqRDtBQUVBOztDQUVDLEdBQ00sU0FBU0MsZ0JBQWdCSCxNQUFlO0lBQzdDLE9BQ0UsT0FBT0EsV0FBVyxZQUNsQkEsV0FBVyxRQUNYLE9BQTJCQyxNQUFNLEtBQUssV0FDdEMsT0FBTyxPQUEwQkcsT0FBTyxLQUFLO0FBRWpEO0FBZ0NBOztDQUVDLEdBQ00sU0FBU0MsZUFBZWhCLElBQWE7SUFDMUMsT0FDRSxPQUFPQSxTQUFTLFlBQ2hCQSxTQUFTLFFBQ1QsS0FBMkJQLElBQUksS0FBSyxjQUNwQyxPQUFPLEtBQTJCd0IsSUFBSSxLQUFLO0FBRS9DO0FBRUE7O0NBRUMsR0FDTSxTQUFTQyxrQkFBa0JsQixJQUFhO0lBQzdDLE9BQ0UsT0FBT0EsU0FBUyxZQUNoQkEsU0FBUyxRQUNULEtBQThCUCxJQUFJLEtBQUs7QUFFM0M7QUFjQTs7Q0FFQyxHQUNNLFNBQVMwQixtQkFBbUJDLEtBQWM7SUFDL0MsT0FDRSxPQUFPQSxVQUFVLFlBQ2pCQSxVQUFVLFFBQ1YsYUFBYUEsU0FDYixPQUFPLE1BQTRCTCxPQUFPLEtBQUs7QUFFbkQ7QUFFQTs7Q0FFQyxHQUNNLFNBQVNNLGdCQUFnQkQsS0FBYztJQUM1QyxJQUFJRCxtQkFBbUJDLFFBQVE7UUFDN0IsT0FBT0EsTUFBTUwsT0FBTztJQUN0QjtJQUNBLE9BQU9PLE9BQU9GO0FBQ2hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHBpcC91aS8uLi8uLi9zcmMvdHlwZXMvaW5kZXgudHM/YmRkZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFR5cGUgZGVmaW5pdGlvbnMgZm9yIHRoZSBQSVAgQWdlbnQgQXV0b25vbW91cyBhcHBsaWNhdGlvblxuICogVGhpcyBmaWxlIHByb3ZpZGVzIHByb3BlciBUeXBlU2NyaXB0IHR5cGVzIHRvIGVsaW1pbmF0ZSBhbGwgJ2FueScgdXNhZ2VcbiAqL1xuXG5pbXBvcnQgdHlwZSB7XG4gIFNES01lc3NhZ2UsXG4gIFNES0Fzc2lzdGFudE1lc3NhZ2UsXG4gIFNES1BhcnRpYWxBc3Npc3RhbnRNZXNzYWdlLFxuICBTREtSZXN1bHRNZXNzYWdlLFxuICBTREtTeXN0ZW1NZXNzYWdlXG59IGZyb20gXCJAYW50aHJvcGljLWFpL2NsYXVkZS1hZ2VudC1zZGtcIjtcblxuLy8gPT09PT0gTUNQIFRvb2wgUmVzdWx0IFR5cGVzID09PT09XG5cbi8qKlxuICogU3RhbmRhcmQgTUNQIHRvb2wgcmVzdWx0IHdpdGggc3VjY2VzcyBzdGF0dXNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNQ1BUb29sUmVzdWx0IHtcbiAgY29udGVudDogQXJyYXk8e1xuICAgIHR5cGU6IFwidGV4dFwiO1xuICAgIHRleHQ6IHN0cmluZztcbiAgfT47XG4gIGlzRXJyb3I/OiBib29sZWFuO1xufVxuXG4vLyA9PT09PSBDbGF1ZGUgQWdlbnQgU0RLIFN0cmVhbSBNZXNzYWdlIFR5cGVzID09PT09XG5cbi8qKlxuICogVHlwZSBndWFyZCB0byBjaGVjayBpZiBhIG1lc3NhZ2UgaXMgYW4gYXNzaXN0YW50IG1lc3NhZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXNzaXN0YW50TWVzc2FnZShtc2c6IFNES01lc3NhZ2UpOiBtc2cgaXMgU0RLQXNzaXN0YW50TWVzc2FnZSB7XG4gIHJldHVybiBtc2cudHlwZSA9PT0gXCJhc3Npc3RhbnRcIjtcbn1cblxuLyoqXG4gKiBUeXBlIGd1YXJkIHRvIGNoZWNrIGlmIGEgbWVzc2FnZSBpcyBhIHN0cmVhbSBldmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJlYW1FdmVudChtc2c6IFNES01lc3NhZ2UpOiBtc2cgaXMgU0RLUGFydGlhbEFzc2lzdGFudE1lc3NhZ2Uge1xuICByZXR1cm4gbXNnLnR5cGUgPT09IFwic3RyZWFtX2V2ZW50XCI7XG59XG5cbi8qKlxuICogVHlwZSBndWFyZCB0byBjaGVjayBpZiBhIG1lc3NhZ2UgaXMgYSByZXN1bHQgbWVzc2FnZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNSZXN1bHRNZXNzYWdlKG1zZzogU0RLTWVzc2FnZSk6IG1zZyBpcyBTREtSZXN1bHRNZXNzYWdlIHtcbiAgcmV0dXJuIG1zZy50eXBlID09PSBcInJlc3VsdFwiO1xufVxuXG4vKipcbiAqIFR5cGUgZ3VhcmQgdG8gY2hlY2sgaWYgYSBtZXNzYWdlIGlzIGEgc3lzdGVtIG1lc3NhZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU3lzdGVtTWVzc2FnZShtc2c6IFNES01lc3NhZ2UpOiBtc2cgaXMgU0RLU3lzdGVtTWVzc2FnZSB7XG4gIHJldHVybiBtc2cudHlwZSA9PT0gXCJzeXN0ZW1cIjtcbn1cblxuLyoqXG4gKiBNZXNzYWdlIHdpdGggdXNhZ2UgbWV0cmljc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VXaXRoVXNhZ2Uge1xuICBpZD86IHN0cmluZztcbiAgbWVzc2FnZUlkPzogc3RyaW5nO1xuICB1c2FnZT86IFVzYWdlTWV0cmljcztcbn1cblxuLyoqXG4gKiBUeXBlIGd1YXJkIHRvIGNoZWNrIGlmIGEgbWVzc2FnZSBoYXMgdXNhZ2UgbWV0cmljc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzVXNhZ2UobXNnOiB1bmtub3duKTogbXNnIGlzIE1lc3NhZ2VXaXRoVXNhZ2Uge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiBtc2cgPT09IFwib2JqZWN0XCIgJiZcbiAgICBtc2cgIT09IG51bGwgJiZcbiAgICBcInVzYWdlXCIgaW4gbXNnICYmXG4gICAgdHlwZW9mIChtc2cgYXMgTWVzc2FnZVdpdGhVc2FnZSkudXNhZ2UgPT09IFwib2JqZWN0XCJcbiAgKTtcbn1cblxuLy8gPT09PT0gVXNhZ2UgTWV0cmljcyA9PT09PVxuXG4vKipcbiAqIFRva2VuIHVzYWdlIG1ldHJpY3MgZnJvbSBDbGF1ZGUgQVBJXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXNhZ2VNZXRyaWNzIHtcbiAgaW5wdXRfdG9rZW5zPzogbnVtYmVyO1xuICBvdXRwdXRfdG9rZW5zPzogbnVtYmVyO1xuICBjYWNoZV9jcmVhdGlvbl9pbnB1dF90b2tlbnM/OiBudW1iZXI7XG4gIGNhY2hlX3JlYWRfaW5wdXRfdG9rZW5zPzogbnVtYmVyO1xufVxuXG4vKipcbiAqIENvc3QgYnJlYWtkb3duIGZvciB0b2tlbiB1c2FnZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvc3RCcmVha2Rvd24ge1xuICBpbnB1dFRva2VuczogbnVtYmVyO1xuICBvdXRwdXRUb2tlbnM6IG51bWJlcjtcbiAgY2FjaGVDcmVhdGlvblRva2VuczogbnVtYmVyO1xuICBjYWNoZVJlYWRUb2tlbnM6IG51bWJlcjtcbiAgaW5wdXRDb3N0OiBzdHJpbmc7XG4gIG91dHB1dENvc3Q6IHN0cmluZztcbiAgY2FjaGVDcmVhdGlvbkNvc3Q6IHN0cmluZztcbiAgY2FjaGVSZWFkQ29zdDogc3RyaW5nO1xufVxuXG4vKipcbiAqIENvbXBsZXRlIGNvc3Qgc3VtbWFyeVxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvc3RTdW1tYXJ5IHtcbiAgdG90YWxUb2tlbnM6IG51bWJlcjtcbiAgZXN0aW1hdGVkQ29zdFVTRDogbnVtYmVyO1xuICBicmVha2Rvd246IENvc3RCcmVha2Rvd247XG59XG5cbi8vID09PT09IEdlbWluaSBBUEkgVHlwZXMgPT09PT1cblxuLyoqXG4gKiBHZW1pbmkgZmlsZSB1cGxvYWQgcmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBHZW1pbmlVcGxvYWRSZXNwb25zZSB7XG4gIGZpbGU/OiBHZW1pbmlGaWxlO1xuICB1cmk/OiBzdHJpbmc7XG4gIGZpbGVVcmk/OiBzdHJpbmc7XG4gIG1pbWVUeXBlPzogc3RyaW5nO1xuICBmaWxlTWltZVR5cGU/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogR2VtaW5pIGZpbGUgbWV0YWRhdGFcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBHZW1pbmlGaWxlIHtcbiAgdXJpPzogc3RyaW5nO1xuICBmaWxlVXJpPzogc3RyaW5nO1xuICBtaW1lVHlwZT86IHN0cmluZztcbiAgZmlsZU1pbWVUeXBlPzogc3RyaW5nO1xuICBuYW1lPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEdlbWluaSBnZW5lcmF0ZSBjb250ZW50IHJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgR2VtaW5pR2VuZXJhdGVSZXNwb25zZSB7XG4gIHRleHQ/OiBzdHJpbmc7XG4gIHJlc3BvbnNlPzoge1xuICAgIHRleHQ/OiAoKSA9PiBzdHJpbmc7XG4gIH07XG59XG5cbi8qKlxuICogR2VtaW5pIHRyYW5zY3JpcHRpb24gc2VnbWVudCAocmF3IGZyb20gQVBJKVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEdlbWluaVJhd1NlZ21lbnQge1xuICBzdGFydD86IHN0cmluZyB8IG51bWJlciB8IG51bGw7XG4gIGJlZ2luPzogc3RyaW5nIHwgbnVtYmVyIHwgbnVsbDtcbiAgZnJvbT86IHN0cmluZyB8IG51bWJlciB8IG51bGw7XG4gIGVuZD86IHN0cmluZyB8IG51bWJlciB8IG51bGw7XG4gIGZpbmlzaD86IHN0cmluZyB8IG51bWJlciB8IG51bGw7XG4gIHRvPzogc3RyaW5nIHwgbnVtYmVyIHwgbnVsbDtcbiAgdGV4dD86IHN0cmluZztcbiAgdHJhbnNjcmlwdD86IHN0cmluZztcbiAgc3BlYWtlcj86IHN0cmluZztcbn1cblxuLyoqXG4gKiBHZW1pbmkgdHJhbnNjcmlwdGlvbiByZXN1bHQgKHJhdyBmcm9tIEFQSSlcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBHZW1pbmlUcmFuc2NyaXB0aW9uUmVzdWx0IHtcbiAgdHJhbnNjcmlwdD86IHN0cmluZztcbiAgc2VnbWVudHM/OiBHZW1pbmlSYXdTZWdtZW50W107XG59XG5cbi8qKlxuICogVHlwZSBndWFyZCBmb3IgR2VtaW5pIHRyYW5zY3JpcHRpb24gcmVzdWx0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0dlbWluaVRyYW5zY3JpcHRpb25SZXN1bHQoXG4gIGRhdGE6IHVua25vd25cbik6IGRhdGEgaXMgR2VtaW5pVHJhbnNjcmlwdGlvblJlc3VsdCB7XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIGRhdGEgPT09IFwib2JqZWN0XCIgJiZcbiAgICBkYXRhICE9PSBudWxsICYmXG4gICAgKHR5cGVvZiAoZGF0YSBhcyBHZW1pbmlUcmFuc2NyaXB0aW9uUmVzdWx0KS50cmFuc2NyaXB0ID09PSBcInN0cmluZ1wiIHx8XG4gICAgICBBcnJheS5pc0FycmF5KChkYXRhIGFzIEdlbWluaVRyYW5zY3JpcHRpb25SZXN1bHQpLnNlZ21lbnRzKSlcbiAgKTtcbn1cblxuLy8gPT09PT0gRkZwcm9iZSBUeXBlcyA9PT09PVxuXG4vKipcbiAqIEZGcHJvYmUgYXVkaW8gc3RyZWFtIGRhdGFcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBdWRpb1N0cmVhbSB7XG4gIGNvZGVjX3R5cGU6IHN0cmluZztcbiAgY29kZWNfbmFtZTogc3RyaW5nO1xuICBiaXRfcmF0ZT86IHN0cmluZztcbiAgZHVyYXRpb24/OiBzdHJpbmc7XG4gIHNhbXBsZV9yYXRlPzogc3RyaW5nO1xuICBjaGFubmVscz86IG51bWJlcjtcbn1cblxuLyoqXG4gKiBGRnByb2JlIGZvcm1hdCBkYXRhXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXVkaW9Gb3JtYXQge1xuICBkdXJhdGlvbj86IHN0cmluZztcbiAgYml0X3JhdGU/OiBzdHJpbmc7XG4gIGZvcm1hdF9uYW1lPzogc3RyaW5nO1xuICBzaXplPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEZGcHJvYmUgSlNPTiBvdXRwdXQgc3RydWN0dXJlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXVkaW9Qcm9iZURhdGEge1xuICBzdHJlYW1zOiBBdWRpb1N0cmVhbVtdO1xuICBmb3JtYXQ6IEF1ZGlvRm9ybWF0O1xufVxuXG4vKipcbiAqIFR5cGUgZ3VhcmQgZm9yIGF1ZGlvIHByb2JlIGRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXVkaW9Qcm9iZURhdGEoZGF0YTogdW5rbm93bik6IGRhdGEgaXMgQXVkaW9Qcm9iZURhdGEge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiBkYXRhID09PSBcIm9iamVjdFwiICYmXG4gICAgZGF0YSAhPT0gbnVsbCAmJlxuICAgIFwic3RyZWFtc1wiIGluIGRhdGEgJiZcbiAgICBBcnJheS5pc0FycmF5KChkYXRhIGFzIEF1ZGlvUHJvYmVEYXRhKS5zdHJlYW1zKSAmJlxuICAgIFwiZm9ybWF0XCIgaW4gZGF0YSAmJlxuICAgIHR5cGVvZiAoZGF0YSBhcyBBdWRpb1Byb2JlRGF0YSkuZm9ybWF0ID09PSBcIm9iamVjdFwiXG4gICk7XG59XG5cbi8vID09PT09IERvY3ggSW1wb3J0IFR5cGVzID09PT09XG5cbi8qKlxuICogRHluYW1pYyBpbXBvcnQgb2YgZG9jeCBsaWJyYXJ5XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRG9jeEltcG9ydCB7XG4gIERvY3VtZW50OiBuZXcgKG9wdGlvbnM6IHVua25vd24pID0+IHVua25vd247XG4gIFBhY2tlcjoge1xuICAgIHRvQnVmZmVyOiAoZG9jOiB1bmtub3duKSA9PiBQcm9taXNlPEJ1ZmZlcj47XG4gIH07XG4gIFBhcmFncmFwaDogbmV3IChvcHRpb25zOiB1bmtub3duKSA9PiB1bmtub3duO1xuICBIZWFkaW5nTGV2ZWw6IHtcbiAgICBIRUFESU5HXzE6IHVua25vd247XG4gIH07XG4gIFRleHRSdW46IG5ldyAob3B0aW9uczogdW5rbm93bikgPT4gdW5rbm93bjtcbn1cblxuLyoqXG4gKiBUeXBlIGd1YXJkIGZvciBkb2N4IGltcG9ydFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNEb2N4SW1wb3J0KG1vZHVsZTogdW5rbm93bik6IG1vZHVsZSBpcyBEb2N4SW1wb3J0IHtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmXG4gICAgbW9kdWxlICE9PSBudWxsICYmXG4gICAgXCJEb2N1bWVudFwiIGluIG1vZHVsZSAmJlxuICAgIFwiUGFja2VyXCIgaW4gbW9kdWxlICYmXG4gICAgXCJQYXJhZ3JhcGhcIiBpbiBtb2R1bGUgJiZcbiAgICBcIkhlYWRpbmdMZXZlbFwiIGluIG1vZHVsZSAmJlxuICAgIFwiVGV4dFJ1blwiIGluIG1vZHVsZVxuICApO1xufVxuXG4vLyA9PT09PSBQaXBlbGluZSBSZXN1bHQgVHlwZXMgPT09PT1cblxuLyoqXG4gKiBGaW5hbCBwaXBlbGluZSByZXN1bHQgKHN1Y2Nlc3MgY2FzZSlcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQaXBlbGluZVN1Y2Nlc3Mge1xuICBzdGF0dXM6IFwib2tcIjtcbiAgZHJhZnQ6IHN0cmluZztcbiAgZG9jeD86IHN0cmluZztcbn1cblxuLyoqXG4gKiBGaW5hbCBwaXBlbGluZSByZXN1bHQgKGVycm9yIGNhc2UpXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGlwZWxpbmVFcnJvciB7XG4gIHN0YXR1czogXCJlcnJvclwiO1xuICBtZXNzYWdlOiBzdHJpbmc7XG59XG5cbi8qKlxuICogVW5pb24gdHlwZSBmb3IgcGlwZWxpbmUgcmVzdWx0c1xuICovXG5leHBvcnQgdHlwZSBQaXBlbGluZVJlc3VsdCA9IFBpcGVsaW5lU3VjY2VzcyB8IFBpcGVsaW5lRXJyb3I7XG5cbi8qKlxuICogVHlwZSBndWFyZCBmb3IgcGlwZWxpbmUgc3VjY2Vzc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQaXBlbGluZVN1Y2Nlc3MocmVzdWx0OiB1bmtub3duKTogcmVzdWx0IGlzIFBpcGVsaW5lU3VjY2VzcyB7XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIHJlc3VsdCA9PT0gXCJvYmplY3RcIiAmJlxuICAgIHJlc3VsdCAhPT0gbnVsbCAmJlxuICAgIChyZXN1bHQgYXMgUGlwZWxpbmVSZXN1bHQpLnN0YXR1cyA9PT0gXCJva1wiICYmXG4gICAgdHlwZW9mIChyZXN1bHQgYXMgUGlwZWxpbmVTdWNjZXNzKS5kcmFmdCA9PT0gXCJzdHJpbmdcIlxuICApO1xufVxuXG4vKipcbiAqIFR5cGUgZ3VhcmQgZm9yIHBpcGVsaW5lIGVycm9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BpcGVsaW5lRXJyb3IocmVzdWx0OiB1bmtub3duKTogcmVzdWx0IGlzIFBpcGVsaW5lRXJyb3Ige1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiByZXN1bHQgPT09IFwib2JqZWN0XCIgJiZcbiAgICByZXN1bHQgIT09IG51bGwgJiZcbiAgICAocmVzdWx0IGFzIFBpcGVsaW5lUmVzdWx0KS5zdGF0dXMgPT09IFwiZXJyb3JcIiAmJlxuICAgIHR5cGVvZiAocmVzdWx0IGFzIFBpcGVsaW5lRXJyb3IpLm1lc3NhZ2UgPT09IFwic3RyaW5nXCJcbiAgKTtcbn1cblxuLy8gPT09PT0gU3RyZWFtIEV2ZW50IERhdGEgVHlwZXMgPT09PT1cblxuLyoqXG4gKiBUb29sIHVzZSBzdHJlYW0gZXZlbnQgZGF0YVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xVc2VFdmVudERhdGEge1xuICB0eXBlOiBcInRvb2xfdXNlXCI7XG4gIG5hbWU6IHN0cmluZztcbiAgaW5wdXQ6IHVua25vd247XG4gIGlkPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFRvb2wgcmVzdWx0IHN0cmVhbSBldmVudCBkYXRhXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbFJlc3VsdEV2ZW50RGF0YSB7XG4gIHR5cGU6IFwidG9vbF9yZXN1bHRcIjtcbiAgbmFtZT86IHN0cmluZztcbiAgY29udGVudDogdW5rbm93bjtcbiAgaXNFcnJvcj86IGJvb2xlYW47XG59XG5cbi8qKlxuICogR2VuZXJpYyBzdHJlYW0gZXZlbnQgZGF0YVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0cmVhbUV2ZW50RGF0YSB7XG4gIHR5cGU6IHN0cmluZztcbiAgW2tleTogc3RyaW5nXTogdW5rbm93bjtcbn1cblxuLyoqXG4gKiBUeXBlIGd1YXJkIGZvciB0b29sIHVzZSBldmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUb29sVXNlRXZlbnQoZGF0YTogdW5rbm93bik6IGRhdGEgaXMgVG9vbFVzZUV2ZW50RGF0YSB7XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIGRhdGEgPT09IFwib2JqZWN0XCIgJiZcbiAgICBkYXRhICE9PSBudWxsICYmXG4gICAgKGRhdGEgYXMgVG9vbFVzZUV2ZW50RGF0YSkudHlwZSA9PT0gXCJ0b29sX3VzZVwiICYmXG4gICAgdHlwZW9mIChkYXRhIGFzIFRvb2xVc2VFdmVudERhdGEpLm5hbWUgPT09IFwic3RyaW5nXCJcbiAgKTtcbn1cblxuLyoqXG4gKiBUeXBlIGd1YXJkIGZvciB0b29sIHJlc3VsdCBldmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUb29sUmVzdWx0RXZlbnQoZGF0YTogdW5rbm93bik6IGRhdGEgaXMgVG9vbFJlc3VsdEV2ZW50RGF0YSB7XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIGRhdGEgPT09IFwib2JqZWN0XCIgJiZcbiAgICBkYXRhICE9PSBudWxsICYmXG4gICAgKGRhdGEgYXMgVG9vbFJlc3VsdEV2ZW50RGF0YSkudHlwZSA9PT0gXCJ0b29sX3Jlc3VsdFwiXG4gICk7XG59XG5cbi8vID09PT09IEVycm9yIFR5cGVzID09PT09XG5cbi8qKlxuICogRXJyb3Igd2l0aCBhZGRpdGlvbmFsIGNvbnRleHRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFcnJvcldpdGhNZXNzYWdlIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBjb2RlPzogc3RyaW5nO1xuICBzdGFjaz86IHN0cmluZztcbiAgW2tleTogc3RyaW5nXTogdW5rbm93bjtcbn1cblxuLyoqXG4gKiBUeXBlIGd1YXJkIGZvciBlcnJvci1saWtlIG9iamVjdHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRXJyb3JXaXRoTWVzc2FnZShlcnJvcjogdW5rbm93bik6IGVycm9yIGlzIEVycm9yV2l0aE1lc3NhZ2Uge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiAmJlxuICAgIGVycm9yICE9PSBudWxsICYmXG4gICAgXCJtZXNzYWdlXCIgaW4gZXJyb3IgJiZcbiAgICB0eXBlb2YgKGVycm9yIGFzIEVycm9yV2l0aE1lc3NhZ2UpLm1lc3NhZ2UgPT09IFwic3RyaW5nXCJcbiAgKTtcbn1cblxuLyoqXG4gKiBFeHRyYWN0cyBlcnJvciBtZXNzYWdlIGZyb20gdW5rbm93biBlcnJvciB0eXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UoZXJyb3I6IHVua25vd24pOiBzdHJpbmcge1xuICBpZiAoaXNFcnJvcldpdGhNZXNzYWdlKGVycm9yKSkge1xuICAgIHJldHVybiBlcnJvci5tZXNzYWdlO1xuICB9XG4gIHJldHVybiBTdHJpbmcoZXJyb3IpO1xufVxuIl0sIm5hbWVzIjpbImlzQXNzaXN0YW50TWVzc2FnZSIsIm1zZyIsInR5cGUiLCJpc1N0cmVhbUV2ZW50IiwiaXNSZXN1bHRNZXNzYWdlIiwiaXNTeXN0ZW1NZXNzYWdlIiwiaGFzVXNhZ2UiLCJ1c2FnZSIsImlzR2VtaW5pVHJhbnNjcmlwdGlvblJlc3VsdCIsImRhdGEiLCJ0cmFuc2NyaXB0IiwiQXJyYXkiLCJpc0FycmF5Iiwic2VnbWVudHMiLCJpc0F1ZGlvUHJvYmVEYXRhIiwic3RyZWFtcyIsImZvcm1hdCIsImlzRG9jeEltcG9ydCIsIm1vZHVsZSIsImlzUGlwZWxpbmVTdWNjZXNzIiwicmVzdWx0Iiwic3RhdHVzIiwiZHJhZnQiLCJpc1BpcGVsaW5lRXJyb3IiLCJtZXNzYWdlIiwiaXNUb29sVXNlRXZlbnQiLCJuYW1lIiwiaXNUb29sUmVzdWx0RXZlbnQiLCJpc0Vycm9yV2l0aE1lc3NhZ2UiLCJlcnJvciIsImdldEVycm9yTWVzc2FnZSIsIlN0cmluZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../src/types/index.ts\n");

/***/ }),

/***/ "(rsc)/../../src/utils/cleanup.ts":
/*!**********************************!*\
  !*** ../../src/utils/cleanup.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cleanupTempDir: () => (/* binding */ cleanupTempDir),\n/* harmony export */   tempDirResource: () => (/* binding */ tempDirResource),\n/* harmony export */   withCleanup: () => (/* binding */ withCleanup)\n/* harmony export */ });\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:fs/promises */ \"node:fs/promises\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_fs_promises__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./logger.js */ \"(rsc)/../../src/utils/logger.ts\");\n\n\nconst logger = (0,_logger_js__WEBPACK_IMPORTED_MODULE_1__.createChildLogger)(\"cleanup\");\n/**\n * Clean up a temporary directory with proper error logging\n * @param dirPath - Path to the temporary directory to remove\n * @throws Never throws - logs errors instead\n */ async function cleanupTempDir(dirPath) {\n    try {\n        await node_fs_promises__WEBPACK_IMPORTED_MODULE_0__.rm(dirPath, {\n            recursive: true,\n            force: true\n        });\n        logger.debug({\n            dirPath\n        }, `✓ Cleaned up temporary directory: ${dirPath}`);\n    } catch (error) {\n        // Log the error instead of silently swallowing it\n        logger.warn({\n            dirPath,\n            error: error?.message\n        }, `⚠️  Failed to clean up temporary directory: ${dirPath}`);\n        logger.warn(`   Error: ${error?.message || String(error)}`);\n    // Don't throw - cleanup failures shouldn't break the main operation\n    }\n}\n/**\n * Execute a function with automatic resource cleanup\n * @param resource - Resource with cleanup method\n * @param fn - Function to execute\n * @returns The result of the function\n * @throws Rethrows any error from fn after ensuring cleanup\n */ async function withCleanup(resource, fn) {\n    try {\n        return await fn();\n    } finally{\n        // Always attempt cleanup, even if fn throws\n        try {\n            await resource.cleanup();\n        } catch (cleanupError) {\n            // Log cleanup errors but don't mask the original error\n            logger.warn({\n                error: cleanupError?.message\n            }, `⚠️  Resource cleanup failed: ${cleanupError?.message || String(cleanupError)}`);\n        }\n    }\n}\n/**\n * Create a resource wrapper for a temp directory\n * @param dirPath - Path to the temporary directory\n * @returns Resource object with cleanup method\n */ function tempDirResource(dirPath) {\n    return {\n        async cleanup () {\n            await cleanupTempDir(dirPath);\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vc3JjL3V0aWxzL2NsZWFudXAudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXdDO0FBQ1E7QUFFaEQsTUFBTUUsU0FBU0QsNkRBQWlCQSxDQUFDO0FBU2pDOzs7O0NBSUMsR0FDTSxlQUFlRSxlQUFlQyxPQUFlO0lBQ2xELElBQUk7UUFDRixNQUFNSixnREFBTSxDQUFDSSxTQUFTO1lBQUVFLFdBQVc7WUFBTUMsT0FBTztRQUFLO1FBQ3JETCxPQUFPTSxLQUFLLENBQUM7WUFBRUo7UUFBUSxHQUFHLENBQUMsa0NBQWtDLEVBQUVBLFFBQVEsQ0FBQztJQUMxRSxFQUFFLE9BQU9LLE9BQVk7UUFDbkIsa0RBQWtEO1FBQ2xEUCxPQUFPUSxJQUFJLENBQUM7WUFBRU47WUFBU0ssT0FBT0EsT0FBT0U7UUFBUSxHQUFHLENBQUMsNENBQTRDLEVBQUVQLFFBQVEsQ0FBQztRQUN4R0YsT0FBT1EsSUFBSSxDQUFDLENBQUMsVUFBVSxFQUFFRCxPQUFPRSxXQUFXQyxPQUFPSCxPQUFPLENBQUM7SUFDMUQsb0VBQW9FO0lBQ3RFO0FBQ0Y7QUFFQTs7Ozs7O0NBTUMsR0FDTSxlQUFlSSxZQUNwQkMsUUFBa0IsRUFDbEJDLEVBQW9CO0lBRXBCLElBQUk7UUFDRixPQUFPLE1BQU1BO0lBQ2YsU0FBVTtRQUNSLDRDQUE0QztRQUM1QyxJQUFJO1lBQ0YsTUFBTUQsU0FBU0UsT0FBTztRQUN4QixFQUFFLE9BQU9DLGNBQW1CO1lBQzFCLHVEQUF1RDtZQUN2RGYsT0FBT1EsSUFBSSxDQUFDO2dCQUFFRCxPQUFPUSxjQUFjTjtZQUFRLEdBQUcsQ0FBQyw2QkFBNkIsRUFBRU0sY0FBY04sV0FBV0MsT0FBT0ssY0FBYyxDQUFDO1FBQy9IO0lBQ0Y7QUFDRjtBQUVBOzs7O0NBSUMsR0FDTSxTQUFTQyxnQkFBZ0JkLE9BQWU7SUFDN0MsT0FBTztRQUNMLE1BQU1ZO1lBQ0osTUFBTWIsZUFBZUM7UUFDdkI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHBpcC91aS8uLi8uLi9zcmMvdXRpbHMvY2xlYW51cC50cz9jZGEzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGZzcCBmcm9tIFwibm9kZTpmcy9wcm9taXNlc1wiO1xuaW1wb3J0IHsgY3JlYXRlQ2hpbGRMb2dnZXIgfSBmcm9tIFwiLi9sb2dnZXIuanNcIjtcblxuY29uc3QgbG9nZ2VyID0gY3JlYXRlQ2hpbGRMb2dnZXIoXCJjbGVhbnVwXCIpO1xuXG4vKipcbiAqIFJlc291cmNlIGludGVyZmFjZSBmb3IgZ2VuZXJpYyBjbGVhbnVwIHdyYXBwZXJcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZXNvdXJjZSB7XG4gIGNsZWFudXAoKTogUHJvbWlzZTx2b2lkPjtcbn1cblxuLyoqXG4gKiBDbGVhbiB1cCBhIHRlbXBvcmFyeSBkaXJlY3Rvcnkgd2l0aCBwcm9wZXIgZXJyb3IgbG9nZ2luZ1xuICogQHBhcmFtIGRpclBhdGggLSBQYXRoIHRvIHRoZSB0ZW1wb3JhcnkgZGlyZWN0b3J5IHRvIHJlbW92ZVxuICogQHRocm93cyBOZXZlciB0aHJvd3MgLSBsb2dzIGVycm9ycyBpbnN0ZWFkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhbnVwVGVtcERpcihkaXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBmc3Aucm0oZGlyUGF0aCwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pO1xuICAgIGxvZ2dlci5kZWJ1Zyh7IGRpclBhdGggfSwgYOKckyBDbGVhbmVkIHVwIHRlbXBvcmFyeSBkaXJlY3Rvcnk6ICR7ZGlyUGF0aH1gKTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIC8vIExvZyB0aGUgZXJyb3IgaW5zdGVhZCBvZiBzaWxlbnRseSBzd2FsbG93aW5nIGl0XG4gICAgbG9nZ2VyLndhcm4oeyBkaXJQYXRoLCBlcnJvcjogZXJyb3I/Lm1lc3NhZ2UgfSwgYOKaoO+4jyAgRmFpbGVkIHRvIGNsZWFuIHVwIHRlbXBvcmFyeSBkaXJlY3Rvcnk6ICR7ZGlyUGF0aH1gKTtcbiAgICBsb2dnZXIud2FybihgICAgRXJyb3I6ICR7ZXJyb3I/Lm1lc3NhZ2UgfHwgU3RyaW5nKGVycm9yKX1gKTtcbiAgICAvLyBEb24ndCB0aHJvdyAtIGNsZWFudXAgZmFpbHVyZXMgc2hvdWxkbid0IGJyZWFrIHRoZSBtYWluIG9wZXJhdGlvblxuICB9XG59XG5cbi8qKlxuICogRXhlY3V0ZSBhIGZ1bmN0aW9uIHdpdGggYXV0b21hdGljIHJlc291cmNlIGNsZWFudXBcbiAqIEBwYXJhbSByZXNvdXJjZSAtIFJlc291cmNlIHdpdGggY2xlYW51cCBtZXRob2RcbiAqIEBwYXJhbSBmbiAtIEZ1bmN0aW9uIHRvIGV4ZWN1dGVcbiAqIEByZXR1cm5zIFRoZSByZXN1bHQgb2YgdGhlIGZ1bmN0aW9uXG4gKiBAdGhyb3dzIFJldGhyb3dzIGFueSBlcnJvciBmcm9tIGZuIGFmdGVyIGVuc3VyaW5nIGNsZWFudXBcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhDbGVhbnVwPFQ+KFxuICByZXNvdXJjZTogUmVzb3VyY2UsXG4gIGZuOiAoKSA9PiBQcm9taXNlPFQ+XG4pOiBQcm9taXNlPFQ+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgZm4oKTtcbiAgfSBmaW5hbGx5IHtcbiAgICAvLyBBbHdheXMgYXR0ZW1wdCBjbGVhbnVwLCBldmVuIGlmIGZuIHRocm93c1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCByZXNvdXJjZS5jbGVhbnVwKCk7XG4gICAgfSBjYXRjaCAoY2xlYW51cEVycm9yOiBhbnkpIHtcbiAgICAgIC8vIExvZyBjbGVhbnVwIGVycm9ycyBidXQgZG9uJ3QgbWFzayB0aGUgb3JpZ2luYWwgZXJyb3JcbiAgICAgIGxvZ2dlci53YXJuKHsgZXJyb3I6IGNsZWFudXBFcnJvcj8ubWVzc2FnZSB9LCBg4pqg77iPICBSZXNvdXJjZSBjbGVhbnVwIGZhaWxlZDogJHtjbGVhbnVwRXJyb3I/Lm1lc3NhZ2UgfHwgU3RyaW5nKGNsZWFudXBFcnJvcil9YCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgcmVzb3VyY2Ugd3JhcHBlciBmb3IgYSB0ZW1wIGRpcmVjdG9yeVxuICogQHBhcmFtIGRpclBhdGggLSBQYXRoIHRvIHRoZSB0ZW1wb3JhcnkgZGlyZWN0b3J5XG4gKiBAcmV0dXJucyBSZXNvdXJjZSBvYmplY3Qgd2l0aCBjbGVhbnVwIG1ldGhvZFxuICovXG5leHBvcnQgZnVuY3Rpb24gdGVtcERpclJlc291cmNlKGRpclBhdGg6IHN0cmluZyk6IFJlc291cmNlIHtcbiAgcmV0dXJuIHtcbiAgICBhc3luYyBjbGVhbnVwKCkge1xuICAgICAgYXdhaXQgY2xlYW51cFRlbXBEaXIoZGlyUGF0aCk7XG4gICAgfVxuICB9O1xufVxuIl0sIm5hbWVzIjpbImZzcCIsImNyZWF0ZUNoaWxkTG9nZ2VyIiwibG9nZ2VyIiwiY2xlYW51cFRlbXBEaXIiLCJkaXJQYXRoIiwicm0iLCJyZWN1cnNpdmUiLCJmb3JjZSIsImRlYnVnIiwiZXJyb3IiLCJ3YXJuIiwibWVzc2FnZSIsIlN0cmluZyIsIndpdGhDbGVhbnVwIiwicmVzb3VyY2UiLCJmbiIsImNsZWFudXAiLCJjbGVhbnVwRXJyb3IiLCJ0ZW1wRGlyUmVzb3VyY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../src/utils/cleanup.ts\n");

/***/ }),

/***/ "(rsc)/../../src/utils/logger.ts":
/*!*********************************!*\
  !*** ../../src/utils/logger.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createChildLogger: () => (/* binding */ createChildLogger),\n/* harmony export */   debug: () => (/* binding */ debug),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   error: () => (/* binding */ error),\n/* harmony export */   info: () => (/* binding */ info),\n/* harmony export */   logger: () => (/* binding */ logger),\n/* harmony export */   warn: () => (/* binding */ warn)\n/* harmony export */ });\n/* harmony import */ var pino__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pino */ \"(rsc)/../../node_modules/pino/pino.js\");\n/* harmony import */ var pino__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pino__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * Structured Logging Module\n *\n * This module provides a centralized logging solution using Pino.\n * Features:\n * - Structured JSON logging in production\n * - Pretty-printed logs in development\n * - Configurable log levels\n * - Automatic redaction of sensitive fields\n * - Child loggers for module-specific contexts\n */ \n/**\n * Determine if we're in development mode\n */ const isDevelopment = \"development\" !== \"production\";\n/**\n * Get log level from environment or use default\n * Priority: LOG_LEVEL env var > default 'info'\n */ const logLevel = process.env.LOG_LEVEL || \"info\";\n/**\n * Configure pino transport for pretty printing in development\n */ const transport = isDevelopment ? {\n    target: \"pino-pretty\",\n    options: {\n        colorize: true,\n        translateTime: \"HH:MM:ss\",\n        ignore: \"pid,hostname\",\n        singleLine: false\n    }\n} : undefined;\n/**\n * Main logger instance\n * Configured with:\n * - Environment-based formatting (pretty in dev, JSON in prod)\n * - Sensitive field redaction\n * - Configurable log level\n */ const logger = (0,pino__WEBPACK_IMPORTED_MODULE_0__.pino)({\n    level: logLevel,\n    transport,\n    redact: {\n        paths: [\n            \"req.headers.authorization\",\n            \"req.headers.cookie\",\n            \"req.headers['set-cookie']\",\n            \"req.headers['x-api-key']\",\n            \"req.headers['x-auth-token']\"\n        ],\n        remove: true\n    },\n    formatters: {\n        level: (label)=>{\n            return {\n                level: label\n            };\n        }\n    },\n    // Add timestamp in production\n    timestamp: !isDevelopment ? pino__WEBPACK_IMPORTED_MODULE_0__.pino.stdTimeFunctions.isoTime : undefined\n});\n/**\n * Create a child logger with a specific name/context\n * Useful for module-specific logging\n *\n * @param name - Name of the module or component\n * @returns Child logger instance with name context\n *\n * @example\n * const moduleLogger = createChildLogger('gemini-transcriber');\n * moduleLogger.info('Processing audio file');\n */ function createChildLogger(name) {\n    return logger.child({\n        module: name\n    });\n}\n/**\n * Debug level logging - for verbose debugging information\n * @param msg - Log message\n * @param context - Optional structured data context\n */ function debug(msg, context) {\n    if (context) {\n        logger.debug(context, msg);\n    } else {\n        logger.debug(msg);\n    }\n}\n/**\n * Info level logging - for general informational messages\n * @param msg - Log message\n * @param context - Optional structured data context\n */ function info(msg, context) {\n    if (context) {\n        logger.info(context, msg);\n    } else {\n        logger.info(msg);\n    }\n}\n/**\n * Warning level logging - for warning messages\n * @param msg - Log message\n * @param context - Optional structured data context\n */ function warn(msg, context) {\n    if (context) {\n        logger.warn(context, msg);\n    } else {\n        logger.warn(msg);\n    }\n}\n/**\n * Error level logging - for error messages\n * @param msg - Log message\n * @param context - Optional structured data context (including error objects)\n */ function error(msg, context) {\n    if (context) {\n        logger.error(context, msg);\n    } else {\n        logger.error(msg);\n    }\n}\n// Export default logger for convenience\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vc3JjL3V0aWxzL2xvZ2dlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7OztDQVVDLEdBRTJCO0FBRTVCOztDQUVDLEdBQ0QsTUFBTUMsZ0JBQWdCQyxrQkFBeUI7QUFFL0M7OztDQUdDLEdBQ0QsTUFBTUMsV0FBWUQsUUFBUUUsR0FBRyxDQUFDQyxTQUFTLElBQUk7QUFFM0M7O0NBRUMsR0FDRCxNQUFNQyxZQUFZTCxnQkFDZDtJQUNFTSxRQUFRO0lBQ1JDLFNBQVM7UUFDUEMsVUFBVTtRQUNWQyxlQUFlO1FBQ2ZDLFFBQVE7UUFDUkMsWUFBWTtJQUNkO0FBQ0YsSUFDQUM7QUFFSjs7Ozs7O0NBTUMsR0FDTSxNQUFNQyxTQUFTZCwwQ0FBSUEsQ0FBQztJQUN6QmUsT0FBT1o7SUFDUEc7SUFDQVUsUUFBUTtRQUNOQyxPQUFPO1lBQ0w7WUFDQTtZQUNBO1lBQ0E7WUFDQTtTQUNEO1FBQ0RDLFFBQVE7SUFDVjtJQUNBQyxZQUFZO1FBQ1ZKLE9BQU8sQ0FBQ0s7WUFDTixPQUFPO2dCQUFFTCxPQUFPSztZQUFNO1FBQ3hCO0lBQ0Y7SUFDQSw4QkFBOEI7SUFDOUJDLFdBQVcsQ0FBQ3BCLGdCQUFnQkQsc0NBQUlBLENBQUNzQixnQkFBZ0IsQ0FBQ0MsT0FBTyxHQUFHVjtBQUM5RCxHQUFHO0FBRUg7Ozs7Ozs7Ozs7Q0FVQyxHQUNNLFNBQVNXLGtCQUFrQkMsSUFBWTtJQUM1QyxPQUFPWCxPQUFPWSxLQUFLLENBQUM7UUFBRUMsUUFBUUY7SUFBSztBQUNyQztBQVNBOzs7O0NBSUMsR0FDTSxTQUFTRyxNQUFNQyxHQUFXLEVBQUVDLE9BQW9CO0lBQ3JELElBQUlBLFNBQVM7UUFDWGhCLE9BQU9jLEtBQUssQ0FBQ0UsU0FBU0Q7SUFDeEIsT0FBTztRQUNMZixPQUFPYyxLQUFLLENBQUNDO0lBQ2Y7QUFDRjtBQUVBOzs7O0NBSUMsR0FDTSxTQUFTRSxLQUFLRixHQUFXLEVBQUVDLE9BQW9CO0lBQ3BELElBQUlBLFNBQVM7UUFDWGhCLE9BQU9pQixJQUFJLENBQUNELFNBQVNEO0lBQ3ZCLE9BQU87UUFDTGYsT0FBT2lCLElBQUksQ0FBQ0Y7SUFDZDtBQUNGO0FBRUE7Ozs7Q0FJQyxHQUNNLFNBQVNHLEtBQUtILEdBQVcsRUFBRUMsT0FBb0I7SUFDcEQsSUFBSUEsU0FBUztRQUNYaEIsT0FBT2tCLElBQUksQ0FBQ0YsU0FBU0Q7SUFDdkIsT0FBTztRQUNMZixPQUFPa0IsSUFBSSxDQUFDSDtJQUNkO0FBQ0Y7QUFFQTs7OztDQUlDLEdBQ00sU0FBU0ksTUFBTUosR0FBVyxFQUFFQyxPQUFvQjtJQUNyRCxJQUFJQSxTQUFTO1FBQ1hoQixPQUFPbUIsS0FBSyxDQUFDSCxTQUFTRDtJQUN4QixPQUFPO1FBQ0xmLE9BQU9tQixLQUFLLENBQUNKO0lBQ2Y7QUFDRjtBQUVBLHdDQUF3QztBQUN4QyxpRUFBZWYsTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL0BwaXAvdWkvLi4vLi4vc3JjL3V0aWxzL2xvZ2dlci50cz9hM2NmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU3RydWN0dXJlZCBMb2dnaW5nIE1vZHVsZVxuICpcbiAqIFRoaXMgbW9kdWxlIHByb3ZpZGVzIGEgY2VudHJhbGl6ZWQgbG9nZ2luZyBzb2x1dGlvbiB1c2luZyBQaW5vLlxuICogRmVhdHVyZXM6XG4gKiAtIFN0cnVjdHVyZWQgSlNPTiBsb2dnaW5nIGluIHByb2R1Y3Rpb25cbiAqIC0gUHJldHR5LXByaW50ZWQgbG9ncyBpbiBkZXZlbG9wbWVudFxuICogLSBDb25maWd1cmFibGUgbG9nIGxldmVsc1xuICogLSBBdXRvbWF0aWMgcmVkYWN0aW9uIG9mIHNlbnNpdGl2ZSBmaWVsZHNcbiAqIC0gQ2hpbGQgbG9nZ2VycyBmb3IgbW9kdWxlLXNwZWNpZmljIGNvbnRleHRzXG4gKi9cblxuaW1wb3J0IHsgcGlubyB9IGZyb20gXCJwaW5vXCI7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHdlJ3JlIGluIGRldmVsb3BtZW50IG1vZGVcbiAqL1xuY29uc3QgaXNEZXZlbG9wbWVudCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIjtcblxuLyoqXG4gKiBHZXQgbG9nIGxldmVsIGZyb20gZW52aXJvbm1lbnQgb3IgdXNlIGRlZmF1bHRcbiAqIFByaW9yaXR5OiBMT0dfTEVWRUwgZW52IHZhciA+IGRlZmF1bHQgJ2luZm8nXG4gKi9cbmNvbnN0IGxvZ0xldmVsID0gKHByb2Nlc3MuZW52LkxPR19MRVZFTCB8fCBcImluZm9cIikgYXMgcGluby5MZXZlbFdpdGhTaWxlbnQ7XG5cbi8qKlxuICogQ29uZmlndXJlIHBpbm8gdHJhbnNwb3J0IGZvciBwcmV0dHkgcHJpbnRpbmcgaW4gZGV2ZWxvcG1lbnRcbiAqL1xuY29uc3QgdHJhbnNwb3J0ID0gaXNEZXZlbG9wbWVudFxuICA/IHtcbiAgICAgIHRhcmdldDogXCJwaW5vLXByZXR0eVwiLFxuICAgICAgb3B0aW9uczoge1xuICAgICAgICBjb2xvcml6ZTogdHJ1ZSxcbiAgICAgICAgdHJhbnNsYXRlVGltZTogXCJISDpNTTpzc1wiLFxuICAgICAgICBpZ25vcmU6IFwicGlkLGhvc3RuYW1lXCIsXG4gICAgICAgIHNpbmdsZUxpbmU6IGZhbHNlXG4gICAgICB9XG4gICAgfVxuICA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBNYWluIGxvZ2dlciBpbnN0YW5jZVxuICogQ29uZmlndXJlZCB3aXRoOlxuICogLSBFbnZpcm9ubWVudC1iYXNlZCBmb3JtYXR0aW5nIChwcmV0dHkgaW4gZGV2LCBKU09OIGluIHByb2QpXG4gKiAtIFNlbnNpdGl2ZSBmaWVsZCByZWRhY3Rpb25cbiAqIC0gQ29uZmlndXJhYmxlIGxvZyBsZXZlbFxuICovXG5leHBvcnQgY29uc3QgbG9nZ2VyID0gcGlubyh7XG4gIGxldmVsOiBsb2dMZXZlbCxcbiAgdHJhbnNwb3J0LFxuICByZWRhY3Q6IHtcbiAgICBwYXRoczogW1xuICAgICAgXCJyZXEuaGVhZGVycy5hdXRob3JpemF0aW9uXCIsXG4gICAgICBcInJlcS5oZWFkZXJzLmNvb2tpZVwiLFxuICAgICAgXCJyZXEuaGVhZGVyc1snc2V0LWNvb2tpZSddXCIsXG4gICAgICBcInJlcS5oZWFkZXJzWyd4LWFwaS1rZXknXVwiLFxuICAgICAgXCJyZXEuaGVhZGVyc1sneC1hdXRoLXRva2VuJ11cIlxuICAgIF0sXG4gICAgcmVtb3ZlOiB0cnVlXG4gIH0sXG4gIGZvcm1hdHRlcnM6IHtcbiAgICBsZXZlbDogKGxhYmVsOiBzdHJpbmcpID0+IHtcbiAgICAgIHJldHVybiB7IGxldmVsOiBsYWJlbCB9O1xuICAgIH1cbiAgfSxcbiAgLy8gQWRkIHRpbWVzdGFtcCBpbiBwcm9kdWN0aW9uXG4gIHRpbWVzdGFtcDogIWlzRGV2ZWxvcG1lbnQgPyBwaW5vLnN0ZFRpbWVGdW5jdGlvbnMuaXNvVGltZSA6IHVuZGVmaW5lZFxufSk7XG5cbi8qKlxuICogQ3JlYXRlIGEgY2hpbGQgbG9nZ2VyIHdpdGggYSBzcGVjaWZpYyBuYW1lL2NvbnRleHRcbiAqIFVzZWZ1bCBmb3IgbW9kdWxlLXNwZWNpZmljIGxvZ2dpbmdcbiAqXG4gKiBAcGFyYW0gbmFtZSAtIE5hbWUgb2YgdGhlIG1vZHVsZSBvciBjb21wb25lbnRcbiAqIEByZXR1cm5zIENoaWxkIGxvZ2dlciBpbnN0YW5jZSB3aXRoIG5hbWUgY29udGV4dFxuICpcbiAqIEBleGFtcGxlXG4gKiBjb25zdCBtb2R1bGVMb2dnZXIgPSBjcmVhdGVDaGlsZExvZ2dlcignZ2VtaW5pLXRyYW5zY3JpYmVyJyk7XG4gKiBtb2R1bGVMb2dnZXIuaW5mbygnUHJvY2Vzc2luZyBhdWRpbyBmaWxlJyk7XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDaGlsZExvZ2dlcihuYW1lOiBzdHJpbmcpOiBwaW5vLkxvZ2dlciB7XG4gIHJldHVybiBsb2dnZXIuY2hpbGQoeyBtb2R1bGU6IG5hbWUgfSk7XG59XG5cbi8qKlxuICogVHlwZS1zYWZlIGxvZ2dpbmcgaGVscGVyIHdpdGggc3RydWN0dXJlZCBkYXRhIHN1cHBvcnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMb2dDb250ZXh0IHtcbiAgW2tleTogc3RyaW5nXTogdW5rbm93bjtcbn1cblxuLyoqXG4gKiBEZWJ1ZyBsZXZlbCBsb2dnaW5nIC0gZm9yIHZlcmJvc2UgZGVidWdnaW5nIGluZm9ybWF0aW9uXG4gKiBAcGFyYW0gbXNnIC0gTG9nIG1lc3NhZ2VcbiAqIEBwYXJhbSBjb250ZXh0IC0gT3B0aW9uYWwgc3RydWN0dXJlZCBkYXRhIGNvbnRleHRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlYnVnKG1zZzogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCk6IHZvaWQge1xuICBpZiAoY29udGV4dCkge1xuICAgIGxvZ2dlci5kZWJ1Zyhjb250ZXh0LCBtc2cpO1xuICB9IGVsc2Uge1xuICAgIGxvZ2dlci5kZWJ1Zyhtc2cpO1xuICB9XG59XG5cbi8qKlxuICogSW5mbyBsZXZlbCBsb2dnaW5nIC0gZm9yIGdlbmVyYWwgaW5mb3JtYXRpb25hbCBtZXNzYWdlc1xuICogQHBhcmFtIG1zZyAtIExvZyBtZXNzYWdlXG4gKiBAcGFyYW0gY29udGV4dCAtIE9wdGlvbmFsIHN0cnVjdHVyZWQgZGF0YSBjb250ZXh0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZvKG1zZzogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCk6IHZvaWQge1xuICBpZiAoY29udGV4dCkge1xuICAgIGxvZ2dlci5pbmZvKGNvbnRleHQsIG1zZyk7XG4gIH0gZWxzZSB7XG4gICAgbG9nZ2VyLmluZm8obXNnKTtcbiAgfVxufVxuXG4vKipcbiAqIFdhcm5pbmcgbGV2ZWwgbG9nZ2luZyAtIGZvciB3YXJuaW5nIG1lc3NhZ2VzXG4gKiBAcGFyYW0gbXNnIC0gTG9nIG1lc3NhZ2VcbiAqIEBwYXJhbSBjb250ZXh0IC0gT3B0aW9uYWwgc3RydWN0dXJlZCBkYXRhIGNvbnRleHRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdhcm4obXNnOiBzdHJpbmcsIGNvbnRleHQ/OiBMb2dDb250ZXh0KTogdm9pZCB7XG4gIGlmIChjb250ZXh0KSB7XG4gICAgbG9nZ2VyLndhcm4oY29udGV4dCwgbXNnKTtcbiAgfSBlbHNlIHtcbiAgICBsb2dnZXIud2Fybihtc2cpO1xuICB9XG59XG5cbi8qKlxuICogRXJyb3IgbGV2ZWwgbG9nZ2luZyAtIGZvciBlcnJvciBtZXNzYWdlc1xuICogQHBhcmFtIG1zZyAtIExvZyBtZXNzYWdlXG4gKiBAcGFyYW0gY29udGV4dCAtIE9wdGlvbmFsIHN0cnVjdHVyZWQgZGF0YSBjb250ZXh0IChpbmNsdWRpbmcgZXJyb3Igb2JqZWN0cylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVycm9yKG1zZzogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCk6IHZvaWQge1xuICBpZiAoY29udGV4dCkge1xuICAgIGxvZ2dlci5lcnJvcihjb250ZXh0LCBtc2cpO1xuICB9IGVsc2Uge1xuICAgIGxvZ2dlci5lcnJvcihtc2cpO1xuICB9XG59XG5cbi8vIEV4cG9ydCBkZWZhdWx0IGxvZ2dlciBmb3IgY29udmVuaWVuY2VcbmV4cG9ydCBkZWZhdWx0IGxvZ2dlcjtcbiJdLCJuYW1lcyI6WyJwaW5vIiwiaXNEZXZlbG9wbWVudCIsInByb2Nlc3MiLCJsb2dMZXZlbCIsImVudiIsIkxPR19MRVZFTCIsInRyYW5zcG9ydCIsInRhcmdldCIsIm9wdGlvbnMiLCJjb2xvcml6ZSIsInRyYW5zbGF0ZVRpbWUiLCJpZ25vcmUiLCJzaW5nbGVMaW5lIiwidW5kZWZpbmVkIiwibG9nZ2VyIiwibGV2ZWwiLCJyZWRhY3QiLCJwYXRocyIsInJlbW92ZSIsImZvcm1hdHRlcnMiLCJsYWJlbCIsInRpbWVzdGFtcCIsInN0ZFRpbWVGdW5jdGlvbnMiLCJpc29UaW1lIiwiY3JlYXRlQ2hpbGRMb2dnZXIiLCJuYW1lIiwiY2hpbGQiLCJtb2R1bGUiLCJkZWJ1ZyIsIm1zZyIsImNvbnRleHQiLCJpbmZvIiwid2FybiIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../src/utils/logger.ts\n");

/***/ }),

/***/ "(rsc)/../../src/utils/mcp-helpers.ts":
/*!**************************************!*\
  !*** ../../src/utils/mcp-helpers.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnvNumber: () => (/* binding */ getEnvNumber),\n/* harmony export */   hasEnvVar: () => (/* binding */ hasEnvVar),\n/* harmony export */   mcpSuccess: () => (/* binding */ mcpSuccess)\n/* harmony export */ });\n/**\n * Helper functions for standardized MCP tool responses.\n * These utilities eliminate duplicate JSON response patterns across MCP tools.\n *\n * Note: For error responses, use mcpError from safe-stringify.ts which includes\n * sanitization and redaction of sensitive data.\n */ /**\n * Creates a standardized successful MCP tool response.\n *\n * @param data - The success data to return (will be merged with { ok: true })\n * @returns Formatted MCP tool result with success payload\n *\n * @example\n * return mcpSuccess({ transcript: \"...\", segments: [...] });\n * // Returns: { content: [{ type: \"text\", text: '{\"ok\":true,\"transcript\":\"...\",\"segments\":[...]}' }] }\n *\n * @example\n * return mcpSuccess({ draft: \"Performance Improvement Plan...\" });\n * // Returns: { content: [{ type: \"text\", text: '{\"ok\":true,\"draft\":\"...\"}' }] }\n *\n * @example\n * return mcpSuccess({ outputPath: \"/path/to/file.docx\" });\n * // Returns: { content: [{ type: \"text\", text: '{\"ok\":true,\"outputPath\":\"/path/to/file.docx\"}' }] }\n */ function mcpSuccess(data) {\n    const response = {\n        ok: true,\n        ...data\n    };\n    return {\n        content: [\n            {\n                type: \"text\",\n                text: JSON.stringify(response)\n            }\n        ]\n    };\n}\n/**\n * Helper to check if an environment variable exists.\n *\n * @param key - Environment variable name\n * @returns True if the environment variable is set and non-empty\n *\n * @example\n * if (!hasEnvVar(\"GEMINI_API_KEY\")) {\n *   return mcpError(\"Missing GEMINI_API_KEY\");\n * }\n */ function hasEnvVar(key) {\n    const value = process.env[key];\n    return typeof value === \"string\" && value.length > 0;\n}\n/**\n * Helper to get an environment variable as a number with a default fallback.\n *\n * @param key - Environment variable name\n * @param defaultValue - Default value if env var is not set or invalid\n * @returns Parsed number value or default\n *\n * @example\n * const chunkSeconds = getEnvNumber(\"GEMINI_CHUNK_SECONDS\", DEFAULT_AUDIO_CHUNK_SECONDS);\n */ function getEnvNumber(key, defaultValue) {\n    const value = process.env[key];\n    if (!value) return defaultValue;\n    const parsed = Number(value);\n    return Number.isFinite(parsed) ? parsed : defaultValue;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vc3JjL3V0aWxzL21jcC1oZWxwZXJzLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7Ozs7Q0FNQyxHQVlEOzs7Ozs7Ozs7Ozs7Ozs7OztDQWlCQyxHQUNNLFNBQVNBLFdBQVdDLElBQTZCO0lBQ3RELE1BQU1DLFdBQStCO1FBQ25DQyxJQUFJO1FBQ0osR0FBR0YsSUFBSTtJQUNUO0lBRUEsT0FBTztRQUNMRyxTQUFTO1lBQ1A7Z0JBQ0VDLE1BQU07Z0JBQ05DLE1BQU1DLEtBQUtDLFNBQVMsQ0FBQ047WUFDdkI7U0FDRDtJQUNIO0FBQ0Y7QUFFQTs7Ozs7Ozs7OztDQVVDLEdBQ00sU0FBU08sVUFBVUMsR0FBVztJQUNuQyxNQUFNQyxRQUFRQyxRQUFRQyxHQUFHLENBQUNILElBQUk7SUFDOUIsT0FBTyxPQUFPQyxVQUFVLFlBQVlBLE1BQU1HLE1BQU0sR0FBRztBQUNyRDtBQUVBOzs7Ozs7Ozs7Q0FTQyxHQUNNLFNBQVNDLGFBQWFMLEdBQVcsRUFBRU0sWUFBb0I7SUFDNUQsTUFBTUwsUUFBUUMsUUFBUUMsR0FBRyxDQUFDSCxJQUFJO0lBQzlCLElBQUksQ0FBQ0MsT0FBTyxPQUFPSztJQUVuQixNQUFNQyxTQUFTQyxPQUFPUDtJQUN0QixPQUFPTyxPQUFPQyxRQUFRLENBQUNGLFVBQVVBLFNBQVNEO0FBQzVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHBpcC91aS8uLi8uLi9zcmMvdXRpbHMvbWNwLWhlbHBlcnMudHM/MjRjYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEhlbHBlciBmdW5jdGlvbnMgZm9yIHN0YW5kYXJkaXplZCBNQ1AgdG9vbCByZXNwb25zZXMuXG4gKiBUaGVzZSB1dGlsaXRpZXMgZWxpbWluYXRlIGR1cGxpY2F0ZSBKU09OIHJlc3BvbnNlIHBhdHRlcm5zIGFjcm9zcyBNQ1AgdG9vbHMuXG4gKlxuICogTm90ZTogRm9yIGVycm9yIHJlc3BvbnNlcywgdXNlIG1jcEVycm9yIGZyb20gc2FmZS1zdHJpbmdpZnkudHMgd2hpY2ggaW5jbHVkZXNcbiAqIHNhbml0aXphdGlvbiBhbmQgcmVkYWN0aW9uIG9mIHNlbnNpdGl2ZSBkYXRhLlxuICovXG5cbmltcG9ydCB0eXBlIHsgTUNQVG9vbFJlc3VsdCB9IGZyb20gXCIuLi90eXBlcy9pbmRleC5qc1wiO1xuXG4vKipcbiAqIFN0cnVjdHVyZSBmb3Igc3VjY2Vzc2Z1bCBNQ1AgcmVzcG9uc2VzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1DUFN1Y2Nlc3NSZXNwb25zZSB7XG4gIG9rOiB0cnVlO1xuICBba2V5OiBzdHJpbmddOiB1bmtub3duO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBzdGFuZGFyZGl6ZWQgc3VjY2Vzc2Z1bCBNQ1AgdG9vbCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0gZGF0YSAtIFRoZSBzdWNjZXNzIGRhdGEgdG8gcmV0dXJuICh3aWxsIGJlIG1lcmdlZCB3aXRoIHsgb2s6IHRydWUgfSlcbiAqIEByZXR1cm5zIEZvcm1hdHRlZCBNQ1AgdG9vbCByZXN1bHQgd2l0aCBzdWNjZXNzIHBheWxvYWRcbiAqXG4gKiBAZXhhbXBsZVxuICogcmV0dXJuIG1jcFN1Y2Nlc3MoeyB0cmFuc2NyaXB0OiBcIi4uLlwiLCBzZWdtZW50czogWy4uLl0gfSk7XG4gKiAvLyBSZXR1cm5zOiB7IGNvbnRlbnQ6IFt7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiAne1wib2tcIjp0cnVlLFwidHJhbnNjcmlwdFwiOlwiLi4uXCIsXCJzZWdtZW50c1wiOlsuLi5dfScgfV0gfVxuICpcbiAqIEBleGFtcGxlXG4gKiByZXR1cm4gbWNwU3VjY2Vzcyh7IGRyYWZ0OiBcIlBlcmZvcm1hbmNlIEltcHJvdmVtZW50IFBsYW4uLi5cIiB9KTtcbiAqIC8vIFJldHVybnM6IHsgY29udGVudDogW3sgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6ICd7XCJva1wiOnRydWUsXCJkcmFmdFwiOlwiLi4uXCJ9JyB9XSB9XG4gKlxuICogQGV4YW1wbGVcbiAqIHJldHVybiBtY3BTdWNjZXNzKHsgb3V0cHV0UGF0aDogXCIvcGF0aC90by9maWxlLmRvY3hcIiB9KTtcbiAqIC8vIFJldHVybnM6IHsgY29udGVudDogW3sgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6ICd7XCJva1wiOnRydWUsXCJvdXRwdXRQYXRoXCI6XCIvcGF0aC90by9maWxlLmRvY3hcIn0nIH1dIH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1jcFN1Y2Nlc3MoZGF0YTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pOiBNQ1BUb29sUmVzdWx0IHtcbiAgY29uc3QgcmVzcG9uc2U6IE1DUFN1Y2Nlc3NSZXNwb25zZSA9IHtcbiAgICBvazogdHJ1ZSxcbiAgICAuLi5kYXRhXG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBjb250ZW50OiBbXG4gICAgICB7XG4gICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICB0ZXh0OiBKU09OLnN0cmluZ2lmeShyZXNwb25zZSlcbiAgICAgIH1cbiAgICBdXG4gIH07XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGNoZWNrIGlmIGFuIGVudmlyb25tZW50IHZhcmlhYmxlIGV4aXN0cy5cbiAqXG4gKiBAcGFyYW0ga2V5IC0gRW52aXJvbm1lbnQgdmFyaWFibGUgbmFtZVxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgc2V0IGFuZCBub24tZW1wdHlcbiAqXG4gKiBAZXhhbXBsZVxuICogaWYgKCFoYXNFbnZWYXIoXCJHRU1JTklfQVBJX0tFWVwiKSkge1xuICogICByZXR1cm4gbWNwRXJyb3IoXCJNaXNzaW5nIEdFTUlOSV9BUElfS0VZXCIpO1xuICogfVxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzRW52VmFyKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IHZhbHVlID0gcHJvY2Vzcy5lbnZba2V5XTtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiB2YWx1ZS5sZW5ndGggPiAwO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYW4gZW52aXJvbm1lbnQgdmFyaWFibGUgYXMgYSBudW1iZXIgd2l0aCBhIGRlZmF1bHQgZmFsbGJhY2suXG4gKlxuICogQHBhcmFtIGtleSAtIEVudmlyb25tZW50IHZhcmlhYmxlIG5hbWVcbiAqIEBwYXJhbSBkZWZhdWx0VmFsdWUgLSBEZWZhdWx0IHZhbHVlIGlmIGVudiB2YXIgaXMgbm90IHNldCBvciBpbnZhbGlkXG4gKiBAcmV0dXJucyBQYXJzZWQgbnVtYmVyIHZhbHVlIG9yIGRlZmF1bHRcbiAqXG4gKiBAZXhhbXBsZVxuICogY29uc3QgY2h1bmtTZWNvbmRzID0gZ2V0RW52TnVtYmVyKFwiR0VNSU5JX0NIVU5LX1NFQ09ORFNcIiwgREVGQVVMVF9BVURJT19DSFVOS19TRUNPTkRTKTtcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVudk51bWJlcihrZXk6IHN0cmluZywgZGVmYXVsdFZhbHVlOiBudW1iZXIpOiBudW1iZXIge1xuICBjb25zdCB2YWx1ZSA9IHByb2Nlc3MuZW52W2tleV07XG4gIGlmICghdmFsdWUpIHJldHVybiBkZWZhdWx0VmFsdWU7XG5cbiAgY29uc3QgcGFyc2VkID0gTnVtYmVyKHZhbHVlKTtcbiAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZShwYXJzZWQpID8gcGFyc2VkIDogZGVmYXVsdFZhbHVlO1xufVxuIl0sIm5hbWVzIjpbIm1jcFN1Y2Nlc3MiLCJkYXRhIiwicmVzcG9uc2UiLCJvayIsImNvbnRlbnQiLCJ0eXBlIiwidGV4dCIsIkpTT04iLCJzdHJpbmdpZnkiLCJoYXNFbnZWYXIiLCJrZXkiLCJ2YWx1ZSIsInByb2Nlc3MiLCJlbnYiLCJsZW5ndGgiLCJnZXRFbnZOdW1iZXIiLCJkZWZhdWx0VmFsdWUiLCJwYXJzZWQiLCJOdW1iZXIiLCJpc0Zpbml0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../src/utils/mcp-helpers.ts\n");

/***/ }),

/***/ "(rsc)/../../src/utils/safe-stringify.ts":
/*!*****************************************!*\
  !*** ../../src/utils/safe-stringify.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mcpError: () => (/* binding */ mcpError),\n/* harmony export */   safeStringify: () => (/* binding */ safeStringify)\n/* harmony export */ });\n/**\n * Safe JSON stringification utilities that handle circular references and redact sensitive data.\n */ const SENSITIVE_KEYS = [\n    \"password\",\n    \"apiKey\",\n    \"api_key\",\n    \"token\",\n    \"secret\",\n    \"authorization\",\n    \"auth\",\n    \"bearer\",\n    \"credential\",\n    \"apikey\",\n    \"accessToken\",\n    \"access_token\",\n    \"refreshToken\",\n    \"refresh_token\",\n    \"privateKey\",\n    \"private_key\"\n];\nconst REDACTED = \"[REDACTED]\";\nconst CIRCULAR = \"[Circular Reference]\";\n/**\n * Safely stringifies an object, handling circular references and redacting sensitive fields.\n * @param obj - The object to stringify\n * @param maxLength - Maximum length of the output string (default: 10000)\n * @returns A safe JSON string\n */ function safeStringify(obj, maxLength = 10000) {\n    try {\n        const seen = new WeakSet();\n        const json = JSON.stringify(obj, (key, value)=>{\n            // Redact sensitive fields\n            if (SENSITIVE_KEYS.includes(key.toLowerCase())) {\n                return REDACTED;\n            }\n            // Handle null/undefined\n            if (value === null || value === undefined) {\n                return value;\n            }\n            // Handle primitives\n            if (typeof value !== \"object\") {\n                return value;\n            }\n            // Detect circular references\n            if (seen.has(value)) {\n                return CIRCULAR;\n            }\n            seen.add(value);\n            // Handle errors specially\n            if (value instanceof Error) {\n                return {\n                    name: value.name,\n                    message: value.message,\n                    stack: value.stack?.split(\"\\n\").slice(0, 3).join(\"\\n\")\n                };\n            }\n            return value;\n        }, 2 // Pretty print with 2 spaces\n        );\n        // Truncate if too long\n        if (json.length > maxLength) {\n            return json.slice(0, maxLength) + `\\n... [truncated ${json.length - maxLength} characters]`;\n        }\n        return json;\n    } catch (error) {\n        // Fallback for non-serializable objects\n        return `[Failed to stringify: ${error instanceof Error ? error.message : String(error)}]`;\n    }\n}\n/**\n * Creates a safe MCP error response with sanitized error details.\n * @param message - The error message\n * @param error - The error object (optional)\n * @returns An MCP-compatible error response\n */ function mcpError(message, error) {\n    const payload = {\n        ok: false,\n        error: message\n    };\n    if (error) {\n        // Sanitize error details\n        if (error instanceof Error) {\n            payload.details = {\n                name: error.name,\n                message: error.message,\n                code: error.code\n            };\n        } else if (typeof error === \"object\" && error !== null) {\n            payload.details = sanitizeObject(error);\n        } else {\n            payload.details = String(error);\n        }\n    }\n    return {\n        content: [\n            {\n                type: \"text\",\n                text: safeStringify(payload)\n            }\n        ],\n        isError: true\n    };\n}\n/**\n * Sanitizes an object by removing sensitive fields and truncating large values.\n * @param obj - The object to sanitize\n * @param maxDepth - Maximum recursion depth\n * @returns A sanitized object\n */ function sanitizeObject(obj, maxDepth = 2) {\n    if (maxDepth <= 0) {\n        return \"[Max depth]\";\n    }\n    if (obj === null || obj === undefined) {\n        return obj;\n    }\n    if (typeof obj !== \"object\") {\n        return obj;\n    }\n    if (Array.isArray(obj)) {\n        return obj.slice(0, 10).map((item)=>sanitizeObject(item, maxDepth - 1));\n    }\n    const sanitized = {};\n    let count = 0;\n    for(const key in obj){\n        if (count >= 20) {\n            sanitized[\"...\"] = \"[More fields omitted]\";\n            break;\n        }\n        if (SENSITIVE_KEYS.includes(key.toLowerCase())) {\n            sanitized[key] = REDACTED;\n        } else {\n            sanitized[key] = sanitizeObject(obj[key], maxDepth - 1);\n        }\n        count++;\n    }\n    return sanitized;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SW1DLE1BQU1DLE9BQU8sQ0FBQ3BDLE1BQU07UUFDdEIsT0FBT0EsSUFBSW1CLEtBQUssQ0FBQyxHQUFHLElBQUlrQixHQUFHLENBQUNDLENBQUFBLE9BQVFULGVBQWVTLE1BQU1KLFdBQVc7SUFDdEU7SUFFQSxNQUFNSyxZQUFxQyxDQUFDO0lBQzVDLElBQUlDLFFBQVE7SUFFWixJQUFLLE1BQU1qQyxPQUFPUCxJQUFLO1FBQ3JCLElBQUl3QyxTQUFTLElBQUk7WUFDZkQsU0FBUyxDQUFDLE1BQU0sR0FBRztZQUNuQjtRQUNGO1FBRUEsSUFBSTNDLGVBQWVhLFFBQVEsQ0FBQ0YsSUFBSUcsV0FBVyxLQUFLO1lBQzlDNkIsU0FBUyxDQUFDaEMsSUFBSSxHQUFHVjtRQUNuQixPQUFPO1lBQ0wwQyxTQUFTLENBQUNoQyxJQUFJLEdBQUdzQixlQUFlLEdBQVksQ0FBQ3RCLElBQUksRUFBRTJCLFdBQVc7UUFDaEU7UUFFQU07SUFDRjtJQUVBLE9BQU9EO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AcGlwL3VpLy4uLy4uL3NyYy91dGlscy9zYWZlLXN0cmluZ2lmeS50cz81ODUzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2FmZSBKU09OIHN0cmluZ2lmaWNhdGlvbiB1dGlsaXRpZXMgdGhhdCBoYW5kbGUgY2lyY3VsYXIgcmVmZXJlbmNlcyBhbmQgcmVkYWN0IHNlbnNpdGl2ZSBkYXRhLlxuICovXG5cbmNvbnN0IFNFTlNJVElWRV9LRVlTID0gW1xuICBcInBhc3N3b3JkXCIsXG4gIFwiYXBpS2V5XCIsXG4gIFwiYXBpX2tleVwiLFxuICBcInRva2VuXCIsXG4gIFwic2VjcmV0XCIsXG4gIFwiYXV0aG9yaXphdGlvblwiLFxuICBcImF1dGhcIixcbiAgXCJiZWFyZXJcIixcbiAgXCJjcmVkZW50aWFsXCIsXG4gIFwiYXBpa2V5XCIsXG4gIFwiYWNjZXNzVG9rZW5cIixcbiAgXCJhY2Nlc3NfdG9rZW5cIixcbiAgXCJyZWZyZXNoVG9rZW5cIixcbiAgXCJyZWZyZXNoX3Rva2VuXCIsXG4gIFwicHJpdmF0ZUtleVwiLFxuICBcInByaXZhdGVfa2V5XCJcbl07XG5cbmNvbnN0IFJFREFDVEVEID0gXCJbUkVEQUNURURdXCI7XG5jb25zdCBDSVJDVUxBUiA9IFwiW0NpcmN1bGFyIFJlZmVyZW5jZV1cIjtcblxuLyoqXG4gKiBTYWZlbHkgc3RyaW5naWZpZXMgYW4gb2JqZWN0LCBoYW5kbGluZyBjaXJjdWxhciByZWZlcmVuY2VzIGFuZCByZWRhY3Rpbmcgc2Vuc2l0aXZlIGZpZWxkcy5cbiAqIEBwYXJhbSBvYmogLSBUaGUgb2JqZWN0IHRvIHN0cmluZ2lmeVxuICogQHBhcmFtIG1heExlbmd0aCAtIE1heGltdW0gbGVuZ3RoIG9mIHRoZSBvdXRwdXQgc3RyaW5nIChkZWZhdWx0OiAxMDAwMClcbiAqIEByZXR1cm5zIEEgc2FmZSBKU09OIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2FmZVN0cmluZ2lmeShvYmo6IHVua25vd24sIG1heExlbmd0aDogbnVtYmVyID0gMTAwMDApOiBzdHJpbmcge1xuICB0cnkge1xuICAgIGNvbnN0IHNlZW4gPSBuZXcgV2Vha1NldCgpO1xuXG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KFxuICAgICAgb2JqLFxuICAgICAgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgICAgLy8gUmVkYWN0IHNlbnNpdGl2ZSBmaWVsZHNcbiAgICAgICAgaWYgKFNFTlNJVElWRV9LRVlTLmluY2x1ZGVzKGtleS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIHJldHVybiBSRURBQ1RFRDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEhhbmRsZSBudWxsL3VuZGVmaW5lZFxuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEhhbmRsZSBwcmltaXRpdmVzXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZXRlY3QgY2lyY3VsYXIgcmVmZXJlbmNlc1xuICAgICAgICBpZiAoc2Vlbi5oYXModmFsdWUpKSB7XG4gICAgICAgICAgcmV0dXJuIENJUkNVTEFSO1xuICAgICAgICB9XG5cbiAgICAgICAgc2Vlbi5hZGQodmFsdWUpO1xuXG4gICAgICAgIC8vIEhhbmRsZSBlcnJvcnMgc3BlY2lhbGx5XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHZhbHVlLm5hbWUsXG4gICAgICAgICAgICBtZXNzYWdlOiB2YWx1ZS5tZXNzYWdlLFxuICAgICAgICAgICAgc3RhY2s6IHZhbHVlLnN0YWNrPy5zcGxpdChcIlxcblwiKS5zbGljZSgwLCAzKS5qb2luKFwiXFxuXCIpXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH0sXG4gICAgICAyIC8vIFByZXR0eSBwcmludCB3aXRoIDIgc3BhY2VzXG4gICAgKTtcblxuICAgIC8vIFRydW5jYXRlIGlmIHRvbyBsb25nXG4gICAgaWYgKGpzb24ubGVuZ3RoID4gbWF4TGVuZ3RoKSB7XG4gICAgICByZXR1cm4ganNvbi5zbGljZSgwLCBtYXhMZW5ndGgpICsgYFxcbi4uLiBbdHJ1bmNhdGVkICR7anNvbi5sZW5ndGggLSBtYXhMZW5ndGh9IGNoYXJhY3RlcnNdYDtcbiAgICB9XG5cbiAgICByZXR1cm4ganNvbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyBGYWxsYmFjayBmb3Igbm9uLXNlcmlhbGl6YWJsZSBvYmplY3RzXG4gICAgcmV0dXJuIGBbRmFpbGVkIHRvIHN0cmluZ2lmeTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9XWA7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgc2FmZSBNQ1AgZXJyb3IgcmVzcG9uc2Ugd2l0aCBzYW5pdGl6ZWQgZXJyb3IgZGV0YWlscy5cbiAqIEBwYXJhbSBtZXNzYWdlIC0gVGhlIGVycm9yIG1lc3NhZ2VcbiAqIEBwYXJhbSBlcnJvciAtIFRoZSBlcnJvciBvYmplY3QgKG9wdGlvbmFsKVxuICogQHJldHVybnMgQW4gTUNQLWNvbXBhdGlibGUgZXJyb3IgcmVzcG9uc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1jcEVycm9yKG1lc3NhZ2U6IHN0cmluZywgZXJyb3I/OiB1bmtub3duKTogeyBjb250ZW50OiBBcnJheTx7IHR5cGU6IFwidGV4dFwiOyB0ZXh0OiBzdHJpbmcgfT47IGlzRXJyb3I6IHRydWUgfSB7XG4gIGNvbnN0IHBheWxvYWQ6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge1xuICAgIG9rOiBmYWxzZSxcbiAgICBlcnJvcjogbWVzc2FnZVxuICB9O1xuXG4gIGlmIChlcnJvcikge1xuICAgIC8vIFNhbml0aXplIGVycm9yIGRldGFpbHNcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgcGF5bG9hZC5kZXRhaWxzID0ge1xuICAgICAgICBuYW1lOiBlcnJvci5uYW1lLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiAoZXJyb3IgYXMgYW55KS5jb2RlXG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGVycm9yID09PSBcIm9iamVjdFwiICYmIGVycm9yICE9PSBudWxsKSB7XG4gICAgICBwYXlsb2FkLmRldGFpbHMgPSBzYW5pdGl6ZU9iamVjdChlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBheWxvYWQuZGV0YWlscyA9IFN0cmluZyhlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBjb250ZW50OiBbXG4gICAgICB7XG4gICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICB0ZXh0OiBzYWZlU3RyaW5naWZ5KHBheWxvYWQpXG4gICAgICB9XG4gICAgXSxcbiAgICBpc0Vycm9yOiB0cnVlXG4gIH07XG59XG5cbi8qKlxuICogU2FuaXRpemVzIGFuIG9iamVjdCBieSByZW1vdmluZyBzZW5zaXRpdmUgZmllbGRzIGFuZCB0cnVuY2F0aW5nIGxhcmdlIHZhbHVlcy5cbiAqIEBwYXJhbSBvYmogLSBUaGUgb2JqZWN0IHRvIHNhbml0aXplXG4gKiBAcGFyYW0gbWF4RGVwdGggLSBNYXhpbXVtIHJlY3Vyc2lvbiBkZXB0aFxuICogQHJldHVybnMgQSBzYW5pdGl6ZWQgb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIHNhbml0aXplT2JqZWN0KG9iajogdW5rbm93biwgbWF4RGVwdGg6IG51bWJlciA9IDIpOiB1bmtub3duIHtcbiAgaWYgKG1heERlcHRoIDw9IDApIHtcbiAgICByZXR1cm4gXCJbTWF4IGRlcHRoXVwiO1xuICB9XG5cbiAgaWYgKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICBpZiAodHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgcmV0dXJuIG9iai5zbGljZSgwLCAxMCkubWFwKGl0ZW0gPT4gc2FuaXRpemVPYmplY3QoaXRlbSwgbWF4RGVwdGggLSAxKSk7XG4gIH1cblxuICBjb25zdCBzYW5pdGl6ZWQ6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XG4gIGxldCBjb3VudCA9IDA7XG5cbiAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKGNvdW50ID49IDIwKSB7XG4gICAgICBzYW5pdGl6ZWRbXCIuLi5cIl0gPSBcIltNb3JlIGZpZWxkcyBvbWl0dGVkXVwiO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKFNFTlNJVElWRV9LRVlTLmluY2x1ZGVzKGtleS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgc2FuaXRpemVkW2tleV0gPSBSRURBQ1RFRDtcbiAgICB9IGVsc2Uge1xuICAgICAgc2FuaXRpemVkW2tleV0gPSBzYW5pdGl6ZU9iamVjdCgob2JqIGFzIGFueSlba2V5XSwgbWF4RGVwdGggLSAxKTtcbiAgICB9XG5cbiAgICBjb3VudCsrO1xuICB9XG5cbiAgcmV0dXJuIHNhbml0aXplZDtcbn1cbiJdLCJuYW1lcyI6WyJTRU5TSVRJVkVfS0VZUyIsIlJFREFDVEVEIiwiQ0lSQ1VMQVIiLCJzYWZlU3RyaW5naWZ5Iiwib2JqIiwibWF4TGVuZ3RoIiwic2VlbiIsIldlYWtTZXQiLCJqc29uIiwiSlNPTiIsInN0cmluZ2lmeSIsImtleSIsInZhbHVlIiwiaW5jbHVkZXMiLCJ0b0xvd2VyQ2FzZSIsInVuZGVmaW5lZCIsImhhcyIsImFkZCIsIkVycm9yIiwibmFtZSIsIm1lc3NhZ2UiLCJzdGFjayIsInNwbGl0Iiwic2xpY2UiLCJqb2luIiwibGVuZ3RoIiwiZXJyb3IiLCJTdHJpbmciLCJtY3BFcnJvciIsInBheWxvYWQiLCJvayIsImRldGFpbHMiLCJjb2RlIiwic2FuaXRpemVPYmplY3QiLCJjb250ZW50IiwidHlwZSIsInRleHQiLCJpc0Vycm9yIiwibWF4RGVwdGgiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJpdGVtIiwic2FuaXRpemVkIiwiY291bnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../src/utils/safe-stringify.ts\n");

/***/ }),

/***/ "(rsc)/../../src/utils/sanitize.ts":
/*!***********************************!*\
  !*** ../../src/utils/sanitize.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   redactApiKey: () => (/* binding */ redactApiKey),\n/* harmony export */   sanitizeError: () => (/* binding */ sanitizeError),\n/* harmony export */   sanitizeForLogging: () => (/* binding */ sanitizeForLogging),\n/* harmony export */   sanitizePath: () => (/* binding */ sanitizePath)\n/* harmony export */ });\n/**\n * Sanitization utilities to prevent sensitive data leakage in error messages and logs.\n */ const SENSITIVE_FIELD_PATTERNS = [\n    /password/i,\n    /apikey/i,\n    /api_key/i,\n    /token/i,\n    /secret/i,\n    /authorization/i,\n    /auth/i,\n    /bearer/i,\n    /credential/i,\n    /key/i\n];\nconst API_KEY_PATTERN = /\\b(sk-[a-zA-Z0-9]{32,}|AIza[a-zA-Z0-9_-]{35})\\b/g;\nconst REDACTED = \"[REDACTED]\";\n/**\n * Sanitizes an error object by removing sensitive fields and truncating stack traces.\n * @param error - The error to sanitize\n * @returns A sanitized error object safe for logging\n */ function sanitizeError(error) {\n    if (!error) {\n        return {\n            name: \"UnknownError\",\n            message: \"An unknown error occurred\"\n        };\n    }\n    // Handle Error objects\n    if (error instanceof Error) {\n        const sanitized = {\n            name: error.name || \"Error\",\n            message: redactApiKey(error.message || \"Unknown error\")\n        };\n        // Include error code if present (e.g., ENOENT)\n        if (\"code\" in error && typeof error.code === \"string\") {\n            sanitized.code = error.code;\n        }\n        // Sanitize and truncate stack trace (remove absolute paths)\n        if (error.stack) {\n            sanitized.stack = sanitizePath(error.stack).split(\"\\n\").slice(0, 5) // Only keep first 5 lines\n            .join(\"\\n\");\n        }\n        // Check for additional properties on the error object\n        const errorObj = error;\n        for(const key in errorObj){\n            if (key === \"name\" || key === \"message\" || key === \"stack\" || key === \"code\") {\n                continue;\n            }\n            // Skip sensitive fields\n            if (isSensitiveField(key)) {\n                continue;\n            }\n            // Include safe additional properties\n            const value = errorObj[key];\n            if (typeof value === \"string\" || typeof value === \"number\" || typeof value === \"boolean\") {\n                sanitized[key] = typeof value === \"string\" ? redactApiKey(value) : value;\n            }\n        }\n        return sanitized;\n    }\n    // Handle string errors\n    if (typeof error === \"string\") {\n        return {\n            name: \"Error\",\n            message: redactApiKey(error)\n        };\n    }\n    // Handle plain objects\n    if (typeof error === \"object\") {\n        const errorObj = error;\n        const sanitized = {\n            name: errorObj.name || \"Error\",\n            message: redactApiKey(errorObj.message || errorObj.error || \"Unknown error\")\n        };\n        // Include safe properties\n        for(const key in errorObj){\n            if (key === \"name\" || key === \"message\" || key === \"error\") {\n                continue;\n            }\n            if (isSensitiveField(key)) {\n                continue;\n            }\n            const value = errorObj[key];\n            if (typeof value === \"string\" || typeof value === \"number\" || typeof value === \"boolean\") {\n                sanitized[key] = typeof value === \"string\" ? redactApiKey(value) : value;\n            }\n        }\n        return sanitized;\n    }\n    // Fallback for primitives\n    return {\n        name: \"Error\",\n        message: String(error)\n    };\n}\n/**\n * Sanitizes file paths by converting absolute paths to relative paths.\n * @param path - The path string to sanitize\n * @returns A sanitized path with sensitive directory information removed\n */ function sanitizePath(path) {\n    if (!path) return path;\n    // Remove common sensitive path prefixes\n    const sensitivePatterns = [\n        /\\/Users\\/[^/]+/g,\n        /\\/home\\/[^/]+/g,\n        /C:\\\\Users\\\\[^\\\\]+/g,\n        /\\/private\\/[^/]+/g\n    ];\n    let sanitized = path;\n    for (const pattern of sensitivePatterns){\n        sanitized = sanitized.replace(pattern, \"~\");\n    }\n    return sanitized;\n}\n/**\n * Redacts API keys and tokens from text.\n * @param text - The text to redact\n * @returns Text with API keys replaced with [REDACTED]\n */ function redactApiKey(text) {\n    if (!text) return text;\n    return text.replace(API_KEY_PATTERN, REDACTED);\n}\n/**\n * Deep sanitizes data structures for logging, removing sensitive fields and truncating large values.\n * @param data - The data to sanitize\n * @param maxDepth - Maximum recursion depth\n * @returns Sanitized data safe for logging\n */ function sanitizeForLogging(data, maxDepth = 3) {\n    if (maxDepth <= 0) {\n        return \"[Max depth reached]\";\n    }\n    // Handle null/undefined\n    if (data === null || data === undefined) {\n        return data;\n    }\n    // Handle primitives\n    if (typeof data === \"string\") {\n        // Truncate long strings\n        const truncated = data.length > 1000 ? data.slice(0, 1000) + \"...\" : data;\n        return redactApiKey(truncated);\n    }\n    if (typeof data === \"number\" || typeof data === \"boolean\") {\n        return data;\n    }\n    // Handle arrays\n    if (Array.isArray(data)) {\n        return data.slice(0, 50) // Limit array length\n        .map((item)=>sanitizeForLogging(item, maxDepth - 1));\n    }\n    // Handle objects\n    if (typeof data === \"object\") {\n        const sanitized = {};\n        let count = 0;\n        const maxKeys = 50;\n        for(const key in data){\n            if (count >= maxKeys) {\n                sanitized[\"...\"] = `[${Object.keys(data).length - maxKeys} more keys]`;\n                break;\n            }\n            // Skip sensitive fields\n            if (isSensitiveField(key)) {\n                sanitized[key] = REDACTED;\n                count++;\n                continue;\n            }\n            const value = data[key];\n            sanitized[key] = sanitizeForLogging(value, maxDepth - 1);\n            count++;\n        }\n        return sanitized;\n    }\n    // Fallback for functions, symbols, etc.\n    return String(data);\n}\n/**\n * Checks if a field name is sensitive.\n * @param fieldName - The field name to check\n * @returns True if the field is sensitive\n */ function isSensitiveField(fieldName) {\n    return SENSITIVE_FIELD_PATTERNS.some((pattern)=>pattern.test(fieldName));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUU4QixPQUFPQyxJQUFJLENBQUNaLE1BQU1JLE1BQU0sR0FBR00sUUFBUSxXQUFXLENBQUM7Z0JBQ3RFO1lBQ0Y7WUFFQSx3QkFBd0I7WUFDeEIsSUFBSW5CLGlCQUFpQkQsTUFBTTtnQkFDekJULFNBQVMsQ0FBQ1MsSUFBSSxHQUFHZjtnQkFDakJrQztnQkFDQTtZQUNGO1lBRUEsTUFBTWpCLFFBQVEsSUFBYSxDQUFDRixJQUFJO1lBQ2hDVCxTQUFTLENBQUNTLElBQUksR0FBR1MsbUJBQW1CUCxPQUFPUyxXQUFXO1lBQ3REUTtRQUNGO1FBRUEsT0FBTzVCO0lBQ1Q7SUFFQSx3Q0FBd0M7SUFDeEMsT0FBT1ksT0FBT087QUFDaEI7QUFFQTs7OztDQUlDLEdBQ0QsU0FBU1QsaUJBQWlCc0IsU0FBaUI7SUFDekMsT0FBT3hDLHlCQUF5QnlDLElBQUksQ0FBQ2xCLENBQUFBLFVBQVdBLFFBQVFtQixJQUFJLENBQUNGO0FBQy9EIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHBpcC91aS8uLi8uLi9zcmMvdXRpbHMvc2FuaXRpemUudHM/ZTk0OSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNhbml0aXphdGlvbiB1dGlsaXRpZXMgdG8gcHJldmVudCBzZW5zaXRpdmUgZGF0YSBsZWFrYWdlIGluIGVycm9yIG1lc3NhZ2VzIGFuZCBsb2dzLlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgU2FuaXRpemVkRXJyb3Ige1xuICBuYW1lOiBzdHJpbmc7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgY29kZT86IHN0cmluZztcbiAgc3RhY2s/OiBzdHJpbmc7XG4gIFtrZXk6IHN0cmluZ106IHVua25vd247XG59XG5cbmNvbnN0IFNFTlNJVElWRV9GSUVMRF9QQVRURVJOUyA9IFtcbiAgL3Bhc3N3b3JkL2ksXG4gIC9hcGlrZXkvaSxcbiAgL2FwaV9rZXkvaSxcbiAgL3Rva2VuL2ksXG4gIC9zZWNyZXQvaSxcbiAgL2F1dGhvcml6YXRpb24vaSxcbiAgL2F1dGgvaSxcbiAgL2JlYXJlci9pLFxuICAvY3JlZGVudGlhbC9pLFxuICAva2V5L2lcbl07XG5cbmNvbnN0IEFQSV9LRVlfUEFUVEVSTiA9IC9cXGIoc2stW2EtekEtWjAtOV17MzIsfXxBSXphW2EtekEtWjAtOV8tXXszNX0pXFxiL2c7XG5jb25zdCBSRURBQ1RFRCA9IFwiW1JFREFDVEVEXVwiO1xuXG4vKipcbiAqIFNhbml0aXplcyBhbiBlcnJvciBvYmplY3QgYnkgcmVtb3Zpbmcgc2Vuc2l0aXZlIGZpZWxkcyBhbmQgdHJ1bmNhdGluZyBzdGFjayB0cmFjZXMuXG4gKiBAcGFyYW0gZXJyb3IgLSBUaGUgZXJyb3IgdG8gc2FuaXRpemVcbiAqIEByZXR1cm5zIEEgc2FuaXRpemVkIGVycm9yIG9iamVjdCBzYWZlIGZvciBsb2dnaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZUVycm9yKGVycm9yOiB1bmtub3duKTogU2FuaXRpemVkRXJyb3Ige1xuICBpZiAoIWVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IFwiVW5rbm93bkVycm9yXCIsXG4gICAgICBtZXNzYWdlOiBcIkFuIHVua25vd24gZXJyb3Igb2NjdXJyZWRcIlxuICAgIH07XG4gIH1cblxuICAvLyBIYW5kbGUgRXJyb3Igb2JqZWN0c1xuICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIGNvbnN0IHNhbml0aXplZDogU2FuaXRpemVkRXJyb3IgPSB7XG4gICAgICBuYW1lOiBlcnJvci5uYW1lIHx8IFwiRXJyb3JcIixcbiAgICAgIG1lc3NhZ2U6IHJlZGFjdEFwaUtleShlcnJvci5tZXNzYWdlIHx8IFwiVW5rbm93biBlcnJvclwiKVxuICAgIH07XG5cbiAgICAvLyBJbmNsdWRlIGVycm9yIGNvZGUgaWYgcHJlc2VudCAoZS5nLiwgRU5PRU5UKVxuICAgIGlmIChcImNvZGVcIiBpbiBlcnJvciAmJiB0eXBlb2YgZXJyb3IuY29kZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgc2FuaXRpemVkLmNvZGUgPSBlcnJvci5jb2RlO1xuICAgIH1cblxuICAgIC8vIFNhbml0aXplIGFuZCB0cnVuY2F0ZSBzdGFjayB0cmFjZSAocmVtb3ZlIGFic29sdXRlIHBhdGhzKVxuICAgIGlmIChlcnJvci5zdGFjaykge1xuICAgICAgc2FuaXRpemVkLnN0YWNrID0gc2FuaXRpemVQYXRoKGVycm9yLnN0YWNrKVxuICAgICAgICAuc3BsaXQoXCJcXG5cIilcbiAgICAgICAgLnNsaWNlKDAsIDUpIC8vIE9ubHkga2VlcCBmaXJzdCA1IGxpbmVzXG4gICAgICAgIC5qb2luKFwiXFxuXCIpO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBhZGRpdGlvbmFsIHByb3BlcnRpZXMgb24gdGhlIGVycm9yIG9iamVjdFxuICAgIGNvbnN0IGVycm9yT2JqID0gZXJyb3IgYXMgYW55O1xuICAgIGZvciAoY29uc3Qga2V5IGluIGVycm9yT2JqKSB7XG4gICAgICBpZiAoa2V5ID09PSBcIm5hbWVcIiB8fCBrZXkgPT09IFwibWVzc2FnZVwiIHx8IGtleSA9PT0gXCJzdGFja1wiIHx8IGtleSA9PT0gXCJjb2RlXCIpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFNraXAgc2Vuc2l0aXZlIGZpZWxkc1xuICAgICAgaWYgKGlzU2Vuc2l0aXZlRmllbGQoa2V5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gSW5jbHVkZSBzYWZlIGFkZGl0aW9uYWwgcHJvcGVydGllc1xuICAgICAgY29uc3QgdmFsdWUgPSBlcnJvck9ialtrZXldO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICBzYW5pdGl6ZWRba2V5XSA9IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IHJlZGFjdEFwaUtleSh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2FuaXRpemVkO1xuICB9XG5cbiAgLy8gSGFuZGxlIHN0cmluZyBlcnJvcnNcbiAgaWYgKHR5cGVvZiBlcnJvciA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBcIkVycm9yXCIsXG4gICAgICBtZXNzYWdlOiByZWRhY3RBcGlLZXkoZXJyb3IpXG4gICAgfTtcbiAgfVxuXG4gIC8vIEhhbmRsZSBwbGFpbiBvYmplY3RzXG4gIGlmICh0eXBlb2YgZXJyb3IgPT09IFwib2JqZWN0XCIpIHtcbiAgICBjb25zdCBlcnJvck9iaiA9IGVycm9yIGFzIGFueTtcbiAgICBjb25zdCBzYW5pdGl6ZWQ6IFNhbml0aXplZEVycm9yID0ge1xuICAgICAgbmFtZTogZXJyb3JPYmoubmFtZSB8fCBcIkVycm9yXCIsXG4gICAgICBtZXNzYWdlOiByZWRhY3RBcGlLZXkoZXJyb3JPYmoubWVzc2FnZSB8fCBlcnJvck9iai5lcnJvciB8fCBcIlVua25vd24gZXJyb3JcIilcbiAgICB9O1xuXG4gICAgLy8gSW5jbHVkZSBzYWZlIHByb3BlcnRpZXNcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBlcnJvck9iaikge1xuICAgICAgaWYgKGtleSA9PT0gXCJuYW1lXCIgfHwga2V5ID09PSBcIm1lc3NhZ2VcIiB8fCBrZXkgPT09IFwiZXJyb3JcIikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzU2Vuc2l0aXZlRmllbGQoa2V5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdmFsdWUgPSBlcnJvck9ialtrZXldO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICBzYW5pdGl6ZWRba2V5XSA9IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IHJlZGFjdEFwaUtleSh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2FuaXRpemVkO1xuICB9XG5cbiAgLy8gRmFsbGJhY2sgZm9yIHByaW1pdGl2ZXNcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBcIkVycm9yXCIsXG4gICAgbWVzc2FnZTogU3RyaW5nKGVycm9yKVxuICB9O1xufVxuXG4vKipcbiAqIFNhbml0aXplcyBmaWxlIHBhdGhzIGJ5IGNvbnZlcnRpbmcgYWJzb2x1dGUgcGF0aHMgdG8gcmVsYXRpdmUgcGF0aHMuXG4gKiBAcGFyYW0gcGF0aCAtIFRoZSBwYXRoIHN0cmluZyB0byBzYW5pdGl6ZVxuICogQHJldHVybnMgQSBzYW5pdGl6ZWQgcGF0aCB3aXRoIHNlbnNpdGl2ZSBkaXJlY3RvcnkgaW5mb3JtYXRpb24gcmVtb3ZlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVQYXRoKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghcGF0aCkgcmV0dXJuIHBhdGg7XG5cbiAgLy8gUmVtb3ZlIGNvbW1vbiBzZW5zaXRpdmUgcGF0aCBwcmVmaXhlc1xuICBjb25zdCBzZW5zaXRpdmVQYXR0ZXJucyA9IFtcbiAgICAvXFwvVXNlcnNcXC9bXi9dKy9nLFxuICAgIC9cXC9ob21lXFwvW14vXSsvZyxcbiAgICAvQzpcXFxcVXNlcnNcXFxcW15cXFxcXSsvZyxcbiAgICAvXFwvcHJpdmF0ZVxcL1teL10rL2dcbiAgXTtcblxuICBsZXQgc2FuaXRpemVkID0gcGF0aDtcbiAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIHNlbnNpdGl2ZVBhdHRlcm5zKSB7XG4gICAgc2FuaXRpemVkID0gc2FuaXRpemVkLnJlcGxhY2UocGF0dGVybiwgXCJ+XCIpO1xuICB9XG5cbiAgcmV0dXJuIHNhbml0aXplZDtcbn1cblxuLyoqXG4gKiBSZWRhY3RzIEFQSSBrZXlzIGFuZCB0b2tlbnMgZnJvbSB0ZXh0LlxuICogQHBhcmFtIHRleHQgLSBUaGUgdGV4dCB0byByZWRhY3RcbiAqIEByZXR1cm5zIFRleHQgd2l0aCBBUEkga2V5cyByZXBsYWNlZCB3aXRoIFtSRURBQ1RFRF1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZGFjdEFwaUtleSh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoIXRleHQpIHJldHVybiB0ZXh0O1xuICByZXR1cm4gdGV4dC5yZXBsYWNlKEFQSV9LRVlfUEFUVEVSTiwgUkVEQUNURUQpO1xufVxuXG4vKipcbiAqIERlZXAgc2FuaXRpemVzIGRhdGEgc3RydWN0dXJlcyBmb3IgbG9nZ2luZywgcmVtb3Zpbmcgc2Vuc2l0aXZlIGZpZWxkcyBhbmQgdHJ1bmNhdGluZyBsYXJnZSB2YWx1ZXMuXG4gKiBAcGFyYW0gZGF0YSAtIFRoZSBkYXRhIHRvIHNhbml0aXplXG4gKiBAcGFyYW0gbWF4RGVwdGggLSBNYXhpbXVtIHJlY3Vyc2lvbiBkZXB0aFxuICogQHJldHVybnMgU2FuaXRpemVkIGRhdGEgc2FmZSBmb3IgbG9nZ2luZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVGb3JMb2dnaW5nKGRhdGE6IHVua25vd24sIG1heERlcHRoOiBudW1iZXIgPSAzKTogdW5rbm93biB7XG4gIGlmIChtYXhEZXB0aCA8PSAwKSB7XG4gICAgcmV0dXJuIFwiW01heCBkZXB0aCByZWFjaGVkXVwiO1xuICB9XG5cbiAgLy8gSGFuZGxlIG51bGwvdW5kZWZpbmVkXG4gIGlmIChkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgLy8gSGFuZGxlIHByaW1pdGl2ZXNcbiAgaWYgKHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiKSB7XG4gICAgLy8gVHJ1bmNhdGUgbG9uZyBzdHJpbmdzXG4gICAgY29uc3QgdHJ1bmNhdGVkID0gZGF0YS5sZW5ndGggPiAxMDAwID8gZGF0YS5zbGljZSgwLCAxMDAwKSArIFwiLi4uXCIgOiBkYXRhO1xuICAgIHJldHVybiByZWRhY3RBcGlLZXkodHJ1bmNhdGVkKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZGF0YSA9PT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgZGF0YSA9PT0gXCJib29sZWFuXCIpIHtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIC8vIEhhbmRsZSBhcnJheXNcbiAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICByZXR1cm4gZGF0YVxuICAgICAgLnNsaWNlKDAsIDUwKSAvLyBMaW1pdCBhcnJheSBsZW5ndGhcbiAgICAgIC5tYXAoaXRlbSA9PiBzYW5pdGl6ZUZvckxvZ2dpbmcoaXRlbSwgbWF4RGVwdGggLSAxKSk7XG4gIH1cblxuICAvLyBIYW5kbGUgb2JqZWN0c1xuICBpZiAodHlwZW9mIGRhdGEgPT09IFwib2JqZWN0XCIpIHtcbiAgICBjb25zdCBzYW5pdGl6ZWQ6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XG4gICAgbGV0IGNvdW50ID0gMDtcbiAgICBjb25zdCBtYXhLZXlzID0gNTA7XG5cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhKSB7XG4gICAgICBpZiAoY291bnQgPj0gbWF4S2V5cykge1xuICAgICAgICBzYW5pdGl6ZWRbXCIuLi5cIl0gPSBgWyR7T2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoIC0gbWF4S2V5c30gbW9yZSBrZXlzXWA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyBTa2lwIHNlbnNpdGl2ZSBmaWVsZHNcbiAgICAgIGlmIChpc1NlbnNpdGl2ZUZpZWxkKGtleSkpIHtcbiAgICAgICAgc2FuaXRpemVkW2tleV0gPSBSRURBQ1RFRDtcbiAgICAgICAgY291bnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHZhbHVlID0gKGRhdGEgYXMgYW55KVtrZXldO1xuICAgICAgc2FuaXRpemVkW2tleV0gPSBzYW5pdGl6ZUZvckxvZ2dpbmcodmFsdWUsIG1heERlcHRoIC0gMSk7XG4gICAgICBjb3VudCsrO1xuICAgIH1cblxuICAgIHJldHVybiBzYW5pdGl6ZWQ7XG4gIH1cblxuICAvLyBGYWxsYmFjayBmb3IgZnVuY3Rpb25zLCBzeW1ib2xzLCBldGMuXG4gIHJldHVybiBTdHJpbmcoZGF0YSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgZmllbGQgbmFtZSBpcyBzZW5zaXRpdmUuXG4gKiBAcGFyYW0gZmllbGROYW1lIC0gVGhlIGZpZWxkIG5hbWUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGZpZWxkIGlzIHNlbnNpdGl2ZVxuICovXG5mdW5jdGlvbiBpc1NlbnNpdGl2ZUZpZWxkKGZpZWxkTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiBTRU5TSVRJVkVfRklFTERfUEFUVEVSTlMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChmaWVsZE5hbWUpKTtcbn1cbiJdLCJuYW1lcyI6WyJTRU5TSVRJVkVfRklFTERfUEFUVEVSTlMiLCJBUElfS0VZX1BBVFRFUk4iLCJSRURBQ1RFRCIsInNhbml0aXplRXJyb3IiLCJlcnJvciIsIm5hbWUiLCJtZXNzYWdlIiwiRXJyb3IiLCJzYW5pdGl6ZWQiLCJyZWRhY3RBcGlLZXkiLCJjb2RlIiwic3RhY2siLCJzYW5pdGl6ZVBhdGgiLCJzcGxpdCIsInNsaWNlIiwiam9pbiIsImVycm9yT2JqIiwia2V5IiwiaXNTZW5zaXRpdmVGaWVsZCIsInZhbHVlIiwiU3RyaW5nIiwicGF0aCIsInNlbnNpdGl2ZVBhdHRlcm5zIiwicGF0dGVybiIsInJlcGxhY2UiLCJ0ZXh0Iiwic2FuaXRpemVGb3JMb2dnaW5nIiwiZGF0YSIsIm1heERlcHRoIiwidW5kZWZpbmVkIiwidHJ1bmNhdGVkIiwibGVuZ3RoIiwiQXJyYXkiLCJpc0FycmF5IiwibWFwIiwiaXRlbSIsImNvdW50IiwibWF4S2V5cyIsIk9iamVjdCIsImtleXMiLCJmaWVsZE5hbWUiLCJzb21lIiwidGVzdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../src/utils/sanitize.ts\n");

/***/ }),

/***/ "(rsc)/../../src/utils/shell-safe.ts":
/*!*************************************!*\
  !*** ../../src/utils/shell-safe.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isCommandAvailable: () => (/* binding */ isCommandAvailable),\n/* harmony export */   runFFmpeg: () => (/* binding */ runFFmpeg),\n/* harmony export */   runFFprobe: () => (/* binding */ runFFprobe),\n/* harmony export */   safeSpawn: () => (/* binding */ safeSpawn)\n/* harmony export */ });\n/* harmony import */ var node_child_process__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:child_process */ \"node:child_process\");\n/* harmony import */ var node_child_process__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_child_process__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _validation_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./validation.js */ \"(rsc)/../../src/utils/validation.ts\");\n/**\n * Shell-Safe Command Execution Utilities\n *\n * This module provides secure wrappers for executing shell commands with\n * comprehensive validation and sanitization to prevent command injection attacks.\n *\n * @security CRITICAL - This module prevents command injection vulnerabilities.\n * All external command execution should go through these wrappers.\n *\n * @warning NEVER use child_process.exec() or shell: true with user input.\n * Always use spawn() with argument arrays and validation.\n */ \n\n\n// ============================================================================\n// Command Whitelist\n// ============================================================================\n/**\n * Whitelist of allowed commands\n * Only these commands can be executed through safeSpawn\n *\n * @security This whitelist prevents arbitrary command execution.\n * Add commands with extreme caution.\n */ const ALLOWED_COMMANDS = new Set([\n    \"ffmpeg\",\n    \"ffprobe\",\n    \"aws\"\n]);\n// ============================================================================\n// Command Validation\n// ============================================================================\n/**\n * Validates that a command is in the whitelist\n *\n * @param command - The command to validate\n * @throws Error if command is not whitelisted\n *\n * @security This prevents execution of arbitrary commands\n */ function validateCommand(command) {\n    if (!command || typeof command !== \"string\") {\n        throw new Error(\"Command must be a non-empty string\");\n    }\n    // Extract base command name (remove path)\n    const baseCommand = command.split(\"/\").pop()?.split(\"\\\\\").pop() || command;\n    if (!ALLOWED_COMMANDS.has(baseCommand)) {\n        throw new Error(`Command \"${baseCommand}\" is not whitelisted. ` + `Allowed commands: ${Array.from(ALLOWED_COMMANDS).join(\", \")}`);\n    }\n}\n/**\n * Validates command arguments for safety\n *\n * @param args - Arguments to validate\n * @param options - Validation options\n * @returns Validated and potentially sanitized arguments\n *\n * @security This function detects and blocks injection attempts\n */ function validateArguments(args, options = {}) {\n    const validatedArgs = [];\n    for(let i = 0; i < args.length; i++){\n        const arg = args[i];\n        if (typeof arg !== \"string\") {\n            throw new Error(`Argument at index ${i} must be a string`);\n        }\n        // Check for null bytes\n        if (arg.includes(\"\\0\")) {\n            throw new Error(`Argument at index ${i} contains null bytes (potential injection attempt)`);\n        }\n        // Check for newlines (potential injection)\n        if (arg.includes(\"\\n\") || arg.includes(\"\\r\")) {\n            throw new Error(`Argument at index ${i} contains newlines (potential injection attempt)`);\n        }\n        // If this looks like a file path argument, validate it\n        if (options.validatePaths && isFilePath(arg, args[i - 1])) {\n            // Path validation for file arguments\n            // Allow paths that exist or look like output paths\n            const validation = (0,_validation_js__WEBPACK_IMPORTED_MODULE_2__.validateFilePath)(arg, {\n                mustExist: false,\n                allowAbsolute: true // ffmpeg/ffprobe may need absolute paths\n            });\n            if (!validation.valid) {\n                throw new Error(`Invalid file path at argument ${i}: ${validation.error}. ${validation.hint || \"\"}`);\n            }\n            // Use the sanitized path\n            validatedArgs.push(validation.sanitizedPath);\n        } else {\n            validatedArgs.push(arg);\n        }\n    }\n    return validatedArgs;\n}\n/**\n * Heuristic to detect if an argument is likely a file path\n *\n * @param arg - The argument to check\n * @param previousArg - The previous argument (to check for file flags)\n * @returns True if argument appears to be a file path\n */ function isFilePath(arg, previousArg) {\n    // Check if previous argument was a file-related flag\n    const fileFlags = [\n        \"-i\",\n        \"-o\",\n        \"--input\",\n        \"--output\",\n        \"--file\"\n    ];\n    if (previousArg && fileFlags.includes(previousArg)) {\n        return true;\n    }\n    const hasSeparator = arg.includes(\"/\") || arg.includes(\"\\\\\");\n    const hasRelativePrefix = arg.startsWith(\"./\") || arg.startsWith(\"../\");\n    const hasExtension = Boolean((0,node_path__WEBPACK_IMPORTED_MODULE_1__.extname)(arg));\n    return hasSeparator || hasRelativePrefix || hasExtension;\n}\n// ============================================================================\n// Safe Command Execution\n// ============================================================================\n/**\n * Safely executes a shell command with comprehensive validation\n *\n * @param command - The command to execute (must be whitelisted)\n * @param args - Command arguments (will be validated)\n * @param options - Execution options\n * @returns Promise resolving to command output\n *\n * @throws Error if command is not whitelisted, arguments are invalid,\n *         or command execution fails\n *\n * @example\n * // Safe usage\n * const result = await safeSpawn(\"ffprobe\", [\"-v\", \"error\", \"audio.mp3\"]);\n *\n * // Unsafe - will throw error\n * await safeSpawn(\"rm\", [\"-rf\", \"/\"]); // Not whitelisted\n * await safeSpawn(\"ffmpeg\", [\"file.mp3; rm -rf /\"]); // Injection detected\n *\n * @security This is the primary defense against command injection.\n * Key security features:\n * - Command whitelist prevents arbitrary command execution\n * - Argument validation detects injection patterns\n * - File path validation prevents path traversal\n * - No shell interpretation (spawn vs exec)\n * - Timeout prevents resource exhaustion\n * - Buffer limits prevent memory exhaustion\n */ async function safeSpawn(command, args, options) {\n    // Normalize options\n    const baseEnv = {};\n    if (process.env) {\n        for (const [key, value] of Object.entries(process.env)){\n            if (value !== undefined) {\n                baseEnv[key] = value;\n            }\n        }\n    }\n    const opts = {\n        cwd: options?.cwd || process.cwd(),\n        env: {\n            ...baseEnv,\n            ...options?.env\n        },\n        timeout: options?.timeout ?? 300000,\n        maxBuffer: options?.maxBuffer ?? 10 * 1024 * 1024,\n        validatePaths: options?.validatePaths ?? true\n    };\n    // Validate command is whitelisted\n    validateCommand(command);\n    // Validate and sanitize arguments\n    const validatedArgs = validateArguments(args, {\n        validatePaths: opts.validatePaths\n    });\n    // Prepare spawn options\n    const spawnOptions = {\n        cwd: opts.cwd,\n        env: opts.env,\n        stdio: [\n            \"ignore\",\n            \"pipe\",\n            \"pipe\"\n        ]\n    };\n    return new Promise((resolve, reject)=>{\n        let stdout = \"\";\n        let stderr = \"\";\n        let killed = false;\n        // Start the process\n        const child = (0,node_child_process__WEBPACK_IMPORTED_MODULE_0__.spawn)(command, validatedArgs, spawnOptions);\n        // Set timeout\n        const timeoutId = setTimeout(()=>{\n            killed = true;\n            child.kill(\"SIGTERM\");\n            // Force kill after 5 seconds\n            setTimeout(()=>{\n                if (!child.killed) {\n                    child.kill(\"SIGKILL\");\n                }\n            }, 5000);\n        }, opts.timeout);\n        // Collect stdout\n        child.stdout?.on(\"data\", (chunk)=>{\n            stdout += chunk.toString();\n            // Check buffer size\n            if (stdout.length > opts.maxBuffer) {\n                killed = true;\n                child.kill(\"SIGTERM\");\n                reject(new Error(`Command output exceeded maximum buffer size (${opts.maxBuffer} bytes)`));\n            }\n        });\n        // Collect stderr\n        child.stderr?.on(\"data\", (chunk)=>{\n            stderr += chunk.toString();\n            // Check buffer size\n            if (stderr.length > opts.maxBuffer) {\n                killed = true;\n                child.kill(\"SIGTERM\");\n                reject(new Error(`Command error output exceeded maximum buffer size (${opts.maxBuffer} bytes)`));\n            }\n        });\n        // Handle process errors (e.g., command not found)\n        child.on(\"error\", (error)=>{\n            clearTimeout(timeoutId);\n            reject(new Error(`Failed to execute command \"${command}\": ${error.message}`));\n        });\n        // Handle process exit\n        child.on(\"close\", (code)=>{\n            clearTimeout(timeoutId);\n            if (killed) {\n                reject(new Error(`Command \"${command}\" was killed (timeout or buffer exceeded)`));\n                return;\n            }\n            const exitCode = code ?? -1;\n            if (exitCode === 0) {\n                // Success\n                resolve({\n                    stdout,\n                    stderr,\n                    exitCode: 0\n                });\n            } else {\n                // Non-zero exit code\n                reject(new Error(`${command} exited with code ${exitCode}: ${stderr || stdout}`));\n            }\n        });\n    });\n}\n/**\n * Wrapper for running ffmpeg commands safely\n *\n * @param args - ffmpeg arguments (without \"ffmpeg\" command)\n * @param options - Execution options\n * @returns Command result\n *\n * @example\n * await runFFmpeg([\"-i\", \"input.mp3\", \"output.wav\"]);\n */ async function runFFmpeg(args, options) {\n    return safeSpawn(\"ffmpeg\", args, options);\n}\n/**\n * Wrapper for running ffprobe commands safely\n *\n * @param args - ffprobe arguments (without \"ffprobe\" command)\n * @param options - Execution options\n * @returns Command result\n *\n * @example\n * const result = await runFFprobe([\"-v\", \"error\", \"-show_format\", \"audio.mp3\"]);\n */ async function runFFprobe(args, options) {\n    return safeSpawn(\"ffprobe\", args, options);\n}\n/**\n * Checks if a command is available in the system PATH\n *\n * @param command - The command to check\n * @returns True if command is available\n *\n * @example\n * if (await isCommandAvailable(\"ffmpeg\")) {\n *   // ffmpeg is installed\n * }\n */ async function isCommandAvailable(command) {\n    try {\n        validateCommand(command);\n        // Try to get version or help (most commands support --version or --help)\n        const result = await safeSpawn(command, [\n            \"--version\"\n        ], {\n            timeout: 5000,\n            validatePaths: false\n        });\n        return result.exitCode === 0;\n    } catch (error) {\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cmMvdXRpbHMvc2hlbGwtc2FmZS50cz80ZGY4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2hlbGwtU2FmZSBDb21tYW5kIEV4ZWN1dGlvbiBVdGlsaXRpZXNcbiAqXG4gKiBUaGlzIG1vZHVsZSBwcm92aWRlcyBzZWN1cmUgd3JhcHBlcnMgZm9yIGV4ZWN1dGluZyBzaGVsbCBjb21tYW5kcyB3aXRoXG4gKiBjb21wcmVoZW5zaXZlIHZhbGlkYXRpb24gYW5kIHNhbml0aXphdGlvbiB0byBwcmV2ZW50IGNvbW1hbmQgaW5qZWN0aW9uIGF0dGFja3MuXG4gKlxuICogQHNlY3VyaXR5IENSSVRJQ0FMIC0gVGhpcyBtb2R1bGUgcHJldmVudHMgY29tbWFuZCBpbmplY3Rpb24gdnVsbmVyYWJpbGl0aWVzLlxuICogQWxsIGV4dGVybmFsIGNvbW1hbmQgZXhlY3V0aW9uIHNob3VsZCBnbyB0aHJvdWdoIHRoZXNlIHdyYXBwZXJzLlxuICpcbiAqIEB3YXJuaW5nIE5FVkVSIHVzZSBjaGlsZF9wcm9jZXNzLmV4ZWMoKSBvciBzaGVsbDogdHJ1ZSB3aXRoIHVzZXIgaW5wdXQuXG4gKiBBbHdheXMgdXNlIHNwYXduKCkgd2l0aCBhcmd1bWVudCBhcnJheXMgYW5kIHZhbGlkYXRpb24uXG4gKi9cblxuaW1wb3J0IHsgc3Bhd24sIFNwYXduT3B0aW9ucyB9IGZyb20gXCJub2RlOmNoaWxkX3Byb2Nlc3NcIjtcbmltcG9ydCB7IGV4dG5hbWUgfSBmcm9tIFwibm9kZTpwYXRoXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZUZpbGVQYXRoIH0gZnJvbSBcIi4vdmFsaWRhdGlvbi5qc1wiO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBDb21tYW5kIFdoaXRlbGlzdFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFdoaXRlbGlzdCBvZiBhbGxvd2VkIGNvbW1hbmRzXG4gKiBPbmx5IHRoZXNlIGNvbW1hbmRzIGNhbiBiZSBleGVjdXRlZCB0aHJvdWdoIHNhZmVTcGF3blxuICpcbiAqIEBzZWN1cml0eSBUaGlzIHdoaXRlbGlzdCBwcmV2ZW50cyBhcmJpdHJhcnkgY29tbWFuZCBleGVjdXRpb24uXG4gKiBBZGQgY29tbWFuZHMgd2l0aCBleHRyZW1lIGNhdXRpb24uXG4gKi9cbmNvbnN0IEFMTE9XRURfQ09NTUFORFMgPSBuZXcgU2V0KFtcbiAgXCJmZm1wZWdcIixcbiAgXCJmZnByb2JlXCIsXG4gIFwiYXdzXCIsXG5dKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVHlwZXNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBSZXN1bHQgb2Ygc2FmZSBjb21tYW5kIGV4ZWN1dGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbW1hbmRSZXN1bHQge1xuICAvKiogU3RhbmRhcmQgb3V0cHV0IGZyb20gdGhlIGNvbW1hbmQgKi9cbiAgc3Rkb3V0OiBzdHJpbmc7XG4gIC8qKiBTdGFuZGFyZCBlcnJvciBmcm9tIHRoZSBjb21tYW5kICovXG4gIHN0ZGVycjogc3RyaW5nO1xuICAvKiogRXhpdCBjb2RlICgwID0gc3VjY2VzcykgKi9cbiAgZXhpdENvZGU6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBPcHRpb25zIGZvciBzYWZlIGNvbW1hbmQgZXhlY3V0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2FmZVNwYXduT3B0aW9ucyB7XG4gIC8qKiBXb3JraW5nIGRpcmVjdG9yeSBmb3IgY29tbWFuZCBleGVjdXRpb24gKi9cbiAgY3dkPzogc3RyaW5nO1xuICAvKiogRW52aXJvbm1lbnQgdmFyaWFibGVzIChtZXJnZWQgd2l0aCBwcm9jZXNzLmVudikgKi9cbiAgZW52PzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgLyoqIFRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIChkZWZhdWx0OiAzMDAwMDAgPSA1IG1pbnV0ZXMpICovXG4gIHRpbWVvdXQ/OiBudW1iZXI7XG4gIC8qKiBNYXhpbXVtIHN0ZG91dCBidWZmZXIgc2l6ZSBpbiBieXRlcyAoZGVmYXVsdDogMTBNQikgKi9cbiAgbWF4QnVmZmVyPzogbnVtYmVyO1xuICAvKiogVmFsaWRhdGUgZmlsZSBwYXRoIGFyZ3VtZW50cyAoZGVmYXVsdDogdHJ1ZSkgKi9cbiAgdmFsaWRhdGVQYXRocz86IGJvb2xlYW47XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENvbW1hbmQgVmFsaWRhdGlvblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IGEgY29tbWFuZCBpcyBpbiB0aGUgd2hpdGVsaXN0XG4gKlxuICogQHBhcmFtIGNvbW1hbmQgLSBUaGUgY29tbWFuZCB0byB2YWxpZGF0ZVxuICogQHRocm93cyBFcnJvciBpZiBjb21tYW5kIGlzIG5vdCB3aGl0ZWxpc3RlZFxuICpcbiAqIEBzZWN1cml0eSBUaGlzIHByZXZlbnRzIGV4ZWN1dGlvbiBvZiBhcmJpdHJhcnkgY29tbWFuZHNcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVDb21tYW5kKGNvbW1hbmQ6IHN0cmluZyk6IHZvaWQge1xuICBpZiAoIWNvbW1hbmQgfHwgdHlwZW9mIGNvbW1hbmQgIT09IFwic3RyaW5nXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb21tYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nXCIpO1xuICB9XG5cbiAgLy8gRXh0cmFjdCBiYXNlIGNvbW1hbmQgbmFtZSAocmVtb3ZlIHBhdGgpXG4gIGNvbnN0IGJhc2VDb21tYW5kID0gY29tbWFuZC5zcGxpdChcIi9cIikucG9wKCk/LnNwbGl0KFwiXFxcXFwiKS5wb3AoKSB8fCBjb21tYW5kO1xuXG4gIGlmICghQUxMT1dFRF9DT01NQU5EUy5oYXMoYmFzZUNvbW1hbmQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYENvbW1hbmQgXCIke2Jhc2VDb21tYW5kfVwiIGlzIG5vdCB3aGl0ZWxpc3RlZC4gYCArXG4gICAgICBgQWxsb3dlZCBjb21tYW5kczogJHtBcnJheS5mcm9tKEFMTE9XRURfQ09NTUFORFMpLmpvaW4oXCIsIFwiKX1gXG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIFZhbGlkYXRlcyBjb21tYW5kIGFyZ3VtZW50cyBmb3Igc2FmZXR5XG4gKlxuICogQHBhcmFtIGFyZ3MgLSBBcmd1bWVudHMgdG8gdmFsaWRhdGVcbiAqIEBwYXJhbSBvcHRpb25zIC0gVmFsaWRhdGlvbiBvcHRpb25zXG4gKiBAcmV0dXJucyBWYWxpZGF0ZWQgYW5kIHBvdGVudGlhbGx5IHNhbml0aXplZCBhcmd1bWVudHNcbiAqXG4gKiBAc2VjdXJpdHkgVGhpcyBmdW5jdGlvbiBkZXRlY3RzIGFuZCBibG9ja3MgaW5qZWN0aW9uIGF0dGVtcHRzXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlQXJndW1lbnRzKFxuICBhcmdzOiBzdHJpbmdbXSxcbiAgb3B0aW9uczogeyB2YWxpZGF0ZVBhdGhzPzogYm9vbGVhbiB9ID0ge31cbik6IHN0cmluZ1tdIHtcbiAgY29uc3QgdmFsaWRhdGVkQXJnczogc3RyaW5nW10gPSBbXTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBhcmcgPSBhcmdzW2ldO1xuXG4gICAgaWYgKHR5cGVvZiBhcmcgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQXJndW1lbnQgYXQgaW5kZXggJHtpfSBtdXN0IGJlIGEgc3RyaW5nYCk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIG51bGwgYnl0ZXNcbiAgICBpZiAoYXJnLmluY2x1ZGVzKFwiXFx4MDBcIikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEFyZ3VtZW50IGF0IGluZGV4ICR7aX0gY29udGFpbnMgbnVsbCBieXRlcyAocG90ZW50aWFsIGluamVjdGlvbiBhdHRlbXB0KWBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIG5ld2xpbmVzIChwb3RlbnRpYWwgaW5qZWN0aW9uKVxuICAgIGlmIChhcmcuaW5jbHVkZXMoXCJcXG5cIikgfHwgYXJnLmluY2x1ZGVzKFwiXFxyXCIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBBcmd1bWVudCBhdCBpbmRleCAke2l9IGNvbnRhaW5zIG5ld2xpbmVzIChwb3RlbnRpYWwgaW5qZWN0aW9uIGF0dGVtcHQpYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGlzIGxvb2tzIGxpa2UgYSBmaWxlIHBhdGggYXJndW1lbnQsIHZhbGlkYXRlIGl0XG4gICAgaWYgKG9wdGlvbnMudmFsaWRhdGVQYXRocyAmJiBpc0ZpbGVQYXRoKGFyZywgYXJnc1tpIC0gMV0pKSB7XG4gICAgICAvLyBQYXRoIHZhbGlkYXRpb24gZm9yIGZpbGUgYXJndW1lbnRzXG4gICAgICAvLyBBbGxvdyBwYXRocyB0aGF0IGV4aXN0IG9yIGxvb2sgbGlrZSBvdXRwdXQgcGF0aHNcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB2YWxpZGF0ZUZpbGVQYXRoKGFyZywge1xuICAgICAgICBtdXN0RXhpc3Q6IGZhbHNlLCAvLyBEb24ndCByZXF1aXJlIGV4aXN0ZW5jZSAob3V0cHV0IGZpbGVzIG1heSBub3QgZXhpc3QgeWV0KVxuICAgICAgICBhbGxvd0Fic29sdXRlOiB0cnVlIC8vIGZmbXBlZy9mZnByb2JlIG1heSBuZWVkIGFic29sdXRlIHBhdGhzXG4gICAgICB9KTtcblxuICAgICAgaWYgKCF2YWxpZGF0aW9uLnZhbGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgSW52YWxpZCBmaWxlIHBhdGggYXQgYXJndW1lbnQgJHtpfTogJHt2YWxpZGF0aW9uLmVycm9yfS4gJHt2YWxpZGF0aW9uLmhpbnQgfHwgXCJcIn1gXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIFVzZSB0aGUgc2FuaXRpemVkIHBhdGhcbiAgICAgIHZhbGlkYXRlZEFyZ3MucHVzaCh2YWxpZGF0aW9uLnNhbml0aXplZFBhdGghKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsaWRhdGVkQXJncy5wdXNoKGFyZyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZhbGlkYXRlZEFyZ3M7XG59XG5cbi8qKlxuICogSGV1cmlzdGljIHRvIGRldGVjdCBpZiBhbiBhcmd1bWVudCBpcyBsaWtlbHkgYSBmaWxlIHBhdGhcbiAqXG4gKiBAcGFyYW0gYXJnIC0gVGhlIGFyZ3VtZW50IHRvIGNoZWNrXG4gKiBAcGFyYW0gcHJldmlvdXNBcmcgLSBUaGUgcHJldmlvdXMgYXJndW1lbnQgKHRvIGNoZWNrIGZvciBmaWxlIGZsYWdzKVxuICogQHJldHVybnMgVHJ1ZSBpZiBhcmd1bWVudCBhcHBlYXJzIHRvIGJlIGEgZmlsZSBwYXRoXG4gKi9cbmZ1bmN0aW9uIGlzRmlsZVBhdGgoYXJnOiBzdHJpbmcsIHByZXZpb3VzQXJnPzogc3RyaW5nKTogYm9vbGVhbiB7XG4gIC8vIENoZWNrIGlmIHByZXZpb3VzIGFyZ3VtZW50IHdhcyBhIGZpbGUtcmVsYXRlZCBmbGFnXG4gIGNvbnN0IGZpbGVGbGFncyA9IFtcIi1pXCIsIFwiLW9cIiwgXCItLWlucHV0XCIsIFwiLS1vdXRwdXRcIiwgXCItLWZpbGVcIl07XG4gIGlmIChwcmV2aW91c0FyZyAmJiBmaWxlRmxhZ3MuaW5jbHVkZXMocHJldmlvdXNBcmcpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjb25zdCBoYXNTZXBhcmF0b3IgPSBhcmcuaW5jbHVkZXMoXCIvXCIpIHx8IGFyZy5pbmNsdWRlcyhcIlxcXFxcIik7XG4gIGNvbnN0IGhhc1JlbGF0aXZlUHJlZml4ID0gYXJnLnN0YXJ0c1dpdGgoXCIuL1wiKSB8fCBhcmcuc3RhcnRzV2l0aChcIi4uL1wiKTtcbiAgY29uc3QgaGFzRXh0ZW5zaW9uID0gQm9vbGVhbihleHRuYW1lKGFyZykpO1xuXG4gIHJldHVybiBoYXNTZXBhcmF0b3IgfHwgaGFzUmVsYXRpdmVQcmVmaXggfHwgaGFzRXh0ZW5zaW9uO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTYWZlIENvbW1hbmQgRXhlY3V0aW9uXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogU2FmZWx5IGV4ZWN1dGVzIGEgc2hlbGwgY29tbWFuZCB3aXRoIGNvbXByZWhlbnNpdmUgdmFsaWRhdGlvblxuICpcbiAqIEBwYXJhbSBjb21tYW5kIC0gVGhlIGNvbW1hbmQgdG8gZXhlY3V0ZSAobXVzdCBiZSB3aGl0ZWxpc3RlZClcbiAqIEBwYXJhbSBhcmdzIC0gQ29tbWFuZCBhcmd1bWVudHMgKHdpbGwgYmUgdmFsaWRhdGVkKVxuICogQHBhcmFtIG9wdGlvbnMgLSBFeGVjdXRpb24gb3B0aW9uc1xuICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gY29tbWFuZCBvdXRwdXRcbiAqXG4gKiBAdGhyb3dzIEVycm9yIGlmIGNvbW1hbmQgaXMgbm90IHdoaXRlbGlzdGVkLCBhcmd1bWVudHMgYXJlIGludmFsaWQsXG4gKiAgICAgICAgIG9yIGNvbW1hbmQgZXhlY3V0aW9uIGZhaWxzXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFNhZmUgdXNhZ2VcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNhZmVTcGF3bihcImZmcHJvYmVcIiwgW1wiLXZcIiwgXCJlcnJvclwiLCBcImF1ZGlvLm1wM1wiXSk7XG4gKlxuICogLy8gVW5zYWZlIC0gd2lsbCB0aHJvdyBlcnJvclxuICogYXdhaXQgc2FmZVNwYXduKFwicm1cIiwgW1wiLXJmXCIsIFwiL1wiXSk7IC8vIE5vdCB3aGl0ZWxpc3RlZFxuICogYXdhaXQgc2FmZVNwYXduKFwiZmZtcGVnXCIsIFtcImZpbGUubXAzOyBybSAtcmYgL1wiXSk7IC8vIEluamVjdGlvbiBkZXRlY3RlZFxuICpcbiAqIEBzZWN1cml0eSBUaGlzIGlzIHRoZSBwcmltYXJ5IGRlZmVuc2UgYWdhaW5zdCBjb21tYW5kIGluamVjdGlvbi5cbiAqIEtleSBzZWN1cml0eSBmZWF0dXJlczpcbiAqIC0gQ29tbWFuZCB3aGl0ZWxpc3QgcHJldmVudHMgYXJiaXRyYXJ5IGNvbW1hbmQgZXhlY3V0aW9uXG4gKiAtIEFyZ3VtZW50IHZhbGlkYXRpb24gZGV0ZWN0cyBpbmplY3Rpb24gcGF0dGVybnNcbiAqIC0gRmlsZSBwYXRoIHZhbGlkYXRpb24gcHJldmVudHMgcGF0aCB0cmF2ZXJzYWxcbiAqIC0gTm8gc2hlbGwgaW50ZXJwcmV0YXRpb24gKHNwYXduIHZzIGV4ZWMpXG4gKiAtIFRpbWVvdXQgcHJldmVudHMgcmVzb3VyY2UgZXhoYXVzdGlvblxuICogLSBCdWZmZXIgbGltaXRzIHByZXZlbnQgbWVtb3J5IGV4aGF1c3Rpb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhZmVTcGF3bihcbiAgY29tbWFuZDogc3RyaW5nLFxuICBhcmdzOiBzdHJpbmdbXSxcbiAgb3B0aW9ucz86IFNhZmVTcGF3bk9wdGlvbnNcbik6IFByb21pc2U8Q29tbWFuZFJlc3VsdD4ge1xuICAvLyBOb3JtYWxpemUgb3B0aW9uc1xuICBjb25zdCBiYXNlRW52OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gIGlmIChwcm9jZXNzLmVudikge1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHByb2Nlc3MuZW52KSkge1xuICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmFzZUVudltrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgb3B0czogUmVxdWlyZWQ8U2FmZVNwYXduT3B0aW9ucz4gPSB7XG4gICAgY3dkOiBvcHRpb25zPy5jd2QgfHwgcHJvY2Vzcy5jd2QoKSxcbiAgICBlbnY6IHsgLi4uYmFzZUVudiwgLi4ub3B0aW9ucz8uZW52IH0sXG4gICAgdGltZW91dDogb3B0aW9ucz8udGltZW91dCA/PyAzMDAwMDAsIC8vIDUgbWludXRlcyBkZWZhdWx0XG4gICAgbWF4QnVmZmVyOiBvcHRpb25zPy5tYXhCdWZmZXIgPz8gMTAgKiAxMDI0ICogMTAyNCwgLy8gMTBNQiBkZWZhdWx0XG4gICAgdmFsaWRhdGVQYXRoczogb3B0aW9ucz8udmFsaWRhdGVQYXRocyA/PyB0cnVlLFxuICB9O1xuXG4gIC8vIFZhbGlkYXRlIGNvbW1hbmQgaXMgd2hpdGVsaXN0ZWRcbiAgdmFsaWRhdGVDb21tYW5kKGNvbW1hbmQpO1xuXG4gIC8vIFZhbGlkYXRlIGFuZCBzYW5pdGl6ZSBhcmd1bWVudHNcbiAgY29uc3QgdmFsaWRhdGVkQXJncyA9IHZhbGlkYXRlQXJndW1lbnRzKGFyZ3MsIHtcbiAgICB2YWxpZGF0ZVBhdGhzOiBvcHRzLnZhbGlkYXRlUGF0aHNcbiAgfSk7XG5cbiAgLy8gUHJlcGFyZSBzcGF3biBvcHRpb25zXG4gIGNvbnN0IHNwYXduT3B0aW9uczogU3Bhd25PcHRpb25zID0ge1xuICAgIGN3ZDogb3B0cy5jd2QsXG4gICAgZW52OiBvcHRzLmVudixcbiAgICBzdGRpbzogW1wiaWdub3JlXCIsIFwicGlwZVwiLCBcInBpcGVcIl0sIC8vIE5vIHN0ZGluLCBjYXB0dXJlIHN0ZG91dC9zdGRlcnJcbiAgfTtcblxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGxldCBzdGRvdXQgPSBcIlwiO1xuICAgIGxldCBzdGRlcnIgPSBcIlwiO1xuICAgIGxldCBraWxsZWQgPSBmYWxzZTtcblxuICAgIC8vIFN0YXJ0IHRoZSBwcm9jZXNzXG4gICAgY29uc3QgY2hpbGQgPSBzcGF3bihjb21tYW5kLCB2YWxpZGF0ZWRBcmdzLCBzcGF3bk9wdGlvbnMpO1xuXG4gICAgLy8gU2V0IHRpbWVvdXRcbiAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGtpbGxlZCA9IHRydWU7XG4gICAgICBjaGlsZC5raWxsKFwiU0lHVEVSTVwiKTtcblxuICAgICAgLy8gRm9yY2Uga2lsbCBhZnRlciA1IHNlY29uZHNcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoIWNoaWxkLmtpbGxlZCkge1xuICAgICAgICAgIGNoaWxkLmtpbGwoXCJTSUdLSUxMXCIpO1xuICAgICAgICB9XG4gICAgICB9LCA1MDAwKTtcbiAgICB9LCBvcHRzLnRpbWVvdXQpO1xuXG4gICAgLy8gQ29sbGVjdCBzdGRvdXRcbiAgICBjaGlsZC5zdGRvdXQ/Lm9uKFwiZGF0YVwiLCAoY2h1bms6IEJ1ZmZlcikgPT4ge1xuICAgICAgc3Rkb3V0ICs9IGNodW5rLnRvU3RyaW5nKCk7XG5cbiAgICAgIC8vIENoZWNrIGJ1ZmZlciBzaXplXG4gICAgICBpZiAoc3Rkb3V0Lmxlbmd0aCA+IG9wdHMubWF4QnVmZmVyKSB7XG4gICAgICAgIGtpbGxlZCA9IHRydWU7XG4gICAgICAgIGNoaWxkLmtpbGwoXCJTSUdURVJNXCIpO1xuICAgICAgICByZWplY3QobmV3IEVycm9yKFxuICAgICAgICAgIGBDb21tYW5kIG91dHB1dCBleGNlZWRlZCBtYXhpbXVtIGJ1ZmZlciBzaXplICgke29wdHMubWF4QnVmZmVyfSBieXRlcylgXG4gICAgICAgICkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQ29sbGVjdCBzdGRlcnJcbiAgICBjaGlsZC5zdGRlcnI/Lm9uKFwiZGF0YVwiLCAoY2h1bms6IEJ1ZmZlcikgPT4ge1xuICAgICAgc3RkZXJyICs9IGNodW5rLnRvU3RyaW5nKCk7XG5cbiAgICAgIC8vIENoZWNrIGJ1ZmZlciBzaXplXG4gICAgICBpZiAoc3RkZXJyLmxlbmd0aCA+IG9wdHMubWF4QnVmZmVyKSB7XG4gICAgICAgIGtpbGxlZCA9IHRydWU7XG4gICAgICAgIGNoaWxkLmtpbGwoXCJTSUdURVJNXCIpO1xuICAgICAgICByZWplY3QobmV3IEVycm9yKFxuICAgICAgICAgIGBDb21tYW5kIGVycm9yIG91dHB1dCBleGNlZWRlZCBtYXhpbXVtIGJ1ZmZlciBzaXplICgke29wdHMubWF4QnVmZmVyfSBieXRlcylgXG4gICAgICAgICkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gSGFuZGxlIHByb2Nlc3MgZXJyb3JzIChlLmcuLCBjb21tYW5kIG5vdCBmb3VuZClcbiAgICBjaGlsZC5vbihcImVycm9yXCIsIChlcnJvcikgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICByZWplY3QobmV3IEVycm9yKFxuICAgICAgICBgRmFpbGVkIHRvIGV4ZWN1dGUgY29tbWFuZCBcIiR7Y29tbWFuZH1cIjogJHtlcnJvci5tZXNzYWdlfWBcbiAgICAgICkpO1xuICAgIH0pO1xuXG4gICAgLy8gSGFuZGxlIHByb2Nlc3MgZXhpdFxuICAgIGNoaWxkLm9uKFwiY2xvc2VcIiwgKGNvZGUpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXG4gICAgICBpZiAoa2lsbGVkKSB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoXG4gICAgICAgICAgYENvbW1hbmQgXCIke2NvbW1hbmR9XCIgd2FzIGtpbGxlZCAodGltZW91dCBvciBidWZmZXIgZXhjZWVkZWQpYFxuICAgICAgICApKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBleGl0Q29kZSA9IGNvZGUgPz8gLTE7XG5cbiAgICAgIGlmIChleGl0Q29kZSA9PT0gMCkge1xuICAgICAgICAvLyBTdWNjZXNzXG4gICAgICAgIHJlc29sdmUoeyBzdGRvdXQsIHN0ZGVyciwgZXhpdENvZGU6IDAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb24temVybyBleGl0IGNvZGVcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcbiAgICAgICAgICBgJHtjb21tYW5kfSBleGl0ZWQgd2l0aCBjb2RlICR7ZXhpdENvZGV9OiAke3N0ZGVyciB8fCBzdGRvdXR9YFxuICAgICAgICApKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qKlxuICogV3JhcHBlciBmb3IgcnVubmluZyBmZm1wZWcgY29tbWFuZHMgc2FmZWx5XG4gKlxuICogQHBhcmFtIGFyZ3MgLSBmZm1wZWcgYXJndW1lbnRzICh3aXRob3V0IFwiZmZtcGVnXCIgY29tbWFuZClcbiAqIEBwYXJhbSBvcHRpb25zIC0gRXhlY3V0aW9uIG9wdGlvbnNcbiAqIEByZXR1cm5zIENvbW1hbmQgcmVzdWx0XG4gKlxuICogQGV4YW1wbGVcbiAqIGF3YWl0IHJ1bkZGbXBlZyhbXCItaVwiLCBcImlucHV0Lm1wM1wiLCBcIm91dHB1dC53YXZcIl0pO1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuRkZtcGVnKFxuICBhcmdzOiBzdHJpbmdbXSxcbiAgb3B0aW9ucz86IFNhZmVTcGF3bk9wdGlvbnNcbik6IFByb21pc2U8Q29tbWFuZFJlc3VsdD4ge1xuICByZXR1cm4gc2FmZVNwYXduKFwiZmZtcGVnXCIsIGFyZ3MsIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIFdyYXBwZXIgZm9yIHJ1bm5pbmcgZmZwcm9iZSBjb21tYW5kcyBzYWZlbHlcbiAqXG4gKiBAcGFyYW0gYXJncyAtIGZmcHJvYmUgYXJndW1lbnRzICh3aXRob3V0IFwiZmZwcm9iZVwiIGNvbW1hbmQpXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEV4ZWN1dGlvbiBvcHRpb25zXG4gKiBAcmV0dXJucyBDb21tYW5kIHJlc3VsdFxuICpcbiAqIEBleGFtcGxlXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBydW5GRnByb2JlKFtcIi12XCIsIFwiZXJyb3JcIiwgXCItc2hvd19mb3JtYXRcIiwgXCJhdWRpby5tcDNcIl0pO1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuRkZwcm9iZShcbiAgYXJnczogc3RyaW5nW10sXG4gIG9wdGlvbnM/OiBTYWZlU3Bhd25PcHRpb25zXG4pOiBQcm9taXNlPENvbW1hbmRSZXN1bHQ+IHtcbiAgcmV0dXJuIHNhZmVTcGF3bihcImZmcHJvYmVcIiwgYXJncywgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgY29tbWFuZCBpcyBhdmFpbGFibGUgaW4gdGhlIHN5c3RlbSBQQVRIXG4gKlxuICogQHBhcmFtIGNvbW1hbmQgLSBUaGUgY29tbWFuZCB0byBjaGVja1xuICogQHJldHVybnMgVHJ1ZSBpZiBjb21tYW5kIGlzIGF2YWlsYWJsZVxuICpcbiAqIEBleGFtcGxlXG4gKiBpZiAoYXdhaXQgaXNDb21tYW5kQXZhaWxhYmxlKFwiZmZtcGVnXCIpKSB7XG4gKiAgIC8vIGZmbXBlZyBpcyBpbnN0YWxsZWRcbiAqIH1cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGlzQ29tbWFuZEF2YWlsYWJsZShjb21tYW5kOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICB2YWxpZGF0ZUNvbW1hbmQoY29tbWFuZCk7XG5cbiAgICAvLyBUcnkgdG8gZ2V0IHZlcnNpb24gb3IgaGVscCAobW9zdCBjb21tYW5kcyBzdXBwb3J0IC0tdmVyc2lvbiBvciAtLWhlbHApXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2FmZVNwYXduKFxuICAgICAgY29tbWFuZCxcbiAgICAgIFtcIi0tdmVyc2lvblwiXSxcbiAgICAgIHsgdGltZW91dDogNTAwMCwgdmFsaWRhdGVQYXRoczogZmFsc2UgfVxuICAgICk7XG5cbiAgICByZXR1cm4gcmVzdWx0LmV4aXRDb2RlID09PSAwO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInNwYXduIiwiZXh0bmFtZSIsInZhbGlkYXRlRmlsZVBhdGgiLCJBTExPV0VEX0NPTU1BTkRTIiwiU2V0IiwidmFsaWRhdGVDb21tYW5kIiwiY29tbWFuZCIsIkVycm9yIiwiYmFzZUNvbW1hbmQiLCJzcGxpdCIsInBvcCIsImhhcyIsIkFycmF5IiwiZnJvbSIsImpvaW4iLCJ2YWxpZGF0ZUFyZ3VtZW50cyIsImFyZ3MiLCJvcHRpb25zIiwidmFsaWRhdGVkQXJncyIsImkiLCJsZW5ndGgiLCJhcmciLCJpbmNsdWRlcyIsInZhbGlkYXRlUGF0aHMiLCJpc0ZpbGVQYXRoIiwidmFsaWRhdGlvbiIsIm11c3RFeGlzdCIsImFsbG93QWJzb2x1dGUiLCJ2YWxpZCIsImVycm9yIiwiaGludCIsInB1c2giLCJzYW5pdGl6ZWRQYXRoIiwicHJldmlvdXNBcmciLCJmaWxlRmxhZ3MiLCJoYXNTZXBhcmF0b3IiLCJoYXNSZWxhdGl2ZVByZWZpeCIsInN0YXJ0c1dpdGgiLCJoYXNFeHRlbnNpb24iLCJCb29sZWFuIiwic2FmZVNwYXduIiwiYmFzZUVudiIsInByb2Nlc3MiLCJlbnYiLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJ1bmRlZmluZWQiLCJvcHRzIiwiY3dkIiwidGltZW91dCIsIm1heEJ1ZmZlciIsInNwYXduT3B0aW9ucyIsInN0ZGlvIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJzdGRvdXQiLCJzdGRlcnIiLCJraWxsZWQiLCJjaGlsZCIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJraWxsIiwib24iLCJjaHVuayIsInRvU3RyaW5nIiwiY2xlYXJUaW1lb3V0IiwibWVzc2FnZSIsImNvZGUiLCJleGl0Q29kZSIsInJ1bkZGbXBlZyIsInJ1bkZGcHJvYmUiLCJpc0NvbW1hbmRBdmFpbGFibGUiLCJyZXN1bHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../src/utils/shell-safe.ts\n");

/***/ }),

/***/ "(rsc)/../../src/utils/validation.ts":
/*!*************************************!*\
  !*** ../../src/utils/validation.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PathValidationError: () => (/* binding */ PathValidationError),\n/* harmony export */   isPathTraversal: () => (/* binding */ isPathTraversal),\n/* harmony export */   isSensitiveSystemPath: () => (/* binding */ isSensitiveSystemPath),\n/* harmony export */   normalizeAndValidatePath: () => (/* binding */ normalizeAndValidatePath),\n/* harmony export */   sanitizeForShellCommand: () => (/* binding */ sanitizeForShellCommand),\n/* harmony export */   validateDirectoryPath: () => (/* binding */ validateDirectoryPath),\n/* harmony export */   validateFilePath: () => (/* binding */ validateFilePath),\n/* harmony export */   validateOutputPath: () => (/* binding */ validateOutputPath),\n/* harmony export */   validateShellSafe: () => (/* binding */ validateShellSafe)\n/* harmony export */ });\n/* harmony import */ var node_fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:fs */ \"node:fs\");\n/* harmony import */ var node_fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_1__);\n/**\n * Input Validation and Path Security Utilities\n *\n * This module provides comprehensive validation for file paths and user inputs\n * to prevent security vulnerabilities including:\n * - Path traversal attacks (../)\n * - Command injection\n * - Access to sensitive system files\n * - Malicious file extensions\n *\n * @security CRITICAL - These functions are the first line of defense against\n * path traversal and command injection attacks. Any modifications must be\n * carefully reviewed for security implications.\n */ \n\n// ============================================================================\n// Custom Error Types\n// ============================================================================\n/**\n * Error thrown when path validation fails\n * This error type allows catching and handling validation failures separately\n */ class PathValidationError extends Error {\n    constructor(message, attemptedPath, hint){\n        super(message);\n        this.name = \"PathValidationError\";\n        this.validationIssue = message;\n        this.attemptedPath = attemptedPath;\n        this.hint = hint;\n        // Maintain proper prototype chain for instanceof checks\n        Object.setPrototypeOf(this, PathValidationError.prototype);\n    }\n}\n// ============================================================================\n// Security Constants\n// ============================================================================\n/**\n * Dangerous path patterns that should be blocked\n * These patterns indicate potential path traversal or access to sensitive files\n */ const DANGEROUS_PATH_PATTERNS = [\n    /\\.\\./,\n    /\\/\\.\\./,\n    /\\.\\.\\//,\n    /\\.\\.\\\\/,\n    /~\\//,\n    /\\$\\{/,\n    /\\$\\(/,\n    /`/,\n    /\\|/,\n    /;/,\n    /&/,\n    /\\n/,\n    /\\r/,\n    /\\x00/\n];\n/**\n * File paths that should always be blocked (sensitive system files)\n */ const BLOCKED_PATHS = [\n    \"/etc/passwd\",\n    \"/etc/shadow\",\n    \"/etc/hosts\",\n    \"/.env\",\n    \"/.aws/credentials\",\n    \"/.ssh/id_rsa\",\n    \"/proc/self/environ\",\n    \"C:\\\\Windows\\\\System32\",\n    \"C:\\\\Users\\\\\"\n];\n/**\n * Shell metacharacters that need escaping\n * These characters have special meaning in shells and must be escaped\n */ const SHELL_METACHARACTERS = /[;&|`$()\\\\<>\\n\\r\\x00\"']/g;\n// ============================================================================\n// Path Validation Functions\n// ============================================================================\n/**\n * Detects potential path traversal attempts\n *\n * @param filePath - The path to check\n * @returns True if path traversal is detected\n *\n * @example\n * isPathTraversal(\"../etc/passwd\") // true\n * isPathTraversal(\"uploads/file.mp3\") // false\n */ function isPathTraversal(filePath) {\n    if (!filePath) return false;\n    // Check for .. in the path\n    if (filePath.includes(\"..\")) {\n        return true;\n    }\n    // Check for dangerous patterns\n    return DANGEROUS_PATH_PATTERNS.some((pattern)=>pattern.test(filePath));\n}\n/**\n * Checks if a path attempts to access sensitive system files\n *\n * @param filePath - The path to check\n * @returns True if path accesses sensitive files\n */ function isSensitiveSystemPath(filePath) {\n    if (!filePath) return false;\n    const normalized = node_path__WEBPACK_IMPORTED_MODULE_1__.normalize(filePath).toLowerCase();\n    return BLOCKED_PATHS.some((blocked)=>{\n        const blockedNormalized = node_path__WEBPACK_IMPORTED_MODULE_1__.normalize(blocked).toLowerCase();\n        return normalized === blockedNormalized || normalized.startsWith(blockedNormalized);\n    });\n}\n/**\n * Validates and normalizes a file path with comprehensive security checks\n *\n * @param filePath - The file path to validate\n * @param options - Validation options\n * @param options.mustExist - If true, path must exist on filesystem\n * @param options.allowAbsolute - If true, allow absolute paths\n * @param options.extensions - Allowed file extensions (e.g., [\".mp3\", \".wav\"])\n * @param options.baseDir - Base directory to resolve relative paths against\n * @param options.mustBeFile - If true, path must be a file (not directory)\n * @param options.mustBeDirectory - If true, path must be a directory\n *\n * @returns Validation result with sanitized path if valid\n *\n * @example\n * validateFilePath(\"uploads/audio.mp3\", {\n *   mustExist: true,\n *   extensions: [\".mp3\", \".wav\"]\n * })\n *\n * @security This function is critical for preventing path traversal attacks\n */ function validateFilePath(filePath, options) {\n    // Normalize options\n    const opts = {\n        mustExist: options?.mustExist ?? false,\n        allowAbsolute: options?.allowAbsolute ?? false,\n        extensions: options?.extensions ?? [],\n        baseDir: options?.baseDir ?? process.cwd(),\n        mustBeFile: options?.mustBeFile ?? false,\n        mustBeDirectory: options?.mustBeDirectory ?? false\n    };\n    // Basic validation\n    if (!filePath || typeof filePath !== \"string\") {\n        return {\n            valid: false,\n            error: \"File path must be a non-empty string\",\n            hint: \"Provide a valid file path\"\n        };\n    }\n    // Check length limits\n    if (filePath.length > 4096) {\n        return {\n            valid: false,\n            error: \"File path exceeds maximum length\",\n            hint: \"Path must be less than 4096 characters\"\n        };\n    }\n    // Check for path traversal attempts\n    if (isPathTraversal(filePath)) {\n        return {\n            valid: false,\n            error: \"Path traversal detected\",\n            hint: \"Path contains invalid characters or patterns (../, ~/, etc.)\"\n        };\n    }\n    // Check for sensitive system paths\n    if (isSensitiveSystemPath(filePath)) {\n        return {\n            valid: false,\n            error: \"Access to sensitive system files is blocked\",\n            hint: \"Cannot access system configuration or credential files\"\n        };\n    }\n    // Normalize and resolve the path\n    let normalizedPath;\n    try {\n        if (node_path__WEBPACK_IMPORTED_MODULE_1__.isAbsolute(filePath)) {\n            if (!opts.allowAbsolute) {\n                return {\n                    valid: false,\n                    error: \"Absolute paths are not allowed\",\n                    hint: \"Use relative paths only\"\n                };\n            }\n            normalizedPath = node_path__WEBPACK_IMPORTED_MODULE_1__.normalize(filePath);\n        } else {\n            normalizedPath = node_path__WEBPACK_IMPORTED_MODULE_1__.resolve(opts.baseDir, filePath);\n        }\n    } catch (error) {\n        return {\n            valid: false,\n            error: \"Failed to normalize path\",\n            hint: \"Path contains invalid characters\"\n        };\n    }\n    // Ensure normalized path is still within base directory (prevent traversal via normalization)\n    if (!opts.allowAbsolute) {\n        const normalizedBase = node_path__WEBPACK_IMPORTED_MODULE_1__.resolve(opts.baseDir);\n        const relative = node_path__WEBPACK_IMPORTED_MODULE_1__.relative(normalizedBase, normalizedPath);\n        if (relative.startsWith(\"..\") || node_path__WEBPACK_IMPORTED_MODULE_1__.isAbsolute(relative)) {\n            return {\n                valid: false,\n                error: \"Path escapes base directory\",\n                hint: \"Path must remain within the project directory\"\n            };\n        }\n    }\n    // Check if path exists (if required)\n    if (opts.mustExist) {\n        if (!node_fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(normalizedPath)) {\n            return {\n                valid: false,\n                error: `File not found: ${filePath}`,\n                hint: \"Ensure the file exists at the specified path\"\n            };\n        }\n        // Check if it's a file or directory\n        const stats = node_fs__WEBPACK_IMPORTED_MODULE_0__.statSync(normalizedPath);\n        if (opts.mustBeFile && !stats.isFile()) {\n            return {\n                valid: false,\n                error: \"Path must be a file, not a directory\",\n                hint: \"Specify a file path, not a directory\"\n            };\n        }\n        if (opts.mustBeDirectory && !stats.isDirectory()) {\n            return {\n                valid: false,\n                error: \"Path must be a directory, not a file\",\n                hint: \"Specify a directory path, not a file\"\n            };\n        }\n    }\n    // Validate file extension\n    if (opts.extensions.length > 0) {\n        const ext = node_path__WEBPACK_IMPORTED_MODULE_1__.extname(normalizedPath).toLowerCase();\n        const allowedExtensions = opts.extensions.map((e)=>e.toLowerCase());\n        if (!allowedExtensions.includes(ext)) {\n            return {\n                valid: false,\n                error: `Invalid file extension: ${ext}`,\n                hint: `Allowed extensions: ${opts.extensions.join(\", \")}`\n            };\n        }\n    }\n    // All checks passed\n    return {\n        valid: true,\n        sanitizedPath: normalizedPath\n    };\n}\n/**\n * Normalizes and validates a path against a base directory\n * Ensures the resolved path remains within the base directory\n *\n * @param filePath - The path to validate\n * @param baseDir - The base directory to resolve against\n * @returns Normalized absolute path\n * @throws PathValidationError if validation fails\n *\n * @example\n * normalizeAndValidatePath(\"uploads/file.mp3\", \"/app\")\n * // Returns: \"/app/uploads/file.mp3\"\n *\n * normalizeAndValidatePath(\"../etc/passwd\", \"/app\")\n * // Throws: PathValidationError\n */ function normalizeAndValidatePath(filePath, baseDir) {\n    const result = validateFilePath(filePath, {\n        baseDir,\n        allowAbsolute: false\n    });\n    if (!result.valid) {\n        throw new PathValidationError(result.error || \"Path validation failed\", filePath, result.hint);\n    }\n    return result.sanitizedPath;\n}\n/**\n * Validates that a directory path exists or can be created\n * If mustExist is false, validates that parent directory exists\n *\n * @param dirPath - Directory path to validate\n * @param options - Validation options\n * @returns Validation result\n */ function validateDirectoryPath(dirPath, options) {\n    const opts = {\n        mustExist: options?.mustExist ?? false,\n        allowCreate: options?.allowCreate ?? true\n    };\n    // First validate as a general path\n    const baseValidation = validateFilePath(dirPath, {\n        mustExist: opts.mustExist,\n        mustBeDirectory: opts.mustExist\n    });\n    if (!baseValidation.valid) {\n        return baseValidation;\n    }\n    // If directory doesn't need to exist, check parent directory\n    if (!opts.mustExist && opts.allowCreate) {\n        const parentDir = node_path__WEBPACK_IMPORTED_MODULE_1__.dirname(baseValidation.sanitizedPath);\n        if (!node_fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(parentDir)) {\n            return {\n                valid: false,\n                error: \"Parent directory does not exist\",\n                hint: `Create parent directory first: ${parentDir}`\n            };\n        }\n        const parentStats = node_fs__WEBPACK_IMPORTED_MODULE_0__.statSync(parentDir);\n        if (!parentStats.isDirectory()) {\n            return {\n                valid: false,\n                error: \"Parent path is not a directory\",\n                hint: \"Parent must be a directory\"\n            };\n        }\n    }\n    return baseValidation;\n}\n// ============================================================================\n// Shell Command Sanitization\n// ============================================================================\n/**\n * Sanitizes a string for safe use in shell commands\n * Escapes shell metacharacters and dangerous patterns\n *\n * @param arg - The argument to sanitize\n * @returns Sanitized argument safe for shell execution\n *\n * @warning This function should be used with caution. Prefer using\n * argument arrays with spawn() over shell string concatenation.\n *\n * @example\n * sanitizeForShellCommand(\"file.mp3\") // \"file.mp3\"\n * sanitizeForShellCommand(\"file; rm -rf /\") // \"file\\\\; rm -rf /\"\n */ function sanitizeForShellCommand(arg) {\n    if (!arg || typeof arg !== \"string\") {\n        return \"\";\n    }\n    // Remove null bytes\n    let sanitized = arg.replace(/\\x00/g, \"\");\n    // Escape shell metacharacters\n    sanitized = sanitized.replace(SHELL_METACHARACTERS, (char)=>{\n        // For backtick, quote, and dollar sign, use backslash escape\n        if (char === \"`\" || char === \"$\" || char === '\"' || char === \"'\") {\n            return \"\\\\\" + char;\n        }\n        // For other dangerous characters, replace with underscore\n        return \"_\";\n    });\n    return sanitized;\n}\n/**\n * Validates that a string does not contain shell injection patterns\n *\n * @param input - The input to validate\n * @returns Validation result\n */ function validateShellSafe(input) {\n    if (!input || typeof input !== \"string\") {\n        return {\n            valid: false,\n            error: \"Input must be a non-empty string\"\n        };\n    }\n    // Check for shell metacharacters\n    if (SHELL_METACHARACTERS.test(input)) {\n        return {\n            valid: false,\n            error: \"Input contains shell metacharacters\",\n            hint: \"Remove special characters like ;, &, |, $, `, etc.\"\n        };\n    }\n    // Check for command substitution patterns\n    if (input.includes(\"$(\") || input.includes(\"`\")) {\n        return {\n            valid: false,\n            error: \"Command substitution detected\",\n            hint: \"Remove $() or backtick command substitution\"\n        };\n    }\n    return {\n        valid: true,\n        sanitizedPath: input\n    };\n}\n/**\n * Validates output path for writing files\n * Ensures parent directory exists and path is safe\n *\n * @param outputPath - The output file path\n * @param options - Validation options\n * @returns Validation result\n */ function validateOutputPath(outputPath, options) {\n    const opts = {\n        extensions: options?.extensions ?? [],\n        allowOverwrite: options?.allowOverwrite ?? true\n    };\n    // Validate basic path security\n    const pathValidation = validateFilePath(outputPath, {\n        mustExist: false,\n        extensions: opts.extensions,\n        mustBeFile: false,\n        allowAbsolute: true\n    });\n    if (!pathValidation.valid) {\n        return pathValidation;\n    }\n    const sanitizedPath = pathValidation.sanitizedPath;\n    // Check if file already exists\n    if (!opts.allowOverwrite && node_fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(sanitizedPath)) {\n        return {\n            valid: false,\n            error: \"Output file already exists\",\n            hint: \"Choose a different output path or enable overwrite\"\n        };\n    }\n    // Validate parent directory\n    const parentDir = node_path__WEBPACK_IMPORTED_MODULE_1__.dirname(sanitizedPath);\n    if (!node_fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(parentDir)) {\n        return {\n            valid: false,\n            error: \"Output directory does not exist\",\n            hint: `Create directory first: ${parentDir}`\n        };\n    }\n    const parentStats = node_fs__WEBPACK_IMPORTED_MODULE_0__.statSync(parentDir);\n    if (!parentStats.isDirectory()) {\n        return {\n            valid: false,\n            error: \"Parent path is not a directory\",\n            hint: \"Output path parent must be a directory\"\n        };\n    }\n    // Check write permissions by testing if directory is writable\n    try {\n        node_fs__WEBPACK_IMPORTED_MODULE_0__.accessSync(parentDir, node_fs__WEBPACK_IMPORTED_MODULE_0__.constants.W_OK);\n    } catch (error) {\n        return {\n            valid: false,\n            error: \"No write permission for output directory\",\n            hint: \"Ensure you have write permissions for the output directory\"\n        };\n    }\n    return {\n        valid: true,\n        sanitizedPath\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBTztZQUNQQyxPQUFPO1lBQ1BsQyxNQUFNO1FBQ1I7SUFDRjtJQUVBLDRCQUE0QjtJQUM1QixNQUFNMkQsWUFBWWpFLDhDQUFZLENBQUMwRDtJQUUvQixJQUFJLENBQUMzRCwrQ0FBYSxDQUFDa0UsWUFBWTtRQUM3QixPQUFPO1lBQ0wxQixPQUFPO1lBQ1BDLE9BQU87WUFDUGxDLE1BQU0sQ0FBQyx3QkFBd0IsRUFBRTJELFVBQVUsQ0FBQztRQUM5QztJQUNGO0lBRUEsTUFBTUUsY0FBY3BFLDZDQUFXLENBQUNrRTtJQUNoQyxJQUFJLENBQUNFLFlBQVloQixXQUFXLElBQUk7UUFDOUIsT0FBTztZQUNMWixPQUFPO1lBQ1BDLE9BQU87WUFDUGxDLE1BQU07UUFDUjtJQUNGO0lBRUEsOERBQThEO0lBQzlELElBQUk7UUFDRlAsK0NBQWEsQ0FBQ2tFLFdBQVdsRSw4Q0FBWSxDQUFDa0YsSUFBSTtJQUM1QyxFQUFFLE9BQU96QyxPQUFPO1FBQ2QsT0FBTztZQUNMRCxPQUFPO1lBQ1BDLE9BQU87WUFDUGxDLE1BQU07UUFDUjtJQUNGO0lBRUEsT0FBTztRQUNMaUMsT0FBTztRQUNQbUI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHBpcC91aS8uLi8uLi9zcmMvdXRpbHMvdmFsaWRhdGlvbi50cz9iYjI1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSW5wdXQgVmFsaWRhdGlvbiBhbmQgUGF0aCBTZWN1cml0eSBVdGlsaXRpZXNcbiAqXG4gKiBUaGlzIG1vZHVsZSBwcm92aWRlcyBjb21wcmVoZW5zaXZlIHZhbGlkYXRpb24gZm9yIGZpbGUgcGF0aHMgYW5kIHVzZXIgaW5wdXRzXG4gKiB0byBwcmV2ZW50IHNlY3VyaXR5IHZ1bG5lcmFiaWxpdGllcyBpbmNsdWRpbmc6XG4gKiAtIFBhdGggdHJhdmVyc2FsIGF0dGFja3MgKC4uLylcbiAqIC0gQ29tbWFuZCBpbmplY3Rpb25cbiAqIC0gQWNjZXNzIHRvIHNlbnNpdGl2ZSBzeXN0ZW0gZmlsZXNcbiAqIC0gTWFsaWNpb3VzIGZpbGUgZXh0ZW5zaW9uc1xuICpcbiAqIEBzZWN1cml0eSBDUklUSUNBTCAtIFRoZXNlIGZ1bmN0aW9ucyBhcmUgdGhlIGZpcnN0IGxpbmUgb2YgZGVmZW5zZSBhZ2FpbnN0XG4gKiBwYXRoIHRyYXZlcnNhbCBhbmQgY29tbWFuZCBpbmplY3Rpb24gYXR0YWNrcy4gQW55IG1vZGlmaWNhdGlvbnMgbXVzdCBiZVxuICogY2FyZWZ1bGx5IHJldmlld2VkIGZvciBzZWN1cml0eSBpbXBsaWNhdGlvbnMuXG4gKi9cblxuaW1wb3J0ICogYXMgZnMgZnJvbSBcIm5vZGU6ZnNcIjtcbmltcG9ydCAqIGFzIHBhdGggZnJvbSBcIm5vZGU6cGF0aFwiO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBDdXN0b20gRXJyb3IgVHlwZXNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBwYXRoIHZhbGlkYXRpb24gZmFpbHNcbiAqIFRoaXMgZXJyb3IgdHlwZSBhbGxvd3MgY2F0Y2hpbmcgYW5kIGhhbmRsaW5nIHZhbGlkYXRpb24gZmFpbHVyZXMgc2VwYXJhdGVseVxuICovXG5leHBvcnQgY2xhc3MgUGF0aFZhbGlkYXRpb25FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgcHVibGljIHJlYWRvbmx5IHZhbGlkYXRpb25Jc3N1ZTogc3RyaW5nO1xuICBwdWJsaWMgcmVhZG9ubHkgYXR0ZW1wdGVkUGF0aDogc3RyaW5nO1xuICBwdWJsaWMgcmVhZG9ubHkgaGludD86IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIGF0dGVtcHRlZFBhdGg6IHN0cmluZywgaGludD86IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9IFwiUGF0aFZhbGlkYXRpb25FcnJvclwiO1xuICAgIHRoaXMudmFsaWRhdGlvbklzc3VlID0gbWVzc2FnZTtcbiAgICB0aGlzLmF0dGVtcHRlZFBhdGggPSBhdHRlbXB0ZWRQYXRoO1xuICAgIHRoaXMuaGludCA9IGhpbnQ7XG5cbiAgICAvLyBNYWludGFpbiBwcm9wZXIgcHJvdG90eXBlIGNoYWluIGZvciBpbnN0YW5jZW9mIGNoZWNrc1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBQYXRoVmFsaWRhdGlvbkVycm9yLnByb3RvdHlwZSk7XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVmFsaWRhdGlvbiBSZXN1bHQgVHlwZXNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBSZXN1bHQgb2YgcGF0aCB2YWxpZGF0aW9uIG9wZXJhdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRpb25SZXN1bHQge1xuICAvKiogV2hldGhlciB0aGUgdmFsaWRhdGlvbiBwYXNzZWQgKi9cbiAgdmFsaWQ6IGJvb2xlYW47XG4gIC8qKiBTYW5pdGl6ZWQvbm9ybWFsaXplZCBwYXRoIChvbmx5IHByZXNlbnQgaWYgdmFsaWQpICovXG4gIHNhbml0aXplZFBhdGg/OiBzdHJpbmc7XG4gIC8qKiBFcnJvciBtZXNzYWdlIChvbmx5IHByZXNlbnQgaWYgaW52YWxpZCkgKi9cbiAgZXJyb3I/OiBzdHJpbmc7XG4gIC8qKiBIZWxwZnVsIGhpbnQgZm9yIHRoZSB1c2VyIChvbmx5IHByZXNlbnQgaWYgaW52YWxpZCkgKi9cbiAgaGludD86IHN0cmluZztcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU2VjdXJpdHkgQ29uc3RhbnRzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogRGFuZ2Vyb3VzIHBhdGggcGF0dGVybnMgdGhhdCBzaG91bGQgYmUgYmxvY2tlZFxuICogVGhlc2UgcGF0dGVybnMgaW5kaWNhdGUgcG90ZW50aWFsIHBhdGggdHJhdmVyc2FsIG9yIGFjY2VzcyB0byBzZW5zaXRpdmUgZmlsZXNcbiAqL1xuY29uc3QgREFOR0VST1VTX1BBVEhfUEFUVEVSTlMgPSBbXG4gIC9cXC5cXC4vLCAgICAgICAgICAgLy8gUGF0aCB0cmF2ZXJzYWwgKC4uKVxuICAvXFwvXFwuXFwuLywgICAgICAgICAvLyBQYXRoIHRyYXZlcnNhbCB3aXRoIHNsYXNoXG4gIC9cXC5cXC5cXC8vLCAgICAgICAgIC8vIFBhdGggdHJhdmVyc2FsIHdpdGggdHJhaWxpbmcgc2xhc2hcbiAgL1xcLlxcLlxcXFwvLCAgICAgICAgIC8vIFdpbmRvd3MgcGF0aCB0cmF2ZXJzYWxcbiAgL35cXC8vLCAgICAgICAgICAgIC8vIEhvbWUgZGlyZWN0b3J5IGV4cGFuc2lvblxuICAvXFwkXFx7LywgICAgICAgICAgIC8vIFZhcmlhYmxlIGludGVycG9sYXRpb25cbiAgL1xcJFxcKC8sICAgICAgICAgICAvLyBDb21tYW5kIHN1YnN0aXR1dGlvblxuICAvYC8sICAgICAgICAgICAgICAvLyBCYWNrdGlja3MgZm9yIGNvbW1hbmQgc3Vic3RpdHV0aW9uXG4gIC9cXHwvLCAgICAgICAgICAgICAvLyBQaXBlIG9wZXJhdG9yXG4gIC87LywgICAgICAgICAgICAgIC8vIENvbW1hbmQgc2VwYXJhdG9yXG4gIC8mLywgICAgICAgICAgICAgIC8vIEJhY2tncm91bmQgb3BlcmF0b3JcbiAgL1xcbi8sICAgICAgICAgICAgIC8vIE5ld2xpbmUgKG11bHRpbGluZSBpbmplY3Rpb24pXG4gIC9cXHIvLCAgICAgICAgICAgICAvLyBDYXJyaWFnZSByZXR1cm5cbiAgL1xceDAwLywgICAgICAgICAgIC8vIE51bGwgYnl0ZVxuXTtcblxuLyoqXG4gKiBGaWxlIHBhdGhzIHRoYXQgc2hvdWxkIGFsd2F5cyBiZSBibG9ja2VkIChzZW5zaXRpdmUgc3lzdGVtIGZpbGVzKVxuICovXG5jb25zdCBCTE9DS0VEX1BBVEhTID0gW1xuICBcIi9ldGMvcGFzc3dkXCIsXG4gIFwiL2V0Yy9zaGFkb3dcIixcbiAgXCIvZXRjL2hvc3RzXCIsXG4gIFwiLy5lbnZcIixcbiAgXCIvLmF3cy9jcmVkZW50aWFsc1wiLFxuICBcIi8uc3NoL2lkX3JzYVwiLFxuICBcIi9wcm9jL3NlbGYvZW52aXJvblwiLFxuICBcIkM6XFxcXFdpbmRvd3NcXFxcU3lzdGVtMzJcIixcbiAgXCJDOlxcXFxVc2Vyc1xcXFxcIixcbl07XG5cbi8qKlxuICogU2hlbGwgbWV0YWNoYXJhY3RlcnMgdGhhdCBuZWVkIGVzY2FwaW5nXG4gKiBUaGVzZSBjaGFyYWN0ZXJzIGhhdmUgc3BlY2lhbCBtZWFuaW5nIGluIHNoZWxscyBhbmQgbXVzdCBiZSBlc2NhcGVkXG4gKi9cbmNvbnN0IFNIRUxMX01FVEFDSEFSQUNURVJTID0gL1s7JnxgJCgpXFxcXDw+XFxuXFxyXFx4MDBcIiddL2c7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBhdGggVmFsaWRhdGlvbiBGdW5jdGlvbnNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBEZXRlY3RzIHBvdGVudGlhbCBwYXRoIHRyYXZlcnNhbCBhdHRlbXB0c1xuICpcbiAqIEBwYXJhbSBmaWxlUGF0aCAtIFRoZSBwYXRoIHRvIGNoZWNrXG4gKiBAcmV0dXJucyBUcnVlIGlmIHBhdGggdHJhdmVyc2FsIGlzIGRldGVjdGVkXG4gKlxuICogQGV4YW1wbGVcbiAqIGlzUGF0aFRyYXZlcnNhbChcIi4uL2V0Yy9wYXNzd2RcIikgLy8gdHJ1ZVxuICogaXNQYXRoVHJhdmVyc2FsKFwidXBsb2Fkcy9maWxlLm1wM1wiKSAvLyBmYWxzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQYXRoVHJhdmVyc2FsKGZpbGVQYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgaWYgKCFmaWxlUGF0aCkgcmV0dXJuIGZhbHNlO1xuXG4gIC8vIENoZWNrIGZvciAuLiBpbiB0aGUgcGF0aFxuICBpZiAoZmlsZVBhdGguaW5jbHVkZXMoXCIuLlwiKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gQ2hlY2sgZm9yIGRhbmdlcm91cyBwYXR0ZXJuc1xuICByZXR1cm4gREFOR0VST1VTX1BBVEhfUEFUVEVSTlMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChmaWxlUGF0aCkpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIHBhdGggYXR0ZW1wdHMgdG8gYWNjZXNzIHNlbnNpdGl2ZSBzeXN0ZW0gZmlsZXNcbiAqXG4gKiBAcGFyYW0gZmlsZVBhdGggLSBUaGUgcGF0aCB0byBjaGVja1xuICogQHJldHVybnMgVHJ1ZSBpZiBwYXRoIGFjY2Vzc2VzIHNlbnNpdGl2ZSBmaWxlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTZW5zaXRpdmVTeXN0ZW1QYXRoKGZpbGVQYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgaWYgKCFmaWxlUGF0aCkgcmV0dXJuIGZhbHNlO1xuXG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBwYXRoLm5vcm1hbGl6ZShmaWxlUGF0aCkudG9Mb3dlckNhc2UoKTtcblxuICByZXR1cm4gQkxPQ0tFRF9QQVRIUy5zb21lKGJsb2NrZWQgPT4ge1xuICAgIGNvbnN0IGJsb2NrZWROb3JtYWxpemVkID0gcGF0aC5ub3JtYWxpemUoYmxvY2tlZCkudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gbm9ybWFsaXplZCA9PT0gYmxvY2tlZE5vcm1hbGl6ZWQgfHwgbm9ybWFsaXplZC5zdGFydHNXaXRoKGJsb2NrZWROb3JtYWxpemVkKTtcbiAgfSk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIGFuZCBub3JtYWxpemVzIGEgZmlsZSBwYXRoIHdpdGggY29tcHJlaGVuc2l2ZSBzZWN1cml0eSBjaGVja3NcbiAqXG4gKiBAcGFyYW0gZmlsZVBhdGggLSBUaGUgZmlsZSBwYXRoIHRvIHZhbGlkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFZhbGlkYXRpb24gb3B0aW9uc1xuICogQHBhcmFtIG9wdGlvbnMubXVzdEV4aXN0IC0gSWYgdHJ1ZSwgcGF0aCBtdXN0IGV4aXN0IG9uIGZpbGVzeXN0ZW1cbiAqIEBwYXJhbSBvcHRpb25zLmFsbG93QWJzb2x1dGUgLSBJZiB0cnVlLCBhbGxvdyBhYnNvbHV0ZSBwYXRoc1xuICogQHBhcmFtIG9wdGlvbnMuZXh0ZW5zaW9ucyAtIEFsbG93ZWQgZmlsZSBleHRlbnNpb25zIChlLmcuLCBbXCIubXAzXCIsIFwiLndhdlwiXSlcbiAqIEBwYXJhbSBvcHRpb25zLmJhc2VEaXIgLSBCYXNlIGRpcmVjdG9yeSB0byByZXNvbHZlIHJlbGF0aXZlIHBhdGhzIGFnYWluc3RcbiAqIEBwYXJhbSBvcHRpb25zLm11c3RCZUZpbGUgLSBJZiB0cnVlLCBwYXRoIG11c3QgYmUgYSBmaWxlIChub3QgZGlyZWN0b3J5KVxuICogQHBhcmFtIG9wdGlvbnMubXVzdEJlRGlyZWN0b3J5IC0gSWYgdHJ1ZSwgcGF0aCBtdXN0IGJlIGEgZGlyZWN0b3J5XG4gKlxuICogQHJldHVybnMgVmFsaWRhdGlvbiByZXN1bHQgd2l0aCBzYW5pdGl6ZWQgcGF0aCBpZiB2YWxpZFxuICpcbiAqIEBleGFtcGxlXG4gKiB2YWxpZGF0ZUZpbGVQYXRoKFwidXBsb2Fkcy9hdWRpby5tcDNcIiwge1xuICogICBtdXN0RXhpc3Q6IHRydWUsXG4gKiAgIGV4dGVuc2lvbnM6IFtcIi5tcDNcIiwgXCIud2F2XCJdXG4gKiB9KVxuICpcbiAqIEBzZWN1cml0eSBUaGlzIGZ1bmN0aW9uIGlzIGNyaXRpY2FsIGZvciBwcmV2ZW50aW5nIHBhdGggdHJhdmVyc2FsIGF0dGFja3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRmlsZVBhdGgoXG4gIGZpbGVQYXRoOiBzdHJpbmcsXG4gIG9wdGlvbnM/OiB7XG4gICAgbXVzdEV4aXN0PzogYm9vbGVhbjtcbiAgICBhbGxvd0Fic29sdXRlPzogYm9vbGVhbjtcbiAgICBleHRlbnNpb25zPzogc3RyaW5nW107XG4gICAgYmFzZURpcj86IHN0cmluZztcbiAgICBtdXN0QmVGaWxlPzogYm9vbGVhbjtcbiAgICBtdXN0QmVEaXJlY3Rvcnk/OiBib29sZWFuO1xuICB9XG4pOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgLy8gTm9ybWFsaXplIG9wdGlvbnNcbiAgY29uc3Qgb3B0cyA9IHtcbiAgICBtdXN0RXhpc3Q6IG9wdGlvbnM/Lm11c3RFeGlzdCA/PyBmYWxzZSxcbiAgICBhbGxvd0Fic29sdXRlOiBvcHRpb25zPy5hbGxvd0Fic29sdXRlID8/IGZhbHNlLFxuICAgIGV4dGVuc2lvbnM6IG9wdGlvbnM/LmV4dGVuc2lvbnMgPz8gW10sXG4gICAgYmFzZURpcjogb3B0aW9ucz8uYmFzZURpciA/PyBwcm9jZXNzLmN3ZCgpLFxuICAgIG11c3RCZUZpbGU6IG9wdGlvbnM/Lm11c3RCZUZpbGUgPz8gZmFsc2UsXG4gICAgbXVzdEJlRGlyZWN0b3J5OiBvcHRpb25zPy5tdXN0QmVEaXJlY3RvcnkgPz8gZmFsc2UsXG4gIH07XG5cbiAgLy8gQmFzaWMgdmFsaWRhdGlvblxuICBpZiAoIWZpbGVQYXRoIHx8IHR5cGVvZiBmaWxlUGF0aCAhPT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiB7XG4gICAgICB2YWxpZDogZmFsc2UsXG4gICAgICBlcnJvcjogXCJGaWxlIHBhdGggbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmdcIixcbiAgICAgIGhpbnQ6IFwiUHJvdmlkZSBhIHZhbGlkIGZpbGUgcGF0aFwiXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIGxlbmd0aCBsaW1pdHNcbiAgaWYgKGZpbGVQYXRoLmxlbmd0aCA+IDQwOTYpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6IFwiRmlsZSBwYXRoIGV4Y2VlZHMgbWF4aW11bSBsZW5ndGhcIixcbiAgICAgIGhpbnQ6IFwiUGF0aCBtdXN0IGJlIGxlc3MgdGhhbiA0MDk2IGNoYXJhY3RlcnNcIlxuICAgIH07XG4gIH1cblxuICAvLyBDaGVjayBmb3IgcGF0aCB0cmF2ZXJzYWwgYXR0ZW1wdHNcbiAgaWYgKGlzUGF0aFRyYXZlcnNhbChmaWxlUGF0aCkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6IFwiUGF0aCB0cmF2ZXJzYWwgZGV0ZWN0ZWRcIixcbiAgICAgIGhpbnQ6IFwiUGF0aCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgb3IgcGF0dGVybnMgKC4uLywgfi8sIGV0Yy4pXCJcbiAgICB9O1xuICB9XG5cbiAgLy8gQ2hlY2sgZm9yIHNlbnNpdGl2ZSBzeXN0ZW0gcGF0aHNcbiAgaWYgKGlzU2Vuc2l0aXZlU3lzdGVtUGF0aChmaWxlUGF0aCkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6IFwiQWNjZXNzIHRvIHNlbnNpdGl2ZSBzeXN0ZW0gZmlsZXMgaXMgYmxvY2tlZFwiLFxuICAgICAgaGludDogXCJDYW5ub3QgYWNjZXNzIHN5c3RlbSBjb25maWd1cmF0aW9uIG9yIGNyZWRlbnRpYWwgZmlsZXNcIlxuICAgIH07XG4gIH1cblxuICAvLyBOb3JtYWxpemUgYW5kIHJlc29sdmUgdGhlIHBhdGhcbiAgbGV0IG5vcm1hbGl6ZWRQYXRoOiBzdHJpbmc7XG4gIHRyeSB7XG4gICAgaWYgKHBhdGguaXNBYnNvbHV0ZShmaWxlUGF0aCkpIHtcbiAgICAgIGlmICghb3B0cy5hbGxvd0Fic29sdXRlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBcIkFic29sdXRlIHBhdGhzIGFyZSBub3QgYWxsb3dlZFwiLFxuICAgICAgICAgIGhpbnQ6IFwiVXNlIHJlbGF0aXZlIHBhdGhzIG9ubHlcIlxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgbm9ybWFsaXplZFBhdGggPSBwYXRoLm5vcm1hbGl6ZShmaWxlUGF0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vcm1hbGl6ZWRQYXRoID0gcGF0aC5yZXNvbHZlKG9wdHMuYmFzZURpciwgZmlsZVBhdGgpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6IFwiRmFpbGVkIHRvIG5vcm1hbGl6ZSBwYXRoXCIsXG4gICAgICBoaW50OiBcIlBhdGggY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzXCJcbiAgICB9O1xuICB9XG5cbiAgLy8gRW5zdXJlIG5vcm1hbGl6ZWQgcGF0aCBpcyBzdGlsbCB3aXRoaW4gYmFzZSBkaXJlY3RvcnkgKHByZXZlbnQgdHJhdmVyc2FsIHZpYSBub3JtYWxpemF0aW9uKVxuICBpZiAoIW9wdHMuYWxsb3dBYnNvbHV0ZSkge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRCYXNlID0gcGF0aC5yZXNvbHZlKG9wdHMuYmFzZURpcik7XG4gICAgY29uc3QgcmVsYXRpdmUgPSBwYXRoLnJlbGF0aXZlKG5vcm1hbGl6ZWRCYXNlLCBub3JtYWxpemVkUGF0aCk7XG4gICAgaWYgKHJlbGF0aXZlLnN0YXJ0c1dpdGgoXCIuLlwiKSB8fCBwYXRoLmlzQWJzb2x1dGUocmVsYXRpdmUpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgIGVycm9yOiBcIlBhdGggZXNjYXBlcyBiYXNlIGRpcmVjdG9yeVwiLFxuICAgICAgICBoaW50OiBcIlBhdGggbXVzdCByZW1haW4gd2l0aGluIHRoZSBwcm9qZWN0IGRpcmVjdG9yeVwiXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIENoZWNrIGlmIHBhdGggZXhpc3RzIChpZiByZXF1aXJlZClcbiAgaWYgKG9wdHMubXVzdEV4aXN0KSB7XG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKG5vcm1hbGl6ZWRQYXRoKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICBlcnJvcjogYEZpbGUgbm90IGZvdW5kOiAke2ZpbGVQYXRofWAsXG4gICAgICAgIGhpbnQ6IFwiRW5zdXJlIHRoZSBmaWxlIGV4aXN0cyBhdCB0aGUgc3BlY2lmaWVkIHBhdGhcIlxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBpdCdzIGEgZmlsZSBvciBkaXJlY3RvcnlcbiAgICBjb25zdCBzdGF0cyA9IGZzLnN0YXRTeW5jKG5vcm1hbGl6ZWRQYXRoKTtcblxuICAgIGlmIChvcHRzLm11c3RCZUZpbGUgJiYgIXN0YXRzLmlzRmlsZSgpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgIGVycm9yOiBcIlBhdGggbXVzdCBiZSBhIGZpbGUsIG5vdCBhIGRpcmVjdG9yeVwiLFxuICAgICAgICBoaW50OiBcIlNwZWNpZnkgYSBmaWxlIHBhdGgsIG5vdCBhIGRpcmVjdG9yeVwiXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChvcHRzLm11c3RCZURpcmVjdG9yeSAmJiAhc3RhdHMuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICBlcnJvcjogXCJQYXRoIG11c3QgYmUgYSBkaXJlY3RvcnksIG5vdCBhIGZpbGVcIixcbiAgICAgICAgaGludDogXCJTcGVjaWZ5IGEgZGlyZWN0b3J5IHBhdGgsIG5vdCBhIGZpbGVcIlxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBWYWxpZGF0ZSBmaWxlIGV4dGVuc2lvblxuICBpZiAob3B0cy5leHRlbnNpb25zLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBleHQgPSBwYXRoLmV4dG5hbWUobm9ybWFsaXplZFBhdGgpLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgYWxsb3dlZEV4dGVuc2lvbnMgPSBvcHRzLmV4dGVuc2lvbnMubWFwKGUgPT4gZS50b0xvd2VyQ2FzZSgpKTtcblxuICAgIGlmICghYWxsb3dlZEV4dGVuc2lvbnMuaW5jbHVkZXMoZXh0KSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICBlcnJvcjogYEludmFsaWQgZmlsZSBleHRlbnNpb246ICR7ZXh0fWAsXG4gICAgICAgIGhpbnQ6IGBBbGxvd2VkIGV4dGVuc2lvbnM6ICR7b3B0cy5leHRlbnNpb25zLmpvaW4oXCIsIFwiKX1gXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEFsbCBjaGVja3MgcGFzc2VkXG4gIHJldHVybiB7XG4gICAgdmFsaWQ6IHRydWUsXG4gICAgc2FuaXRpemVkUGF0aDogbm9ybWFsaXplZFBhdGhcbiAgfTtcbn1cblxuLyoqXG4gKiBOb3JtYWxpemVzIGFuZCB2YWxpZGF0ZXMgYSBwYXRoIGFnYWluc3QgYSBiYXNlIGRpcmVjdG9yeVxuICogRW5zdXJlcyB0aGUgcmVzb2x2ZWQgcGF0aCByZW1haW5zIHdpdGhpbiB0aGUgYmFzZSBkaXJlY3RvcnlcbiAqXG4gKiBAcGFyYW0gZmlsZVBhdGggLSBUaGUgcGF0aCB0byB2YWxpZGF0ZVxuICogQHBhcmFtIGJhc2VEaXIgLSBUaGUgYmFzZSBkaXJlY3RvcnkgdG8gcmVzb2x2ZSBhZ2FpbnN0XG4gKiBAcmV0dXJucyBOb3JtYWxpemVkIGFic29sdXRlIHBhdGhcbiAqIEB0aHJvd3MgUGF0aFZhbGlkYXRpb25FcnJvciBpZiB2YWxpZGF0aW9uIGZhaWxzXG4gKlxuICogQGV4YW1wbGVcbiAqIG5vcm1hbGl6ZUFuZFZhbGlkYXRlUGF0aChcInVwbG9hZHMvZmlsZS5tcDNcIiwgXCIvYXBwXCIpXG4gKiAvLyBSZXR1cm5zOiBcIi9hcHAvdXBsb2Fkcy9maWxlLm1wM1wiXG4gKlxuICogbm9ybWFsaXplQW5kVmFsaWRhdGVQYXRoKFwiLi4vZXRjL3Bhc3N3ZFwiLCBcIi9hcHBcIilcbiAqIC8vIFRocm93czogUGF0aFZhbGlkYXRpb25FcnJvclxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplQW5kVmFsaWRhdGVQYXRoKGZpbGVQYXRoOiBzdHJpbmcsIGJhc2VEaXI6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlRmlsZVBhdGgoZmlsZVBhdGgsIHtcbiAgICBiYXNlRGlyLFxuICAgIGFsbG93QWJzb2x1dGU6IGZhbHNlXG4gIH0pO1xuXG4gIGlmICghcmVzdWx0LnZhbGlkKSB7XG4gICAgdGhyb3cgbmV3IFBhdGhWYWxpZGF0aW9uRXJyb3IoXG4gICAgICByZXN1bHQuZXJyb3IgfHwgXCJQYXRoIHZhbGlkYXRpb24gZmFpbGVkXCIsXG4gICAgICBmaWxlUGF0aCxcbiAgICAgIHJlc3VsdC5oaW50XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQuc2FuaXRpemVkUGF0aCE7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYSBkaXJlY3RvcnkgcGF0aCBleGlzdHMgb3IgY2FuIGJlIGNyZWF0ZWRcbiAqIElmIG11c3RFeGlzdCBpcyBmYWxzZSwgdmFsaWRhdGVzIHRoYXQgcGFyZW50IGRpcmVjdG9yeSBleGlzdHNcbiAqXG4gKiBAcGFyYW0gZGlyUGF0aCAtIERpcmVjdG9yeSBwYXRoIHRvIHZhbGlkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFZhbGlkYXRpb24gb3B0aW9uc1xuICogQHJldHVybnMgVmFsaWRhdGlvbiByZXN1bHRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRGlyZWN0b3J5UGF0aChcbiAgZGlyUGF0aDogc3RyaW5nLFxuICBvcHRpb25zPzoge1xuICAgIG11c3RFeGlzdD86IGJvb2xlYW47XG4gICAgYWxsb3dDcmVhdGU/OiBib29sZWFuO1xuICB9XG4pOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgY29uc3Qgb3B0cyA9IHtcbiAgICBtdXN0RXhpc3Q6IG9wdGlvbnM/Lm11c3RFeGlzdCA/PyBmYWxzZSxcbiAgICBhbGxvd0NyZWF0ZTogb3B0aW9ucz8uYWxsb3dDcmVhdGUgPz8gdHJ1ZSxcbiAgfTtcblxuICAvLyBGaXJzdCB2YWxpZGF0ZSBhcyBhIGdlbmVyYWwgcGF0aFxuICBjb25zdCBiYXNlVmFsaWRhdGlvbiA9IHZhbGlkYXRlRmlsZVBhdGgoZGlyUGF0aCwge1xuICAgIG11c3RFeGlzdDogb3B0cy5tdXN0RXhpc3QsXG4gICAgbXVzdEJlRGlyZWN0b3J5OiBvcHRzLm11c3RFeGlzdFxuICB9KTtcblxuICBpZiAoIWJhc2VWYWxpZGF0aW9uLnZhbGlkKSB7XG4gICAgcmV0dXJuIGJhc2VWYWxpZGF0aW9uO1xuICB9XG5cbiAgLy8gSWYgZGlyZWN0b3J5IGRvZXNuJ3QgbmVlZCB0byBleGlzdCwgY2hlY2sgcGFyZW50IGRpcmVjdG9yeVxuICBpZiAoIW9wdHMubXVzdEV4aXN0ICYmIG9wdHMuYWxsb3dDcmVhdGUpIHtcbiAgICBjb25zdCBwYXJlbnREaXIgPSBwYXRoLmRpcm5hbWUoYmFzZVZhbGlkYXRpb24uc2FuaXRpemVkUGF0aCEpO1xuXG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKHBhcmVudERpcikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IFwiUGFyZW50IGRpcmVjdG9yeSBkb2VzIG5vdCBleGlzdFwiLFxuICAgICAgICBoaW50OiBgQ3JlYXRlIHBhcmVudCBkaXJlY3RvcnkgZmlyc3Q6ICR7cGFyZW50RGlyfWBcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgcGFyZW50U3RhdHMgPSBmcy5zdGF0U3luYyhwYXJlbnREaXIpO1xuICAgIGlmICghcGFyZW50U3RhdHMuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICBlcnJvcjogXCJQYXJlbnQgcGF0aCBpcyBub3QgYSBkaXJlY3RvcnlcIixcbiAgICAgICAgaGludDogXCJQYXJlbnQgbXVzdCBiZSBhIGRpcmVjdG9yeVwiXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBiYXNlVmFsaWRhdGlvbjtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU2hlbGwgQ29tbWFuZCBTYW5pdGl6YXRpb25cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBTYW5pdGl6ZXMgYSBzdHJpbmcgZm9yIHNhZmUgdXNlIGluIHNoZWxsIGNvbW1hbmRzXG4gKiBFc2NhcGVzIHNoZWxsIG1ldGFjaGFyYWN0ZXJzIGFuZCBkYW5nZXJvdXMgcGF0dGVybnNcbiAqXG4gKiBAcGFyYW0gYXJnIC0gVGhlIGFyZ3VtZW50IHRvIHNhbml0aXplXG4gKiBAcmV0dXJucyBTYW5pdGl6ZWQgYXJndW1lbnQgc2FmZSBmb3Igc2hlbGwgZXhlY3V0aW9uXG4gKlxuICogQHdhcm5pbmcgVGhpcyBmdW5jdGlvbiBzaG91bGQgYmUgdXNlZCB3aXRoIGNhdXRpb24uIFByZWZlciB1c2luZ1xuICogYXJndW1lbnQgYXJyYXlzIHdpdGggc3Bhd24oKSBvdmVyIHNoZWxsIHN0cmluZyBjb25jYXRlbmF0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBzYW5pdGl6ZUZvclNoZWxsQ29tbWFuZChcImZpbGUubXAzXCIpIC8vIFwiZmlsZS5tcDNcIlxuICogc2FuaXRpemVGb3JTaGVsbENvbW1hbmQoXCJmaWxlOyBybSAtcmYgL1wiKSAvLyBcImZpbGVcXFxcOyBybSAtcmYgL1wiXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZUZvclNoZWxsQ29tbWFuZChhcmc6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghYXJnIHx8IHR5cGVvZiBhcmcgIT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuXG4gIC8vIFJlbW92ZSBudWxsIGJ5dGVzXG4gIGxldCBzYW5pdGl6ZWQgPSBhcmcucmVwbGFjZSgvXFx4MDAvZywgXCJcIik7XG5cbiAgLy8gRXNjYXBlIHNoZWxsIG1ldGFjaGFyYWN0ZXJzXG4gIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKFNIRUxMX01FVEFDSEFSQUNURVJTLCAoY2hhcikgPT4ge1xuICAgIC8vIEZvciBiYWNrdGljaywgcXVvdGUsIGFuZCBkb2xsYXIgc2lnbiwgdXNlIGJhY2tzbGFzaCBlc2NhcGVcbiAgICBpZiAoY2hhciA9PT0gXCJgXCIgfHwgY2hhciA9PT0gXCIkXCIgfHwgY2hhciA9PT0gJ1wiJyB8fCBjaGFyID09PSBcIidcIikge1xuICAgICAgcmV0dXJuIFwiXFxcXFwiICsgY2hhcjtcbiAgICB9XG4gICAgLy8gRm9yIG90aGVyIGRhbmdlcm91cyBjaGFyYWN0ZXJzLCByZXBsYWNlIHdpdGggdW5kZXJzY29yZVxuICAgIHJldHVybiBcIl9cIjtcbiAgfSk7XG5cbiAgcmV0dXJuIHNhbml0aXplZDtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBhIHN0cmluZyBkb2VzIG5vdCBjb250YWluIHNoZWxsIGluamVjdGlvbiBwYXR0ZXJuc1xuICpcbiAqIEBwYXJhbSBpbnB1dCAtIFRoZSBpbnB1dCB0byB2YWxpZGF0ZVxuICogQHJldHVybnMgVmFsaWRhdGlvbiByZXN1bHRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlU2hlbGxTYWZlKGlucHV0OiBzdHJpbmcpOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgaWYgKCFpbnB1dCB8fCB0eXBlb2YgaW5wdXQgIT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6IFwiSW5wdXQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmdcIlxuICAgIH07XG4gIH1cblxuICAvLyBDaGVjayBmb3Igc2hlbGwgbWV0YWNoYXJhY3RlcnNcbiAgaWYgKFNIRUxMX01FVEFDSEFSQUNURVJTLnRlc3QoaW5wdXQpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgIGVycm9yOiBcIklucHV0IGNvbnRhaW5zIHNoZWxsIG1ldGFjaGFyYWN0ZXJzXCIsXG4gICAgICBoaW50OiBcIlJlbW92ZSBzcGVjaWFsIGNoYXJhY3RlcnMgbGlrZSA7LCAmLCB8LCAkLCBgLCBldGMuXCJcbiAgICB9O1xuICB9XG5cbiAgLy8gQ2hlY2sgZm9yIGNvbW1hbmQgc3Vic3RpdHV0aW9uIHBhdHRlcm5zXG4gIGlmIChpbnB1dC5pbmNsdWRlcyhcIiQoXCIpIHx8IGlucHV0LmluY2x1ZGVzKFwiYFwiKSkge1xuICAgIHJldHVybiB7XG4gICAgICB2YWxpZDogZmFsc2UsXG4gICAgICBlcnJvcjogXCJDb21tYW5kIHN1YnN0aXR1dGlvbiBkZXRlY3RlZFwiLFxuICAgICAgaGludDogXCJSZW1vdmUgJCgpIG9yIGJhY2t0aWNrIGNvbW1hbmQgc3Vic3RpdHV0aW9uXCJcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB2YWxpZDogdHJ1ZSxcbiAgICBzYW5pdGl6ZWRQYXRoOiBpbnB1dFxuICB9O1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyBvdXRwdXQgcGF0aCBmb3Igd3JpdGluZyBmaWxlc1xuICogRW5zdXJlcyBwYXJlbnQgZGlyZWN0b3J5IGV4aXN0cyBhbmQgcGF0aCBpcyBzYWZlXG4gKlxuICogQHBhcmFtIG91dHB1dFBhdGggLSBUaGUgb3V0cHV0IGZpbGUgcGF0aFxuICogQHBhcmFtIG9wdGlvbnMgLSBWYWxpZGF0aW9uIG9wdGlvbnNcbiAqIEByZXR1cm5zIFZhbGlkYXRpb24gcmVzdWx0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZU91dHB1dFBhdGgoXG4gIG91dHB1dFBhdGg6IHN0cmluZyxcbiAgb3B0aW9ucz86IHtcbiAgICBleHRlbnNpb25zPzogc3RyaW5nW107XG4gICAgYWxsb3dPdmVyd3JpdGU/OiBib29sZWFuO1xuICB9XG4pOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgY29uc3Qgb3B0cyA9IHtcbiAgICBleHRlbnNpb25zOiBvcHRpb25zPy5leHRlbnNpb25zID8/IFtdLFxuICAgIGFsbG93T3ZlcndyaXRlOiBvcHRpb25zPy5hbGxvd092ZXJ3cml0ZSA/PyB0cnVlLFxuICB9O1xuXG4gIC8vIFZhbGlkYXRlIGJhc2ljIHBhdGggc2VjdXJpdHlcbiAgY29uc3QgcGF0aFZhbGlkYXRpb24gPSB2YWxpZGF0ZUZpbGVQYXRoKG91dHB1dFBhdGgsIHtcbiAgICBtdXN0RXhpc3Q6IGZhbHNlLFxuICAgIGV4dGVuc2lvbnM6IG9wdHMuZXh0ZW5zaW9ucyxcbiAgICBtdXN0QmVGaWxlOiBmYWxzZSxcbiAgICBhbGxvd0Fic29sdXRlOiB0cnVlXG4gIH0pO1xuXG4gIGlmICghcGF0aFZhbGlkYXRpb24udmFsaWQpIHtcbiAgICByZXR1cm4gcGF0aFZhbGlkYXRpb247XG4gIH1cblxuICBjb25zdCBzYW5pdGl6ZWRQYXRoID0gcGF0aFZhbGlkYXRpb24uc2FuaXRpemVkUGF0aCE7XG5cbiAgLy8gQ2hlY2sgaWYgZmlsZSBhbHJlYWR5IGV4aXN0c1xuICBpZiAoIW9wdHMuYWxsb3dPdmVyd3JpdGUgJiYgZnMuZXhpc3RzU3luYyhzYW5pdGl6ZWRQYXRoKSkge1xuICAgIHJldHVybiB7XG4gICAgICB2YWxpZDogZmFsc2UsXG4gICAgICBlcnJvcjogXCJPdXRwdXQgZmlsZSBhbHJlYWR5IGV4aXN0c1wiLFxuICAgICAgaGludDogXCJDaG9vc2UgYSBkaWZmZXJlbnQgb3V0cHV0IHBhdGggb3IgZW5hYmxlIG92ZXJ3cml0ZVwiXG4gICAgfTtcbiAgfVxuXG4gIC8vIFZhbGlkYXRlIHBhcmVudCBkaXJlY3RvcnlcbiAgY29uc3QgcGFyZW50RGlyID0gcGF0aC5kaXJuYW1lKHNhbml0aXplZFBhdGgpO1xuXG4gIGlmICghZnMuZXhpc3RzU3luYyhwYXJlbnREaXIpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgIGVycm9yOiBcIk91dHB1dCBkaXJlY3RvcnkgZG9lcyBub3QgZXhpc3RcIixcbiAgICAgIGhpbnQ6IGBDcmVhdGUgZGlyZWN0b3J5IGZpcnN0OiAke3BhcmVudERpcn1gXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IHBhcmVudFN0YXRzID0gZnMuc3RhdFN5bmMocGFyZW50RGlyKTtcbiAgaWYgKCFwYXJlbnRTdGF0cy5pc0RpcmVjdG9yeSgpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgIGVycm9yOiBcIlBhcmVudCBwYXRoIGlzIG5vdCBhIGRpcmVjdG9yeVwiLFxuICAgICAgaGludDogXCJPdXRwdXQgcGF0aCBwYXJlbnQgbXVzdCBiZSBhIGRpcmVjdG9yeVwiXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIHdyaXRlIHBlcm1pc3Npb25zIGJ5IHRlc3RpbmcgaWYgZGlyZWN0b3J5IGlzIHdyaXRhYmxlXG4gIHRyeSB7XG4gICAgZnMuYWNjZXNzU3luYyhwYXJlbnREaXIsIGZzLmNvbnN0YW50cy5XX09LKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6IFwiTm8gd3JpdGUgcGVybWlzc2lvbiBmb3Igb3V0cHV0IGRpcmVjdG9yeVwiLFxuICAgICAgaGludDogXCJFbnN1cmUgeW91IGhhdmUgd3JpdGUgcGVybWlzc2lvbnMgZm9yIHRoZSBvdXRwdXQgZGlyZWN0b3J5XCJcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB2YWxpZDogdHJ1ZSxcbiAgICBzYW5pdGl6ZWRQYXRoXG4gIH07XG59XG4iXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwiUGF0aFZhbGlkYXRpb25FcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwiYXR0ZW1wdGVkUGF0aCIsImhpbnQiLCJuYW1lIiwidmFsaWRhdGlvbklzc3VlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJEQU5HRVJPVVNfUEFUSF9QQVRURVJOUyIsIkJMT0NLRURfUEFUSFMiLCJTSEVMTF9NRVRBQ0hBUkFDVEVSUyIsImlzUGF0aFRyYXZlcnNhbCIsImZpbGVQYXRoIiwiaW5jbHVkZXMiLCJzb21lIiwicGF0dGVybiIsInRlc3QiLCJpc1NlbnNpdGl2ZVN5c3RlbVBhdGgiLCJub3JtYWxpemVkIiwibm9ybWFsaXplIiwidG9Mb3dlckNhc2UiLCJibG9ja2VkIiwiYmxvY2tlZE5vcm1hbGl6ZWQiLCJzdGFydHNXaXRoIiwidmFsaWRhdGVGaWxlUGF0aCIsIm9wdGlvbnMiLCJvcHRzIiwibXVzdEV4aXN0IiwiYWxsb3dBYnNvbHV0ZSIsImV4dGVuc2lvbnMiLCJiYXNlRGlyIiwicHJvY2VzcyIsImN3ZCIsIm11c3RCZUZpbGUiLCJtdXN0QmVEaXJlY3RvcnkiLCJ2YWxpZCIsImVycm9yIiwibGVuZ3RoIiwibm9ybWFsaXplZFBhdGgiLCJpc0Fic29sdXRlIiwicmVzb2x2ZSIsIm5vcm1hbGl6ZWRCYXNlIiwicmVsYXRpdmUiLCJleGlzdHNTeW5jIiwic3RhdHMiLCJzdGF0U3luYyIsImlzRmlsZSIsImlzRGlyZWN0b3J5IiwiZXh0IiwiZXh0bmFtZSIsImFsbG93ZWRFeHRlbnNpb25zIiwibWFwIiwiZSIsImpvaW4iLCJzYW5pdGl6ZWRQYXRoIiwibm9ybWFsaXplQW5kVmFsaWRhdGVQYXRoIiwicmVzdWx0IiwidmFsaWRhdGVEaXJlY3RvcnlQYXRoIiwiZGlyUGF0aCIsImFsbG93Q3JlYXRlIiwiYmFzZVZhbGlkYXRpb24iLCJwYXJlbnREaXIiLCJkaXJuYW1lIiwicGFyZW50U3RhdHMiLCJzYW5pdGl6ZUZvclNoZWxsQ29tbWFuZCIsImFyZyIsInNhbml0aXplZCIsInJlcGxhY2UiLCJjaGFyIiwidmFsaWRhdGVTaGVsbFNhZmUiLCJpbnB1dCIsInZhbGlkYXRlT3V0cHV0UGF0aCIsIm91dHB1dFBhdGgiLCJhbGxvd092ZXJ3cml0ZSIsInBhdGhWYWxpZGF0aW9uIiwiYWNjZXNzU3luYyIsImNvbnN0YW50cyIsIldfT0siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../src/utils/validation.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@anthropic-ai","vendor-chunks/docxtemplater","vendor-chunks/pizzip","vendor-chunks/pino","vendor-chunks/@xmldom","vendor-chunks/zod","vendor-chunks/pino-std-serializers","vendor-chunks/dotenv","vendor-chunks/mime","vendor-chunks/thread-stream","vendor-chunks/sonic-boom","vendor-chunks/slow-redact","vendor-chunks/safe-stable-stringify","vendor-chunks/quick-format-unescaped","vendor-chunks/on-exit-leak-free","vendor-chunks/atomic-sleep"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Frun%2Froute&page=%2Fapi%2Frun%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frun%2Froute.ts&appDir=%2FUsers%2Fbc%2FDesktop%2Fpip-agent-autonomous%2Fapps%2Fui%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbc%2FDesktop%2Fpip-agent-autonomous%2Fapps%2Fui&isDev=true&tsconfigPath=.%2Ftsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();